import{r as g,j as e,R as Ae}from"./react-vendor-6uwpMgJP.js";import{m as ke}from"./sessionFetch-2gWlZXPX.js";import{I as Te}from"./InsufficientTokensModal-CWgAibhb.js";import{T as Pe}from"./TrialActivationModal-D5G7vt1Y.js";import{C as ee,B as M,a as c,T as s,D as q,I as d,e as N,d as E,L as de,b as m,f as o,h as Me,k as Ie,M as R}from"./polaris-B96_d87K.js";import{g as me}from"./usePlanHierarchy-BjUEvxZF.js";import"./app-bridge-ugs9K9zh.js";import"./vendor-BC2YhXnC.js";import"./index-BPaHT-Aw.js";function Ce({testResults:L={},aiTestResults:h={},stats:te={}}){const se={productsJson:"Products JSON Feed",basicSitemap:"Basic Sitemap",robotsTxt:"robots.txt.liquid",schemaData:"Schema Data (theme.liquid)",welcomePage:"AI Welcome Page",collectionsJson:"Collections JSON Feed",storeMetadata:"Store Metadata",aiSitemap:"AI-Enhanced Sitemap",advancedSchemaApi:"Advanced Schema Data"},k=T=>{const a=Math.max(0,Math.min(100,T))/100,x=239,v=68,l=68,j=16,I=185,P=129,Q=Math.round(x+(j-x)*a),W=Math.round(v+(I-v)*a),D=Math.round(l+(P-l)*a);return`rgb(${Q}, ${W}, ${D})`},z=T=>{const a=T*3.6,x=Math.max(0,Math.min(100,T))/100;let v=[];if(x<=.2)v=["#ef4444 0deg",`#ef4444 ${a}deg`,`#e5e7eb ${a}deg`,"#e5e7eb 360deg"];else if(x<=.4)v=["#ef4444 0deg",`#f97316 ${a*.5}deg`,`#f97316 ${a}deg`,`#e5e7eb ${a}deg`,"#e5e7eb 360deg"];else if(x<=.6){const l=a*.33,j=a*.66;v=["#ef4444 0deg",`#f97316 ${l}deg`,`#f59e0b ${j}deg`,`#f59e0b ${a}deg`,`#e5e7eb ${a}deg`,"#e5e7eb 360deg"]}else if(x<=.8){const l=a*.2,j=a*.4,I=60*3.6,P=Math.max(I,a*.7);v=["#ef4444 0deg",`#f97316 ${l}deg`,`#f59e0b ${j}deg`,`#22c55e ${P}deg`,`#22c55e ${a}deg`,`#e5e7eb ${a}deg`,"#e5e7eb 360deg"]}else{const l=a*.15,j=a*.3,I=60*3.6,P=Math.max(I,a*.5);v=["#ef4444 0deg",`#f97316 ${l}deg`,`#f59e0b ${j}deg`,`#10b981 ${P}deg`,`#10b981 ${a}deg`,`#e5e7eb ${a}deg`,"#e5e7eb 360deg"]}return`conic-gradient(${v.join(", ")})`},p=g.useMemo(()=>((a,x,v)=>{var oe,C,B,O,K,ie,X;const l={endpointAvailability:0,aiValidationQuality:0,optimizationCoverage:0,structuredDataQuality:0,total:0},j={productsJson:5,basicSitemap:4,robotsTxt:2,schemaData:2,welcomePage:3,collectionsJson:4,storeMetadata:4,aiSitemap:3,advancedSchemaApi:3};let I=0,P=0;for(const[t,y]of Object.entries(a||{})){const w=j[t]||1;P+=w,y.status==="success"?I+=w:y.status==="warning"?I+=w*.7:y.status==="locked"&&(I+=w*.3)}l.endpointAvailability=P>0?Math.round(I/P*30):0;const Q={excellent:1,good:.75,fair:.5,poor:.25,unavailable:0,locked:.1};let W=0,D=0;for(const[t,y]of Object.entries(x||{})){if(t==="robotsTxt"||t==="schemaData")continue;const w=((oe=y.rating)==null?void 0:oe.toLowerCase())||"unavailable",$=Q[w]||0,U=j[t]||1;W+=$*U,D+=U}l.aiValidationQuality=D>0?Math.round(W/D*40):0;const V=v.totalProducts||0,Y=v.optimizedProducts||0,ne=v.totalCollections||0,H=v.optimizedCollections||0;let u=0;if(V>0){const t=Y/V;u+=t*12}if(ne>0){const t=H/ne;u+=t*8}else V>0&&(u+=8);l.optimizationCoverage=Math.round(u);let S=0;if(((C=a==null?void 0:a.schemaData)==null?void 0:C.status)==="success"&&(S+=3),((B=a==null?void 0:a.storeMetadata)==null?void 0:B.status)==="success"){S+=3;const t=(K=(O=x==null?void 0:x.storeMetadata)==null?void 0:O.rating)==null?void 0:K.toLowerCase();t==="excellent"?S+=4:t==="good"&&(S+=2)}else((ie=a==null?void 0:a.storeMetadata)==null?void 0:ie.status)==="locked"&&(S+=1);((X=a==null?void 0:a.advancedSchemaApi)==null?void 0:X.status)==="success"&&(S+=2),l.structuredDataQuality=Math.min(10,Math.round(S)),l.total=Math.min(100,l.endpointAvailability+l.aiValidationQuality+l.optimizationCoverage+l.structuredDataQuality);let F="E",J="#ef4444";l.total>=80?(F="A",J="#10b981"):l.total>=60?(F="B",J="#3b82f6"):l.total>=40?(F="C",J="#f59e0b"):l.total>=20&&(F="D",J="#f97316");const b=[];if(l.endpointAvailability<20){const t=Object.entries(a||{}).filter(([w,$])=>$.status==="locked").length,y=Object.entries(a||{}).filter(([w,$])=>$.status==="error"||$.status==="failed").length;t>0&&y===0?b.push("Several AI discovery endpoints are locked due to plan limitations. Upgrade your plan to unlock them."):t>0&&y>0?b.push("Some endpoints are missing or not working. Others are locked due to plan limitations. Fix endpoint issues and upgrade your plan to improve your score."):b.push("Several AI discovery endpoints are missing or not working. Fix endpoint issues to improve your score.")}if(l.aiValidationQuality<30){const t=Object.entries(x||{}).filter(([y,w])=>{var U;const $=(U=w.rating)==null?void 0:U.toLowerCase();return($==="poor"||$==="fair")&&y!=="robotsTxt"&&y!=="schemaData"}).map(([y])=>se[y]||y);t.length>0&&(b.push(`${t.length} endpoint(s) have low data quality ratings. Improve content quality to boost your score.`),b.push(`Review and improve: ${t.join(", ")}`))}return l.optimizationCoverage<15&&(b.push("Low optimization coverage. Optimize more products and collections to improve your score."),b.push("Go to Search Optimization for AI and optimize your products/collections")),l.structuredDataQuality<7&&b.push("Structured data could be improved. Add organization schema and enhance product schema."),{score:l.total,grade:F,gradeColor:J,breakdown:l,recommendations:b.length>0?b:["Your store is well-optimized for AI search engines!"]}})(L,h,te),[L,h,te]);return e.jsx(ee,{children:e.jsx(M,{padding:"400",children:e.jsxs(c,{gap:"300",children:[e.jsxs(c,{gap:"100",children:[e.jsx(s,{as:"h3",variant:"headingMd",children:"AIEO Score"}),e.jsx(s,{variant:"bodySm",tone:"subdued",children:"Overall AI Engine Optimization rating"})]}),e.jsx(q,{}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px"},children:[e.jsx(M,{style:{width:"138px",height:"138px",borderRadius:"50%",background:z(p.score),display:"flex",alignItems:"center",justifyContent:"center",position:"relative",flexShrink:0},children:e.jsx(M,{style:{width:"103.5px",height:"103.5px",borderRadius:"50%",background:"white",position:"absolute",zIndex:1}})}),e.jsxs(c,{gap:"100",children:[e.jsxs(s,{variant:"headingMd",fontWeight:"semibold",style:{color:k(p.score)},children:["AIEO Score = ",p.score]}),e.jsxs(s,{variant:"headingMd",fontWeight:"bold",style:{color:k(p.score)},children:["AIEO Rating = ",p.grade]})]})]}),e.jsxs(c,{gap:"200",children:[e.jsx(s,{variant:"headingSm",children:"Score Breakdown"}),e.jsxs(c,{gap:"100",children:[e.jsxs(d,{align:"space-between",children:[e.jsx(s,{variant:"bodyMd",children:"Endpoint Availability"}),e.jsxs(s,{variant:"bodyMd",fontWeight:"semibold",children:[p.breakdown.endpointAvailability,"/30"]})]}),e.jsx(N,{progress:Math.round(p.breakdown.endpointAvailability/30*100),size:"small",tone:"success"})]}),e.jsxs(c,{gap:"100",children:[e.jsxs(d,{align:"space-between",children:[e.jsx(s,{variant:"bodyMd",children:"AI Validation Quality"}),e.jsxs(s,{variant:"bodyMd",fontWeight:"semibold",children:[p.breakdown.aiValidationQuality,"/40"]})]}),e.jsx(N,{progress:Math.round(p.breakdown.aiValidationQuality/40*100),size:"small",tone:"success"})]}),e.jsxs(c,{gap:"100",children:[e.jsxs(d,{align:"space-between",children:[e.jsx(s,{variant:"bodyMd",children:"Optimization Coverage"}),e.jsxs(s,{variant:"bodyMd",fontWeight:"semibold",children:[p.breakdown.optimizationCoverage,"/20"]})]}),e.jsx(N,{progress:Math.round(p.breakdown.optimizationCoverage/20*100),size:"small",tone:"success"})]}),e.jsxs(c,{gap:"100",children:[e.jsxs(d,{align:"space-between",children:[e.jsx(s,{variant:"bodyMd",children:"Structured Data Quality"}),e.jsxs(s,{variant:"bodyMd",fontWeight:"semibold",children:[p.breakdown.structuredDataQuality,"/10"]})]}),e.jsx(N,{progress:Math.round(p.breakdown.structuredDataQuality/10*100),size:"small",tone:"success"})]})]})]}),p.recommendations&&p.recommendations.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(q,{}),e.jsxs(c,{gap:"200",children:[e.jsx(s,{variant:"headingSm",children:"Recommendations"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:p.recommendations.map((T,a)=>e.jsx(E,{tone:T.includes("Fix")||T.includes("Improve")||T.includes("low")?"critical":T.includes("Review")?"warning":"info",children:e.jsx(s,{variant:"bodyMd",children:T})},a))})]})]})]})})})}const $e=(L,h="")=>{try{return new URLSearchParams(window.location.search).get(L)||h}catch{return h}};function Ge({shop:L}){const h=L||$e("shop",""),te=i=>{const n=new URLSearchParams(window.location.search),r=n.toString()?`?${n.toString()}`:"";window.location.href=`${i}${r}`},[se,k]=g.useState(""),z=useMemo(()=>ke(),[]),[p,T]=g.useState(null),[a,x]=g.useState(""),[v,l]=g.useState(!1),[j,I]=g.useState(null),[P,Q]=g.useState(""),[W,D]=g.useState(!1),[V,Y]=g.useState(!1),[ne,H]=g.useState(!1),[u,S]=g.useState(null),[F,J]=g.useState(!1),[b,oe]=g.useState(null),[C,B]=g.useState({}),[O,K]=g.useState(!1),[ie,X]=g.useState(0),[t,y]=g.useState({}),[w,$]=g.useState(!1),[U,he]=g.useState(0),[re,ce]=g.useState(null),[ze,ge]=g.useState(null),[De,le]=g.useState(null),[xe,je]=g.useState({totalProducts:0,optimizedProducts:0,totalCollections:0,optimizedCollections:0}),[ue,pe]=g.useState(null);g.useEffect(()=>{h&&(Se(),Z(),ye(),be())},[h,z]);const be=()=>{try{const i=localStorage.getItem(`ai-test-results-${h}`);if(i){const n=JSON.parse(i);n.results&&n.timestamp&&(B(n.results),pe(new Date(n.timestamp)))}}catch(i){console.error("[AI-TESTING] Error loading saved test results:",i)}},fe=i=>{try{const n={results:i,timestamp:new Date().toISOString()};localStorage.setItem(`ai-test-results-${h}`,JSON.stringify(n)),pe(new Date)}catch(n){console.error("[AI-TESTING] Error saving test results:",n)}};g.useEffect(()=>{const i=()=>{!document.hidden&&h&&Z()};return document.addEventListener("visibilitychange",i),()=>{document.removeEventListener("visibilitychange",i)}},[h,z]);const Se=async()=>{var i,n,r;try{const f=await z(`/api/billing/info?shop=${h}`),A=((i=f==null?void 0:f.subscription)==null?void 0:i.plan)||"Starter";T(A),ce(((n=f==null?void 0:f.tokens)==null?void 0:n.balance)||0),ge(((r=f==null?void 0:f.subscription)==null?void 0:r.trialEndsAt)||null)}catch(f){console.error("[AI-TESTING] Error loading billing info:",f),T("Starter"),ce(0)}},Z=async()=>{var i,n;try{const r=await z(`/api/billing/info?shop=${h}`);ce(((i=r==null?void 0:r.tokens)==null?void 0:i.balance)||0),ge(((n=r==null?void 0:r.subscription)==null?void 0:n.trialEndsAt)||null)}catch(r){console.error("[AI-TESTING] Error loading token balance:",r)}},ye=async()=>{var i,n,r,f;try{const A=await z(`/api/dashboard/stats?shop=${h}`);je({totalProducts:((i=A==null?void 0:A.products)==null?void 0:i.total)||0,optimizedProducts:((n=A==null?void 0:A.products)==null?void 0:n.optimized)||0,totalCollections:((r=A==null?void 0:A.collections)==null?void 0:r.total)||0,optimizedCollections:((f=A==null?void 0:A.collections)==null?void 0:f.optimized)||0})}catch(A){console.error("[AI-TESTING] Error loading stats:",A)}},G=i=>{if(!p)return!1;const n=me(p);switch(i){case"productsJson":return n>=0;case"storeMetadata":return n>=1;case"welcomePage":case"collectionsJson":return n>=2;case"aiSitemap":return n>=3;case"schemaData":return n>=4;case"meta":return n>=0;case"claude":return n>=0;case"gemini":return n>=1;case"chatgpt":return n>=2;case"perplexity":return n>=3;case"deepseek":return n>=4;default:return!1}},ae=(i,n)=>{I({name:i,url:n}),l(!0)},ve=async()=>{K(!0),X(0),B({});try{const i=await z("/api/ai-testing/run-tests",{method:"POST",body:{shop:h}});i.results?(B(i.results),X(100),fe(i.results),k("Basic tests completed!")):k("Testing failed. Please try again.")}catch(i){console.error("[AI-TESTING] Error running tests:",i),k("Failed to run tests. Please try again.")}finally{K(!1)}},we=async()=>{if(me(p)<1){S({message:"AI-powered validation requires Professional plan or higher",requiredPlan:"Professional",currentPlan:p||"Starter"}),D(!0);return}$(!0),he(0),y({});try{const n=await z("/api/ai-testing/ai-validate",{method:"POST",body:{shop:h,endpointResults:C}});if(n&&n.results){if(y(n.results),he(100),n.aiEOScore){const r=n.aiEOScore;le(r),k(`AI validation completed! Score: ${r.score||"N/A"}/100 (${n.tokensUsed||0} tokens used)`)}else le(null),k(`AI validation completed! (${n.tokensUsed||0} tokens used)`);Z()}else le(null),k("AI validation failed. Please try again.")}catch(n){if(n.status===402){if(n.trialRestriction&&n.requiresActivation){S(n),H(!0);return}if(n.requiresUpgrade){S(n),D(!0);return}if(n.requiresPurchase){S(n),Y(!0);return}}k("Failed to run AI validation. Please try again.")}finally{$(!1)}},_=async(i,n=null)=>{try{x("Generating AI response...");let r=`/api/ai-discovery/simulate?shop=${h}&type=${i}`;n&&(r+=`&question=${encodeURIComponent(n)}`);const f=await z(r,{method:"GET"});x(f.response||"No response generated")}catch(r){if(console.error("[AI-TESTING] Simulation error:",r),r.status===402){if(r.trialRestriction&&r.requiresActivation){S(r),H(!0),x("");return}if(r.requiresUpgrade){S(r),D(!0),x("");return}if(r.requiresPurchase){S(r),Y(!0),x("");return}}x("Error generating response. Please try again."),k("Failed to simulate AI response")}};return e.jsxs(e.Fragment,{children:[e.jsxs(c,{gap:"400",children:[e.jsx(E,{tone:"info",children:e.jsx(s,{children:"Test how AI models discover and understand your store content. Check if your structured data and AI Discovery features are working correctly."})}),e.jsx(Ce,{testResults:C,aiTestResults:t,stats:xe}),e.jsxs(de,{children:[e.jsx(de.Section,{variant:"oneHalf",children:e.jsx(ee,{children:e.jsx(M,{padding:"300",children:e.jsxs(c,{gap:"400",children:[e.jsxs(d,{align:"space-between",blockAlign:"center",children:[e.jsxs(c,{gap:"100",children:[e.jsx(s,{as:"h3",variant:"headingMd",children:"ðŸ”§ Basic AIEO Tests"}),e.jsx(s,{variant:"bodySm",tone:"subdued",children:"Quick check if endpoints are accessible and returning data"})]}),e.jsx(m,{onClick:ve,loading:O,disabled:O,children:O?"Testing...":"Run Basic Tests"})]}),ue&&Object.keys(C).length>0&&!O&&e.jsx(E,{tone:"info",children:e.jsxs(s,{variant:"bodySm",children:["These results are from ",ue.toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),". Run Basic Tests again to refresh."]})}),O&&e.jsx(M,{children:e.jsxs(c,{gap:"200",children:[e.jsx(s,{variant:"bodySm",children:"Testing endpoints..."}),e.jsx(N,{progress:ie,size:"small"})]})}),Object.keys(C).length>0&&e.jsx(c,{gap:"300",children:Object.entries(C).map(([i,n],r)=>{const f=r===Object.entries(C).length-1;return e.jsxs(Ae.Fragment,{children:[e.jsx(d,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(d,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:n.name}),n.status==="success"&&e.jsx(o,{tone:"success",children:"âœ“ OK"}),n.status==="warning"&&e.jsx(o,{tone:"warning",children:"âš ï¸ Warning"}),n.status==="error"&&e.jsx(o,{tone:"critical",children:"âœ— Failed"}),n.status==="locked"&&e.jsx(o,{children:"ðŸ”’ Locked"})]}),e.jsx(s,{variant:"bodySm",tone:"subdued",children:n.message}),n.actionLink&&e.jsx(m,{size:"slim",onClick:()=>te(n.actionLink),children:i==="basicSitemap"?"Go to Sitemap":i==="aiSitemap"?"Go to Settings":"Go"})]})}),!f&&e.jsx(q,{})]},i)})}),Object.keys(C).length===0&&!O&&e.jsx(E,{tone:"info",children:e.jsx(s,{children:'Click "Run Basic Tests" to check if your AI Discovery endpoints are configured correctly.'})})]})})})}),e.jsx(de.Section,{variant:"oneHalf",children:e.jsx(ee,{children:e.jsx(M,{padding:"300",children:e.jsxs(c,{gap:"400",children:[e.jsxs(d,{align:"space-between",blockAlign:"center",children:[e.jsxs(c,{gap:"100",children:[e.jsxs(d,{gap:"200",blockAlign:"center",children:[e.jsx(s,{as:"h3",variant:"headingMd",children:"ðŸ¤– AI-Powered Validation"}),re!==null&&e.jsxs(o,{tone:re>50?"success":"warning",children:[re," tokens"]}),e.jsx(m,{size:"micro",onClick:()=>Z(),accessibilityLabel:"Refresh token balance",children:"ðŸ”„"})]}),e.jsx(s,{variant:"bodySm",tone:"subdued",children:"Deep analysis with AI bot"}),p&&e.jsx(s,{variant:"bodySm",tone:"subdued",children:"Requires: Professional+ plan & pay-per-use tokens"})]}),e.jsx(m,{onClick:we,loading:w,disabled:w||Object.keys(C).length===0,variant:"primary",children:w?"Validating...":"Test with AI Bot"})]}),w&&e.jsx(M,{children:e.jsxs(c,{gap:"200",children:[e.jsx(s,{variant:"bodySm",children:"AI is analyzing your endpoints..."}),e.jsx(N,{progress:U,size:"small",tone:"primary"})]})}),Object.keys(t).length>0&&e.jsxs(c,{gap:"300",children:[t.productsJson&&e.jsxs(e.Fragment,{children:[e.jsx(d,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(d,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"Products JSON Feed"}),t.productsJson.rating==="excellent"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Excellent"}),t.productsJson.rating==="good"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Good"}),t.productsJson.rating==="fair"&&e.jsx(o,{tone:"warning",children:"ðŸ¤– Fair"}),t.productsJson.rating==="poor"&&e.jsx(o,{tone:"critical",children:"ðŸ¤– Poor"}),t.productsJson.rating==="locked"&&e.jsx(o,{children:"ðŸ”’ Locked"}),t.productsJson.rating==="unavailable"&&e.jsx(o,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(s,{variant:"bodySm",children:t.productsJson.feedback}),t.productsJson.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",t.productsJson.suggestions]})]})}),e.jsx(q,{})]}),t.storeMetadata&&e.jsxs(e.Fragment,{children:[e.jsx(d,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(d,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"Store Metadata"}),t.storeMetadata.rating==="excellent"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Excellent"}),t.storeMetadata.rating==="good"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Good"}),t.storeMetadata.rating==="fair"&&e.jsx(o,{tone:"warning",children:"ðŸ¤– Fair"}),t.storeMetadata.rating==="poor"&&e.jsx(o,{tone:"critical",children:"ðŸ¤– Poor"}),t.storeMetadata.rating==="locked"&&e.jsx(o,{children:"ðŸ”’ Locked"}),t.storeMetadata.rating==="unavailable"&&e.jsx(o,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(s,{variant:"bodySm",children:t.storeMetadata.feedback}),t.storeMetadata.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",t.storeMetadata.suggestions]})]})}),e.jsx(q,{})]}),t.welcomePage&&e.jsxs(e.Fragment,{children:[e.jsx(d,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(d,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"AI Welcome Page"}),t.welcomePage.rating==="excellent"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Excellent"}),t.welcomePage.rating==="good"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Good"}),t.welcomePage.rating==="fair"&&e.jsx(o,{tone:"warning",children:"ðŸ¤– Fair"}),t.welcomePage.rating==="poor"&&e.jsx(o,{tone:"critical",children:"ðŸ¤– Poor"}),t.welcomePage.rating==="locked"&&e.jsx(o,{children:"ðŸ”’ Locked"}),t.welcomePage.rating==="unavailable"&&e.jsx(o,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(s,{variant:"bodySm",children:t.welcomePage.feedback}),t.welcomePage.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",t.welcomePage.suggestions]})]})}),e.jsx(q,{})]}),t.collectionsJson&&e.jsxs(e.Fragment,{children:[e.jsx(d,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(d,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"Collections JSON Feed"}),t.collectionsJson.rating==="excellent"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Excellent"}),t.collectionsJson.rating==="good"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Good"}),t.collectionsJson.rating==="fair"&&e.jsx(o,{tone:"warning",children:"ðŸ¤– Fair"}),t.collectionsJson.rating==="poor"&&e.jsx(o,{tone:"critical",children:"ðŸ¤– Poor"}),t.collectionsJson.rating==="locked"&&e.jsx(o,{children:"ðŸ”’ Locked"}),t.collectionsJson.rating==="unavailable"&&e.jsx(o,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(s,{variant:"bodySm",children:t.collectionsJson.feedback}),t.collectionsJson.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",t.collectionsJson.suggestions]})]})}),e.jsx(q,{})]}),t.aiSitemap&&e.jsxs(e.Fragment,{children:[e.jsx(d,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(d,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"AI-Enhanced Sitemap"}),t.aiSitemap.rating==="excellent"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Excellent"}),t.aiSitemap.rating==="good"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Good"}),t.aiSitemap.rating==="fair"&&e.jsx(o,{tone:"warning",children:"ðŸ¤– Fair"}),t.aiSitemap.rating==="poor"&&e.jsx(o,{tone:"critical",children:"ðŸ¤– Poor"}),t.aiSitemap.rating==="locked"&&e.jsx(o,{children:"ðŸ”’ Locked"}),t.aiSitemap.rating==="unavailable"&&e.jsx(o,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(s,{variant:"bodySm",children:t.aiSitemap.feedback}),t.aiSitemap.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",t.aiSitemap.suggestions]})]})}),e.jsx(q,{})]}),t.schemaData&&e.jsx(d,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(d,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"Advanced Schema Data"}),t.schemaData.rating==="excellent"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Excellent"}),t.schemaData.rating==="good"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Good"}),t.schemaData.rating==="fair"&&e.jsx(o,{tone:"warning",children:"ðŸ¤– Fair"}),t.schemaData.rating==="poor"&&e.jsx(o,{tone:"critical",children:"ðŸ¤– Poor"}),t.schemaData.rating==="locked"&&e.jsx(o,{children:"ðŸ”’ Locked"}),t.schemaData.rating==="unavailable"&&e.jsx(o,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(s,{variant:"bodySm",children:t.schemaData.feedback}),t.schemaData.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",t.schemaData.suggestions]})]})})]}),Object.keys(t).length===0&&!w&&e.jsx(E,{tone:"info",children:e.jsx(s,{children:Object.keys(C).length===0?"Run Basic Tests first, then use AI validation for deep analysis":'Click "Test with AI Bot" to get AI-powered feedback on your endpoint data quality'})}),!p&&e.jsx(E,{tone:"warning",children:e.jsx(s,{children:"Loading plan information..."})})]})})})})]}),e.jsx(ee,{children:e.jsx(M,{padding:"300",children:e.jsxs(c,{gap:"400",children:[e.jsx(s,{as:"h3",variant:"headingMd",children:"Test with Real AI Bots"}),e.jsx(s,{variant:"bodyMd",tone:"subdued",children:"Manually test your store with real AI search engines"}),e.jsxs(c,{gap:"200",children:[e.jsxs(d,{align:"space-between",children:[e.jsx(s,{children:"Meta AI Search"}),G("meta")?e.jsx(m,{onClick:()=>ae("Meta AI","https://www.meta.ai/"),size:"slim",children:"Test"}):e.jsx(m,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),e.jsxs(d,{align:"space-between",children:[e.jsx(s,{children:"Claude AI Search"}),G("claude")?e.jsx(m,{onClick:()=>ae("Claude AI","https://claude.ai/"),size:"slim",children:"Test"}):e.jsx(m,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),e.jsxs(d,{align:"space-between",children:[e.jsx(s,{children:"Gemini AI Search"}),G("gemini")?e.jsx(m,{onClick:()=>ae("Gemini AI","https://gemini.google.com/"),size:"slim",children:"Test"}):e.jsx(m,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),e.jsxs(d,{align:"space-between",children:[e.jsx(s,{children:"ChatGPT Web Search"}),G("chatgpt")?e.jsx(m,{url:`https://chat.openai.com/?q=What+products+does+${h}+sell%3F+Tell+me+about+this+business+and+what+they+offer`,external:!0,size:"slim",children:"Test"}):e.jsx(m,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),e.jsxs(d,{align:"space-between",children:[e.jsx(s,{children:"Perplexity AI Search"}),G("perplexity")?e.jsx(m,{url:`https://www.perplexity.ai/search?q=What+products+does+${h}+sell%3F+Tell+me+about+this+business+and+what+they+offer`,external:!0,size:"slim",children:"Test"}):e.jsx(m,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),e.jsxs(d,{align:"space-between",children:[e.jsx(s,{children:"DeepSeek AI Search"}),G("deepseek")?e.jsx(m,{onClick:()=>ae("DeepSeek AI","https://chat.deepseek.com/"),size:"slim",children:"Test"}):e.jsx(m,{disabled:!0,size:"slim",children:"Plan upgrade required"})]})]}),e.jsx(E,{tone:"info",children:e.jsxs(s,{children:[e.jsx("strong",{children:"How to test with AI bots:"}),e.jsx("br",{}),"â€¢ ",e.jsx("strong",{children:"Perplexity & ChatGPT:"}),' Click "Test" - they support URL parameters',e.jsx("br",{}),"â€¢ ",e.jsx("strong",{children:"Meta AI, Claude, Gemini, DeepSeek:"}),' Click "Test" to open a modal with the prompt to copy']})})]})})}),e.jsx(ee,{children:e.jsx(M,{padding:"300",children:e.jsxs(c,{gap:"300",children:[e.jsx(s,{as:"h4",variant:"headingSm",children:"AI Search Simulation"}),e.jsx(s,{variant:"bodyMd",tone:"subdued",children:"Test how AI bots would respond to questions about your store based on your structured data."}),e.jsx(E,{tone:"info",children:e.jsxs(c,{gap:"100",children:[e.jsx(s,{variant:"bodySm",fontWeight:"semibold",children:"Simulation Details:"}),e.jsxs(s,{variant:"bodySm",children:["â€¢ ",e.jsx("strong",{children:"Data Source:"})," Your store's products, collections, and metadata"]}),e.jsxs(s,{variant:"bodySm",children:["â€¢ ",e.jsx("strong",{children:"Response Style:"})," Concise (2-3 sentences), natural language"]}),e.jsxs(s,{variant:"bodySm",children:["â€¢ ",e.jsx("strong",{children:"Best For:"})," General store info, products, categories, contact details"]}),e.jsxs(s,{variant:"bodySm",children:["â€¢ ",e.jsx("strong",{children:"Limitations:"})," May not have real-time data (current stock, active promotions, exact shipping times)"]})]})}),e.jsxs(c,{gap:"200",children:[e.jsxs(d,{align:"space-between",children:[e.jsx(s,{children:"What products does this store sell?"}),e.jsx(m,{onClick:()=>_("products"),size:"slim",children:"Simulate Response"})]}),e.jsxs(d,{align:"space-between",children:[e.jsx(s,{children:"Tell me about this business"}),e.jsx(m,{onClick:()=>_("business"),size:"slim",children:"Simulate Response"})]}),e.jsxs(d,{align:"space-between",children:[e.jsx(s,{children:"What categories does this store have?"}),e.jsx(m,{onClick:()=>_("categories"),size:"slim",children:"Simulate Response"})]}),e.jsxs(d,{align:"space-between",children:[e.jsx(s,{children:"What is this store's contact information?"}),e.jsx(m,{onClick:()=>_("contact"),size:"slim",children:"Simulate Response"})]})]}),e.jsx(q,{}),e.jsxs(c,{gap:"200",children:[e.jsx(s,{variant:"headingSm",children:"Ask Your Own Question"}),e.jsx(Me,{label:"",value:P,onChange:Q,placeholder:"e.g., What are your return policies? Do you ship internationally?",autoComplete:"off",connectedRight:e.jsx(m,{onClick:()=>{P.trim()?_("custom",P):k("Please enter a question")},disabled:!P.trim(),children:"Ask AI"})})]}),a&&e.jsxs(M,{background:"bg-surface-secondary",padding:"300",borderRadius:"200",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"AI Bot Response:"}),e.jsx(M,{paddingBlockStart:"200",children:e.jsx(s,{variant:"bodyMd",children:a})})]})]})})})]}),se&&e.jsx(Ie,{content:se,onDismiss:()=>k("")}),e.jsx(R,{open:v,onClose:()=>l(!1),title:`Test with ${j==null?void 0:j.name}`,primaryAction:{content:"Open AI Bot",url:j==null?void 0:j.url,external:!0},secondaryActions:[{content:"Copy Prompt",onAction:()=>{navigator.clipboard.writeText(`What products does ${h} sell? Tell me about this business and what they offer.`),k("Prompt copied to clipboard!")}}],children:e.jsx(R.Section,{children:e.jsxs(c,{gap:"300",children:[e.jsx(s,{variant:"bodyMd",children:'1. Click "Copy Prompt" (left button)'}),e.jsxs(s,{variant:"bodyMd",children:['2. Click "Open AI Bot" (right button) to visit ',j==null?void 0:j.name]}),e.jsx(s,{variant:"bodyMd",children:"3. Paste the prompt and send"}),e.jsxs(M,{background:"bg-surface-secondary",padding:"300",borderRadius:"200",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"Prompt to test:"}),e.jsx(M,{paddingBlockStart:"200",children:e.jsxs(s,{variant:"bodyMd",as:"p",children:["What products does ",h," sell? Tell me about this business and what they offer."]})})]}),e.jsx(E,{tone:"info",children:e.jsx(s,{children:"The AI bot will search the web and use your store's structured data to answer."})})]})})}),e.jsx(R,{open:F,onClose:()=>J(!1),title:"Upgrade Required",primaryAction:{content:"View Plans",onAction:()=>{const i=new URLSearchParams(window.location.search),n=i.toString()?`?${i.toString()}`:"";window.location.href=`/billing${n}`}},secondaryActions:[{content:"Cancel",onAction:()=>J(!1)}],children:e.jsx(R.Section,{children:e.jsxs(c,{gap:"300",children:[e.jsxs(s,{variant:"bodyMd",children:[e.jsx("strong",{children:b==null?void 0:b.endpoint})," requires ",e.jsx("strong",{children:b==null?void 0:b.requiredPlan})," plan or higher."]}),e.jsxs(s,{variant:"bodyMd",tone:"subdued",children:["Your current plan: ",e.jsx("strong",{children:b==null?void 0:b.currentPlan})]}),e.jsx(E,{tone:"info",children:e.jsx(s,{children:"Upgrade to access this advanced AI Discovery feature."})})]})})}),e.jsx(R,{open:W,onClose:()=>D(!1),title:"Upgrade Required",primaryAction:{content:"View Plans",onAction:()=>{const i=new URLSearchParams(window.location.search),n=i.toString()?`?${i.toString()}`:"";window.location.href=`/billing${n}`}},secondaryActions:[{content:"Cancel",onAction:()=>D(!1)}],children:e.jsx(R.Section,{children:e.jsxs(c,{gap:"300",children:[e.jsxs(s,{variant:"bodyMd",children:["AI Testing requires ",e.jsx("strong",{children:(u==null?void 0:u.minimumPlan)||"Professional"})," plan or higher."]}),e.jsxs(s,{variant:"bodyMd",tone:"subdued",children:["Your current plan: ",e.jsx("strong",{children:(u==null?void 0:u.currentPlan)||"Starter"})]}),e.jsx(E,{tone:"info",children:e.jsx(s,{children:"Upgrade to test AI responses with real store data."})})]})})}),e.jsx(Te,{open:V,onClose:()=>{Y(!1),S(null),Z()},tokensRequired:(u==null?void 0:u.tokensRequired)||0,tokensAvailable:(u==null?void 0:u.tokensAvailable)||0,tokensNeeded:(u==null?void 0:u.tokensNeeded)||0,feature:"ai-testing-simulation",shop:h,needsUpgrade:!1,returnTo:"/ai-testing"}),u&&e.jsx(Pe,{open:ne,onClose:()=>{H(!1),S(null)},feature:u.feature||"ai-testing-simulation",trialEndsAt:u.trialEndsAt,currentPlan:u.currentPlan||p,tokensRequired:u.tokensRequired||0,onActivatePlan:async()=>{try{const i=await z("/api/billing/activate",{method:"POST",body:JSON.stringify({shop:h,endTrial:!0,returnTo:"/ai-testing"})});if(i.requiresApproval&&i.confirmationUrl){window.top.location.href=i.confirmationUrl;return}window.location.reload()}catch(i){console.error("[AI-TESTING] âŒ Activation failed:",i);const n=new URLSearchParams(window.location.search),r=n.get("host"),f=n.get("embedded");window.location.href=`/billing?shop=${encodeURIComponent(h)}&embedded=${f}&host=${encodeURIComponent(r)}`}},onPurchaseTokens:()=>{const i=new URLSearchParams(window.location.search),n=i.get("host"),r=i.get("embedded");window.location.href=`/billing?shop=${encodeURIComponent(h)}&embedded=${r}&host=${encodeURIComponent(n)}&returnTo=${encodeURIComponent("/ai-testing")}`}})]})}export{Ge as default};
