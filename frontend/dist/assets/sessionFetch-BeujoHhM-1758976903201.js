function f(i=!0){return i&&console.log("[SFETCH] Creating session fetch for App Bridge v4"),async(n,o={})=>{console.log("[SFETCH] Fetching:",n,{...o,body:void 0});const{method:c="GET",headers:a={},body:r,responseType:l,...d}=o,p={method:c,headers:{"Content-Type":"application/json",...a},credentials:"include",body:r?JSON.stringify(r):void 0},t=await fetch(n,p);console.log("[SFETCH] Response:",t.status,t.statusText);let e;if(l==="text")e=await t.text();else{const s=await t.text();try{e=s?JSON.parse(s):null}catch{e={error:(s==null?void 0:s.slice(0,500))||"Non-JSON response"}}}if(!t.ok){const s=(e==null?void 0:e.error)||(e==null?void 0:e.message)||`HTTP ${t.status}`;throw new Error(s)}return e}}export{f as m};
