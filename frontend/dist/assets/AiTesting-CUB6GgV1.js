import{r as d,j as e,R as me}from"./react-vendor-6uwpMgJP.js";import{m as be}from"./sessionFetch-BaPX3hTA.js";import{I as ye}from"./InsufficientTokensModal-CWgAibhb.js";import{T as Se}from"./TrialActivationModal-D5G7vt1Y.js";import{g as se}from"./usePlanHierarchy-BjUEvxZF.js";import{a as l,d as m,T as n,L as J,C as $,B as p,I as o,b as h,e as P,f as a,D as w,h as fe,k as we,M as I}from"./polaris-B96_d87K.js";import"./app-bridge-ugs9K9zh.js";import"./vendor-BC2YhXnC.js";import"./index-gGiBraFN.js";const ve=(O,g="")=>{try{return new URLSearchParams(window.location.search).get(O)||g}catch{return g}};function qe({shop:O}){const g=O||ve("shop",""),te=i=>{const s=new URLSearchParams(window.location.search),r=s.toString()?`?${s.toString()}`:"";window.location.href=`${i}${r}`},[G,j]=d.useState(""),f=d.useMemo(()=>be(),[]),[v,N]=d.useState(null),[Q,A]=d.useState(""),[ie,V]=d.useState(!1),[b,ae]=d.useState(null),[q,re]=d.useState(""),[oe,C]=d.useState(!1),[le,W]=d.useState(!1),[ce,L]=d.useState(!1),[u,y]=d.useState(null),[de,Y]=d.useState(!1),[S,ke]=d.useState(null),[k,H]=d.useState({}),[M,K]=d.useState(!1),[he,X]=d.useState(0),[t,Z]=d.useState({}),[R,_]=d.useState(!1),[ge,ee]=d.useState(0),[B,F]=d.useState(null),[Ae,ne]=d.useState(null),[c,D]=d.useState(null);d.useEffect(()=>{g&&(ue(),E())},[g,f]),d.useEffect(()=>{const i=()=>{!document.hidden&&g&&E()};return document.addEventListener("visibilitychange",i),()=>{document.removeEventListener("visibilitychange",i)}},[g,f]);const ue=async()=>{var i,s,r;try{const x=await f(`/api/billing/info?shop=${g}`),je=((i=x==null?void 0:x.subscription)==null?void 0:i.plan)||"Starter";N(je),F(((s=x==null?void 0:x.tokens)==null?void 0:s.balance)||0),ne(((r=x==null?void 0:x.subscription)==null?void 0:r.trialEndsAt)||null)}catch(x){console.error("[AI-TESTING] Error loading billing info:",x),N("Starter"),F(0)}},E=async()=>{var i,s;try{const r=await f(`/api/billing/info?shop=${g}`);F(((i=r==null?void 0:r.tokens)==null?void 0:i.balance)||0),ne(((s=r==null?void 0:r.subscription)==null?void 0:s.trialEndsAt)||null)}catch(r){console.error("[AI-TESTING] Error loading token balance:",r)}},T=i=>{if(!v)return!1;const s=se(v);switch(i){case"productsJson":return s>=0;case"storeMetadata":return s>=1;case"welcomePage":case"collectionsJson":return s>=2;case"aiSitemap":return s>=3;case"schemaData":return s>=4;case"meta":return s>=0;case"claude":return s>=0;case"gemini":return s>=1;case"chatgpt":return s>=2;case"perplexity":return s>=3;case"deepseek":return s>=4;default:return!1}},z=(i,s)=>{ae({name:i,url:s}),V(!0)},xe=async()=>{K(!0),X(0),H({});try{const i=await f("/api/ai-testing/run-tests",{method:"POST",body:{shop:g}});i.results?(H(i.results),X(100),j("Basic tests completed!")):j("Testing failed. Please try again.")}catch(i){console.error("[AI-TESTING] Error running tests:",i),j("Failed to run tests. Please try again.")}finally{K(!1)}},pe=async()=>{if(se(v)<1){y({message:"AI-powered validation requires Professional plan or higher",requiredPlan:"Professional",currentPlan:v||"Starter"}),C(!0);return}_(!0),ee(0),Z({});try{const s=await f("/api/ai-testing/ai-validate",{method:"POST",body:{shop:g,endpointResults:k}});if(s&&s.results){if(Z(s.results),ee(100),s.aiEOScore){const r=s.aiEOScore;r&&(r.score!==void 0||r.score===0)?(D(r),j(`AI validation completed! Score: ${r.score||0}/100 (${s.tokensUsed||0} tokens used)`)):(D(r),j(`AI validation completed! (${s.tokensUsed||0} tokens used)`))}else D(null),j(`AI validation completed! (${s.tokensUsed||0} tokens used)`);E()}else D(null),j("AI validation failed. Please try again.")}catch(s){if(console.error("[AI-TESTING] Error running AI validation:",s),s.status===402){if(s.trialRestriction&&s.requiresActivation){y(s),L(!0);return}if(s.requiresUpgrade){y(s),C(!0);return}if(s.requiresPurchase){y(s),W(!0);return}}j("Failed to run AI validation. Please try again.")}finally{_(!1)}},U=async(i,s=null)=>{try{A("Generating AI response...");let r=`/api/ai-discovery/simulate?shop=${g}&type=${i}`;s&&(r+=`&question=${encodeURIComponent(s)}`);const x=await f(r,{method:"GET"});A(x.response||"No response generated")}catch(r){if(console.error("[AI-TESTING] Simulation error:",r),r.status===402){if(r.trialRestriction&&r.requiresActivation){y(r),L(!0),A("");return}if(r.requiresUpgrade){y(r),C(!0),A("");return}if(r.requiresPurchase){y(r),W(!0),A("");return}}A("Error generating response. Please try again."),j("Failed to simulate AI response")}};return e.jsxs(e.Fragment,{children:[e.jsxs(l,{gap:"400",children:[e.jsx(m,{tone:"info",children:e.jsx(n,{children:"Test how AI models discover and understand your store content. Check if your structured data and AI Discovery features are working correctly."})}),e.jsxs(J,{children:[e.jsx(J.Section,{variant:"oneHalf",children:e.jsx($,{children:e.jsx(p,{padding:"300",children:e.jsxs(l,{gap:"400",children:[e.jsxs(o,{align:"space-between",blockAlign:"center",children:[e.jsxs(l,{gap:"100",children:[e.jsx(n,{as:"h3",variant:"headingMd",children:"ðŸ”§ Basic AIEO Tests"}),e.jsx(n,{variant:"bodySm",tone:"subdued",children:"Quick check if endpoints are accessible and returning data"})]}),e.jsx(h,{onClick:xe,loading:M,disabled:M,children:M?"Testing...":"Run Basic Tests"})]}),M&&e.jsx(p,{children:e.jsxs(l,{gap:"200",children:[e.jsx(n,{variant:"bodySm",children:"Testing endpoints..."}),e.jsx(P,{progress:he,size:"small"})]})}),Object.keys(k).length>0&&e.jsx(l,{gap:"300",children:Object.entries(k).map(([i,s],r)=>{const x=r===Object.entries(k).length-1;return e.jsxs(me.Fragment,{children:[e.jsx(o,{align:"space-between",blockAlign:"center",children:e.jsxs(l,{gap:"100",children:[e.jsxs(o,{gap:"200",blockAlign:"center",children:[e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:s.name}),s.status==="success"&&e.jsx(a,{tone:"success",children:"âœ“ OK"}),s.status==="warning"&&e.jsx(a,{tone:"warning",children:"âš ï¸ Warning"}),s.status==="error"&&e.jsx(a,{tone:"critical",children:"âœ— Failed"}),s.status==="locked"&&e.jsx(a,{children:"ðŸ”’ Locked"})]}),e.jsx(n,{variant:"bodySm",tone:"subdued",children:s.message}),s.actionLink&&e.jsx(h,{size:"slim",onClick:()=>te(s.actionLink),children:i==="basicSitemap"?"Go to Sitemap":i==="aiSitemap"?"Go to Settings":"Go"})]})}),!x&&e.jsx(w,{})]},i)})}),Object.keys(k).length===0&&!M&&e.jsx(m,{tone:"info",children:e.jsx(n,{children:'Click "Run Basic Tests" to check if your AI Discovery endpoints are configured correctly.'})})]})})})}),e.jsx(J.Section,{variant:"oneHalf",children:e.jsx($,{children:e.jsx(p,{padding:"300",children:e.jsxs(l,{gap:"400",children:[e.jsxs(o,{align:"space-between",blockAlign:"center",children:[e.jsxs(l,{gap:"100",children:[e.jsxs(o,{gap:"200",blockAlign:"center",children:[e.jsx(n,{as:"h3",variant:"headingMd",children:"ðŸ¤– AI-Powered Validation"}),B!==null&&e.jsxs(a,{tone:B>50?"success":"warning",children:[B," tokens"]}),e.jsx(h,{size:"micro",onClick:()=>E(),accessibilityLabel:"Refresh token balance",children:"ðŸ”„"})]}),e.jsx(n,{variant:"bodySm",tone:"subdued",children:"Deep analysis with AI bot"}),v&&e.jsx(n,{variant:"bodySm",tone:"subdued",children:"Requires: Professional+ plan & pay-per-use tokens"})]}),e.jsx(h,{onClick:pe,loading:R,disabled:R||Object.keys(k).length===0,variant:"primary",children:R?"Validating...":"Test with AI Bot"})]}),R&&e.jsx(p,{children:e.jsxs(l,{gap:"200",children:[e.jsx(n,{variant:"bodySm",children:"AI is analyzing your endpoints..."}),e.jsx(P,{progress:ge,size:"small",tone:"primary"})]})}),Object.keys(t).length>0&&e.jsxs(l,{gap:"300",children:[e.jsx(m,{tone:c?"success":"warning",children:e.jsxs(n,{variant:"bodySm",children:["Debug: aiTestResults keys: ",Object.keys(t).length," | aiEOScore state: ",c?"SET":"NULL"," |",c?`Score: ${c.score}, Grade: ${c.grade}`:"No score"]})}),c&&e.jsx($,{children:e.jsx(p,{padding:"400",children:e.jsxs(l,{gap:"300",children:[e.jsxs(o,{align:"space-between",blockAlign:"center",children:[e.jsxs(l,{gap:"100",children:[e.jsx(n,{as:"h3",variant:"headingMd",children:"AIEO Score"}),e.jsx(n,{variant:"bodySm",tone:"subdued",children:"Overall AI Engine Optimization rating"})]}),e.jsx(l,{gap:"100",align:"end",children:e.jsx(p,{style:{width:"80px",height:"80px",borderRadius:"50%",background:`conic-gradient(${c.gradeColor} ${c.score*3.6}deg, #e5e7eb ${c.score*3.6}deg)`,display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:e.jsxs(p,{style:{width:"60px",height:"60px",borderRadius:"50%",background:"white",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[e.jsx(n,{variant:"headingLg",fontWeight:"bold",style:{color:c.gradeColor},children:c.score}),e.jsx(n,{variant:"bodyXs",style:{color:c.gradeColor,marginTop:"-4px"},children:c.grade})]})})})]}),e.jsx(p,{paddingBlockStart:"300",children:e.jsxs(l,{gap:"200",children:[e.jsx(n,{variant:"bodySm",fontWeight:"semibold",children:"Score Breakdown:"}),e.jsxs(l,{gap:"100",children:[e.jsxs(o,{align:"space-between",children:[e.jsx(n,{variant:"bodySm",children:"Endpoint Availability"}),e.jsxs(n,{variant:"bodySm",fontWeight:"semibold",children:[c.breakdown.endpointAvailability,"/30"]})]}),e.jsx(P,{progress:Math.round(c.breakdown.endpointAvailability/30*100),size:"small"}),e.jsxs(o,{align:"space-between",children:[e.jsx(n,{variant:"bodySm",children:"AI Validation Quality"}),e.jsxs(n,{variant:"bodySm",fontWeight:"semibold",children:[c.breakdown.aiValidationQuality,"/40"]})]}),e.jsx(P,{progress:Math.round(c.breakdown.aiValidationQuality/40*100),size:"small"}),e.jsxs(o,{align:"space-between",children:[e.jsx(n,{variant:"bodySm",children:"Optimization Coverage"}),e.jsxs(n,{variant:"bodySm",fontWeight:"semibold",children:[c.breakdown.optimizationCoverage,"/20"]})]}),e.jsx(P,{progress:Math.round(c.breakdown.optimizationCoverage/20*100),size:"small"}),e.jsxs(o,{align:"space-between",children:[e.jsx(n,{variant:"bodySm",children:"Structured Data Quality"}),e.jsxs(n,{variant:"bodySm",fontWeight:"semibold",children:[c.breakdown.structuredDataQuality,"/10"]})]}),e.jsx(P,{progress:Math.round(c.breakdown.structuredDataQuality/10*100),size:"small"})]})]})}),c.recommendations&&c.recommendations.length>0&&e.jsx(p,{paddingBlockStart:"200",children:e.jsxs(l,{gap:"200",children:[e.jsx(n,{variant:"bodySm",fontWeight:"semibold",children:"Recommendations:"}),c.recommendations.map((i,s)=>e.jsx(m,{tone:i.priority==="high"?"critical":"warning",title:i.message,children:e.jsx(n,{variant:"bodySm",children:i.action})},s))]})})]})})}),e.jsx(w,{}),t.productsJson&&e.jsxs(e.Fragment,{children:[e.jsx(o,{align:"space-between",blockAlign:"center",children:e.jsxs(l,{gap:"100",children:[e.jsxs(o,{gap:"200",blockAlign:"center",children:[e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:"Products JSON Feed"}),t.productsJson.rating==="excellent"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Excellent"}),t.productsJson.rating==="good"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Good"}),t.productsJson.rating==="fair"&&e.jsx(a,{tone:"warning",children:"ðŸ¤– Fair"}),t.productsJson.rating==="poor"&&e.jsx(a,{tone:"critical",children:"ðŸ¤– Poor"}),t.productsJson.rating==="locked"&&e.jsx(a,{children:"ðŸ”’ Locked"}),t.productsJson.rating==="unavailable"&&e.jsx(a,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(n,{variant:"bodySm",children:t.productsJson.feedback}),t.productsJson.suggestions&&e.jsxs(n,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",t.productsJson.suggestions]})]})}),e.jsx(w,{})]}),t.storeMetadata&&e.jsxs(e.Fragment,{children:[e.jsx(o,{align:"space-between",blockAlign:"center",children:e.jsxs(l,{gap:"100",children:[e.jsxs(o,{gap:"200",blockAlign:"center",children:[e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:"Store Metadata"}),t.storeMetadata.rating==="excellent"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Excellent"}),t.storeMetadata.rating==="good"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Good"}),t.storeMetadata.rating==="fair"&&e.jsx(a,{tone:"warning",children:"ðŸ¤– Fair"}),t.storeMetadata.rating==="poor"&&e.jsx(a,{tone:"critical",children:"ðŸ¤– Poor"}),t.storeMetadata.rating==="locked"&&e.jsx(a,{children:"ðŸ”’ Locked"}),t.storeMetadata.rating==="unavailable"&&e.jsx(a,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(n,{variant:"bodySm",children:t.storeMetadata.feedback}),t.storeMetadata.suggestions&&e.jsxs(n,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",t.storeMetadata.suggestions]})]})}),e.jsx(w,{})]}),t.welcomePage&&e.jsxs(e.Fragment,{children:[e.jsx(o,{align:"space-between",blockAlign:"center",children:e.jsxs(l,{gap:"100",children:[e.jsxs(o,{gap:"200",blockAlign:"center",children:[e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:"AI Welcome Page"}),t.welcomePage.rating==="excellent"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Excellent"}),t.welcomePage.rating==="good"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Good"}),t.welcomePage.rating==="fair"&&e.jsx(a,{tone:"warning",children:"ðŸ¤– Fair"}),t.welcomePage.rating==="poor"&&e.jsx(a,{tone:"critical",children:"ðŸ¤– Poor"}),t.welcomePage.rating==="locked"&&e.jsx(a,{children:"ðŸ”’ Locked"}),t.welcomePage.rating==="unavailable"&&e.jsx(a,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(n,{variant:"bodySm",children:t.welcomePage.feedback}),t.welcomePage.suggestions&&e.jsxs(n,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",t.welcomePage.suggestions]})]})}),e.jsx(w,{})]}),t.collectionsJson&&e.jsxs(e.Fragment,{children:[e.jsx(o,{align:"space-between",blockAlign:"center",children:e.jsxs(l,{gap:"100",children:[e.jsxs(o,{gap:"200",blockAlign:"center",children:[e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:"Collections JSON Feed"}),t.collectionsJson.rating==="excellent"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Excellent"}),t.collectionsJson.rating==="good"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Good"}),t.collectionsJson.rating==="fair"&&e.jsx(a,{tone:"warning",children:"ðŸ¤– Fair"}),t.collectionsJson.rating==="poor"&&e.jsx(a,{tone:"critical",children:"ðŸ¤– Poor"}),t.collectionsJson.rating==="locked"&&e.jsx(a,{children:"ðŸ”’ Locked"}),t.collectionsJson.rating==="unavailable"&&e.jsx(a,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(n,{variant:"bodySm",children:t.collectionsJson.feedback}),t.collectionsJson.suggestions&&e.jsxs(n,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",t.collectionsJson.suggestions]})]})}),e.jsx(w,{})]}),t.aiSitemap&&e.jsxs(e.Fragment,{children:[e.jsx(o,{align:"space-between",blockAlign:"center",children:e.jsxs(l,{gap:"100",children:[e.jsxs(o,{gap:"200",blockAlign:"center",children:[e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:"AI-Enhanced Sitemap"}),t.aiSitemap.rating==="excellent"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Excellent"}),t.aiSitemap.rating==="good"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Good"}),t.aiSitemap.rating==="fair"&&e.jsx(a,{tone:"warning",children:"ðŸ¤– Fair"}),t.aiSitemap.rating==="poor"&&e.jsx(a,{tone:"critical",children:"ðŸ¤– Poor"}),t.aiSitemap.rating==="locked"&&e.jsx(a,{children:"ðŸ”’ Locked"}),t.aiSitemap.rating==="unavailable"&&e.jsx(a,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(n,{variant:"bodySm",children:t.aiSitemap.feedback}),t.aiSitemap.suggestions&&e.jsxs(n,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",t.aiSitemap.suggestions]})]})}),e.jsx(w,{})]}),t.schemaData&&e.jsx(o,{align:"space-between",blockAlign:"center",children:e.jsxs(l,{gap:"100",children:[e.jsxs(o,{gap:"200",blockAlign:"center",children:[e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:"Advanced Schema Data"}),t.schemaData.rating==="excellent"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Excellent"}),t.schemaData.rating==="good"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Good"}),t.schemaData.rating==="fair"&&e.jsx(a,{tone:"warning",children:"ðŸ¤– Fair"}),t.schemaData.rating==="poor"&&e.jsx(a,{tone:"critical",children:"ðŸ¤– Poor"}),t.schemaData.rating==="locked"&&e.jsx(a,{children:"ðŸ”’ Locked"}),t.schemaData.rating==="unavailable"&&e.jsx(a,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(n,{variant:"bodySm",children:t.schemaData.feedback}),t.schemaData.suggestions&&e.jsxs(n,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",t.schemaData.suggestions]})]})})]}),Object.keys(t).length===0&&!R&&e.jsx(m,{tone:"info",children:e.jsx(n,{children:Object.keys(k).length===0?"Run Basic Tests first, then use AI validation for deep analysis":'Click "Test with AI Bot" to get AI-powered feedback on your endpoint data quality'})}),!v&&e.jsx(m,{tone:"warning",children:e.jsx(n,{children:"Loading plan information..."})})]})})})})]}),e.jsx($,{children:e.jsx(p,{padding:"300",children:e.jsxs(l,{gap:"400",children:[e.jsx(n,{as:"h3",variant:"headingMd",children:"Test with Real AI Bots"}),e.jsx(n,{variant:"bodyMd",tone:"subdued",children:"Manually test your store with real AI search engines"}),e.jsxs(l,{gap:"200",children:[e.jsxs(o,{align:"space-between",children:[e.jsx(n,{children:"Meta AI Search"}),T("meta")?e.jsx(h,{onClick:()=>z("Meta AI","https://www.meta.ai/"),size:"slim",children:"Test"}):e.jsx(h,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),e.jsxs(o,{align:"space-between",children:[e.jsx(n,{children:"Claude AI Search"}),T("claude")?e.jsx(h,{onClick:()=>z("Claude AI","https://claude.ai/"),size:"slim",children:"Test"}):e.jsx(h,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),e.jsxs(o,{align:"space-between",children:[e.jsx(n,{children:"Gemini AI Search"}),T("gemini")?e.jsx(h,{onClick:()=>z("Gemini AI","https://gemini.google.com/"),size:"slim",children:"Test"}):e.jsx(h,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),e.jsxs(o,{align:"space-between",children:[e.jsx(n,{children:"ChatGPT Web Search"}),T("chatgpt")?e.jsx(h,{url:`https://chat.openai.com/?q=What+products+does+${g}+sell%3F+Tell+me+about+this+business+and+what+they+offer`,external:!0,size:"slim",children:"Test"}):e.jsx(h,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),e.jsxs(o,{align:"space-between",children:[e.jsx(n,{children:"Perplexity AI Search"}),T("perplexity")?e.jsx(h,{url:`https://www.perplexity.ai/search?q=What+products+does+${g}+sell%3F+Tell+me+about+this+business+and+what+they+offer`,external:!0,size:"slim",children:"Test"}):e.jsx(h,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),e.jsxs(o,{align:"space-between",children:[e.jsx(n,{children:"DeepSeek AI Search"}),T("deepseek")?e.jsx(h,{onClick:()=>z("DeepSeek AI","https://chat.deepseek.com/"),size:"slim",children:"Test"}):e.jsx(h,{disabled:!0,size:"slim",children:"Plan upgrade required"})]})]}),e.jsx(m,{tone:"info",children:e.jsxs(n,{children:[e.jsx("strong",{children:"How to test with AI bots:"}),e.jsx("br",{}),"â€¢ ",e.jsx("strong",{children:"Perplexity & ChatGPT:"}),' Click "Test" - they support URL parameters',e.jsx("br",{}),"â€¢ ",e.jsx("strong",{children:"Meta AI, Claude, Gemini, DeepSeek:"}),' Click "Test" to open a modal with the prompt to copy']})})]})})}),e.jsx($,{children:e.jsx(p,{padding:"300",children:e.jsxs(l,{gap:"300",children:[e.jsx(n,{as:"h4",variant:"headingSm",children:"AI Search Simulation"}),e.jsx(n,{variant:"bodyMd",tone:"subdued",children:"Test how AI bots would respond to questions about your store based on your structured data."}),e.jsx(m,{tone:"info",children:e.jsxs(l,{gap:"100",children:[e.jsx(n,{variant:"bodySm",fontWeight:"semibold",children:"Simulation Details:"}),e.jsxs(n,{variant:"bodySm",children:["â€¢ ",e.jsx("strong",{children:"Data Source:"})," Your store's products, collections, and metadata"]}),e.jsxs(n,{variant:"bodySm",children:["â€¢ ",e.jsx("strong",{children:"Response Style:"})," Concise (2-3 sentences), natural language"]}),e.jsxs(n,{variant:"bodySm",children:["â€¢ ",e.jsx("strong",{children:"Best For:"})," General store info, products, categories, contact details"]}),e.jsxs(n,{variant:"bodySm",children:["â€¢ ",e.jsx("strong",{children:"Limitations:"})," May not have real-time data (current stock, active promotions, exact shipping times)"]})]})}),e.jsxs(l,{gap:"200",children:[e.jsxs(o,{align:"space-between",children:[e.jsx(n,{children:"What products does this store sell?"}),e.jsx(h,{onClick:()=>U("products"),size:"slim",children:"Simulate Response"})]}),e.jsxs(o,{align:"space-between",children:[e.jsx(n,{children:"Tell me about this business"}),e.jsx(h,{onClick:()=>U("business"),size:"slim",children:"Simulate Response"})]}),e.jsxs(o,{align:"space-between",children:[e.jsx(n,{children:"What categories does this store have?"}),e.jsx(h,{onClick:()=>U("categories"),size:"slim",children:"Simulate Response"})]}),e.jsxs(o,{align:"space-between",children:[e.jsx(n,{children:"What is this store's contact information?"}),e.jsx(h,{onClick:()=>U("contact"),size:"slim",children:"Simulate Response"})]})]}),e.jsx(w,{}),e.jsxs(l,{gap:"200",children:[e.jsx(n,{variant:"headingSm",children:"Ask Your Own Question"}),e.jsx(fe,{label:"",value:q,onChange:re,placeholder:"e.g., What are your return policies? Do you ship internationally?",autoComplete:"off",connectedRight:e.jsx(h,{onClick:()=>{q.trim()?U("custom",q):j("Please enter a question")},disabled:!q.trim(),children:"Ask AI"})})]}),Q&&e.jsxs(p,{background:"bg-surface-secondary",padding:"300",borderRadius:"200",children:[e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:"AI Bot Response:"}),e.jsx(p,{paddingBlockStart:"200",children:e.jsx(n,{variant:"bodyMd",children:Q})})]})]})})})]}),G&&e.jsx(we,{content:G,onDismiss:()=>j("")}),e.jsx(I,{open:ie,onClose:()=>V(!1),title:`Test with ${b==null?void 0:b.name}`,primaryAction:{content:"Open AI Bot",url:b==null?void 0:b.url,external:!0},secondaryActions:[{content:"Copy Prompt",onAction:()=>{navigator.clipboard.writeText(`What products does ${g} sell? Tell me about this business and what they offer.`),j("Prompt copied to clipboard!")}}],children:e.jsx(I.Section,{children:e.jsxs(l,{gap:"300",children:[e.jsx(n,{variant:"bodyMd",children:'1. Click "Copy Prompt" (left button)'}),e.jsxs(n,{variant:"bodyMd",children:['2. Click "Open AI Bot" (right button) to visit ',b==null?void 0:b.name]}),e.jsx(n,{variant:"bodyMd",children:"3. Paste the prompt and send"}),e.jsxs(p,{background:"bg-surface-secondary",padding:"300",borderRadius:"200",children:[e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:"Prompt to test:"}),e.jsx(p,{paddingBlockStart:"200",children:e.jsxs(n,{variant:"bodyMd",as:"p",children:["What products does ",g," sell? Tell me about this business and what they offer."]})})]}),e.jsx(m,{tone:"info",children:e.jsx(n,{children:"The AI bot will search the web and use your store's structured data to answer."})})]})})}),e.jsx(I,{open:de,onClose:()=>Y(!1),title:"Upgrade Required",primaryAction:{content:"View Plans",onAction:()=>{const i=new URLSearchParams(window.location.search),s=i.toString()?`?${i.toString()}`:"";window.location.href=`/billing${s}`}},secondaryActions:[{content:"Cancel",onAction:()=>Y(!1)}],children:e.jsx(I.Section,{children:e.jsxs(l,{gap:"300",children:[e.jsxs(n,{variant:"bodyMd",children:[e.jsx("strong",{children:S==null?void 0:S.endpoint})," requires ",e.jsx("strong",{children:S==null?void 0:S.requiredPlan})," plan or higher."]}),e.jsxs(n,{variant:"bodyMd",tone:"subdued",children:["Your current plan: ",e.jsx("strong",{children:S==null?void 0:S.currentPlan})]}),e.jsx(m,{tone:"info",children:e.jsx(n,{children:"Upgrade to access this advanced AI Discovery feature."})})]})})}),e.jsx(I,{open:oe,onClose:()=>C(!1),title:"Upgrade Required",primaryAction:{content:"View Plans",onAction:()=>{const i=new URLSearchParams(window.location.search),s=i.toString()?`?${i.toString()}`:"";window.location.href=`/billing${s}`}},secondaryActions:[{content:"Cancel",onAction:()=>C(!1)}],children:e.jsx(I.Section,{children:e.jsxs(l,{gap:"300",children:[e.jsxs(n,{variant:"bodyMd",children:["AI Testing requires ",e.jsx("strong",{children:(u==null?void 0:u.minimumPlan)||"Professional"})," plan or higher."]}),e.jsxs(n,{variant:"bodyMd",tone:"subdued",children:["Your current plan: ",e.jsx("strong",{children:(u==null?void 0:u.currentPlan)||"Starter"})]}),e.jsx(m,{tone:"info",children:e.jsx(n,{children:"Upgrade to test AI responses with real store data."})})]})})}),e.jsx(ye,{open:le,onClose:()=>{W(!1),y(null),E()},tokensRequired:(u==null?void 0:u.tokensRequired)||0,tokensAvailable:(u==null?void 0:u.tokensAvailable)||0,tokensNeeded:(u==null?void 0:u.tokensNeeded)||0,feature:"ai-testing-simulation",shop:g,needsUpgrade:!1,returnTo:"/ai-testing"}),u&&e.jsx(Se,{open:ce,onClose:()=>{L(!1),y(null)},feature:u.feature||"ai-testing-simulation",trialEndsAt:u.trialEndsAt,currentPlan:u.currentPlan||v,tokensRequired:u.tokensRequired||0,onActivatePlan:async()=>{try{const i=await f("/api/billing/activate",{method:"POST",body:JSON.stringify({shop:g,endTrial:!0,returnTo:"/ai-testing"})});if(i.requiresApproval&&i.confirmationUrl){window.top.location.href=i.confirmationUrl;return}window.location.reload()}catch(i){console.error("[AI-TESTING] âŒ Activation failed:",i);const s=new URLSearchParams(window.location.search),r=s.get("host"),x=s.get("embedded");window.location.href=`/billing?shop=${encodeURIComponent(g)}&embedded=${x}&host=${encodeURIComponent(r)}`}},onPurchaseTokens:()=>{const i=new URLSearchParams(window.location.search),s=i.get("host"),r=i.get("embedded");window.location.href=`/billing?shop=${encodeURIComponent(g)}&embedded=${r}&host=${encodeURIComponent(s)}&returnTo=${encodeURIComponent("/ai-testing")}`}})]})}export{qe as default};
