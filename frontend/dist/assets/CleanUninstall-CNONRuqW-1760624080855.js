import{j as e}from"./app-bridge-C6clTHpS-1760624080855.js";import{r as a}from"./react-vendor-tAaa2TlE-1760624080855.js";import{m as N}from"./index-DWsReBaU-1760624080855.js";import{d as t,C as T,a as r,I as s,T as n,h as E,D as h,f as o,B as I,M as p,k as L}from"./polaris-BOa-w85X-1760624080855.js";function F(){var f,y,b,A,v,S;const x=((i,M="")=>{try{return new URLSearchParams(window.location.search).get(i)||M}catch{return M}})("shop",""),C=a.useMemo(()=>N(),[]),[w,l]=a.useState(!1),[d,u]=a.useState(!1),[c,k]=a.useState(null),[U,j]=a.useState(!1),[g,m]=a.useState("");return e.jsxs(t,{gap:"400",children:[e.jsx(T,{children:e.jsx(r,{padding:"600",children:e.jsxs(t,{gap:"600",children:[e.jsxs(s,{align:"space-between",blockAlign:"center",children:[e.jsxs(t,{gap:"200",children:[e.jsx(n,{as:"h1",variant:"headingLg",children:"ðŸ—‘ï¸ Clean & Uninstall"}),e.jsx(n,{variant:"bodyMd",tone:"subdued",children:"Prepare your store for app uninstallation"})]}),e.jsx(E,{tone:"critical",children:"DANGER ZONE"})]}),e.jsx(h,{}),e.jsx(o,{status:"warning",title:"Before you uninstall",children:e.jsx("p",{children:"We recommend cleaning up all app data from your store before uninstalling. This ensures no unused metafields or configurations are left behind."})}),e.jsxs(t,{gap:"400",children:[e.jsx(n,{variant:"headingMd",children:"What will be removed:"}),e.jsx(r,{paddingInlineStart:"400",children:e.jsxs(t,{gap:"200",children:[e.jsxs(s,{gap:"200",blockAlign:"start",children:[e.jsx(n,{variant:"bodyMd",children:"â€¢"}),e.jsx(n,{variant:"bodyMd",children:"All SEO metafield definitions (seo_ai namespace)"})]}),e.jsxs(s,{gap:"200",blockAlign:"start",children:[e.jsx(n,{variant:"bodyMd",children:"â€¢"}),e.jsx(n,{variant:"bodyMd",children:"All AI-generated content (titles, descriptions, bullets, FAQs)"})]}),e.jsxs(s,{gap:"200",blockAlign:"start",children:[e.jsx(n,{variant:"bodyMd",children:"â€¢"}),e.jsx(n,{variant:"bodyMd",children:"Store metadata configurations (brand voice, policies, target audience)"})]}),e.jsxs(s,{gap:"200",blockAlign:"start",children:[e.jsx(n,{variant:"bodyMd",children:"â€¢"}),e.jsx(n,{variant:"bodyMd",children:"Advanced schema data"})]}),e.jsxs(s,{gap:"200",blockAlign:"start",children:[e.jsx(n,{variant:"bodyMd",children:"â€¢"}),e.jsx(n,{variant:"bodyMd",children:"All metafield definitions created by this app"})]})]})})]}),e.jsx(h,{}),e.jsxs(t,{gap:"300",children:[e.jsx(n,{variant:"headingMd",children:"How it works:"}),e.jsx(r,{paddingInlineStart:"400",children:e.jsxs("ol",{style:{margin:0,paddingLeft:"20px"},children:[e.jsx("li",{children:'Click "Clean & Prepare for Uninstall" button below'}),e.jsx("li",{children:"Confirm that you want to remove all app data"}),e.jsx("li",{children:"Wait for the cleanup process to complete"}),e.jsx("li",{children:"Follow the instructions to complete uninstall in Shopify Admin"})]})})]}),e.jsx(h,{}),e.jsx(s,{gap:"200",children:e.jsx(I,{variant:"primary",tone:"critical",size:"large",onClick:()=>l(!0),children:"Clean & Prepare for Uninstall"})}),e.jsx(o,{status:"info",children:e.jsxs("p",{children:["ðŸ’¡ ",e.jsx("strong",{children:"Important:"})," This action will NOT uninstall the app automatically. After cleaning, you'll receive instructions on how to complete the uninstall process in Shopify Admin."]})})]})})}),w&&e.jsx(p,{open:!0,title:"âš ï¸ Confirm Data Cleanup",onClose:()=>!d&&l(!1),primaryAction:{content:d?"Cleaning...":"Yes, Clean Everything",onAction:async()=>{u(!0);try{console.log("[UNINSTALL] Starting cleanup...");const i=await C(`/api/store/prepare-uninstall?shop=${x}`,{method:"POST",shop:x});console.log("[UNINSTALL] Cleanup result:",i),k(i),l(!1),j(!0)}catch(i){console.error("[UNINSTALL] Cleanup error:",i),m("Error cleaning app data: "+i.message),l(!1)}finally{u(!1)}},loading:d,destructive:!0},secondaryActions:[{content:"Cancel",onAction:()=>l(!1),disabled:d}],children:e.jsx(p.Section,{children:e.jsxs(t,{gap:"400",children:[e.jsx(o,{status:"critical",title:"This action cannot be undone!",children:e.jsx("p",{children:"All SEO content, metafields, and app configurations will be permanently deleted from your Shopify store."})}),e.jsx(n,{variant:"bodyMd",children:e.jsx("strong",{children:"Are you sure you want to proceed?"})}),e.jsx(n,{variant:"bodyMd",tone:"subdued",children:"This will remove:"}),e.jsx(r,{paddingInlineStart:"400",children:e.jsxs("ul",{style:{margin:0,paddingLeft:"20px"},children:[e.jsx("li",{children:"All product SEO metafields (titles, descriptions, bullets, FAQs)"}),e.jsx("li",{children:"All collection SEO metafields"}),e.jsx("li",{children:"Store metadata (brand voice, policies, target audience)"}),e.jsx("li",{children:"Advanced schema data"}),e.jsx("li",{children:"All metafield definitions created by this app"})]})})]})})}),U&&c&&e.jsx(p,{open:!0,title:"âœ… App Data Cleaned Successfully",onClose:()=>j(!1),primaryAction:{content:"Go to Apps & Sales Channels",onAction:()=>{window.open("https://admin.shopify.com/store/"+x.replace(".myshopify.com","")+"/settings/apps","_blank")}},secondaryActions:[{content:"Close",onAction:()=>j(!1)}],children:e.jsx(p.Section,{children:e.jsxs(t,{gap:"400",children:[e.jsx(o,{status:"success",title:"Cleanup completed!",children:e.jsx("p",{children:"All app data has been removed from your Shopify store."})}),e.jsx(n,{variant:"headingMd",children:"Cleanup Summary:"}),e.jsxs(t,{gap:"200",children:[e.jsxs(s,{gap:"200",blockAlign:"start",children:[e.jsx(n,{variant:"bodyMd",children:"âœ“"}),e.jsxs(n,{variant:"bodyMd",children:["Metafield definitions deleted: ",e.jsx("strong",{children:((y=(f=c.results)==null?void 0:f.metafieldDefinitions)==null?void 0:y.deleted)||0})]})]}),e.jsxs(s,{gap:"200",blockAlign:"start",children:[e.jsx(n,{variant:"bodyMd",children:"âœ“"}),e.jsxs(n,{variant:"bodyMd",children:["Store metadata: ",e.jsx("strong",{children:(A=(b=c.results)==null?void 0:b.storeMetadata)!=null&&A.deleted?"Removed":"Not found"})]})]}),e.jsxs(s,{gap:"200",blockAlign:"start",children:[e.jsx(n,{variant:"bodyMd",children:"âœ“"}),e.jsxs(n,{variant:"bodyMd",children:["Advanced schemas: ",e.jsx("strong",{children:(S=(v=c.results)==null?void 0:v.advancedSchemas)!=null&&S.deleted?"Removed":"Not found"})]})]})]}),e.jsx(h,{}),e.jsx(n,{variant:"headingMd",children:"Next Steps:"}),e.jsx(r,{paddingInlineStart:"400",children:e.jsxs("ol",{style:{margin:0,paddingLeft:"20px"},children:[e.jsxs("li",{children:["Go to ",e.jsx("strong",{children:"Settings â†’ Apps and sales channels"})]}),e.jsxs("li",{children:["Find ",e.jsx("strong",{children:'"NEW AI SEO"'})," in the list"]}),e.jsxs("li",{children:["Click the ",e.jsx("strong",{children:"three dots (â€¢â€¢â€¢)"})," menu"]}),e.jsxs("li",{children:["Select ",e.jsx("strong",{children:'"Uninstall"'})]}),e.jsx("li",{children:"Confirm the uninstallation"})]})}),e.jsx(o,{status:"info",children:e.jsx("p",{children:"ðŸ’¡ Your store data is now clean. You can safely uninstall the app without leaving behind any unused metafields or configurations."})})]})})}),g&&e.jsx(L,{content:g,onDismiss:()=>m("")})]})}export{F as default};
