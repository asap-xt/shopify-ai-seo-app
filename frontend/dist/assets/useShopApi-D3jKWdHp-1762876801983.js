import{c as s,r as Z}from"./react-vendor-tAaa2TlE-1762876801983.js";import{g as Q,i as ee,v as te,j as ne,k as re,e as ie,f as ae,S as oe,_ as D,u as ue,d as ce}from"./index-BLnuqcE5-1762876801983.js";var I={},H={},O={},N={},W={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.createTransportListener=i.fromWindow=i.fromFrame=i.Context=void 0;var u=Q,t=te,a=re,r=ne,e=ee;(function(c){c.Modal="Modal",c.Main="Main"})(i.Context||(i.Context={}));function o(c,d,m){var b=[],h=c.host,y=c.window;if(!h)throw u.fromAction("App frame is undefined",u.AppActionType.WINDOW_UNDEFINED);return e.isUnframed&&window.MobileWebView&&Object.assign(window.MobileWebView,{postMessageToIframe:function(f,w){y==null||y.postMessage(f,w),n(f)&&h.postMessage(JSON.stringify(f.payload),location.origin)},updateIframeUrl:function(f){var w=window.location,_=(c.window||{}).location;try{var g=new URL(f).origin;g===d&&_?_.replace(f):w.href=f}catch{}}}),h.addEventListener("message",function(f){if(!(f.source===h||!t.isAppMessage(f))){if(f.origin!==d){var w="Message origin '"+f.origin+"' does not match app origin '"+d+"'.",_=u.invalidOriginAction(w),g={type:"dispatch",payload:_};y==null||y.postMessage(g,f.origin);return}if(e.isUnframed&&window.MobileWebView){var _=JSON.stringify({id:"unframed://fromClient",origin:d,data:f.data});window.MobileWebView.postMessage(_);return}for(var S=0,P=b;S<P.length;S++){var z=P[S];z(f)}}}),{context:m,localOrigin:d,frameWindow:y,hostFrame:h,dispatch:function(f){y==null||y.postMessage(f,d)},subscribe:function(f){return r.addAndRemoveFromCollection(b,f)}}}i.fromFrame=o;function l(c,d){var m=[];return typeof window!==void 0&&window.addEventListener("message",function(b){if(!(window===c&&!e.isUnframed||b.source!==c||!(t.isAppBridgeAction(b.data.payload)||t.isAppMessage(b))))for(var h=0,y=m;h<y.length;h++){var f=y[h];f(b)}}),{localOrigin:d,hostFrame:c,dispatch:function(b){var h;if(!((h=b.source)===null||h===void 0)&&h.host){if(e.isUnframed&&window&&window.MobileWebView){var y=JSON.stringify({id:"unframed://fromClient",origin:d,data:b});window.MobileWebView.postMessage(y);return}var f=new URL("https://"+b.source.host).origin;c.postMessage(b,f)}},subscribe:function(b){return r.addAndRemoveFromCollection(m,b)}}}i.fromWindow=l;function v(){var c=[],d={};function m(b){function h(){if(arguments.length<2)return r.addAndRemoveFromCollection(c,{callback:arguments[0]});var y=Array.from(arguments),f=y[0],w=y[1],_=y[2],g={callback:w,id:_},S={type:f,id:_};return Object.prototype.hasOwnProperty.call(d,f)||(d[f]=[]),b&&b(a.MessageType.Subscribe,S),r.addAndRemoveFromCollection(d[f],g,function(){b&&b(a.MessageType.Unsubscribe,S)})}return h}return{createSubscribeHandler:m,handleMessage:function(b){c.forEach(function(h){return h.callback(b)})},handleActionDispatch:function(b){var h=b.type,y=b.payload,f=!1;if(Object.prototype.hasOwnProperty.call(d,h))for(var w=0,_=d[h];w<_.length;w++){var g=_[w],S=g.id,P=g.callback,z=y&&y.id===S;(z||!S)&&(P(y),f=!0)}return f}}}i.createTransportListener=v;function n(c){return c!==null&&typeof c=="object"&&!Array.isArray(c)&&c.type==="dispatch"&&typeof c.payload=="object"}})(W);(function(i){var u=s&&s.__createBinding||(Object.create?function(a,r,e,o){o===void 0&&(o=e),Object.defineProperty(a,o,{enumerable:!0,get:function(){return r[e]}})}:function(a,r,e,o){o===void 0&&(o=e),a[o]=r[e]}),t=s&&s.__exportStar||function(a,r){for(var e in a)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&u(r,a,e)};Object.defineProperty(i,"__esModule",{value:!0}),t(W,i)})(N);var p={};Object.defineProperty(p,"__esModule",{value:!0});p.isShopifyPing=p.isShopifyPOS=p.isShopifyMobile=p.isShopifyEmbedded=p.isMobile=void 0;var x=ie;function se(){return q()||G()||k()}p.isMobile=se;function fe(){return x.isClient&&window.top!==window.self||x.isUnframed}p.isShopifyEmbedded=fe;function q(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify Mobile")>=0}p.isShopifyMobile=q;function G(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify POS")>=0}p.isShopifyPOS=G;function k(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify Ping")>=0}p.isShopifyPing=k;var le=s&&s.__awaiter||function(i,u,t,a){function r(e){return e instanceof t?e:new t(function(o){o(e)})}return new(t||(t=Promise))(function(e,o){function l(c){try{n(a.next(c))}catch(d){o(d)}}function v(c){try{n(a.throw(c))}catch(d){o(d)}}function n(c){c.done?e(c.value):r(c.value).then(l,v)}n((a=a.apply(i,u||[])).next())})},de=s&&s.__generator||function(i,u){var t={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},a,r,e,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(n){return function(c){return v([n,c])}}function v(n){if(a)throw new TypeError("Generator is already executing.");for(;t;)try{if(a=1,r&&(e=n[0]&2?r.return:n[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,n[1])).done)return e;switch(r=0,e&&(n=[n[0]&2,e.value]),n[0]){case 0:case 1:e=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,r=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(e=t.trys,!(e=e.length>0&&e[e.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!e||n[1]>e[0]&&n[1]<e[3])){t.label=n[1];break}if(n[0]===6&&t.label<e[1]){t.label=e[1],e=n;break}if(e&&t.label<e[2]){t.label=e[2],t.ops.push(n);break}e[2]&&t.ops.pop(),t.trys.pop();continue}n=u.call(i,t)}catch(c){n=[6,c],r=0}finally{a=e=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}};Object.defineProperty(O,"__esModule",{value:!0});O.createMutationObserver=O.setupModalAutoSizing=void 0;var he=ae,ve=N,be=p,U="app-bridge-utils-modal-auto-size",j=ye();function ye(){if(typeof document>"u")return null;var i=document.createElement("style");return i.type="text/css",i.innerHTML="."+U+" { overflow: hidden; height: auto; min-height: auto; }",i}function _e(i,u){if(!j)return function(){};var t=document.getElementsByTagName("head")[0],a=document.body.classList;t.appendChild(j),a.add(U);var r=V(i,u);return function(){a.remove(U),t.contains(j)&&t.removeChild(j),r&&r.disconnect()}}function we(i){return le(this,void 0,void 0,function(){function u(){a&&(a(),a=void 0)}function t(r){var e=r.context,o=r.modal.id;return be.isMobile()||e!==ve.Context.Modal?(u(),u):(a||(a=_e(i,o)),u)}var a;return de(this,function(r){switch(r.label){case 0:return[4,i.getState().then(t)];case 1:return r.sent(),[2,u]}})})}O.setupModalAutoSizing=we;function V(i,u){if(typeof document>"u")return;var t=-1,a,r={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},e=new MutationObserver(o);e.observe(document,r),l();function o(){a&&window.clearTimeout(a),a=window.setTimeout(l,16)}function l(){var v=document.body.scrollHeight;v!==t&&(t=v,i.dispatch(he.updateModalSize({id:u,height:String(v)})))}return e}O.createMutationObserver=V;var J={},M={},pe=s&&s.__createBinding||(Object.create?function(i,u,t,a){a===void 0&&(a=t),Object.defineProperty(i,a,{enumerable:!0,get:function(){return u[t]}})}:function(i,u,t,a){a===void 0&&(a=t),i[a]=u[t]}),ge=s&&s.__setModuleDefault||(Object.create?function(i,u){Object.defineProperty(i,"default",{enumerable:!0,value:u})}:function(i,u){i.default=u}),me=s&&s.__importStar||function(i){if(i&&i.__esModule)return i;var u={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&pe(u,i,t);return ge(u,i),u},Se=s&&s.__awaiter||function(i,u,t,a){function r(e){return e instanceof t?e:new t(function(o){o(e)})}return new(t||(t=Promise))(function(e,o){function l(c){try{n(a.next(c))}catch(d){o(d)}}function v(c){try{n(a.throw(c))}catch(d){o(d)}}function n(c){c.done?e(c.value):r(c.value).then(l,v)}n((a=a.apply(i,u||[])).next())})},Oe=s&&s.__generator||function(i,u){var t={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},a,r,e,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(n){return function(c){return v([n,c])}}function v(n){if(a)throw new TypeError("Generator is already executing.");for(;t;)try{if(a=1,r&&(e=n[0]&2?r.return:n[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,n[1])).done)return e;switch(r=0,e&&(n=[n[0]&2,e.value]),n[0]){case 0:case 1:e=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,r=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(e=t.trys,!(e=e.length>0&&e[e.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!e||n[1]>e[0]&&n[1]<e[3])){t.label=n[1];break}if(n[0]===6&&t.label<e[1]){t.label=e[1],e=n;break}if(e&&t.label<e[2]){t.label=e[2],t.ops.push(n);break}e[2]&&t.ops.pop(),t.trys.pop();continue}n=u.call(i,t)}catch(c){n=[6,c],r=0}finally{a=e=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}};Object.defineProperty(M,"__esModule",{value:!0});M.getSessionToken=void 0;var F=me(oe),L=D;function Me(i){return Se(this,void 0,void 0,function(){return Oe(this,function(u){return[2,new Promise(function(t,a){var r=i.subscribe(F.Action.RESPOND,function(e){var o=e.sessionToken;o?t(o):a(L.fromAction("Failed to retrieve a session token",L.Action.FAILED_AUTHENTICATION)),r()});i.dispatch(F.request())})]})})}M.getSessionToken=Me;var E={},T=s&&s.__assign||function(){return T=Object.assign||function(i){for(var u,t=1,a=arguments.length;t<a;t++){u=arguments[t];for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&(i[r]=u[r])}return i},T.apply(this,arguments)},Ae=s&&s.__awaiter||function(i,u,t,a){function r(e){return e instanceof t?e:new t(function(o){o(e)})}return new(t||(t=Promise))(function(e,o){function l(c){try{n(a.next(c))}catch(d){o(d)}}function v(c){try{n(a.throw(c))}catch(d){o(d)}}function n(c){c.done?e(c.value):r(c.value).then(l,v)}n((a=a.apply(i,u||[])).next())})},Pe=s&&s.__generator||function(i,u){var t={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},a,r,e,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(n){return function(c){return v([n,c])}}function v(n){if(a)throw new TypeError("Generator is already executing.");for(;t;)try{if(a=1,r&&(e=n[0]&2?r.return:n[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,n[1])).done)return e;switch(r=0,e&&(n=[n[0]&2,e.value]),n[0]){case 0:case 1:e=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,r=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(e=t.trys,!(e=e.length>0&&e[e.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!e||n[1]>e[0]&&n[1]<e[3])){t.label=n[1];break}if(n[0]===6&&t.label<e[1]){t.label=e[1],e=n;break}if(e&&t.label<e[2]){t.label=e[2],t.ops.push(n);break}e[2]&&t.ops.pop(),t.trys.pop();continue}n=u.call(i,t)}catch(c){n=[6,c],r=0}finally{a=e=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}};Object.defineProperty(E,"__esModule",{value:!0});E.authenticatedFetch=void 0;var je=M;function Te(i,u){var t=this;return u===void 0&&(u=fetch),function(a,r){return r===void 0&&(r={}),Ae(t,void 0,void 0,function(){var e,o,l;return Pe(this,function(v){switch(v.label){case 0:return[4,je.getSessionToken(i)];case 1:return e=v.sent(),o=new Headers(r.headers),o.append("Authorization","Bearer "+e),o.append("X-Requested-With","XMLHttpRequest"),l={},o.forEach(function(n,c){l[c]=n}),[2,u(a,T(T({},r),{headers:l}))]}})})}}E.authenticatedFetch=Te;(function(i){var u=s&&s.__createBinding||(Object.create?function(a,r,e,o){o===void 0&&(o=e),Object.defineProperty(a,o,{enumerable:!0,get:function(){return r[e]}})}:function(a,r,e,o){o===void 0&&(o=e),a[o]=r[e]}),t=s&&s.__exportStar||function(a,r){for(var e in a)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&u(r,a,e)};Object.defineProperty(i,"__esModule",{value:!0}),t(M,i),t(E,i)})(J);var X={},A={},K={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.generateUuid=void 0;var u=ue;Object.defineProperty(i,"generateUuid",{enumerable:!0,get:function(){return u.generateUuid}}),i.default=u.generateUuid})(K);var Ee=s&&s.__createBinding||(Object.create?function(i,u,t,a){a===void 0&&(a=t),Object.defineProperty(i,a,{enumerable:!0,get:function(){return u[t]}})}:function(i,u,t,a){a===void 0&&(a=t),i[a]=u[t]}),Ce=s&&s.__setModuleDefault||(Object.create?function(i,u){Object.defineProperty(i,"default",{enumerable:!0,value:u})}:function(i,u){i.default=u}),ze=s&&s.__importStar||function(i){if(i&&i.__esModule)return i;var u={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&Ee(u,i,t);return Ce(u,i),u},Ue=s&&s.__awaiter||function(i,u,t,a){function r(e){return e instanceof t?e:new t(function(o){o(e)})}return new(t||(t=Promise))(function(e,o){function l(c){try{n(a.next(c))}catch(d){o(d)}}function v(c){try{n(a.throw(c))}catch(d){o(d)}}function n(c){c.done?e(c.value):r(c.value).then(l,v)}n((a=a.apply(i,u||[])).next())})},xe=s&&s.__generator||function(i,u){var t={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},a,r,e,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(n){return function(c){return v([n,c])}}function v(n){if(a)throw new TypeError("Generator is already executing.");for(;t;)try{if(a=1,r&&(e=n[0]&2?r.return:n[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,n[1])).done)return e;switch(r=0,e&&(n=[n[0]&2,e.value]),n[0]){case 0:case 1:e=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,r=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(e=t.trys,!(e=e.length>0&&e[e.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!e||n[1]>e[0]&&n[1]<e[3])){t.label=n[1];break}if(n[0]===6&&t.label<e[1]){t.label=e[1],e=n;break}if(e&&t.label<e[2]){t.label=e[2],t.ops.push(n);break}e[2]&&t.ops.pop(),t.trys.pop();continue}n=u.call(i,t)}catch(c){n=[6,c],r=0}finally{a=e=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},Fe=s&&s.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(A,"__esModule",{value:!0});A.getAuthorizationCodePayload=void 0;var R=ze(ce),$=D,Le=Fe(K);function Re(i){return Ue(this,void 0,void 0,function(){return xe(this,function(u){return[2,new Promise(function(t,a){var r=Le.default(),e=i.subscribe(R.Action.RESPOND,function(o){switch(o==null?void 0:o.status){case"needsExchange":t(o);break;default:a($.fromAction("Failed to retrieve an authorization code",$.Action.FAILED_AUTHENTICATION))}e()},r);i.dispatch(R.request(r))})]})})}A.getAuthorizationCodePayload=Re;var C={},$e=s&&s.__awaiter||function(i,u,t,a){function r(e){return e instanceof t?e:new t(function(o){o(e)})}return new(t||(t=Promise))(function(e,o){function l(c){try{n(a.next(c))}catch(d){o(d)}}function v(c){try{n(a.throw(c))}catch(d){o(d)}}function n(c){c.done?e(c.value):r(c.value).then(l,v)}n((a=a.apply(i,u||[])).next())})},Be=s&&s.__generator||function(i,u){var t={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},a,r,e,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(n){return function(c){return v([n,c])}}function v(n){if(a)throw new TypeError("Generator is already executing.");for(;t;)try{if(a=1,r&&(e=n[0]&2?r.return:n[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,n[1])).done)return e;switch(r=0,e&&(n=[n[0]&2,e.value]),n[0]){case 0:case 1:e=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,r=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(e=t.trys,!(e=e.length>0&&e[e.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!e||n[1]>e[0]&&n[1]<e[3])){t.label=n[1];break}if(n[0]===6&&t.label<e[1]){t.label=e[1],e=n;break}if(e&&t.label<e[2]){t.label=e[2],t.ops.push(n);break}e[2]&&t.ops.pop(),t.trys.pop();continue}n=u.call(i,t)}catch(c){n=[6,c],r=0}finally{a=e=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}};Object.defineProperty(C,"__esModule",{value:!0});C.userAuthorizedFetch=void 0;var De=A,Ie="auth/shopify/callback";function He(i){var u=i.headers.get("X-Shopify-API-Request-Failure-Unauthorized");return u?u.toLowerCase()==="true":!1}function Ne(i){var u=this,t=i.app,a=i.callbackUri,r=a===void 0?Ie:a,e=i.isAuthorizationCodeRequired,o=e===void 0?He:e,l=i.fetchOperation;return function(v,n){return $e(u,void 0,void 0,function(){var c,d,m,b,h,y,f,w;return Be(this,function(_){switch(_.label){case 0:return[4,l(v,n)];case 1:return c=_.sent(),o(c)?[4,De.getAuthorizationCodePayload(t)]:[2,c];case 2:return d=_.sent(),m=d.code,b=d.hmac,h=d.shop,y=d.timestamp,f=encodeURI("https://"+window.location.hostname+"/"+r+"?code="+m+"&hmac="+b+"&shop="+h+"&timestamp="+y),[4,l(f,{})];case 3:if(w=_.sent(),!w.ok)throw new Error("Failed to authorize request.");return[2,l(v,n)]}})})}}C.userAuthorizedFetch=Ne;(function(i){var u=s&&s.__createBinding||(Object.create?function(a,r,e,o){o===void 0&&(o=e),Object.defineProperty(a,o,{enumerable:!0,get:function(){return r[e]}})}:function(a,r,e,o){o===void 0&&(o=e),a[o]=r[e]}),t=s&&s.__exportStar||function(a,r){for(var e in a)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&u(r,a,e)};Object.defineProperty(i,"__esModule",{value:!0}),t(A,i),t(C,i)})(X);(function(i){var u=s&&s.__createBinding||(Object.create?function(a,r,e,o){o===void 0&&(o=e),Object.defineProperty(a,o,{enumerable:!0,get:function(){return r[e]}})}:function(a,r,e,o){o===void 0&&(o=e),a[o]=r[e]}),t=s&&s.__exportStar||function(a,r){for(var e in a)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&u(r,a,e)};Object.defineProperty(i,"__esModule",{value:!0}),t(O,i),t(p,i),t(J,i),t(X,i)})(H);(function(i){var u=s&&s.__createBinding||(Object.create?function(a,r,e,o){o===void 0&&(o=e),Object.defineProperty(a,o,{enumerable:!0,get:function(){return r[e]}})}:function(a,r,e,o){o===void 0&&(o=e),a[o]=r[e]}),t=s&&s.__exportStar||function(a,r){for(var e in a)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&u(r,a,e)};Object.defineProperty(i,"__esModule",{value:!0}),t(H,i)})(I);const B=window.__SHOPIFY_APP_BRIDGE__;function Y(){const i=new URLSearchParams(window.location.search),u=i.get("shop")||void 0,t=i.get("id_token")||void 0;return async function(r,{method:e="GET",params:o,body:l,headers:v}={}){const n=new URL(r,window.location.origin),c=new URLSearchParams(o||{}),d=/\/shop\/[^/?]+/.test(n.pathname),m=n.searchParams.has("shop")||c.has("shop");!d&&!m&&u&&c.set("shop",u),[...c.keys()].length&&(n.search=(n.search?n.search+"&":"?")+c.toString());const b={...v};if(t&&(b.Authorization=`Bearer ${t}`),e!=="GET"&&!b["Content-Type"]&&(b["Content-Type"]="application/json"),B&&!t)try{const f=await I.getSessionToken(B);b.Authorization=`Bearer ${f}`}catch(f){console.warn("[API] Failed to get session token:",f)}const h=await fetch(n.toString(),{method:e,headers:b,body:e!=="GET"&&l?JSON.stringify(l):void 0});if(!h.ok){let f;if((h.headers.get("content-type")||"").includes("application/json"))try{f=await h.json()}catch{f={error:await h.text().catch(()=>h.statusText)}}else f={error:await h.text().catch(()=>h.statusText)};if(h.status===402&&f){const g=new Error(f.error||f.message||"Payment Required");throw g.status=402,Object.assign(g,f),g}const _=new Error(f.error||f.message||h.statusText);throw _.status=h.status,_}return(h.headers.get("content-type")||"").includes("application/json")?h.json():h.text()}}async function We(i,u={}){return Y()(i,u)}async function qe(i,u,t={}){return Y()(i,{method:"POST",body:u,...t})}const Ge=(i,u="")=>{try{return new URLSearchParams(window.location.search).get(i)||u}catch{return u}};function Je(){const i=Ge("shop","");return{api:Z.useMemo(()=>async(t,a={})=>{const r=new URL(t,window.location.origin);return!r.searchParams.has("shop")&&i&&r.searchParams.set("shop",i),a.method==="POST"||a.body?qe(r.pathname+r.search,a.body||{},a):We(r.pathname+r.search,a)},[i]),shop:i}}export{Je as u};
