import{j as e}from"./app-bridge-nknjbQze-1760350366799.js";import{r as y}from"./react-vendor-tAaa2TlE-1760350366799.js";import{M as u,d as s,T as n,f as I,I as i,a,B as E,D as v,n as O,i as B}from"./polaris-CfbRfzqh-1760350366799.js";function G({open:g,onClose:o,featureName:x="AI Enhancement",currentPlan:p="starter"}){const r=()=>{o();const c=new URLSearchParams(window.location.search).get("shop"),j=`/billing${c?`?shop=${encodeURIComponent(c)}`:""}`;window.location.href=j};return e.jsx(u,{open:g,onClose:o,title:`Unlock ${x} Features`,primaryAction:{content:"Upgrade Plan",onAction:r},secondaryActions:[{content:"Cancel",onAction:o}],children:e.jsx(u.Section,{children:e.jsxs(s,{gap:"400",children:[e.jsx(n,{variant:"bodyMd",children:"This feature is available for Growth Extra and Enterprise plans only."}),e.jsx(n,{variant:"bodyMd",children:e.jsxs("strong",{children:["Current plan: ",p]})}),e.jsxs(s,{gap:"200",children:[e.jsx(n,{variant:"bodyMd",children:e.jsx("strong",{children:"Upgrade now to get:"})}),e.jsxs(s,{gap:"100",children:[e.jsx(n,{variant:"bodyMd",children:"‚úì AI-optimized bullets and FAQs"}),e.jsx(n,{variant:"bodyMd",children:"‚úì Enhanced collection descriptions"}),e.jsx(n,{variant:"bodyMd",children:"‚úì Other AI-enhanced features"})]})]})]})})})}const P=[10,20,50,100];function V({open:g,onClose:o,feature:x,tokensRequired:p,tokensAvailable:r,tokensNeeded:d,onPurchaseTokens:c,needsUpgrade:j=!1,minimumPlan:b=null,currentPlan:T=null}){const[l,S]=y.useState(""),[m,k]=y.useState(P[0]),[f,A]=y.useState(!1),U=t=>{const C=t*.6;return Math.floor(C/.1*1e6)},R=async()=>{A(!0);try{await c(parseFloat(l||m))}catch(t){console.error("[Insufficient Tokens Modal] Purchase failed:",t)}finally{A(!1)}},M=parseFloat(l||m),h=U(M),w=h>=d,W={"ai-seo-product-basic":"AI SEO Optimization (Products)","ai-seo-product-enhanced":"AI SEO Optimization (Products - Enhanced)","ai-seo-collection":"AI SEO Optimization (Collections)","ai-testing-simulation":"AI Testing & Simulation","ai-schema-advanced":"Advanced Schema Data","ai-sitemap-optimized":"AI-Optimized Sitemap"}[x]||"This feature";return e.jsx(u,{open:g,onClose:o,title:"üí≥ Insufficient Tokens",primaryAction:{content:f?"Processing...":"Purchase Tokens",loading:f,onAction:R},secondaryActions:[{content:"Cancel",onAction:o,disabled:f}],children:e.jsx(u.Section,{children:e.jsxs(s,{gap:"400",children:[e.jsx(I,{tone:"warning",children:e.jsxs(s,{gap:"200",children:[e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:"You don't have enough tokens"}),e.jsxs(i,{gap:"400",children:[e.jsxs(a,{children:[e.jsx(n,{variant:"bodySm",tone:"subdued",children:"Required:"}),e.jsxs(n,{variant:"bodyMd",fontWeight:"semibold",children:[p.toLocaleString()," tokens"]})]}),e.jsxs(a,{children:[e.jsx(n,{variant:"bodySm",tone:"subdued",children:"Available:"}),e.jsxs(n,{variant:"bodyMd",fontWeight:"semibold",children:[r.toLocaleString()," tokens"]})]}),e.jsxs(a,{children:[e.jsx(n,{variant:"bodySm",tone:"subdued",children:"Needed:"}),e.jsxs(n,{variant:"bodyMd",fontWeight:"semibold",tone:"critical",children:[d.toLocaleString()," tokens"]})]})]})]})}),j&&b&&e.jsx(I,{tone:"info",children:e.jsxs(s,{gap:"200",children:[e.jsxs(n,{variant:"bodyMd",fontWeight:"semibold",children:["üí° Upgrade to ",b,"+"]}),e.jsxs(n,{variant:"bodySm",children:["Current plan: ",e.jsx("strong",{children:T})]}),e.jsxs(n,{variant:"bodySm",tone:"subdued",children:[b," plans include AI tokens and unlock advanced AI features. You can also purchase tokens separately while staying on your current plan."]}),e.jsx(a,{paddingBlockStart:"200",children:e.jsx(E,{onClick:()=>{var t;window.location.href=`/billing?shop=${encodeURIComponent(shop)}&host=${encodeURIComponent(((t=window.location.search.split("host=")[1])==null?void 0:t.split("&")[0])||"")}`},variant:"primary",size:"slim",children:"View Plans & Upgrade"})})]})}),e.jsx(v,{}),e.jsx(a,{background:"bg-surface-secondary",padding:"400",borderRadius:"200",children:e.jsxs(s,{gap:"200",children:[e.jsx(n,{variant:"headingMd",children:W}),e.jsx(n,{variant:"bodySm",tone:"subdued",children:"Purchase tokens to unlock this AI-enhanced feature"})]})}),e.jsxs(s,{gap:"300",children:[e.jsx(n,{variant:"headingMd",children:"Select Amount"}),e.jsx(O,{variant:"segmented",fullWidth:!0,children:P.map(t=>e.jsxs(E,{pressed:m===t&&!l,onClick:()=>{k(t),S("")},size:"large",children:["$",t]},t))}),e.jsx(n,{variant:"bodySm",tone:"subdued",children:"Or enter a custom amount (multiples of $5)"}),e.jsx(B,{type:"number",value:l,onChange:t=>{S(t),k(null)},placeholder:"Enter amount",prefix:"$",min:5,step:5,autoComplete:"off"})]}),e.jsx(v,{}),e.jsx(a,{background:w?"bg-surface-success":"bg-surface-secondary",padding:"400",borderRadius:"200",children:e.jsxs(s,{gap:"200",children:[e.jsxs(i,{align:"space-between",children:[e.jsx(n,{variant:"bodyMd",children:"Amount"}),e.jsxs(n,{variant:"bodyMd",fontWeight:"semibold",children:["$",M.toFixed(2)]})]}),e.jsxs(i,{align:"space-between",children:[e.jsx(n,{variant:"bodyMd",children:"You'll receive"}),e.jsxs(n,{variant:"bodyMd",fontWeight:"semibold",children:[h.toLocaleString()," tokens"]})]}),e.jsxs(i,{align:"space-between",children:[e.jsx(n,{variant:"bodyMd",children:"New balance"}),e.jsxs(n,{variant:"bodyMd",fontWeight:"semibold",children:[(r+h).toLocaleString()," tokens"]})]}),e.jsx(v,{}),w?e.jsx(i,{align:"center",blockAlign:"center",gap:"200",children:e.jsx(n,{variant:"bodySm",tone:"success",fontWeight:"semibold",children:"‚úì Enough to use this feature"})}):e.jsx(i,{align:"center",blockAlign:"center",gap:"200",children:e.jsxs(n,{variant:"bodySm",tone:"critical",fontWeight:"semibold",children:["‚ö† Still not enough (need ",(d-h).toLocaleString()," more)"]})})]})}),e.jsx(a,{background:"bg-surface-secondary",padding:"300",borderRadius:"200",children:e.jsxs(s,{gap:"100",children:[e.jsx(n,{variant:"bodySm",tone:"subdued",children:"üí° Tokens are used for AI-powered features"}),e.jsx(n,{variant:"bodySm",tone:"subdued",children:"‚ôªÔ∏è Tokens never expire and roll over indefinitely"})]})})]})})})}export{V as I,G as U};
