import{r as e,j as n}from"./react-vendor-BXVC7v0l.js";import{m as i}from"./sessionFetch-CeBL7Ait.js";import{a as t,C as s,B as a,T as r,D as l,d,I as o,b as c,M as h,l as p}from"./polaris-CyaoFo5Q.js";import"./app-bridge-DUY42B6P.js";import"./vendor-Cs_VgJ2r.js";import"./index-ByiDf9QT.js";function u(){var u,j,x,g,m,v,y,f,b,A;const S=((e,n="")=>{try{return new URLSearchParams(window.location.search).get(e)||n}catch{return n}})("shop",""),M=e.useMemo(()=>i(),[]),[w,C]=e.useState(!1),[k,I]=e.useState(!1),[T,D]=e.useState(null),[O,Y]=e.useState(!1),[z,N]=e.useState("");return n.jsxs(t,{gap:"400",children:[n.jsx(s,{children:n.jsx(a,{padding:"600",children:n.jsxs(t,{gap:"600",children:[n.jsx(t,{gap:"200",children:n.jsx(r,{variant:"bodyMd",tone:"subdued",children:"Prepare your store for app uninstallation"})}),n.jsx(l,{}),n.jsx(d,{status:"warning",title:"Before you uninstall",children:n.jsx("p",{children:"We recommend cleaning up all app data from your store before uninstalling. This ensures no unused metafields or configurations are left behind."})}),n.jsxs(t,{gap:"400",children:[n.jsx(r,{variant:"headingMd",children:"What will be removed:"}),n.jsx(a,{paddingInlineStart:"400",children:n.jsxs(t,{gap:"200",children:[n.jsxs(o,{gap:"200",blockAlign:"start",children:[n.jsx(r,{variant:"bodyMd",children:"â€¢"}),n.jsx(r,{variant:"bodyMd",children:"All AI Search optimization content"})]}),n.jsxs(o,{gap:"200",blockAlign:"start",children:[n.jsx(r,{variant:"bodyMd",children:"â€¢"}),n.jsx(r,{variant:"bodyMd",children:"AI-generated metadata and structured data"})]}),n.jsxs(o,{gap:"200",blockAlign:"start",children:[n.jsx(r,{variant:"bodyMd",children:"â€¢"}),n.jsx(r,{variant:"bodyMd",children:"Store configuration (brand voice, policies, target audience)"})]}),n.jsxs(o,{gap:"200",blockAlign:"start",children:[n.jsx(r,{variant:"bodyMd",children:"â€¢"}),n.jsx(r,{variant:"bodyMd",children:"Advanced schema markup"})]})]})}),n.jsx(d,{status:"info",children:n.jsxs("p",{children:["â„¹ï¸ ",n.jsx("strong",{children:"Your product and collection data will NOT be affected."})," This will only remove AI-generated content created by our app. Your original product titles, descriptions, and Shopify SEO metafields will remain unchanged."]})})]}),n.jsx(l,{}),n.jsxs(t,{gap:"300",children:[n.jsx(r,{variant:"headingMd",children:"How it works:"}),n.jsx(a,{paddingInlineStart:"400",children:n.jsxs("ol",{style:{margin:0,paddingLeft:"20px"},children:[n.jsx("li",{children:'Click "Clean & Prepare for Uninstall" button below'}),n.jsx("li",{children:"Confirm that you want to remove all app data"}),n.jsx("li",{children:"Wait for the cleanup process to complete"}),n.jsx("li",{children:"Follow the instructions to complete uninstall in Shopify Admin"})]})})]}),n.jsx(l,{}),n.jsx(o,{gap:"200",children:n.jsx(c,{variant:"primary",tone:"critical",size:"large",onClick:()=>C(!0),children:"Clean & Prepare for Uninstall"})}),n.jsx(d,{status:"info",children:n.jsxs("p",{children:["ðŸ’¡ ",n.jsx("strong",{children:"Important:"})," This action will NOT uninstall the app automatically. After cleaning, you'll receive instructions on how to complete the uninstall process in Shopify Admin."]})})]})})}),w&&n.jsx(h,{open:!0,title:"âš ï¸ Confirm Data Cleanup",onClose:()=>!k&&C(!1),primaryAction:{content:k?"Cleaning...":"Yes, Clean Everything",onAction:async()=>{I(!0);try{const e=await M(`/api/store/prepare-uninstall?shop=${S}`,{method:"POST",shop:S});D(e),C(!1),Y(!0)}catch(e){N("Error cleaning app data: "+e.message),C(!1)}finally{I(!1)}},loading:k,destructive:!0},secondaryActions:[{content:"Cancel",onAction:()=>C(!1),disabled:k}],children:n.jsx(h.Section,{children:n.jsxs(t,{gap:"400",children:[n.jsx(d,{status:"critical",title:"This action cannot be undone!",children:n.jsx("p",{children:"All AI Search optimization content and app configurations will be permanently removed from your store."})}),n.jsx(r,{variant:"bodyMd",children:n.jsx("strong",{children:"Are you sure you want to proceed?"})}),n.jsx(r,{variant:"bodyMd",tone:"subdued",children:"This will remove:"}),n.jsx(a,{paddingInlineStart:"400",children:n.jsxs("ul",{style:{margin:0,paddingLeft:"20px"},children:[n.jsx("li",{children:"All AI Search optimization content for products and collections"}),n.jsx("li",{children:"AI-generated metadata and structured data"}),n.jsx("li",{children:"Store configuration (brand voice, policies, target audience)"}),n.jsx("li",{children:"Advanced schema markup"})]})}),n.jsx(d,{status:"info",children:n.jsxs("p",{children:["âœ… ",n.jsx("strong",{children:"Your original product and collection data will NOT be affected."})," Only AI-generated content will be removed."]})})]})})}),O&&T&&n.jsx(h,{open:!0,title:"âœ… App Data Cleaned Successfully",onClose:()=>Y(!1),primaryAction:{content:"Go to Apps & Sales Channels",onAction:()=>{window.open("https://admin.shopify.com/store/"+S.replace(".myshopify.com","")+"/settings/apps","_blank")}},secondaryActions:[{content:"Close",onAction:()=>Y(!1)}],children:n.jsx(h.Section,{children:n.jsxs(t,{gap:"400",children:[n.jsx(d,{status:"success",title:"Cleanup completed!",children:n.jsx("p",{children:"All app data has been removed from your Shopify store."})}),n.jsx(r,{variant:"headingMd",children:"Cleanup Summary:"}),n.jsxs(t,{gap:"200",children:[n.jsxs(o,{gap:"200",blockAlign:"start",children:[n.jsx(r,{variant:"bodyMd",children:"âœ“"}),n.jsxs(r,{variant:"bodyMd",children:["AI Search optimization data cleared for ",n.jsx("strong",{children:((null==(j=null==(u=T.results)?void 0:u.productSeoData)?void 0:j.cleared)||0)+((null==(g=null==(x=T.results)?void 0:x.collectionSeoData)?void 0:g.cleared)||0)})," items"]})]}),n.jsxs(o,{gap:"200",blockAlign:"start",children:[n.jsx(r,{variant:"bodyMd",children:"âœ“"}),n.jsxs(r,{variant:"bodyMd",children:["Metadata definitions removed: ",n.jsx("strong",{children:(null==(v=null==(m=T.results)?void 0:m.metafieldDefinitions)?void 0:v.deleted)||0})]})]}),n.jsxs(o,{gap:"200",blockAlign:"start",children:[n.jsx(r,{variant:"bodyMd",children:"âœ“"}),n.jsxs(r,{variant:"bodyMd",children:["Store configuration: ",n.jsx("strong",{children:(null==(f=null==(y=T.results)?void 0:y.storeMetadata)?void 0:f.deleted)?"Removed":"Not found"})]})]}),n.jsxs(o,{gap:"200",blockAlign:"start",children:[n.jsx(r,{variant:"bodyMd",children:"âœ“"}),n.jsxs(r,{variant:"bodyMd",children:["Advanced schema markup: ",n.jsx("strong",{children:(null==(A=null==(b=T.results)?void 0:b.advancedSchemas)?void 0:A.deleted)?"Removed":"Not found"})]})]})]}),n.jsx(d,{status:"success",children:n.jsxs("p",{children:["âœ… ",n.jsx("strong",{children:"All AI-generated content has been removed."})," Your original product data, titles, descriptions, and Shopify SEO metafields remain unchanged."]})}),n.jsx(l,{}),n.jsx(r,{variant:"headingMd",children:"Next Steps:"}),n.jsx(a,{paddingInlineStart:"400",children:n.jsxs("ol",{style:{margin:0,paddingLeft:"20px"},children:[n.jsxs("li",{children:["Go to ",n.jsx("strong",{children:"Settings â†’ Apps and sales channels"})]}),n.jsxs("li",{children:["Find ",n.jsx("strong",{children:'"indexAIze - Unlock AI Search"'})," in the list"]}),n.jsxs("li",{children:["Click the ",n.jsx("strong",{children:"three dots (â€¢â€¢â€¢)"})," menu"]}),n.jsxs("li",{children:["Select ",n.jsx("strong",{children:'"Uninstall"'})]}),n.jsx("li",{children:"Confirm the uninstallation"})]})}),n.jsx(d,{status:"info",children:n.jsx("p",{children:"ðŸ’¡ Your store data is now clean. You can safely uninstall the app without leaving behind any unused metafields or configurations."})})]})})}),z&&n.jsx(p,{content:z,onDismiss:()=>N("")})]})}export{u as default};
