const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BulkEdit-BhmrLRO6-1760647331317.js","assets/app-bridge-OHDGbKuE-1760647331317.js","assets/react-vendor-tAaa2TlE-1760647331317.js","assets/StoreMetadataBanner-D1PkmoA7-1760647331317.js","assets/polaris-BEf6jRnV-1760647331317.js","assets/Collections-CJFxTFQx-1760647331317.js","assets/Sitemap-Db_9Gr1Y-1760647331317.js","assets/StoreMetadata-CTfE-Oy_-1760647331317.js","assets/SchemaData-CnMP1ltt-1760647331317.js","assets/Settings-BoJdal9N-1760647331317.js","assets/AiTesting-Jj-BbpJZ-1760647331317.js","assets/Billing-I3a-Bn7Y-1760647331317.js","assets/CleanUninstall-AVhhFAca-1760647331317.js"])))=>i.map(i=>d[i]);
import{j as g}from"./app-bridge-OHDGbKuE-1760647331317.js";import{a as ft,c as b,r as T,R as B}from"./react-vendor-tAaa2TlE-1760647331317.js";import{P as pt,A as ht,B as gt,I as ue,T as j,a as N,C as ie,b as yt,F as vt,c as bt}from"./polaris-BEf6jRnV-1760647331317.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const t of i)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const t={};return i.integrity&&(t.integrity=i.integrity),i.referrerPolicy&&(t.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?t.credentials="include":i.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(i){if(i.ep)return;i.ep=!0;const t=n(i);fetch(i.href,t)}})();var Ge,Te=ft;Ge=Te.createRoot,Te.hydrateRoot;const _t="modulepreload",mt=function(e){return"/"+e},Me={},L=function(r,n,o){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),d=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=mt(l),l in Me)return;Me[l]=!0;const a=l.endsWith(".css"),u=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":_t,a||(c.as="script"),c.crossOrigin="",c.href=l,d&&c.setAttribute("nonce",d),document.head.appendChild(c),a)return new Promise((v,p)=>{c.addEventListener("load",v),c.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function t(s){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=s,window.dispatchEvent(d),!d.defaultPrevented)throw s}return i.then(s=>{for(const d of s||[])d.status==="rejected"&&t(d.reason);return r().catch(t)})};var We={},Ve={},K={},ze={},ge={},ce={},me={},F={},Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});function $e(e,r){if(r==null||typeof e>"u"||!Object.prototype.isPrototypeOf.call(Object.getPrototypeOf(e),r)||r.constructor.name!=="Object"&&r.constructor.name!=="Array")return r;var n={};return Object.keys(r).forEach(function(o){var i=Object.prototype.hasOwnProperty.call(e,o);i&&typeof e[o]=="object"&&!Array.isArray(e[o])?n[o]=$e(e[o],r[o]):n[o]=r[o]}),Object.keys(e).forEach(function(o){var i=Object.prototype.hasOwnProperty.call(r,o);i||(n[o]=e[o])}),Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n}Pe.default=$e;var z={};Object.defineProperty(z,"__esModule",{value:!0});z.SEPARATOR=z.PREFIX=void 0;z.PREFIX="APP";z.SEPARATOR="::";var G={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ComponentType=e.Group=void 0,function(r){r.AuthCode="AuthCode",r.Button="Button",r.ButtonGroup="ButtonGroup",r.Cart="Cart",r.Client="Client",r.ContextualSaveBar="ContextualSaveBar",r.Error="Error",r.Features="Features",r.FeedbackModal="FeedbackModal",r.Fullscreen="Fullscreen",r.LeaveConfirmation="LeaveConfirmation",r.Link="Link",r.Loading="Loading",r.Menu="Menu",r.Modal="Modal",r.Navigation="Navigation",r.Performance="Performance",r.Pos="Pos",r.Print="Print",r.ResourcePicker="Resource_Picker",r.unstable_Picker="unstable_Picker",r.Scanner="Scanner",r.SessionToken="SessionToken",r.Share="Share",r.TitleBar="TitleBar",r.Toast="Toast",r.MarketingExternalActivityTopBar="MarketingExternalActivityTopBar",r.WebVitals="WebVitals"}(e.Group||(e.Group={})),function(r){r.Button="Button",r.ButtonGroup="ButtonGroup"}(e.ComponentType||(e.ComponentType={}))})(G);(function(e){var r=b&&b.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0}),e.updateActionFromPayload=e.isValidOptionalString=e.isValidOptionalNumber=e.forEachInEnum=e.getMergedProps=e.findMatchInEnum=e.getEventNameSpace=e.NonSnakeCaseGroup=e.actionWrapper=void 0;var n=r(Pe),o=z,i=G;function t(h){return h}e.actionWrapper=t,e.NonSnakeCaseGroup=[i.Group.AuthCode,i.Group.Button,i.Group.ButtonGroup,i.Group.Cart,i.Group.Error,i.Group.Features,i.Group.Fullscreen,i.Group.Link,i.Group.Loading,i.Group.Menu,i.Group.Modal,i.Group.Navigation,i.Group.Pos,i.Group.Print,i.Group.ResourcePicker,i.Group.Scanner,i.Group.SessionToken,i.Group.Share,i.Group.TitleBar,i.Group.Toast,i.Group.unstable_Picker];function s(h){return h.replace(/([A-Z])/g,function(y,A,m){return(m===0?"":"_")+y[0].toLowerCase()})}function d(h){return e.NonSnakeCaseGroup.includes(h)?h.toUpperCase():s(h).toUpperCase()}function l(h,y,A){if(y.startsWith(""+o.PREFIX+o.SEPARATOR))return y;var m=d(h);if(A){var I=A.subgroups,M=A.type;I&&I.length>0&&(m+=m.length>0?o.SEPARATOR:"",I.forEach(function(W,_){m+=""+W.toUpperCase()+(_<I.length-1?o.SEPARATOR:"")})),M!==h&&M&&(m+=""+(m.length>0?o.SEPARATOR:"")+M.toUpperCase())}return m&&(m+=""+(m.length>0?o.SEPARATOR:"")+y.toUpperCase()),""+o.PREFIX+o.SEPARATOR+m}e.getEventNameSpace=l;function a(h,y){var A=Object.keys(h).find(function(m){return y===h[m]});return A?h[A]:void 0}e.findMatchInEnum=a;function u(h,y){var A=n.default(h,y);if(!A){var m=Object.assign(h,y);return m}return A}e.getMergedProps=u;function c(h,y){Object.keys(h).forEach(function(A){y(h[A])})}e.forEachInEnum=c;function v(h){return h==null||typeof h=="number"}e.isValidOptionalNumber=v;function p(h){return h==null||typeof h=="string"}e.isValidOptionalString=p;function f(h,y){var A=h.id;return A===y.id?(Object.assign(h,u(h,y)),!0):!1}e.updateActionFromPayload=f})(F);var k={},le={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LifecycleHook=e.PermissionType=e.MessageType=void 0,function(r){r.GetState="getState",r.Dispatch="dispatch",r.Subscribe="subscribe",r.Unsubscribe="unsubscribe"}(e.MessageType||(e.MessageType={})),function(r){r.Dispatch="Dispatch",r.Subscribe="Subscribe"}(e.PermissionType||(e.PermissionType={})),function(r){r.UpdateAction="UpdateAction",r.DispatchAction="DispatchAction"}(e.LifecycleHook||(e.LifecycleHook={}))})(le);var $={};Object.defineProperty($,"__esModule",{value:!0});$.removeFromCollection=$.addAndRemoveFromCollection=void 0;function Pt(e,r,n){return e.push(r),function(){return qe(e,r,n)}}$.addAndRemoveFromCollection=Pt;function qe(e,r,n){var o=e.findIndex(function(i){return i===r});return o>=0?(e.splice(o,1),n&&n(r),!0):!1}$.removeFromCollection=qe;var J={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.permissionAction=e.isErrorEventName=e.throwError=e.invalidOriginAction=e.fromAction=e.AppBridgeError=e.AppActionType=e.Action=void 0;var r=G,n=F,o;(function(c){c.INVALID_ACTION="APP::ERROR::INVALID_ACTION",c.INVALID_ACTION_TYPE="APP::ERROR::INVALID_ACTION_TYPE",c.INVALID_PAYLOAD="APP::ERROR::INVALID_PAYLOAD",c.INVALID_OPTIONS="APP::ERROR::INVALID_OPTIONS",c.UNEXPECTED_ACTION="APP::ERROR::UNEXPECTED_ACTION",c.PERSISTENCE="APP::ERROR::PERSISTENCE",c.UNSUPPORTED_OPERATION="APP::ERROR::UNSUPPORTED_OPERATION",c.NETWORK="APP::ERROR::NETWORK",c.PERMISSION="APP::ERROR::PERMISSION",c.FAILED_AUTHENTICATION="APP::ERROR::FAILED_AUTHENTICATION",c.INVALID_ORIGIN="APP::ERROR::INVALID_ORIGIN"})(o=e.Action||(e.Action={})),function(c){c.INVALID_CONFIG="APP::ERROR::INVALID_CONFIG",c.MISSING_CONFIG="APP::APP_ERROR::MISSING_CONFIG",c.MISSING_APP_BRIDGE_MIDDLEWARE="APP::APP_ERROR::MISSING_APP_BRIDGE_MIDDLEWARE",c.WINDOW_UNDEFINED="APP::APP_ERROR::WINDOW_UNDEFINED",c.REDUX_REINSTANTIATED="APP::APP_ERROR::REDUX_REINSTANTIATED",c.MISSING_LOCAL_ORIGIN="APP::APP_ERROR::MISSING_LOCAL_ORIGIN",c.MISSING_HOST_PROVIDER="APP::APP_ERROR::MISSING_HOST_PROVIDER",c.MISSING_ROUTER_CONTEXT="APP::APP_ERROR::MISSING_ROUTER_CONTEXT",c.MISSING_HISTORY_BLOCK="APP::APP_ERROR::MISSING_HISTORY_BLOCK"}(e.AppActionType||(e.AppActionType={}));var i=function(){function c(v){this.name="AppBridgeError",this.message=v,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(this,this.constructor):this.stack=new Error(this.message).stack}return c}();e.AppBridgeError=i,i.prototype=Object.create(Error.prototype);function t(c,v,p){var f=c?v+": "+c:v,h=new i(f);return h.action=p,h.type=v,h}e.fromAction=t;function s(c){return n.actionWrapper({group:r.Group.Error,payload:{message:c,type:o.INVALID_ORIGIN},type:o.INVALID_ORIGIN})}e.invalidOriginAction=s;function d(){for(var c=[],v=0;v<arguments.length;v++)c[v]=arguments[v];var p=c[0],f,h;throw typeof c[1]=="string"?f=c[1]:(h=c[1],f=c[2]||""),t(f,p,h)}e.throwError=d;function l(c){var v=n.findMatchInEnum(o,c);return typeof v=="string"}e.isErrorEventName=l;function a(c,v,p){var f=v.payload;return n.actionWrapper({type:c,group:r.Group.Error,payload:{action:v,message:p,type:c,id:f&&f.id?f.id:void 0}})}function u(c,v){return a(o.PERMISSION,c,v||"Action is not permitted")}e.permissionAction=u})(J);var Y={};Object.defineProperty(Y,"__esModule",{value:!0});Y.generateUuid=void 0;function q(e){return Array.from(e).map(function(r){return("00"+r.toString(16)).slice(-2)}).join("")}function H(e){if(typeof Uint8Array=="function"&&typeof window=="object"&&window.crypto){var r=new Uint8Array(e),n=window.crypto.getRandomValues(r);if(n)return n}return Array.from(new Array(e),function(){return Math.random()*255|0})}function He(){var e=64,r=H(1),n=H(2);return r[0]&=191,n[0]&=15|e,[q(H(4)),"-",q(H(2)),"-",q(n),"-",q(r),q(H(1)),"-",q(H(6))].join("")}Y.generateUuid=He;Y.default=He;var At=b&&b.__extends||function(){var e=function(r,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(o[t]=i[t])},e(r,n)};return function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(r,n);function o(){this.constructor=r}r.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),oe=b&&b.__assign||function(){return oe=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},oe.apply(this,arguments)},Ot=b&&b.__spreadArray||function(e,r){for(var n=0,o=r.length,i=e.length;n<o;n++,i++)e[i]=r[n];return e},St=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(k,"__esModule",{value:!0});k.unsubscribeActions=k.ActionSetWithChildren=k.ActionSet=void 0;var Et=le,ye=$,ee=J,wt=G,It=St(Y),pe=F,Ke=function(){function e(r,n,o,i){var t=this;this.app=r,this.type=n,this.group=o,this.subgroups=[],this.subscriptions=[],r||ee.throwError(ee.Action.INVALID_ACTION,"Missing required `app`"),this.id=i||It.default(),this.defaultGroup=o;var s=this.set;this.set=function(){for(var d,l=[],a=0;a<arguments.length;a++)l[a]=arguments[a];return t.app.hooks?(d=t.app.hooks).run.apply(d,Ot([Et.LifecycleHook.UpdateAction,s,t],l)):s.apply(t,l)}}return e.prototype.set=function(){},Object.defineProperty(e.prototype,"component",{get:function(){return{id:this.id,subgroups:this.subgroups,type:this.type}},enumerable:!1,configurable:!0}),e.prototype.updateSubscription=function(r,n,o){var i=r.eventType,t=r.callback,s=r.component,d;return d=this.subscriptions.findIndex(function(l){return l===r}),d>=0?this.subscriptions[d].unsubscribe():d=void 0,this.group=n,this.subgroups=o,Object.assign(s,{subgroups:this.subgroups}),this.subscribe(i,t,s,d)},e.prototype.error=function(r){var n=this,o=[];return pe.forEachInEnum(ee.Action,function(i){o.push(n.subscriptions.length),n.subscribe(i,r)}),function(){var i=o.map(function(t){return n.subscriptions[t]});i.forEach(function(t){ye.removeFromCollection(n.subscriptions,t,function(s){s.unsubscribe()})})}},e.prototype.subscribe=function(r,n,o,i){var t=this,s=o||this.component,d=r.toUpperCase(),l=typeof i=="number"?n:n.bind(this),a;ee.isErrorEventName(r)?a=pe.getEventNameSpace(wt.Group.Error,r,oe(oe({},s),{type:""})):a=pe.getEventNameSpace(this.group,r,s);var u=this.app.subscribe(a,l,o?o.id:this.id),c={eventType:d,unsubscribe:u,callback:l,component:s,updateSubscribe:function(v,p){return t.updateSubscription(c,v,p)}};return typeof i=="number"&&i>=0&&i<this.subscriptions.length?this.subscriptions[i]=c:this.subscriptions.push(c),u},e.prototype.unsubscribe=function(r){return r===void 0&&(r=!1),Ae(this.subscriptions,this.defaultGroup,r),this},e}();k.ActionSet=Ke;var Tt=function(e){At(r,e);function r(){var n=e!==null&&e.apply(this,arguments)||this;return n.children=[],n}return r.prototype.unsubscribe=function(n,o){return n===void 0&&(n=!0),o===void 0&&(o=!1),Ae(this.subscriptions,this.defaultGroup,o),this.children.forEach(function(i){i instanceof r?i.unsubscribe(n,!n):i.unsubscribe(!n)}),this},r.prototype.getChild=function(n){var o=this.children.findIndex(function(i){return i.id===n});return o>=0?this.children[o]:void 0},r.prototype.getChildIndex=function(n){return this.children.findIndex(function(o){return o.id===n})},r.prototype.getChildSubscriptions=function(n,o){return this.subscriptions.filter(function(i){return i.component.id===n&&(!o||o===i.eventType)})},r.prototype.addChild=function(n,o,i){var t=this,s=n.subscriptions,d=this.getChild(n.id);return d||this.children.push(n),!s||o===n.group&&i===n.subgroups?this:(s.forEach(function(l){var a=l.updateSubscribe;a(o,i)}),Object.assign(n,{group:o,subgroups:i}),n instanceof r&&n.children.forEach(function(l){return t.addChild(l,o,i)}),this)},r.prototype.removeChild=function(n){var o=this;return ye.removeFromCollection(this.children,this.getChild(n),function(){var i=o.subscriptions.filter(function(t){return t.component.id===n});i.forEach(function(t){ye.removeFromCollection(o.subscriptions,t,function(s){s.unsubscribe()})})}),this},r.prototype.subscribeToChild=function(n,o,i){var t=this,s=i.bind(this);if(o instanceof Array)return o.forEach(function(u){return t.subscribeToChild(n,u,i)}),this;if(typeof o!="string")return this;var d=o.toUpperCase(),l=this.getChildSubscriptions(n.id,d);if(l.length>0)l.forEach(function(u){return u.updateSubscribe(t.group,n.subgroups)});else{var a={id:n.id,subgroups:n.subgroups,type:n.type};this.subscribe(d,s,a)}return this},r.prototype.getUpdatedChildActions=function(n,o){if(n.length===0){for(;o.length>0;){var i=o.pop();if(!i)break;this.removeChild(i.id)}return}for(var t=n.filter(function(l,a,u){return a===u.indexOf(l)}),s=t.map(function(l){return l.id}),d=o.filter(function(l){return s.indexOf(l.id)<0});d.length>0;){var i=d.pop();if(!i)break;this.removeChild(i.id)}return t},r}(Ke);k.ActionSetWithChildren=Tt;function Ae(e,r,n){n===void 0&&(n=!1),e.forEach(function(o){if(n){var i=o.updateSubscribe;i(r,[])}else{var t=o.unsubscribe;t()}}),n||(e.length=0)}k.unsubscribeActions=Ae;(function(e){var r=b&&b.__extends||function(){var u=function(c,v){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,f){p.__proto__=f}||function(p,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(p[h]=f[h])},u(c,v)};return function(c,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");u(c,v);function p(){this.constructor=c}c.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}}(),n=b&&b.__assign||function(){return n=Object.assign||function(u){for(var c,v=1,p=arguments.length;v<p;v++){c=arguments[v];for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(u[f]=c[f])}return u},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Button=e.update=e.clickButton=e.Style=e.Icon=e.Action=void 0;var o=F,i=k,t=G,s;(function(u){u.CLICK="CLICK",u.UPDATE="UPDATE"})(s=e.Action||(e.Action={})),function(u){u.Print="print"}(e.Icon||(e.Icon={})),function(u){u.Danger="danger"}(e.Style||(e.Style={}));function d(u,c,v){var p=c.id,f=o.getEventNameSpace(u,s.CLICK,c),h={id:p,payload:v};return o.actionWrapper({type:f,group:u,payload:h})}e.clickButton=d;function l(u,c,v){var p=c.id,f=v.label,h=o.getEventNameSpace(u,s.UPDATE,c),y=n(n({},v),{id:p,label:f});return o.actionWrapper({type:h,group:u,payload:y})}e.update=l;var a=function(u){r(c,u);function c(v,p){var f=u.call(this,v,t.ComponentType.Button,t.Group.Button)||this;return f.disabled=!1,f.loading=!1,f.plain=!1,f.set(p,!1),f}return Object.defineProperty(c.prototype,"options",{get:function(){return{disabled:this.disabled,icon:this.icon,label:this.label,style:this.style,loading:this.loading,plain:this.plain}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"payload",{get:function(){return n(n({},this.options),{id:this.id})},enumerable:!1,configurable:!0}),c.prototype.set=function(v,p){p===void 0&&(p=!0);var f=o.getMergedProps(this.options,v),h=f.label,y=f.disabled,A=f.icon,m=f.style,I=f.loading,M=f.plain;return this.label=h,this.disabled=!!y,this.icon=A,this.style=m,this.loading=!!I,this.plain=!!M,p&&this.dispatch(s.UPDATE),this},c.prototype.dispatch=function(v,p){switch(v){case s.CLICK:this.app.dispatch(d(this.group,this.component,p));break;case s.UPDATE:{var f=l(this.group,this.component,this.payload);this.app.dispatch(f);break}}return this},c}(i.ActionSet);e.Button=a})(me);Object.defineProperty(ce,"__esModule",{value:!0});ce.getSingleButton=void 0;var Mt=me;function jt(e,r,n,o){return e.addChild(r,e.group,n),e.subscribeToChild(r,Mt.Action.UPDATE,o),r.payload}ce.getSingleButton=jt;(function(e){var r=b&&b.__extends||function(){var _=function(O,P){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,E){S.__proto__=E}||function(S,E){for(var w in E)Object.prototype.hasOwnProperty.call(E,w)&&(S[w]=E[w])},_(O,P)};return function(O,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");_(O,P);function S(){this.constructor=O}O.prototype=P===null?Object.create(P):(S.prototype=P.prototype,new S)}}(),n=b&&b.__assign||function(){return n=Object.assign||function(_){for(var O,P=1,S=arguments.length;P<S;P++){O=arguments[P];for(var E in O)Object.prototype.hasOwnProperty.call(O,E)&&(_[E]=O[E])}return _},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.ModalIframe=e.ModalMessage=e.Modal=e.isMessageModal=e.isIframeModal=e.data=e.update=e.clickFooterButton=e.updateModalSize=e.closeModal=e.openModal=e.Size=e.Action=void 0;var o=ce,i=F,t=k,s=G,d=me,l;(function(_){_.OPEN="APP::MODAL::OPEN",_.CLOSE="APP::MODAL::CLOSE",_.UPDATE="APP::MODAL::UPDATE",_.UPDATE_CONTENT="APP::MODAL::CONTENT::UPDATE",_.FOOTER_BUTTON_CLICK="APP::MODAL::FOOTER::BUTTON::CLICK",_.FOOTER_BUTTON_UPDATE="APP::MODAL::FOOTER::BUTTON::UPDATE",_.UPDATE_SIZE="APP::MODAL::UPDATE_SIZE",_.DATA="APP::MODAL::DATA"})(l=e.Action||(e.Action={}));var a;(function(_){_.Small="small",_.Medium="medium",_.Large="large",_.Full="full",_.Auto="auto"})(a=e.Size||(e.Size={}));var u={group:s.Group.Modal,subgroups:["Footer"],type:s.ComponentType.Button};function c(_){return i.actionWrapper({group:s.Group.Modal,payload:_,type:l.OPEN})}e.openModal=c;function v(_){return i.actionWrapper({group:s.Group.Modal,payload:_,type:l.CLOSE})}e.closeModal=v;function p(_){return i.actionWrapper({group:s.Group.Modal,payload:_,type:l.UPDATE_SIZE})}e.updateModalSize=p;function f(_,O){var P=n({id:_},u);return d.clickButton(s.Group.Modal,P,O)}e.clickFooterButton=f;function h(_){return i.actionWrapper({payload:_,group:s.Group.Modal,type:l.UPDATE})}e.update=h;function y(_){return i.actionWrapper({payload:_,group:s.Group.Modal,type:l.DATA})}e.data=y;function A(_){return typeof _.url=="string"||typeof _.path=="string"}e.isIframeModal=A;function m(_){return typeof _.message=="string"}e.isMessageModal=m;var I=function(_){r(O,_);function O(){var P=_!==null&&_.apply(this,arguments)||this;return P.size=a.Small,P}return Object.defineProperty(O.prototype,"footer",{get:function(){if(!(!this.footerPrimary&&!this.footerSecondary))return{buttons:{primary:this.footerPrimary,secondary:this.footerSecondary}}},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"footerOptions",{get:function(){if(!(!this.footerPrimaryOptions&&!this.footerSecondaryOptions))return{buttons:{primary:this.footerPrimaryOptions,secondary:this.footerSecondaryOptions}}},enumerable:!1,configurable:!0}),O.prototype.close=function(){this.app.dispatch(v({id:this.id}))},O.prototype.setFooterPrimaryButton=function(P,S){var E=this,w=u.subgroups;this.footerPrimaryOptions=this.getChildButton(P,this.footerPrimaryOptions),this.footerPrimary=this.footerPrimaryOptions?o.getSingleButton(this,this.footerPrimaryOptions,w,function(R){E.updatePrimaryFooterButton(R,S)}):void 0},O.prototype.setFooterSecondaryButtons=function(P,S){var E=this,w=u.subgroups,R=P||[],C=this.footerOptions&&this.footerOptions.buttons.secondary||[];this.footerSecondaryOptions=this.getUpdatedChildActions(R,C),this.footerSecondary=this.footerSecondaryOptions?this.footerSecondaryOptions.map(function(X){return o.getSingleButton(E,X,w,function(Q){E.updateSecondaryFooterButton(Q,S)})}):void 0},O.prototype.getChildButton=function(P,S){var E=P?[P]:[],w=S?[S]:[],R=this.getUpdatedChildActions(E,w);return R?R[0]:void 0},O.prototype.updatePrimaryFooterButton=function(P,S){!this.footer||!this.footer.buttons.primary||i.updateActionFromPayload(this.footer.buttons.primary,P)&&S()},O.prototype.updateSecondaryFooterButton=function(P,S){if(!(!this.footer||!this.footer.buttons||!this.footer.buttons.secondary)){for(var E,w=0,R=this.footer.buttons.secondary;w<R.length;w++){var C=R[w];if(E=i.updateActionFromPayload(C,P),E)break}E&&S()}},O}(t.ActionSetWithChildren);e.Modal=I;var M=function(_){r(O,_);function O(P,S){var E=_.call(this,P,s.Group.Modal,s.Group.Modal)||this;return E.set(S,!1),E}return Object.defineProperty(O.prototype,"payload",{get:function(){return n(n({},this.options),{footer:this.footer,id:this.id})},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"options",{get:function(){return{footer:this.footerOptions,message:this.message,size:this.size,title:this.title}},enumerable:!1,configurable:!0}),O.prototype.set=function(P,S){var E=this;S===void 0&&(S=!0);var w=i.getMergedProps(this.options,P),R=w.title,C=w.footer,X=w.message,Q=w.size;return this.title=R,this.message=X,this.size=Q,this.setFooterPrimaryButton(C?C.buttons.primary:void 0,function(){E.dispatch(l.UPDATE)}),this.setFooterSecondaryButtons(C?C.buttons.secondary:void 0,function(){E.dispatch(l.UPDATE)}),S&&this.dispatch(l.UPDATE),this},O.prototype.dispatch=function(P){switch(P){case l.OPEN:this.app.dispatch(c(this.payload));break;case l.CLOSE:this.close();break;case l.UPDATE:this.app.dispatch(h(this.payload));break}return this},O}(I);e.ModalMessage=M;var W=function(_){r(O,_);function O(P,S){var E=_.call(this,P,s.Group.Modal,s.Group.Modal)||this;return E.set(S,!1),E}return Object.defineProperty(O.prototype,"payload",{get:function(){return n(n({},this.options),{footer:this.footer,id:this.id})},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"options",{get:function(){return{footer:this.footerOptions,path:this.path,size:this.size,title:this.title,url:this.url,loading:this.loading}},enumerable:!1,configurable:!0}),O.prototype.set=function(P,S){var E=this;S===void 0&&(S=!0);var w=i.getMergedProps(this.options,P),R=w.title,C=w.footer,X=w.path,Q=w.url,lt=w.size,dt=w.loading;return this.title=R,this.url=Q,this.path=X,this.size=lt,this.loading=dt,this.setFooterPrimaryButton(C?C.buttons.primary:void 0,function(){E.dispatch(l.UPDATE)}),this.setFooterSecondaryButtons(C?C.buttons.secondary:void 0,function(){E.dispatch(l.UPDATE)}),S&&this.dispatch(l.UPDATE),this},O.prototype.dispatch=function(P,S){switch(P){case l.OPEN:this.app.dispatch(c(this.payload));break;case l.CLOSE:this.close();break;case l.UPDATE:this.app.dispatch(h(this.payload));break;case l.DATA:this.app.dispatch(y(S||{}));break}return this},O}(I);e.ModalIframe=W})(ge);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.create=e.Modal=e.isMessageModal=e.data=e.update=e.clickFooterButton=e.updateModalSize=e.closeModal=e.openModal=e.Size=e.Action=e.isIframeModal=e.ModalMessage=e.ModalIframe=void 0;var r=ge;Object.defineProperty(e,"ModalIframe",{enumerable:!0,get:function(){return r.ModalIframe}}),Object.defineProperty(e,"ModalMessage",{enumerable:!0,get:function(){return r.ModalMessage}}),Object.defineProperty(e,"isIframeModal",{enumerable:!0,get:function(){return r.isIframeModal}});var n=ge;Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return n.Action}}),Object.defineProperty(e,"Size",{enumerable:!0,get:function(){return n.Size}}),Object.defineProperty(e,"openModal",{enumerable:!0,get:function(){return n.openModal}}),Object.defineProperty(e,"closeModal",{enumerable:!0,get:function(){return n.closeModal}}),Object.defineProperty(e,"updateModalSize",{enumerable:!0,get:function(){return n.updateModalSize}}),Object.defineProperty(e,"clickFooterButton",{enumerable:!0,get:function(){return n.clickFooterButton}}),Object.defineProperty(e,"update",{enumerable:!0,get:function(){return n.update}}),Object.defineProperty(e,"data",{enumerable:!0,get:function(){return n.data}}),Object.defineProperty(e,"isMessageModal",{enumerable:!0,get:function(){return n.isMessageModal}}),Object.defineProperty(e,"Modal",{enumerable:!0,get:function(){return n.Modal}});var o=function(i,t){return r.isIframeModal(t)?new r.ModalIframe(i,t):new r.ModalMessage(i,t)};e.create=o})(ze);var Ye={},Xe={},U={};Object.defineProperty(U,"__esModule",{value:!0});U.isPermitted=U.getPermissionKey=U.isPerformanceOrWebVitalsAction=U.isAppMessage=U.isAppBridgeAction=void 0;var Rt=le,ne=z,Ct=F;function Nt(e){return e instanceof Object&&Object.prototype.hasOwnProperty.call(e,"type")&&e.type.toString().startsWith(ne.PREFIX)}U.isAppBridgeAction=Nt;function Dt(e){if(typeof e!="object"||!e.data||typeof e.data!="object")return!1;var r=e.data;return Object.prototype.hasOwnProperty.call(r,"type")&&Ct.findMatchInEnum(Rt.MessageType,r.type)!==void 0}U.isAppMessage=Dt;function Lt(e){var r=e.type;return r.match(/^APP::(PERFORMANCE|WEB_VITALS)::/)}U.isPerformanceOrWebVitalsAction=Lt;function Qe(e){return e.replace(new RegExp("^"+ne.PREFIX+ne.SEPARATOR+"\\w+"+ne.SEPARATOR),"")}U.getPermissionKey=Qe;function Ut(e,r,n){var o=r.group,i=r.type;if(!o||!Object.prototype.hasOwnProperty.call(e,o))return!1;var t=e[o];if(!t)return!1;var s=Qe(i);return t[s]?t[s][n]===!0:!1}U.isPermitted=Ut;var ae={};(function(e){var r,n;Object.defineProperty(e,"__esModule",{value:!0}),e.isUnframed=e.isClient=e.isServer=void 0,e.isServer=typeof window>"u",e.isClient=!e.isServer,e.isUnframed=e.isClient&&((n=(r=window.navigator)===null||r===void 0?void 0:r.userAgent)===null||n===void 0?void 0:n.indexOf("Unframed"))>0})(ae);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createTransportListener=e.fromWindow=e.fromFrame=e.Context=void 0;var r=J,n=U,o=le,i=$,t=ae;(function(u){u.Modal="Modal",u.Main="Main"})(e.Context||(e.Context={}));function s(u,c,v){var p=[],f=u.host,h=u.window;if(!f)throw r.fromAction("App frame is undefined",r.AppActionType.WINDOW_UNDEFINED);return t.isUnframed&&window.MobileWebView&&Object.assign(window.MobileWebView,{postMessageToIframe:function(y,A){h==null||h.postMessage(y,A),a(y)&&f.postMessage(JSON.stringify(y.payload),location.origin)},updateIframeUrl:function(y){var A=window.location,m=(u.window||{}).location;try{var I=new URL(y).origin;I===c&&m?m.replace(y):A.href=y}catch{}}}),f.addEventListener("message",function(y){if(!(y.source===f||!n.isAppMessage(y))){if(y.origin!==c){var A="Message origin '"+y.origin+"' does not match app origin '"+c+"'.",m=r.invalidOriginAction(A),I={type:"dispatch",payload:m};h==null||h.postMessage(I,y.origin);return}if(t.isUnframed&&window.MobileWebView){var m=JSON.stringify({id:"unframed://fromClient",origin:c,data:y.data});window.MobileWebView.postMessage(m);return}for(var M=0,W=p;M<W.length;M++){var _=W[M];_(y)}}}),{context:v,localOrigin:c,frameWindow:h,hostFrame:f,dispatch:function(y){h==null||h.postMessage(y,c)},subscribe:function(y){return i.addAndRemoveFromCollection(p,y)}}}e.fromFrame=s;function d(u,c){var v=[];return typeof window!==void 0&&window.addEventListener("message",function(p){if(!(window===u&&!t.isUnframed||p.source!==u||!(n.isAppBridgeAction(p.data.payload)||n.isAppMessage(p))))for(var f=0,h=v;f<h.length;f++){var y=h[f];y(p)}}),{localOrigin:c,hostFrame:u,dispatch:function(p){var f;if(!((f=p.source)===null||f===void 0)&&f.host){if(t.isUnframed&&window&&window.MobileWebView){var h=JSON.stringify({id:"unframed://fromClient",origin:c,data:p});window.MobileWebView.postMessage(h);return}var y=new URL("https://"+p.source.host).origin;u.postMessage(p,y)}},subscribe:function(p){return i.addAndRemoveFromCollection(v,p)}}}e.fromWindow=d;function l(){var u=[],c={};function v(p){function f(){if(arguments.length<2)return i.addAndRemoveFromCollection(u,{callback:arguments[0]});var h=Array.from(arguments),y=h[0],A=h[1],m=h[2],I={callback:A,id:m},M={type:y,id:m};return Object.prototype.hasOwnProperty.call(c,y)||(c[y]=[]),p&&p(o.MessageType.Subscribe,M),i.addAndRemoveFromCollection(c[y],I,function(){p&&p(o.MessageType.Unsubscribe,M)})}return f}return{createSubscribeHandler:v,handleMessage:function(p){u.forEach(function(f){return f.callback(p)})},handleActionDispatch:function(p){var f=p.type,h=p.payload,y=!1;if(Object.prototype.hasOwnProperty.call(c,f))for(var A=0,m=c[f];A<m.length;A++){var I=m[A],M=I.id,W=I.callback,_=h&&h.id===M;(_||!M)&&(W(h),y=!0)}return y}}}e.createTransportListener=l;function a(u){return u!==null&&typeof u=="object"&&!Array.isArray(u)&&u.type==="dispatch"&&typeof u.payload=="object"}})(Xe);(function(e){var r=b&&b.__createBinding||(Object.create?function(o,i,t,s){s===void 0&&(s=t),Object.defineProperty(o,s,{enumerable:!0,get:function(){return i[t]}})}:function(o,i,t,s){s===void 0&&(s=t),o[s]=i[t]}),n=b&&b.__exportStar||function(o,i){for(var t in o)t!=="default"&&!Object.prototype.hasOwnProperty.call(i,t)&&r(i,o,t)};Object.defineProperty(e,"__esModule",{value:!0}),n(Xe,e)})(Ye);var D={},Je={};(function(e){var r={};Object.defineProperty(e,"__esModule",{value:!0}),e.isDevelopmentClient=e.isProduction=e.isDevelopment=e.isUnframed=e.isServer=e.isClient=void 0;var n=ae,o=ae;Object.defineProperty(e,"isClient",{enumerable:!0,get:function(){return o.isClient}}),Object.defineProperty(e,"isServer",{enumerable:!0,get:function(){return o.isServer}}),Object.defineProperty(e,"isUnframed",{enumerable:!0,get:function(){return o.isUnframed}}),e.isDevelopment=typeof process<"u"&&r&&!1,e.isProduction=!e.isDevelopment,e.isDevelopmentClient=e.isDevelopment&&n.isClient})(Je);Object.defineProperty(D,"__esModule",{value:!0});D.isShopifyPing=D.isShopifyPOS=D.isShopifyMobile=D.isShopifyEmbedded=D.isMobile=void 0;var je=Je;function Bt(){return Ze()||xe()||et()}D.isMobile=Bt;function kt(){return je.isClient&&window.top!==window.self||je.isUnframed}D.isShopifyEmbedded=kt;function Ze(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify Mobile")>=0}D.isShopifyMobile=Ze;function xe(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify POS")>=0}D.isShopifyPOS=xe;function et(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify Ping")>=0}D.isShopifyPing=et;var Ft=b&&b.__awaiter||function(e,r,n,o){function i(t){return t instanceof n?t:new n(function(s){s(t)})}return new(n||(n=Promise))(function(t,s){function d(u){try{a(o.next(u))}catch(c){s(c)}}function l(u){try{a(o.throw(u))}catch(c){s(c)}}function a(u){u.done?t(u.value):i(u.value).then(d,l)}a((o=o.apply(e,r||[])).next())})},Gt=b&&b.__generator||function(e,r){var n={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},o,i,t,s;return s={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function d(a){return function(u){return l([a,u])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,i&&(t=a[0]&2?i.return:a[0]?i.throw||((t=i.return)&&t.call(i),0):i.next)&&!(t=t.call(i,a[1])).done)return t;switch(i=0,t&&(a=[a[0]&2,t.value]),a[0]){case 0:case 1:t=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(t=n.trys,!(t=t.length>0&&t[t.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!t||a[1]>t[0]&&a[1]<t[3])){n.label=a[1];break}if(a[0]===6&&n.label<t[1]){n.label=t[1],t=a;break}if(t&&n.label<t[2]){n.label=t[2],n.ops.push(a);break}t[2]&&n.ops.pop(),n.trys.pop();continue}a=r.call(e,n)}catch(u){a=[6,u],i=0}finally{o=t=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(K,"__esModule",{value:!0});K.createMutationObserver=K.setupModalAutoSizing=void 0;var Wt=ze,Vt=Ye,zt=D,ve="app-bridge-utils-modal-auto-size",te=$t();function $t(){if(typeof document>"u")return null;var e=document.createElement("style");return e.type="text/css",e.innerHTML="."+ve+" { overflow: hidden; height: auto; min-height: auto; }",e}function qt(e,r){if(!te)return function(){};var n=document.getElementsByTagName("head")[0],o=document.body.classList;n.appendChild(te),o.add(ve);var i=tt(e,r);return function(){o.remove(ve),n.contains(te)&&n.removeChild(te),i&&i.disconnect()}}function Ht(e){return Ft(this,void 0,void 0,function(){function r(){o&&(o(),o=void 0)}function n(i){var t=i.context,s=i.modal.id;return zt.isMobile()||t!==Vt.Context.Modal?(r(),r):(o||(o=qt(e,s)),r)}var o;return Gt(this,function(i){switch(i.label){case 0:return[4,e.getState().then(n)];case 1:return i.sent(),[2,r]}})})}K.setupModalAutoSizing=Ht;function tt(e,r){if(typeof document>"u")return;var n=-1,o,i={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},t=new MutationObserver(s);t.observe(document,i),d();function s(){o&&window.clearTimeout(o),o=window.setTimeout(d,16)}function d(){var l=document.body.scrollHeight;l!==n&&(n=l,e.dispatch(Wt.updateModalSize({id:r,height:String(l)})))}return t}K.createMutationObserver=tt;var nt={},Z={},rt={},it={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.respond=e.request=e.Action=void 0;var r=F,n=G,o;(function(s){s.REQUEST="APP::SESSION_TOKEN::REQUEST",s.RESPOND="APP::SESSION_TOKEN::RESPOND"})(o=e.Action||(e.Action={}));function i(){return r.actionWrapper({group:n.Group.SessionToken,type:o.REQUEST})}e.request=i;function t(s){return r.actionWrapper({payload:s,group:n.Group.SessionToken,type:o.RESPOND})}e.respond=t})(it);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.respond=e.request=e.Action=void 0;var r=it;Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return r.Action}}),Object.defineProperty(e,"request",{enumerable:!0,get:function(){return r.request}}),Object.defineProperty(e,"respond",{enumerable:!0,get:function(){return r.respond}})})(rt);var Oe={},Se={};const Kt="@shopify/app-bridge",Yt="3.7.10",Xt={name:Kt,version:Yt};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getPackageName=e.getVersion=e.getMergedProps=e.updateActionFromPayload=e.isValidOptionalString=e.isValidOptionalNumber=e.NonSnakeCaseGroup=e.getEventNameSpace=e.forEachInEnum=e.findMatchInEnum=e.actionWrapper=void 0;var r=F;Object.defineProperty(e,"actionWrapper",{enumerable:!0,get:function(){return r.actionWrapper}}),Object.defineProperty(e,"findMatchInEnum",{enumerable:!0,get:function(){return r.findMatchInEnum}}),Object.defineProperty(e,"forEachInEnum",{enumerable:!0,get:function(){return r.forEachInEnum}}),Object.defineProperty(e,"getEventNameSpace",{enumerable:!0,get:function(){return r.getEventNameSpace}}),Object.defineProperty(e,"NonSnakeCaseGroup",{enumerable:!0,get:function(){return r.NonSnakeCaseGroup}}),Object.defineProperty(e,"isValidOptionalNumber",{enumerable:!0,get:function(){return r.isValidOptionalNumber}}),Object.defineProperty(e,"isValidOptionalString",{enumerable:!0,get:function(){return r.isValidOptionalString}}),Object.defineProperty(e,"updateActionFromPayload",{enumerable:!0,get:function(){return r.updateActionFromPayload}}),Object.defineProperty(e,"getMergedProps",{enumerable:!0,get:function(){return r.getMergedProps}});var n=Xt;function o(){return n.version}e.getVersion=o;function i(){return n.name}e.getPackageName=i})(Se);var Ee={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ComponentType=e.Group=void 0;var r=G;Object.defineProperty(e,"Group",{enumerable:!0,get:function(){return r.Group}}),Object.defineProperty(e,"ComponentType",{enumerable:!0,get:function(){return r.ComponentType}})})(Ee);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.networkAction=e.persistenceAction=e.unsupportedOperationAction=e.unexpectedAction=e.invalidAction=e.invalidActionType=e.invalidPayload=e.Message=e.fromAction=e.Action=e.permissionAction=e.isErrorEventName=e.throwError=e.invalidOriginAction=e.AppBridgeError=e.AppActionType=void 0;var r=J;Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return r.Action}}),Object.defineProperty(e,"fromAction",{enumerable:!0,get:function(){return r.fromAction}});var n=Se,o=Ee,i=J;Object.defineProperty(e,"AppActionType",{enumerable:!0,get:function(){return i.AppActionType}}),Object.defineProperty(e,"AppBridgeError",{enumerable:!0,get:function(){return i.AppBridgeError}}),Object.defineProperty(e,"invalidOriginAction",{enumerable:!0,get:function(){return i.invalidOriginAction}}),Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return i.throwError}}),Object.defineProperty(e,"isErrorEventName",{enumerable:!0,get:function(){return i.isErrorEventName}}),Object.defineProperty(e,"permissionAction",{enumerable:!0,get:function(){return i.permissionAction}});function t(p,f,h){var y=f.payload;return n.actionWrapper({type:p,group:o.Group.Error,payload:{action:f,message:h,type:p,id:y&&y.id?y.id:void 0}})}(function(p){p.MISSING_PAYLOAD="Missing payload",p.INVALID_PAYLOAD_ID="Id in payload is missing or invalid"})(e.Message||(e.Message={}));function s(p,f){return t(r.Action.INVALID_PAYLOAD,p,f||"The action's payload is missing required properties or has invalid properties")}e.invalidPayload=s;function d(p,f){return n.actionWrapper({group:o.Group.Error,payload:{action:p,message:f||"The action type is invalid or unsupported",type:r.Action.INVALID_ACTION_TYPE},type:r.Action.INVALID_ACTION_TYPE})}e.invalidActionType=d;function l(p,f){return n.actionWrapper({group:o.Group.Error,payload:{action:p,message:f||"The action's has missing/invalid values for `group`, `type` or `version`",type:r.Action.INVALID_ACTION},type:r.Action.INVALID_ACTION})}e.invalidAction=l;function a(p,f){return n.actionWrapper({group:o.Group.Error,payload:{action:p,message:f||"Action cannot be called at this time",type:r.Action.UNEXPECTED_ACTION},type:r.Action.UNEXPECTED_ACTION})}e.unexpectedAction=a;function u(p,f){return t(r.Action.UNSUPPORTED_OPERATION,p,f||"The action type is unsupported")}e.unsupportedOperationAction=u;function c(p,f){return t(r.Action.PERSISTENCE,p,f||"Action cannot be persisted on server")}e.persistenceAction=c;function v(p,f){return t(r.Action.NETWORK,p,f||"Network error")}e.networkAction=v})(Oe);var Qt=b&&b.__createBinding||(Object.create?function(e,r,n,o){o===void 0&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return r[n]}})}:function(e,r,n,o){o===void 0&&(o=n),e[o]=r[n]}),Jt=b&&b.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Zt=b&&b.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&Qt(r,e,n);return Jt(r,e),r},xt=b&&b.__awaiter||function(e,r,n,o){function i(t){return t instanceof n?t:new n(function(s){s(t)})}return new(n||(n=Promise))(function(t,s){function d(u){try{a(o.next(u))}catch(c){s(c)}}function l(u){try{a(o.throw(u))}catch(c){s(c)}}function a(u){u.done?t(u.value):i(u.value).then(d,l)}a((o=o.apply(e,r||[])).next())})},en=b&&b.__generator||function(e,r){var n={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},o,i,t,s;return s={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function d(a){return function(u){return l([a,u])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,i&&(t=a[0]&2?i.return:a[0]?i.throw||((t=i.return)&&t.call(i),0):i.next)&&!(t=t.call(i,a[1])).done)return t;switch(i=0,t&&(a=[a[0]&2,t.value]),a[0]){case 0:case 1:t=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(t=n.trys,!(t=t.length>0&&t[t.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!t||a[1]>t[0]&&a[1]<t[3])){n.label=a[1];break}if(a[0]===6&&n.label<t[1]){n.label=t[1],t=a;break}if(t&&n.label<t[2]){n.label=t[2],n.ops.push(a);break}t[2]&&n.ops.pop(),n.trys.pop();continue}a=r.call(e,n)}catch(u){a=[6,u],i=0}finally{o=t=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(Z,"__esModule",{value:!0});Z.getSessionToken=void 0;var Re=Zt(rt),Ce=Oe;function tn(e){return xt(this,void 0,void 0,function(){return en(this,function(r){return[2,new Promise(function(n,o){var i=e.subscribe(Re.Action.RESPOND,function(t){var s=t.sessionToken;s?n(s):o(Ce.fromAction("Failed to retrieve a session token",Ce.Action.FAILED_AUTHENTICATION)),i()});e.dispatch(Re.request())})]})})}Z.getSessionToken=tn;var de={},se=b&&b.__assign||function(){return se=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},se.apply(this,arguments)},nn=b&&b.__awaiter||function(e,r,n,o){function i(t){return t instanceof n?t:new n(function(s){s(t)})}return new(n||(n=Promise))(function(t,s){function d(u){try{a(o.next(u))}catch(c){s(c)}}function l(u){try{a(o.throw(u))}catch(c){s(c)}}function a(u){u.done?t(u.value):i(u.value).then(d,l)}a((o=o.apply(e,r||[])).next())})},rn=b&&b.__generator||function(e,r){var n={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},o,i,t,s;return s={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function d(a){return function(u){return l([a,u])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,i&&(t=a[0]&2?i.return:a[0]?i.throw||((t=i.return)&&t.call(i),0):i.next)&&!(t=t.call(i,a[1])).done)return t;switch(i=0,t&&(a=[a[0]&2,t.value]),a[0]){case 0:case 1:t=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(t=n.trys,!(t=t.length>0&&t[t.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!t||a[1]>t[0]&&a[1]<t[3])){n.label=a[1];break}if(a[0]===6&&n.label<t[1]){n.label=t[1],t=a;break}if(t&&n.label<t[2]){n.label=t[2],n.ops.push(a);break}t[2]&&n.ops.pop(),n.trys.pop();continue}a=r.call(e,n)}catch(u){a=[6,u],i=0}finally{o=t=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(de,"__esModule",{value:!0});de.authenticatedFetch=void 0;var on=Z;function an(e,r){var n=this;return r===void 0&&(r=fetch),function(o,i){return i===void 0&&(i={}),nn(n,void 0,void 0,function(){var t,s,d;return rn(this,function(l){switch(l.label){case 0:return[4,on.getSessionToken(e)];case 1:return t=l.sent(),s=new Headers(i.headers),s.append("Authorization","Bearer "+t),s.append("X-Requested-With","XMLHttpRequest"),d={},s.forEach(function(a,u){d[u]=a}),[2,r(o,se(se({},i),{headers:d}))]}})})}}de.authenticatedFetch=an;(function(e){var r=b&&b.__createBinding||(Object.create?function(o,i,t,s){s===void 0&&(s=t),Object.defineProperty(o,s,{enumerable:!0,get:function(){return i[t]}})}:function(o,i,t,s){s===void 0&&(s=t),o[s]=i[t]}),n=b&&b.__exportStar||function(o,i){for(var t in o)t!=="default"&&!Object.prototype.hasOwnProperty.call(i,t)&&r(i,o,t)};Object.defineProperty(e,"__esModule",{value:!0}),n(Z,e),n(de,e)})(nt);var ot={},x={},at={},be={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.respond=e.Action=void 0;var r=F,n=G,o;(function(t){t.REQUEST="APP::AUTH_CODE::REQUEST",t.RESPOND="APP::AUTH_CODE::RESPOND"})(o=e.Action||(e.Action={}));function i(t){return r.actionWrapper({payload:t,group:n.Group.AuthCode,type:o.RESPOND})}e.respond=i})(be);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.request=e.Action=e.respond=void 0;var r=be;Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return r.Action}});var n=Se,o=Ee,i=be;Object.defineProperty(e,"respond",{enumerable:!0,get:function(){return i.respond}});function t(s){return n.actionWrapper({group:o.Group.AuthCode,type:r.Action.REQUEST,payload:{id:s}})}e.request=t})(at);var st={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.generateUuid=void 0;var r=Y;Object.defineProperty(e,"generateUuid",{enumerable:!0,get:function(){return r.generateUuid}}),e.default=r.generateUuid})(st);var sn=b&&b.__createBinding||(Object.create?function(e,r,n,o){o===void 0&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return r[n]}})}:function(e,r,n,o){o===void 0&&(o=n),e[o]=r[n]}),un=b&&b.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),cn=b&&b.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&sn(r,e,n);return un(r,e),r},ln=b&&b.__awaiter||function(e,r,n,o){function i(t){return t instanceof n?t:new n(function(s){s(t)})}return new(n||(n=Promise))(function(t,s){function d(u){try{a(o.next(u))}catch(c){s(c)}}function l(u){try{a(o.throw(u))}catch(c){s(c)}}function a(u){u.done?t(u.value):i(u.value).then(d,l)}a((o=o.apply(e,r||[])).next())})},dn=b&&b.__generator||function(e,r){var n={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},o,i,t,s;return s={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function d(a){return function(u){return l([a,u])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,i&&(t=a[0]&2?i.return:a[0]?i.throw||((t=i.return)&&t.call(i),0):i.next)&&!(t=t.call(i,a[1])).done)return t;switch(i=0,t&&(a=[a[0]&2,t.value]),a[0]){case 0:case 1:t=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(t=n.trys,!(t=t.length>0&&t[t.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!t||a[1]>t[0]&&a[1]<t[3])){n.label=a[1];break}if(a[0]===6&&n.label<t[1]){n.label=t[1],t=a;break}if(t&&n.label<t[2]){n.label=t[2],n.ops.push(a);break}t[2]&&n.ops.pop(),n.trys.pop();continue}a=r.call(e,n)}catch(u){a=[6,u],i=0}finally{o=t=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},fn=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(x,"__esModule",{value:!0});x.getAuthorizationCodePayload=void 0;var Ne=cn(at),De=Oe,pn=fn(st);function hn(e){return ln(this,void 0,void 0,function(){return dn(this,function(r){return[2,new Promise(function(n,o){var i=pn.default(),t=e.subscribe(Ne.Action.RESPOND,function(s){switch(s==null?void 0:s.status){case"needsExchange":n(s);break;default:o(De.fromAction("Failed to retrieve an authorization code",De.Action.FAILED_AUTHENTICATION))}t()},i);e.dispatch(Ne.request(i))})]})})}x.getAuthorizationCodePayload=hn;var fe={},gn=b&&b.__awaiter||function(e,r,n,o){function i(t){return t instanceof n?t:new n(function(s){s(t)})}return new(n||(n=Promise))(function(t,s){function d(u){try{a(o.next(u))}catch(c){s(c)}}function l(u){try{a(o.throw(u))}catch(c){s(c)}}function a(u){u.done?t(u.value):i(u.value).then(d,l)}a((o=o.apply(e,r||[])).next())})},yn=b&&b.__generator||function(e,r){var n={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},o,i,t,s;return s={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function d(a){return function(u){return l([a,u])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,i&&(t=a[0]&2?i.return:a[0]?i.throw||((t=i.return)&&t.call(i),0):i.next)&&!(t=t.call(i,a[1])).done)return t;switch(i=0,t&&(a=[a[0]&2,t.value]),a[0]){case 0:case 1:t=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(t=n.trys,!(t=t.length>0&&t[t.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!t||a[1]>t[0]&&a[1]<t[3])){n.label=a[1];break}if(a[0]===6&&n.label<t[1]){n.label=t[1],t=a;break}if(t&&n.label<t[2]){n.label=t[2],n.ops.push(a);break}t[2]&&n.ops.pop(),n.trys.pop();continue}a=r.call(e,n)}catch(u){a=[6,u],i=0}finally{o=t=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(fe,"__esModule",{value:!0});fe.userAuthorizedFetch=void 0;var vn=x,bn="auth/shopify/callback";function _n(e){var r=e.headers.get("X-Shopify-API-Request-Failure-Unauthorized");return r?r.toLowerCase()==="true":!1}function mn(e){var r=this,n=e.app,o=e.callbackUri,i=o===void 0?bn:o,t=e.isAuthorizationCodeRequired,s=t===void 0?_n:t,d=e.fetchOperation;return function(l,a){return gn(r,void 0,void 0,function(){var u,c,v,p,f,h,y,A;return yn(this,function(m){switch(m.label){case 0:return[4,d(l,a)];case 1:return u=m.sent(),s(u)?[4,vn.getAuthorizationCodePayload(n)]:[2,u];case 2:return c=m.sent(),v=c.code,p=c.hmac,f=c.shop,h=c.timestamp,y=encodeURI("https://"+window.location.hostname+"/"+i+"?code="+v+"&hmac="+p+"&shop="+f+"&timestamp="+h),[4,d(y,{})];case 3:if(A=m.sent(),!A.ok)throw new Error("Failed to authorize request.");return[2,d(l,a)]}})})}}fe.userAuthorizedFetch=mn;(function(e){var r=b&&b.__createBinding||(Object.create?function(o,i,t,s){s===void 0&&(s=t),Object.defineProperty(o,s,{enumerable:!0,get:function(){return i[t]}})}:function(o,i,t,s){s===void 0&&(s=t),o[s]=i[t]}),n=b&&b.__exportStar||function(o,i){for(var t in o)t!=="default"&&!Object.prototype.hasOwnProperty.call(i,t)&&r(i,o,t)};Object.defineProperty(e,"__esModule",{value:!0}),n(x,e),n(fe,e)})(ot);(function(e){var r=b&&b.__createBinding||(Object.create?function(o,i,t,s){s===void 0&&(s=t),Object.defineProperty(o,s,{enumerable:!0,get:function(){return i[t]}})}:function(o,i,t,s){s===void 0&&(s=t),o[s]=i[t]}),n=b&&b.__exportStar||function(o,i){for(var t in o)t!=="default"&&!Object.prototype.hasOwnProperty.call(i,t)&&r(i,o,t)};Object.defineProperty(e,"__esModule",{value:!0}),n(K,e),n(D,e),n(nt,e),n(ot,e)})(Ve);(function(e){var r=b&&b.__createBinding||(Object.create?function(o,i,t,s){s===void 0&&(s=t),Object.defineProperty(o,s,{enumerable:!0,get:function(){return i[t]}})}:function(o,i,t,s){s===void 0&&(s=t),o[s]=i[t]}),n=b&&b.__exportStar||function(o,i){for(var t in o)t!=="default"&&!Object.prototype.hasOwnProperty.call(i,t)&&r(i,o,t)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ve,e)})(We);const Le=window.__SHOPIFY_APP_BRIDGE__;function ut(){const e=new URLSearchParams(window.location.search),r=e.get("shop")||void 0,n=e.get("id_token")||void 0;return async function(i,{method:t="GET",params:s,body:d,headers:l}={}){const a=new URL(i,window.location.origin),u=new URLSearchParams(s||{}),c=/\/shop\/[^/?]+/.test(a.pathname),v=a.searchParams.has("shop")||u.has("shop");!c&&!v&&r&&u.set("shop",r),[...u.keys()].length&&(a.search=(a.search?a.search+"&":"?")+u.toString());const p={...l};if(n&&(p.Authorization=`Bearer ${n}`),t!=="GET"&&!p["Content-Type"]&&(p["Content-Type"]="application/json"),Le&&!n)try{const y=await We.getSessionToken(Le);p.Authorization=`Bearer ${y}`}catch(y){console.warn("[API] Failed to get session token:",y)}const f=await fetch(a.toString(),{method:t,headers:p,body:t!=="GET"&&d?JSON.stringify(d):void 0});if(!f.ok){let y;if((f.headers.get("content-type")||"").includes("application/json"))try{y=await f.json()}catch{y={error:await f.text().catch(()=>f.statusText)}}else y={error:await f.text().catch(()=>f.statusText)};if(f.status===402&&y){const I=new Error(y.error||y.message||"Payment Required");throw I.status=402,Object.assign(I,y),I}const m=new Error(y.error||y.message||f.statusText);throw m.status=f.status,m}return(f.headers.get("content-type")||"").includes("application/json")?f.json():f.text()}}async function Pn(e,r={}){return ut()(e,r)}async function An(e,r,n={}){return ut()(e,{method:"POST",body:r,...n})}const On=(e,r="")=>{try{return new URLSearchParams(window.location.search).get(e)||r}catch{return r}};function Sn(){const e=On("shop","");return{api:T.useMemo(()=>async(n,o={})=>{const i=new URL(n,window.location.origin);return!i.searchParams.has("shop")&&e&&i.searchParams.set("shop",e),o.method==="POST"||o.body?An(i.pathname+i.search,o.body||{},o):Pn(i.pathname+i.search,o)},[e]),shop:e}}function En(e=!0){return e&&console.log("[SFETCH] Creating session fetch for App Bridge v4"),async(r,n={})=>{console.log("[SFETCH] Fetching:",r,n);const{method:o="GET",headers:i={},body:t,responseType:s,...d}=n,l={method:o,headers:{"Content-Type":"application/json",...i},credentials:"include",body:t?typeof t=="string"?t:JSON.stringify(t):void 0},a=await fetch(r,l);console.log("[SFETCH] Response:",a.status,a.statusText);let u;if(s==="text")u=await a.text();else{const c=await a.text();try{u=c?JSON.parse(c):null}catch{u={error:(c==null?void 0:c.slice(0,500))||"Non-JSON response"}}}if(!a.ok){if(a.status===402&&u){const p=new Error(u.error||u.message||"Payment Required");throw p.status=402,Object.assign(p,u),p}const c=(u==null?void 0:u.error)||(u==null?void 0:u.message)||`HTTP ${a.status}`,v=new Error(c);throw v.status=a.status,v}return u}}const he=["en","de","es","fr"],Ue={en:"🇬🇧",de:"🇩🇪",es:"🇪🇸",fr:"🇫🇷"},Be={en:"English",de:"Deutsch",es:"Español",fr:"Français"};function wn({lang:e="en",setLang:r,t:n}){const[o,i]=T.useState(!1);T.useEffect(()=>{if(!he.includes(e)){try{localStorage.setItem("app_lang","en")}catch{}typeof r=="function"&&r("en")}},[e,r]);const t=he.includes(e)?e:"en",s=g.jsx(gt,{onClick:()=>i(l=>!l),disclosure:!0,children:g.jsxs(ue,{gap:"200",blockAlign:"center",children:[g.jsx("span",{"aria-hidden":!0,children:Ue[t]}),g.jsx(j,{as:"span",variant:"bodyMd",children:Be[t]})]})}),d=T.useMemo(()=>he.map(l=>({content:`${Ue[l]} ${Be[l]}`,active:l===t,onAction:()=>{try{localStorage.setItem("app_lang",l)}catch{}typeof r=="function"&&r(l),i(!1)}})),[t,r]);return g.jsx(pt,{active:o,activator:s,onClose:()=>i(!1),autofocusTarget:"first-node",children:g.jsx(ht,{items:d})})}function In({sectionTitle:e,lang:r,setLang:n,t:o}){return g.jsx(N,{padding:"400",borderBlockEndWidth:"025",borderColor:"border",background:"bg",children:g.jsxs(ue,{align:"space-between",blockAlign:"center",children:[g.jsx(j,{as:"h1",variant:"headingLg",children:e}),g.jsx(wn,{lang:r,setLang:n,t:o})]})})}const ke="en",_e={en:()=>L(()=>import("./en-DY--Skhq-1760647331317.js"),[]),de:()=>L(()=>import("./de-BYtsvH6H-1760647331317.js"),[]),es:()=>L(()=>import("./es-Cshzw9pa-1760647331317.js"),[]),fr:()=>L(()=>import("./fr-DGTXCiho-1760647331317.js"),[])},ct=Object.keys(_e);function Tn(){try{const e=localStorage.getItem("app_lang");return ct.includes(e)?e:null}catch{return null}}function Mn(e){try{localStorage.setItem("app_lang",e)}catch{}}function jn(){const[e,r]=T.useState(()=>Tn()||ke),[n,o]=T.useState({});T.useEffect(()=>{let t=!1;async function s(){const l=await(_e[e]||_e[ke])();t||o(l.default||l)}return s(),Mn(e),()=>{t=!0}},[e]);const i=T.useMemo(()=>(t,s="")=>{const d=t==null?void 0:t.split(".").reduce((l,a)=>l&&l[a]!==void 0?l[a]:void 0,n);return d!=null?String(d):s||t},[n]);return{lang:e,setLang:r,t:i,dict:n,langs:ct}}const Rn=B.lazy(()=>L(()=>import("./BulkEdit-BhmrLRO6-1760647331317.js"),__vite__mapDeps([0,1,2,3,4]))),Cn=B.lazy(()=>L(()=>import("./Collections-CJFxTFQx-1760647331317.js"),__vite__mapDeps([5,1,2,3,4]))),Nn=B.lazy(()=>L(()=>import("./Sitemap-Db_9Gr1Y-1760647331317.js"),__vite__mapDeps([6,1,2,4]))),Dn=B.lazy(()=>L(()=>import("./StoreMetadata-CTfE-Oy_-1760647331317.js"),__vite__mapDeps([7,1,2,4]))),Ln=B.lazy(()=>L(()=>import("./SchemaData-CnMP1ltt-1760647331317.js"),__vite__mapDeps([8,1,2,4]))),Un=B.lazy(()=>(console.log("[APP] ===== LOADING SETTINGS COMPONENT ====="),L(()=>import("./Settings-BoJdal9N-1760647331317.js"),__vite__mapDeps([9,1,2,4])))),Bn=B.lazy(()=>L(()=>import("./AiTesting-Jj-BbpJZ-1760647331317.js"),__vite__mapDeps([10,1,2,4]))),kn=B.lazy(()=>L(()=>import("./Billing-I3a-Bn7Y-1760647331317.js"),__vite__mapDeps([11,1,2,4]))),Fn=B.lazy(()=>L(()=>import("./CleanUninstall-AVhhFAca-1760647331317.js"),__vite__mapDeps([12,1,2,4]))),Gn={Polaris:{ResourceList:{sortingLabel:"Sort by"}}},we=(e,r="")=>{try{return new URLSearchParams(window.location.search).get(e)||r}catch{return r}};function Wn(){const e=o=>{const i=o.replace(/^\/apps\/[^/]+/,"")||"/";return console.log("[useRoute] Normalized path:",o,"→",i),i},[r,n]=T.useState(e(window.location.pathname));return T.useEffect(()=>{const o=()=>{const t=e(window.location.pathname);console.log("[useRoute] Location changed to:",t),n(t)};window.addEventListener("popstate",o);const i=t=>{if(console.log("[useRoute] ===== CLICK DETECTED ====="),console.log("[useRoute] e.target:",t.target),console.log("[useRoute] e.target.tagName:",t.target.tagName),console.log('[useRoute] e.target.closest("input"):',t.target.closest("input")),console.log('[useRoute] e.target.closest("button"):',t.target.closest("button")),console.log('[useRoute] e.target.closest("a"):',t.target.closest("a")),t.target.tagName!=="A"){console.log("[useRoute] Ignoring non-A click");return}const s=t.target;if(s&&s.href&&s.href.startsWith(window.location.origin)){const d=new URL(s.href).pathname;console.log("[useRoute] Navigation click detected, new path:",d),setTimeout(()=>o(),0)}};return document.addEventListener("click",i),()=>{window.removeEventListener("popstate",o),document.removeEventListener("click",i)}},[]),{path:r}}function Vn({active:e,shop:r}){e==="/"||e.startsWith("/dashboard"),e.startsWith("/ai-seo"),e.startsWith("/billing"),e.startsWith("/settings");const o=new URLSearchParams(window.location.search).get("host"),i=new URLSearchParams;r&&i.set("shop",r),o&&i.set("host",o);const t=i.toString()?`?${i.toString()}`:"";return g.jsxs("ui-nav-menu",{children:[g.jsx("a",{href:`/${t}`,rel:"home",children:"Home"}),g.jsx("a",{href:`/dashboard${t}`,children:"Dashboard"}),g.jsx("a",{href:`/ai-seo${t}`,children:"Search Optimization for AI"}),g.jsx("a",{href:`/settings${t}`,children:"Settings"}),g.jsx("a",{href:`/ai-testing${t}`,children:"AI Testing"}),g.jsx("a",{href:`/billing${t}`,children:"Plans & Billing"}),g.jsx("a",{href:`/clean-uninstall${t}`,children:"Clean & Uninstall"})]})}const zn=B.memo(({shop:e})=>{var s;const[r,n]=T.useState(null);Sn();const o=e||we("shop",""),i=T.useMemo(()=>En(),[]),t=async(d,l)=>{var u,c;const a=await i("/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:d,variables:l})});if((u=a==null?void 0:a.errors)!=null&&u.length)throw new Error(((c=a.errors[0])==null?void 0:c.message)||"GraphQL error");return a==null?void 0:a.data};return T.useEffect(()=>{if(!o)return;t(`
      query PlansMe($shop:String!) {
        plansMe(shop:$shop) {
          shop
          plan
          planKey
          priceUsd
          ai_queries_used
          ai_queries_limit
          product_limit
          providersAllowed
          modelsSuggested
          autosyncCron
          trial {
            active
            ends_at
            days_left
          }
        }
      }
    `,{shop:o}).then(l=>{const a=l==null?void 0:l.plansMe;a&&n(a)}).catch(l=>console.error("Failed to load plan via GraphQL:",l))},[o,i]),r?g.jsx(ie,{title:"Dashboard",children:g.jsxs(N,{padding:"400",children:[g.jsxs(ue,{gap:"800",wrap:!1,children:[g.jsxs(N,{children:[g.jsx(j,{variant:"headingMd",as:"h3",children:"Current plan"}),g.jsx(j,{children:r.plan||"Free"})]}),g.jsxs(N,{children:[g.jsx(j,{variant:"headingMd",as:"h3",children:"Shop"}),g.jsx(j,{children:r.shop||"â€”"})]}),g.jsxs(N,{children:[g.jsx(j,{variant:"headingMd",as:"h3",children:"AI queries"}),g.jsxs(j,{children:[r.ai_queries_used||0," / ",r.ai_queries_limit||0]})]}),g.jsxs(N,{children:[g.jsx(j,{variant:"headingMd",as:"h3",children:"Product limit"}),g.jsx(j,{children:r.product_limit||0})]})]}),g.jsxs(N,{paddingBlockStart:"400",children:[g.jsx(j,{variant:"headingMd",as:"h3",children:"Allowed AI providers"}),g.jsx(j,{children:((s=r.providersAllowed)==null?void 0:s.join(", "))||"None"})]}),r.trial_ends_at&&g.jsxs(N,{paddingBlockStart:"400",children:[g.jsx(j,{variant:"headingMd",as:"h3",children:"Trial ends at"}),g.jsx(j,{children:new Date(r.trial_ends_at).toLocaleDateString()})]})]})}):g.jsx(ie,{children:g.jsx(N,{padding:"400",children:g.jsx(j,{children:"Loading plan info..."})})})}),$n=B.memo(({shop:e,plan:r})=>{const n=e||we("shop",""),o=window.location.pathname,t=o==="/ai-seo"||o==="/ai-seo/products"?"products":o==="/ai-seo/collections"?"collections":o==="/ai-seo/sitemap"?"sitemap":o==="/ai-seo/store-metadata"?"store-metadata":o==="/ai-seo/schema-data"?"schema-data":"products",s=d=>{const l=new URLSearchParams(window.location.search),a=l.toString()?`?${l.toString()}`:"";return d==="products"?`/ai-seo${a}`:`/ai-seo/${d}${a}`};return g.jsxs("div",{children:[g.jsx(N,{paddingBlockEnd:"400",children:g.jsx(ie,{children:g.jsx(N,{padding:"200",children:g.jsxs(ue,{gap:"100",children:[g.jsx("a",{href:s("products"),style:{padding:"8px 16px",borderRadius:"4px",backgroundColor:t==="products"?"#008060":"#f6f6f7",color:t==="products"?"white":"#202223",textDecoration:"none",display:"inline-block"},children:"Products"}),g.jsx("a",{href:s("collections"),style:{padding:"8px 16px",borderRadius:"4px",backgroundColor:t==="collections"?"#008060":"#f6f6f7",color:t==="collections"?"white":"#202223",textDecoration:"none",display:"inline-block"},children:"Collections"}),g.jsx("a",{href:s("sitemap"),style:{padding:"8px 16px",borderRadius:"4px",backgroundColor:t==="sitemap"?"#008060":"#f6f6f7",color:t==="sitemap"?"white":"#202223",textDecoration:"none",display:"inline-block"},children:"Sitemap"}),g.jsx("a",{href:s("store-metadata"),style:{padding:"8px 16px",borderRadius:"4px",backgroundColor:t==="store-metadata"?"#008060":"#f6f6f7",color:t==="store-metadata"?"white":"#202223",textDecoration:"none",display:"inline-block"},children:"Store metadata"}),g.jsx("a",{href:s("schema-data"),style:{padding:"8px 16px",borderRadius:"4px",backgroundColor:t==="schema-data"?"#008060":"#f6f6f7",color:t==="schema-data"?"white":"#202223",textDecoration:"none",display:"inline-block"},children:"Schema Data"})]})})})}),g.jsxs("div",{children:[t==="products"&&g.jsx(Rn,{shop:n,globalPlan:r}),t==="collections"&&g.jsx(Cn,{shop:n,globalPlan:r}),t==="sitemap"&&g.jsx(Nn,{shop:n}),t==="store-metadata"&&g.jsx(Dn,{shop:n}),t==="schema-data"&&g.jsx(Ln,{shop:n})]})]})});function qn(){const{path:e}=Wn(),{lang:r,setLang:n,t:o}=jn(),i=!!new URLSearchParams(window.location.search).get("host"),t=we("shop",""),[s,d]=T.useState(null);T.useEffect(()=>{const u=async()=>{const v=new URLSearchParams(window.location.search),p=v.get("shop"),f=v.get("id_token");if(p&&f)try{console.log("[APP] Performing initial token exchange for shop:",p);const h=await fetch("/token-exchange",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shop:p,id_token:f})});if(!h.ok){const m=await h.json();console.error("[APP] Token exchange failed:",m);return}const y=await h.json();console.log("[APP] Token exchange successful:",y);const A=new URL(window.location);A.searchParams.delete("id_token"),window.history.replaceState({},"",A),await c(p)}catch(h){console.error("[APP] Token exchange error:",h)}else p&&await c(p)},c=async v=>{var p;try{const h=await fetch("/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
          query PlansMe($shop:String!) {
            plansMe(shop:$shop) {
              shop
              plan
              planKey
              priceUsd
              ai_queries_used
              ai_queries_limit
              product_limit
              providersAllowed
              modelsSuggested
              trial {
                active
                ends_at
                days_left
              }
            }
          }
        `,variables:{shop:v}})});if(h.status===202&&(await h.json()).error==="token_exchange_required"){console.log("[APP] Token exchange required, but no id_token available"),window.location.href=`/auth?shop=${encodeURIComponent(v)}`;return}if(!h.ok){console.error("[APP] Failed to load plans:",await h.text());return}const y=await h.json(),A=(p=y==null?void 0:y.data)==null?void 0:p.plansMe;A&&d(A)}catch(f){console.error("[APP] Error loading initial data:",f)}};u()},[]);const l=T.useMemo(()=>e.startsWith("/ai-seo")?"Search Optimization for AI":e.startsWith("/billing")?"Plans & Billing":e.startsWith("/settings")?"Settings":e.startsWith("/ai-testing")?"AI Testing":e.startsWith("/clean-uninstall")?"Clean & Uninstall":"Dashboard",[e]),a=()=>e==="/"||e==="/dashboard"?g.jsx(zn,{shop:t}):e.startsWith("/ai-seo")?g.jsx($n,{shop:t,plan:s}):e==="/billing"?g.jsx(kn,{shop:t}):e==="/settings"?(console.log("[APP] ===== RENDERING SETTINGS PAGE ====="),g.jsx(Un,{shop:t})):e==="/ai-testing"?(console.log("[APP] ===== RENDERING AI TESTING PAGE ====="),console.log("[APP] Path:",e),console.log("[APP] Shop:",t),g.jsx(Bn,{shop:t})):e==="/clean-uninstall"?g.jsx(Fn,{shop:t}):g.jsx(ie,{children:g.jsxs(N,{padding:"400",children:[g.jsx(j,{variant:"headingMd",children:"Page not found"}),g.jsx(N,{paddingBlockStart:"200",children:g.jsxs(j,{children:['The page "',e,'" does not exist.']})})]})});return g.jsxs(yt,{i18n:Gn,children:[i&&g.jsx(Vn,{active:e,shop:t}),g.jsx(vt,{children:g.jsxs(bt,{children:[g.jsx(In,{sectionTitle:l,lang:r,setLang:n,t:o,shop:t}),a()]})})]})}const Ie=new URLSearchParams(window.location.search),re=Ie.get("host"),V=Ie.get("shop"),Fe=Ie.get("embedded")==="1";console.log("[MAIN] Public App - Host:",re,"Shop:",V);console.log("[MAIN] Full URL:",window.location.href);function Hn(){const[e,r]=T.useState(!1),n=T.useMemo(()=>(console.log("[MAIN] Checking for API key..."),console.log("[MAIN] window.__SHOPIFY_API_KEY:",window.__SHOPIFY_API_KEY),console.log("[MAIN] import.meta.env.VITE_SHOPIFY_API_KEY:","2749a2f6d38ff5796ed256b5c9dc70a1"),window.__SHOPIFY_API_KEY?(console.log("[MAIN] Using injected API key:",window.__SHOPIFY_API_KEY),window.__SHOPIFY_API_KEY):(console.log("[MAIN] Using env API key:","2749a2f6d38ff5796ed256b5c9dc70a1"),"2749a2f6d38ff5796ed256b5c9dc70a1")),[]);return T.useEffect(()=>{setTimeout(()=>r(!0),100)},[]),!Fe||!re||!V?(console.log("[MAIN] Not embedded or missing params"),g.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[g.jsx("h1",{children:"Error: App must be loaded from Shopify Admin"}),g.jsxs("p",{children:["Shop: ",V||"Missing"]}),g.jsxs("p",{children:["Host: ",re||"Missing"]}),g.jsxs("p",{children:["Embedded: ",Fe?"Yes":"No"]}),g.jsx("a",{href:`https://admin.shopify.com/store/${V==null?void 0:V.replace(".myshopify.com","")}/apps`,children:"Go to Shopify Admin"})]})):n?(console.log("[MAIN] App config:",{apiKey:n?"SET":"MISSING",host:re?"SET":"MISSING",shop:V?"SET":"MISSING"}),e?g.jsx(qn,{}):g.jsx("div",{children:"Loading..."})):g.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[g.jsx("h1",{children:"Configuration Error"}),g.jsx("p",{children:"Shopify API key is not configured."}),g.jsx("p",{children:"Please contact support."})]})}Ge(document.getElementById("root")).render(g.jsx(Hn,{}));export{jn as a,En as m,Sn as u};
