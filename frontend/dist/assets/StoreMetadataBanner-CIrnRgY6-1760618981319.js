import{j as e}from"./app-bridge-D1YmOW_Y-1760618981319.js";import{r as j}from"./react-vendor-tAaa2TlE-1760618981319.js";import{M as b,d as l,f as y,T as t,I as A,a as S,B as M}from"./polaris-PI47KB7g-1760618981319.js";import{a as I,u as w}from"./index-CbYG-lap-1760618981319.js";function E({open:a,onClose:o,featureName:n="AI Enhancement",currentPlan:f="starter",errorMessage:r=null,minimumPlanRequired:s=null,features:u=null}){const g=()=>{o();const c=new URLSearchParams(window.location.search),m=c.toString()?`?${c.toString()}`:"";window.location.href=`/billing${m}`},p=u||["Collections optimization (Professional+)","AI Enhancement features with pay-per-use tokens","Advanced AI features","Growth Extra & Enterprise include monthly tokens"];return e.jsx(b,{open:a,onClose:o,title:"Upgrade Required",primaryAction:{content:"Upgrade Plan",onAction:g},secondaryActions:[{content:"Cancel",onAction:o}],children:e.jsx(b.Section,{children:e.jsxs(l,{gap:"400",children:[e.jsx(y,{tone:"warning",children:e.jsx(t,{variant:"bodyMd",fontWeight:"semibold",children:r||`${n} requires a higher plan`})}),e.jsx(t,{variant:"bodyMd",children:e.jsxs("strong",{children:["Current plan: ",f]})}),s&&e.jsx(t,{variant:"bodyMd",children:e.jsxs("strong",{children:["Required plan: ",s," or higher"]})}),e.jsxs(l,{gap:"200",children:[e.jsx(t,{variant:"bodyMd",children:e.jsx("strong",{children:"Upgrade to unlock:"})}),e.jsx(l,{gap:"100",children:p.map((c,m)=>e.jsxs(t,{variant:"bodyMd",children:["âœ“ ",c]},m))})]})]})})})}function U({open:a,onClose:o,feature:n,tokensRequired:f,tokensAvailable:r,tokensNeeded:s,shop:u,needsUpgrade:g=!1,minimumPlan:d=null,currentPlan:p=null}){const c=()=>{const x=new URLSearchParams(window.location.search),i=x.toString()?`?${x.toString()}`:"";window.location.href=`/billing${i}`},h={"ai-seo-product-basic":"AI Search Optimization (Products)","ai-seo-product-enhanced":"AI Search Optimization (Products - Enhanced)","ai-seo-collection":"AI Search Optimization (Collections)","ai-testing-simulation":"AI Testing & Simulation","ai-schema-advanced":"Advanced Schema Data","ai-sitemap-optimized":"AI-Optimized Sitemap"}[n]||"This feature";return e.jsx(b,{open:a,onClose:o,title:"ðŸ’³ Insufficient Tokens",primaryAction:{content:"Go to Billing",onAction:c},secondaryActions:[{content:"Cancel",onAction:o}],children:e.jsx(b.Section,{children:e.jsxs(l,{gap:"400",children:[e.jsx(y,{tone:"warning",children:e.jsxs(l,{gap:"200",children:[e.jsx(t,{variant:"bodyMd",fontWeight:"semibold",children:"You don't have enough tokens to use AI Enhancement"}),e.jsxs(A,{gap:"400",align:"space-between",blockAlign:"center",children:[e.jsxs(S,{children:[e.jsx(t,{variant:"bodySm",tone:"subdued",children:"Current balance:"}),e.jsxs(t,{variant:"headingSm",fontWeight:"bold",children:[(r==null?void 0:r.toLocaleString())||0," tokens"]})]}),e.jsxs(S,{children:[e.jsx(t,{variant:"bodySm",tone:"subdued",children:"Required:"}),e.jsxs(t,{variant:"headingSm",fontWeight:"bold",children:[((r||0)+(s||0)).toLocaleString()," tokens"]})]}),e.jsxs(S,{children:[e.jsx(t,{variant:"bodySm",tone:"subdued",children:"You need:"}),e.jsx(t,{variant:"headingSm",fontWeight:"bold",as:"span",children:e.jsxs("span",{style:{color:"#D82C0D"},children:[(s==null?void 0:s.toLocaleString())||0," more"]})})]})]})]})}),e.jsx(S,{background:"bg-surface-secondary",padding:"400",borderRadius:"200",children:e.jsxs(l,{gap:"200",children:[e.jsx(t,{variant:"headingMd",children:h}),e.jsx(t,{variant:"bodySm",tone:"subdued",children:"âœ… Buy tokens to use this AI-enhanced feature"}),g&&d&&e.jsxs(t,{variant:"bodySm",tone:"subdued",children:["âœ¨ Or upgrade to ",d," plan to get tokens included"]})]})}),g&&d&&e.jsx(y,{tone:"info",children:e.jsxs(l,{gap:"200",children:[e.jsxs(t,{variant:"bodyMd",fontWeight:"semibold",children:["ðŸ’¡ Upgrade to ",d," to get tokens included"]}),e.jsxs(t,{variant:"bodySm",children:["Current plan: ",e.jsx("strong",{children:p})]}),e.jsxs(t,{variant:"bodySm",tone:"subdued",children:[d," plans include AI tokens every month. Or you can purchase tokens separately while staying on your current plan."]})]})}),e.jsx(S,{background:"bg-surface-secondary",padding:"300",borderRadius:"200",children:e.jsxs(l,{gap:"100",children:[e.jsx(t,{variant:"bodySm",tone:"subdued",children:"ðŸ’¡ Tokens enable AI-powered features like AI Enhancement and AI Testing"}),e.jsx(t,{variant:"bodySm",tone:"subdued",children:"â™»ï¸ Tokens never expire and roll over indefinitely"}),e.jsx(t,{variant:"bodySm",tone:"subdued",children:"ðŸ›’ Purchase tokens or upgrade your plan from the Billing page"})]})})]})})})}function D(){const{t:a}=I(),{api:o}=w(),[n,f]=j.useState(null),[r,s]=j.useState(!0),[u,g]=j.useState(()=>sessionStorage.getItem("storeMetadataBannerDismissed")==="true");j.useEffect(()=>{d()},[]);const d=async()=>{try{console.log("[StoreMetadataBanner] Fetching metadata status...");const i=await o("/api/store/metadata-status");console.log("[StoreMetadataBanner] Status data:",i),f(i)}catch(i){console.error("[StoreMetadataBanner] Error fetching metadata status:",i)}finally{s(!1)}},p=()=>{g(!0),sessionStorage.setItem("storeMetadataBannerDismissed","true")},c=()=>{const i=new URLSearchParams(window.location.search),v=i.toString()?`?${i.toString()}`:"";window.location.href=`/store-metadata${v}`};if(console.log("[StoreMetadataBanner] Render check:",{loading:r,dismissed:u,status:n,hasMetadata:n==null?void 0:n.hasMetadata}),r||u||!n||n.hasMetadata)return console.log("[StoreMetadataBanner] Not showing banner. Reason:",{loading:r,dismissed:u,noStatus:!n,hasMetadata:n==null?void 0:n.hasMetadata}),null;console.log("[StoreMetadataBanner] SHOWING BANNER!");let m=a("storeMetadata.banner.title","âš¡ Boost AI Quality"),h="",x=!1;return n.hasPolicies?!n.hasTargetAudience&&!n.hasBrandVoice&&(h=a("storeMetadata.banner.brandingMissing","Add target audience and brand voice to help AI generate more on-brand, engaging content that resonates with your customers.")):(x=!0,!n.hasShipping&&!n.hasReturns?h=a("storeMetadata.banner.policiesMissing","Add shipping and return policies to help AI generate accurate, policy-compliant content. This prevents AI from inventing incorrect delivery times or warranty claims."):n.hasShipping?n.hasReturns||(h=a("storeMetadata.banner.returnsMissing","Add return policy to help AI generate accurate content about returns and refunds.")):h=a("storeMetadata.banner.shippingMissing","Add shipping information to help AI generate accurate content about delivery options.")),e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsxs(y,{title:m,tone:x?"warning":"info",onDismiss:p,children:[e.jsx("p",{children:h}),e.jsx("div",{style:{marginTop:"0.75rem"},children:e.jsxs(A,{gap:"200",children:[e.jsx(M,{onClick:c,variant:"primary",children:a("storeMetadata.banner.action","Quick Setup (2 min)")}),!x&&e.jsx(M,{onClick:p,children:a("common.remindLater","Remind me later")})]})})]})})}export{U as I,D as S,E as U};
