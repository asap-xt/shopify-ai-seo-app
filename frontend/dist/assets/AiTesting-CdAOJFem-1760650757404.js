import{j as e}from"./app-bridge-CLJQgRJw-1760650757404.js";import{r as c}from"./react-vendor-tAaa2TlE-1760650757404.js";import{m as D}from"./index-DHtYkbuZ-1760650757404.js";import{C as A,a as d,d as h,T as t,f as I,i as p,B as a,D as v,I as i,k as G,M as P}from"./polaris-3vHUbEvc-1760650757404.js";const E=(y,s="")=>{try{return new URLSearchParams(window.location.search).get(y)||s}catch{return s}};function L({shop:y}){const s=y||E("shop",""),[T,m]=c.useState(""),f=c.useMemo(()=>D(),[]),[C,R]=c.useState(null),[$,S]=c.useState(""),[M,k]=c.useState(!1),[o,z]=c.useState(null),[j,O]=c.useState("");c.useEffect(()=>{s&&q()},[s,f]);const q=async()=>{var r,l;try{const u=await f("/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
        query PlansMe($shop:String!) {
          plansMe(shop:$shop) {
            shop
            plan
            planKey
          }
        }
      `,variables:{shop:s}})});console.log("[AI-TESTING] Plan data:",u),R((l=(r=u==null?void 0:u.data)==null?void 0:r.plansMe)==null?void 0:l.plan)}catch(n){console.error("[AI-TESTING] Error loading plan:",n)}},g=r=>{if(!C)return!1;const n=["Starter","Professional","Growth","Growth Extra","Enterprise"].indexOf(C);switch(r){case"productsJson":return n>=0;case"welcomePage":return n>=2;case"aiSitemap":return n>=2;case"schemaData":return n>=4;default:return!1}},b=r=>{switch(r){case"welcomePage":return"Growth";case"aiSitemap":return"Growth";case"schemaData":return"Enterprise";default:return"Professional"}},w=(r,l)=>{z({name:r,url:l}),k(!0)},x=async(r,l=null)=>{try{S("Generating AI response...");let n=`/api/ai-discovery/simulate?shop=${s}&type=${r}`;l&&(n+=`&question=${encodeURIComponent(l)}`);const u=await f(n,{method:"GET"});S(u.response||"No response generated")}catch(n){console.error("[AI-TESTING] Simulation error:",n),S("Error generating response. Please try again."),m("Failed to simulate AI response")}};return e.jsxs(e.Fragment,{children:[e.jsx(A,{children:e.jsx(d,{padding:"400",children:e.jsxs(h,{gap:"400",children:[e.jsx(t,{as:"h2",variant:"headingLg",children:"AI Testing"}),e.jsx(I,{tone:"info",children:e.jsx(t,{children:"Test how AI models discover and understand your store content. Check if your structured data and AI Discovery features are working correctly."})}),e.jsx(A,{children:e.jsx(d,{padding:"300",children:e.jsxs(h,{gap:"400",children:[e.jsx(t,{as:"h3",variant:"headingMd",children:"AI Discovery Endpoints"}),e.jsx(t,{variant:"bodyMd",tone:"subdued",children:"These are the URLs that AI bots use to discover and understand your store content."}),e.jsx(p,{label:"Products JSON Feed",value:`https://${s}/apps/new-ai-seo/ai/products.json?shop=${s}`,readOnly:!0,autoComplete:"off",connectedRight:e.jsx(a,{url:`https://${s}/apps/new-ai-seo/ai/products.json?shop=${s}`,external:!0,children:"View"}),helpText:"Bulk product data for AI consumption"}),e.jsx(p,{label:"AI Sitemap",value:`https://${s}/apps/new-ai-seo/ai/sitemap-feed.xml?shop=${s}`,readOnly:!0,autoComplete:"off",connectedRight:e.jsx(a,{url:`https://${s}/apps/new-ai-seo/ai/sitemap-feed.xml?shop=${s}`,external:!0,children:"View"}),helpText:"Optimized sitemap for AI bots"}),e.jsx(p,{label:"Store Metadata (AI Search)",value:`https://${s}/apps/new-ai-seo/ai/store-metadata.json?shop=${s}`,readOnly:!0,autoComplete:"off",connectedRight:e.jsx(a,{url:`https://${s}/apps/new-ai-seo/ai/store-metadata.json?shop=${s}`,external:!0,children:"View"}),helpText:"Organization schema & AI metadata"}),e.jsx(p,{label:"AI Welcome Page",value:`https://${s}/apps/new-ai-seo/ai/welcome?shop=${s}`,readOnly:!0,autoComplete:"off",connectedRight:e.jsx(a,{url:`https://${s}/apps/new-ai-seo/ai/welcome?shop=${s}`,external:!0,children:"View"}),helpText:"Landing page for AI bots"}),e.jsx(p,{label:"Collections JSON Feed",value:`https://${s}/apps/new-ai-seo/ai/collections-feed.json?shop=${s}`,readOnly:!0,autoComplete:"off",connectedRight:e.jsx(a,{url:`https://${s}/apps/new-ai-seo/ai/collections-feed.json?shop=${s}`,external:!0,children:"View"}),helpText:"Category data for better AI understanding"}),e.jsx(p,{label:"robots.txt (Dynamic)",value:`https://${s}/apps/new-ai-seo/ai/robots-dynamic?shop=${s}`,readOnly:!0,autoComplete:"off",connectedRight:e.jsx(a,{url:`https://${s}/apps/new-ai-seo/ai/robots-dynamic?shop=${s}`,external:!0,children:"View"}),helpText:"Use this URL to test how AI bots understand your store"}),e.jsx(v,{}),e.jsxs(h,{gap:"200",children:[e.jsxs(i,{align:"space-between",children:[e.jsx(t,{children:"Perplexity AI Search"}),e.jsx(a,{url:`https://www.perplexity.ai/search?q=What+products+does+${s}+sell%3F+Tell+me+about+this+business+and+what+they+offer`,external:!0,size:"slim",children:"Test"})]}),e.jsxs(i,{align:"space-between",children:[e.jsx(t,{children:"ChatGPT Web Search"}),e.jsx(a,{url:`https://chat.openai.com/?q=What+products+does+${s}+sell%3F+Tell+me+about+this+business+and+what+they+offer`,external:!0,size:"slim",children:"Test"})]}),e.jsxs(i,{align:"space-between",children:[e.jsx(t,{children:"Claude AI Search"}),g("welcomePage")?e.jsx(a,{onClick:()=>w("Claude AI","https://claude.ai/"),size:"slim",children:"Test"}):e.jsxs(a,{disabled:!0,size:"slim",children:[b("welcomePage"),"+ Required"]})]}),e.jsxs(i,{align:"space-between",children:[e.jsx(t,{children:"Gemini AI Search"}),g("welcomePage")?e.jsx(a,{onClick:()=>w("Gemini AI","https://gemini.google.com/"),size:"slim",children:"Test"}):e.jsxs(a,{disabled:!0,size:"slim",children:[b("welcomePage"),"+ Required"]})]}),e.jsxs(i,{align:"space-between",children:[e.jsx(t,{children:"Meta AI Search"}),g("aiSitemap")?e.jsx(a,{onClick:()=>w("Meta AI","https://www.meta.ai/"),size:"slim",children:"Test"}):e.jsxs(a,{disabled:!0,size:"slim",children:[b("aiSitemap"),"+ Required"]})]}),e.jsxs(i,{align:"space-between",children:[e.jsx(t,{children:"DeepSeek AI Search"}),g("schemaData")?e.jsx(a,{onClick:()=>w("DeepSeek AI","https://chat.deepseek.com/"),size:"slim",children:"Test"}):e.jsxs(a,{disabled:!0,size:"slim",children:[b("schemaData"),"+ Required"]})]})]}),e.jsx(I,{tone:"info",children:e.jsxs(t,{children:[e.jsx("strong",{children:"How to test with AI bots:"}),e.jsx("br",{}),"• ",e.jsx("strong",{children:"Perplexity & ChatGPT:"}),' Click "Test" - they support URL parameters',e.jsx("br",{}),"• ",e.jsx("strong",{children:"Claude, Gemini, Meta AI, DeepSeek:"}),' Click "Test" to open a modal with the prompt to copy']})})]})})}),e.jsx(A,{children:e.jsx(d,{padding:"300",children:e.jsxs(h,{gap:"300",children:[e.jsx(t,{as:"h4",variant:"headingSm",children:"AI Search Simulation"}),e.jsx(t,{variant:"bodyMd",tone:"subdued",children:"Test how AI bots would respond to questions about your store based on your structured data."}),e.jsxs(h,{gap:"200",children:[e.jsxs(i,{align:"space-between",children:[e.jsx(t,{children:"What products does this store sell?"}),e.jsx(a,{onClick:()=>x("products"),size:"slim",children:"Simulate Response"})]}),e.jsxs(i,{align:"space-between",children:[e.jsx(t,{children:"Tell me about this business"}),e.jsx(a,{onClick:()=>x("business"),size:"slim",children:"Simulate Response"})]}),e.jsxs(i,{align:"space-between",children:[e.jsx(t,{children:"What categories does this store have?"}),e.jsx(a,{onClick:()=>x("categories"),size:"slim",children:"Simulate Response"})]}),e.jsxs(i,{align:"space-between",children:[e.jsx(t,{children:"What is this store's contact information?"}),e.jsx(a,{onClick:()=>x("contact"),size:"slim",children:"Simulate Response"})]})]}),e.jsx(v,{}),e.jsxs(h,{gap:"200",children:[e.jsx(t,{variant:"headingSm",children:"Ask Your Own Question"}),e.jsx(p,{label:"",value:j,onChange:O,placeholder:"e.g., What are your return policies? Do you ship internationally?",autoComplete:"off",connectedRight:e.jsx(a,{onClick:()=>{j.trim()?x("custom",j):m("Please enter a question")},disabled:!j.trim(),children:"Ask AI"})})]}),$&&e.jsxs(d,{background:"bg-surface-secondary",padding:"300",borderRadius:"200",children:[e.jsx(t,{variant:"bodyMd",fontWeight:"semibold",children:"AI Bot Response:"}),e.jsx(d,{paddingBlockStart:"200",children:e.jsx(t,{variant:"bodyMd",children:$})})]})]})})})]})})}),T&&e.jsx(G,{content:T,onDismiss:()=>m("")}),e.jsx(P,{open:M,onClose:()=>k(!1),title:`Test with ${o==null?void 0:o.name}`,primaryAction:{content:"Copy Prompt",onAction:()=>{navigator.clipboard.writeText(`What products does ${s} sell? Tell me about this business and what they offer.`),m("Prompt copied to clipboard!")}},secondaryActions:[{content:"Open AI Bot",url:o==null?void 0:o.url,external:!0}],children:e.jsx(P.Section,{children:e.jsxs(h,{gap:"300",children:[e.jsx(t,{variant:"bodyMd",children:'1. Click "Copy Prompt" below'}),e.jsxs(t,{variant:"bodyMd",children:['2. Click "Open AI Bot" to visit ',o==null?void 0:o.name]}),e.jsx(t,{variant:"bodyMd",children:"3. Paste the prompt and send"}),e.jsxs(d,{background:"bg-surface-secondary",padding:"300",borderRadius:"200",children:[e.jsx(t,{variant:"bodyMd",fontWeight:"semibold",children:"Prompt to test:"}),e.jsx(d,{paddingBlockStart:"200",children:e.jsxs(t,{variant:"bodyMd",as:"p",children:["What products does ",s," sell? Tell me about this business and what they offer."]})})]}),e.jsx(I,{tone:"info",children:e.jsx(t,{children:"The AI bot will search the web and use your store's structured data to answer."})})]})})})]})}export{L as default};
