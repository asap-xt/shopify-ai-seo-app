import{j as e}from"./app-bridge-Buy3fZCp-1759046150323.js";import{r as l}from"./react-vendor-tAaa2TlE-1759046150323.js";import{m as we}from"./index-DjzrPGp_-1759046150323.js";import{C as w,a as c,T as r,I as b,s as de,d as g,g as L,h as f,D as he,f as O,B as S,n as ve,v as Ee,M as x,e as Ge,k as Ce}from"./polaris-Dp5y5HA7-1759046150323.js";const Ie=(E,I="")=>{try{return new URLSearchParams(window.location.search).get(E)||I}catch{return I}},v=E=>(E||"starter").toLowerCase().replace(" ","_");function Re(){var E,I;try{console.log("[SETTINGS] ===== SETTINGS COMPONENT LOADED ====="),console.log("[SETTINGS] Starting component initialization...");const P=(t,o=null)=>{console.log(`[SETTINGS DEBUG] ${t}`,o||"")},[pe,H]=l.useState(!0),[ge,V]=l.useState(!1),[s,U]=l.useState(null),[R,q]=l.useState(""),[X,z]=l.useState(!1),[M,d]=l.useState("");l.useEffect(()=>{M&&console.log("[SETTINGS] Toast state changed to:",M)},[M]);const[ue,Z]=l.useState(!1),[K,k]=l.useState(!1),[ee,$]=l.useState(!1),[te,J]=l.useState(!1),[xe,me]=l.useState(""),[se,D]=l.useState(null),[oe,ae]=l.useState(!1),[G,Q]=l.useState(null);console.log("[SETTINGS] State variables initialized successfully");const m=l.useMemo(()=>we(),[]),be=async(t,o)=>{var p,h;console.log("[DEBUG] runGQL called with query:",t),console.log("[DEBUG] runGQL variables:",o);const a=JSON.stringify({query:t,variables:o});console.log("[DEBUG] runGQL body:",a);const i=await m("/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:a});if(console.log("[DEBUG] runGQL response:",i),(p=i==null?void 0:i.errors)!=null&&p.length)throw console.error("[DEBUG] GraphQL errors:",i.errors),new Error(((h=i.errors[0])==null?void 0:h.message)||"GraphQL error");return i==null?void 0:i.data},[ne,Se]=l.useState(!1),[Pe,Me]=l.useState(!1),[De,Ne]=l.useState(""),[Be,je]=l.useState({enabled:!1,generating:!1,generated:!1,progress:""}),[N,j]=l.useState(!1),[A,_]=l.useState({current:0,total:0,percent:0,currentProduct:"",stats:{siteFAQ:!1,products:0,totalSchemas:0}}),[C,y]=l.useState(!1),n=Ie("shop","");l.useEffect(()=>{if(!n){H(!1);return}Ae()},[n,m]),l.useEffect(()=>{ne&&fe()},[ne]),l.useEffect(()=>{s&&Object.values(s.features||{}).some(t=>t)&&U(t=>({...t,enabled:!0,discoveryEnabled:!0}))},[s==null?void 0:s.features]);const fe=async()=>{try{const t=await m(`/api/schema/status?shop=${n}`);je({enabled:t.enabled,generating:t.generating,generated:t.hasSiteFAQ||t.productsWithSchema>0,progress:t.progress||""})}catch(t){console.error("Failed to check schema status:",t)}},W=async()=>{try{const t=await m(`/ai/schema-data.json?shop=${n}`);if(t.schemas&&t.schemas.length>0){y(!0),j(!1);const o=[...new Set(t.schemas.map(a=>{var i,p;return(p=(i=a.url)==null?void 0:i.split("/products/")[1])==null?void 0:p.split("#")[0]}))].filter(Boolean);_(a=>({...a,percent:100,stats:{siteFAQ:!!t.site_faq,products:o.length,totalSchemas:t.schemas.length}}))}else _(o=>({...o,percent:Math.min(o.percent+10,90),currentProduct:"Processing products..."})),setTimeout(W,3e3)}catch(t){console.error("Progress check error:",t),setTimeout(W,3e3)}},Ae=async()=>{try{const t=await m(`/api/ai-discovery/settings?shop=${n}`);console.log("Loaded settings:",t),console.log("Settings plan:",t==null?void 0:t.plan),console.log("Normalized plan:",v(t==null?void 0:t.plan)),U(t),Q(t),Se(t.advancedSchemaEnabled||!1),F(t)}catch(t){console.error("Failed to load settings:",t),d("Failed to load settings")}finally{H(!1)}},F=async(t=s)=>{console.log("[GENERATE ROBOTS] Called with shop:",n);try{const o=await m(`/api/ai-discovery/robots-txt?shop=${n}`,{responseType:"text"});console.log("[GENERATE ROBOTS] Received:",o),q(o||`User-agent: *
Disallow: /`)}catch(o){console.error("[GENERATE ROBOTS] Error:",o),q(`# Error generating robots.txt
# `+o.message)}};console.log("[SETTINGS DEBUG] generateRobotsTxt function exists:",typeof F);const Y=t=>{var o;if(!((o=s==null?void 0:s.availableBots)!=null&&o.includes(t))){d(`Upgrade to ${requiredPlan} plan to enable ${s.bots[t].name}`);return}U(a=>({...a,bots:{...a.bots,[t]:{...a.bots[t],enabled:!a.bots[t].enabled}}})),Z(!0)},re=t=>{if(!ie(t)){d(`Upgrade your plan to enable ${{productsJson:"Products JSON Feed",aiSitemap:"AI-Optimized Sitemap",welcomePage:"AI Welcome Page",collectionsJson:"Collections JSON Feed",storeMetadata:"Store Metadata",schemaData:"Schema Data"}[t]||t}`);return}U(o=>({...o,features:{...o.features,[t]:!o.features[t]}}))},ye=async()=>{var t,o,a,i,p;console.log("[SETTINGS] ===== SAVE SETTINGS CALLED ====="),console.log("[SETTINGS] Current settings:",s),V(!0);try{if(await m(`/api/ai-discovery/settings?shop=${n}`,{method:"POST",body:{shop:n,bots:s.bots,features:s.features}}),Z(!1),Q(s),F(),console.log("[SETTINGS] Checking AI Sitemap feature:",(t=s.features)==null?void 0:t.aiSitemap),(o=s.features)!=null&&o.aiSitemap)try{console.log("[SETTINGS] ===== AI SITEMAP BACKGROUND REGENERATION START ====="),console.log("[SETTINGS] AI Sitemap enabled, starting background regeneration..."),console.log("[SETTINGS] Shop:",n);const h=`
            mutation RegenerateSitemap($shop: String!) {
              regenerateSitemap(shop: $shop) {
                success
                message
                shop
              }
            }
          `;console.log("[SETTINGS] GraphQL mutation:",h),console.log("[SETTINGS] Variables:",{shop:n});const u=await m("/graphql",{method:"POST",body:JSON.stringify({query:h,variables:{shop:n}}),shop:n});console.log("[SETTINGS] GraphQL sitemap regeneration result:",u),(i=(a=u==null?void 0:u.data)==null?void 0:a.regenerateSitemap)!=null&&i.success?(console.log("[SETTINGS] Background regeneration started successfully"),console.log("[SETTINGS] Setting toast for AI sitemap regeneration..."),d("Settings saved! AI-Optimized Sitemap is being regenerated in the background. This may take a few moments."),console.log("[SETTINGS] Toast set for AI sitemap regeneration")):(console.log("[SETTINGS] Background regeneration failed:",(p=u==null?void 0:u.data)==null?void 0:p.regenerateSitemap),console.log("[SETTINGS] Setting toast for failed regeneration..."),d("Settings saved, but sitemap regeneration failed"),console.log("[SETTINGS] Toast set for failed regeneration")),console.log("[SETTINGS] ===== AI SITEMAP BACKGROUND REGENERATION END =====")}catch(h){console.error("[SETTINGS] Failed to start sitemap regeneration:",h),d("Settings saved, but sitemap regeneration failed")}else console.log("[SETTINGS] AI Sitemap disabled, skipping background regeneration"),console.log("[SETTINGS] Setting toast for basic save..."),d("Settings saved successfully"),console.log("[SETTINGS] Toast set for basic save")}catch(h){console.error("Failed to save settings:",h),d("Failed to save settings")}finally{V(!1)}},Le=()=>{navigator.clipboard.writeText(R),d("Copied to clipboard!")},Oe=async()=>{try{const t=await m(`/api/ai-discovery/apply-robots?shop=${n}`,{method:"POST",body:{shop:n}});d("robots.txt applied successfully!")}catch(t){console.error("Failed to apply robots.txt:",t),d(t.message)}},ie=t=>{var i;const o=v(s==null?void 0:s.plan);return((i={productsJson:["starter","professional","growth","growth_extra","enterprise"],aiSitemap:["starter","professional","growth","growth_extra","enterprise"],welcomePage:["professional","growth","growth_extra","enterprise"],collectionsJson:["growth","growth_extra","enterprise"],storeMetadata:["growth_extra","enterprise"],schemaData:["enterprise"]}[t])==null?void 0:i.includes(o))||!1},B=async t=>{console.log(`[DEBUG] setTestPlan called with plan: ${t}, shop: ${n}`);try{const o=`
        mutation SetPlan($shop:String!, $plan: PlanEnum) {
          setPlanOverride(shop:$shop, plan:$plan) { shop plan }
        }
      `;console.log("[DEBUG] GraphQL mutation:",o),console.log("[DEBUG] Variables:",{shop:n,plan:t});const a=await be(o,{shop:n,plan:t});console.log("[DEBUG] GraphQL result:",a),d(`Test plan set to ${t||"actual"}`),setTimeout(()=>window.location.reload(),500)}catch(o){console.error("[DEBUG] Failed to set test plan",o),d(`Failed to set test plan: ${o.message}`)}},Te=async(t,o)=>{me(o),J(!0),ae(!0),D(null);try{const a={productsJson:`/ai/products.json?shop=${n}`,collectionsJson:`/ai/collections-feed.json?shop=${n}`,storeMetadata:`/ai/store-metadata.json?shop=${n}`,schemaData:`/ai/schema-data.json?shop=${n}`,aiSitemap:`/ai/sitemap-feed.xml?shop=${n}`,welcomePage:`/ai/welcome?shop=${n}`},i=await m(a[t]),p="application/json";D(JSON.stringify(i,null,2))}catch(a){D(`Error loading data: ${a.message}`)}finally{ae(!1)}};return n?pe?e.jsx(w,{children:e.jsx(c,{padding:"400",children:e.jsxs(b,{align:"center",children:[e.jsx(de,{size:"small"}),e.jsx(r,{children:"Loading settings..."})]})})}):e.jsxs(g,{gap:"600",children:[e.jsx(w,{children:e.jsx(c,{padding:"400",children:e.jsxs(g,{gap:"400",children:[e.jsxs(b,{align:"space-between",children:[e.jsx(r,{as:"h2",variant:"headingMd",children:"AI Bot Access Control"}),(s==null?void 0:s.plan)&&e.jsxs(L,{tone:"info",children:[s.plan.charAt(0).toUpperCase()+s.plan.slice(1)," Plan"]})]}),e.jsx(r,{variant:"bodyMd",tone:"subdued",children:"Choose which AI bots can access your store's structured data"}),e.jsx(f,{status:"info",children:e.jsxs(g,{gap:"200",children:[e.jsx(r,{variant:"bodyMd",fontWeight:"semibold",children:"How it works:"}),e.jsxs("ol",{style:{marginLeft:"20px",marginBottom:0},children:[e.jsx("li",{children:"Select AI bots below"}),e.jsx("li",{children:"Save Settings"}),e.jsx("li",{children:"Generate robots.txt"})]})]})}),e.jsx(he,{}),e.jsxs(g,{gap:"300",children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:["openai","perplexity"].map(t=>{var T,le,ce;const o=(T=s==null?void 0:s.bots)==null?void 0:T[t];if(!o)return null;const a={starter:["openai","perplexity"],professional:["openai","anthropic","perplexity"],growth:["openai","anthropic","google","perplexity","meta","others"],growth_extra:["openai","anthropic","google","perplexity","meta","others"],enterprise:["openai","anthropic","google","perplexity","meta","others"]},i=v(s==null?void 0:s.plan),h=(a[i]||a.starter).includes(t),u=t==="anthropic"?"Professional":t==="google"?"Growth":["meta","others"].includes(t)?"Growth Extra":null;return e.jsx(c,{padding:"200",background:h?"bg-surface":"bg-surface-secondary",borderRadius:"200",borderWidth:"025",borderColor:"border",children:e.jsx(g,{gap:"100",children:e.jsx(O,{label:e.jsxs(b,{gap:"200",align:"center",children:[e.jsx(r,{variant:h?"bodyMd":"bodySm",tone:h?"base":"subdued",children:o.name||t}),!h&&u&&e.jsxs(L,{tone:"info",size:"small",children:[u,"+"]})]}),checked:!!((ce=(le=s==null?void 0:s.bots)==null?void 0:le[t])!=null&&ce.enabled),onChange:()=>Y(t),disabled:!h,helpText:h?t==="openai"?"Most popular AI assistant":t==="anthropic"?"Claude AI assistant":t==="google"?"Google Gemini":t==="perplexity"?"AI-powered search":t==="meta"?"Meta AI platforms":t==="others"?"Bytespider, DeepSeek, etc.":"":`Upgrade to ${u} plan to enable this AI bot`})})},t)})}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:["anthropic","google"].map(t=>{var p,h,u,T;const o=(p=s==null?void 0:s.bots)==null?void 0:p[t];if(!o)return null;const a=(h=s==null?void 0:s.availableBots)==null?void 0:h.includes(t),i=t==="anthropic"?"Professional":t==="google"?"Growth":["meta","others"].includes(t)?"Growth Extra":null;return e.jsx(c,{padding:"200",background:a?"bg-surface":"bg-surface-secondary",borderRadius:"200",borderWidth:"025",borderColor:"border",children:e.jsx(g,{gap:"100",children:e.jsx(O,{label:e.jsxs(b,{gap:"200",align:"center",children:[e.jsx(r,{variant:a?"bodyMd":"bodySm",tone:a?"base":"subdued",children:o.name||t}),!a&&i&&e.jsxs(L,{tone:"info",size:"small",children:[i,"+"]})]}),checked:!!((T=(u=s==null?void 0:s.bots)==null?void 0:u[t])!=null&&T.enabled),onChange:()=>Y(t),disabled:!a,helpText:a?t==="openai"?"Most popular AI assistant":t==="anthropic"?"Claude AI assistant":t==="google"?"Google Gemini":t==="perplexity"?"AI-powered search":t==="meta"?"Meta AI platforms":t==="others"?"Bytespider, DeepSeek, etc.":"":`Upgrade to ${i} plan to enable this AI bot`})})},t)})}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:["meta","others"].map(t=>{var p,h,u,T;const o=(p=s==null?void 0:s.bots)==null?void 0:p[t];if(!o)return null;const a=(h=s==null?void 0:s.availableBots)==null?void 0:h.includes(t),i=t==="anthropic"?"Professional":t==="google"?"Growth":["meta","others"].includes(t)?"Growth Extra":null;return e.jsx(c,{padding:"200",background:a?"bg-surface":"bg-surface-secondary",borderRadius:"200",borderWidth:"025",borderColor:"border",children:e.jsx(g,{gap:"100",children:e.jsx(O,{label:e.jsxs(b,{gap:"200",align:"center",children:[e.jsx(r,{variant:a?"bodyMd":"bodySm",tone:a?"base":"subdued",children:o.name||t}),!a&&i&&e.jsxs(L,{tone:"info",size:"small",children:[i,"+"]})]}),checked:!!((T=(u=s==null?void 0:s.bots)==null?void 0:u[t])!=null&&T.enabled),onChange:()=>Y(t),disabled:!a,helpText:a?t==="openai"?"Most popular AI assistant":t==="anthropic"?"Claude AI assistant":t==="google"?"Google Gemini":t==="perplexity"?"AI-powered search":t==="meta"?"Meta AI platforms":t==="others"?"Bytespider, DeepSeek, etc.":"":`Upgrade to ${i} plan to enable this AI bot`})})},t)})})]})]})})}),e.jsx(w,{children:e.jsx(c,{padding:"400",children:e.jsxs(g,{gap:"400",children:[e.jsx(r,{as:"h2",variant:"headingMd",children:"robots.txt Configuration"}),ue&&e.jsx(f,{status:"warning",title:"Unsaved changes",children:e.jsx("p",{children:'You have unsaved bot selections. Please click "Save Settings" before configuring robots.txt.'})}),e.jsx(f,{children:e.jsx("p",{children:["growth","growth_extra","enterprise"].includes(v(s==null?void 0:s.plan))?"With your plan, you can apply robots.txt changes directly to your theme!":"Copy the generated rules and add them to your theme's robots.txt.liquid file."})}),e.jsxs(b,{gap:"200",children:[e.jsx(S,{onClick:async()=>{console.log("[ADD MANUAL] Starting..."),console.log("[ADD MANUAL] Settings:",s);try{const t=Object.values((s==null?void 0:s.bots)||{}).some(o=>o.enabled);console.log("[ADD MANUAL] Has selected bots:",t),t?(console.log("[ADD MANUAL] Calling generateRobotsTxt..."),await F(),console.log("[ADD MANUAL] Robots.txt generated, showing instructions"),$(!0)):(console.log("[ADD MANUAL] No bots, showing modal"),k(!0))}catch(t){console.error("[ADD MANUAL] Error:",t),d("Error generating robots.txt: "+t.message)}},children:"Add manually"}),["growth","growth_extra","enterprise"].includes(v(s==null?void 0:s.plan))&&e.jsx(S,{primary:!0,onClick:async()=>{console.log("[APPLY AUTO] Starting..."),console.log("[APPLY AUTO] Settings:",s),console.log("[APPLY AUTO] Bots:",s==null?void 0:s.bots);try{const t=Object.values((s==null?void 0:s.bots)||{}).some(a=>a.enabled);if(console.log("[APPLY AUTO] Has selected bots:",t),!t){console.log("[APPLY AUTO] No bots selected, showing modal"),k(!0);return}console.log("[APPLY AUTO] Applying robots.txt...");const o=await m(`/api/ai-discovery/apply-robots?shop=${n}`,{method:"POST",shop:n,body:{shop:n}});console.log("[APPLY AUTO] Data:",o),d(o.message||"robots.txt applied successfully!")}catch(t){console.error("[APPLY AUTO] Error:",t),d(t.message)}},children:"Apply Automatically"})]})]})})}),e.jsx(c,{paddingInlineStart:"600",paddingInlineEnd:"600",children:e.jsxs(b,{align:"center",blockAlign:"center",children:[e.jsx(c,{children:e.jsx(ve,{source:Ee,color:"subdued"})}),e.jsx(r,{variant:"bodySm",tone:"subdued",children:"Configure what data the AI bots can access"})]})}),e.jsx(w,{children:e.jsx(c,{padding:"400",children:e.jsxs(g,{gap:"400",children:[e.jsx(r,{as:"h2",variant:"headingMd",children:"AI Discovery Features"}),e.jsx(r,{variant:"bodyMd",tone:"subdued",children:"Select the features you want to enable for AI bots to consume your store data."}),e.jsx(f,{status:"info",children:`Don't forget to click "Save Settings" after making changes.`}),e.jsx(he,{}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem"},children:[{key:"productsJson",name:"Products JSON Feed",description:"Bulk product data for AI consumption",requiredPlan:null},{key:"aiSitemap",name:"AI-Optimized Sitemap",description:"Enhanced sitemap with AI hints",requiredPlan:null},{key:"welcomePage",name:"AI Welcome Page",description:"Landing page for AI bots",requiredPlan:"Professional"},{key:"collectionsJson",name:"Collections JSON Feed",description:"Category data for better AI understanding",requiredPlan:"Growth"},{key:"storeMetadata",name:"Store Metadata for AI Search",description:"Organization & LocalBusiness schema",requiredPlan:"Growth Extra"},{key:"schemaData",name:"Advanced Schema Data",description:"BreadcrumbList, FAQPage & more",requiredPlan:"Enterprise"}].map(t=>{var i,p;const o=ie(t.key),a=!!((i=s==null?void 0:s.features)!=null&&i[t.key]);return e.jsx(c,{padding:"200",background:o?"bg-surface":"bg-surface-secondary",borderRadius:"200",borderWidth:"025",borderColor:"border",children:o?e.jsxs(b,{align:"space-between",blockAlign:"center",children:[e.jsx(c,{flexGrow:1,children:e.jsx(O,{label:t.name,checked:a,onChange:()=>re(t.key),helpText:t.description})}),((p=G==null?void 0:G.features)==null?void 0:p[t.key])&&t.key!=="schemaData"&&e.jsx(S,{size:"slim",onClick:()=>Te(t.key,t.name),children:"View"})]}):e.jsx(O,{label:e.jsxs(b,{gap:"200",align:"center",children:[e.jsx(r,{variant:"bodySm",tone:"subdued",children:t.name}),t.requiredPlan&&e.jsxs(L,{tone:"info",size:"small",children:[t.requiredPlan,t.requiredPlan!=="Enterprise"&&"+"]})]}),checked:!1,onChange:()=>re(t.key),disabled:!0,helpText:`Upgrade to ${t.requiredPlan} plan to enable`})},t.key)})})]})})}),v(s==null?void 0:s.plan)==="enterprise"&&((E=s==null?void 0:s.features)==null?void 0:E.schemaData)&&((I=G==null?void 0:G.features)==null?void 0:I.schemaData)&&e.jsx(w,{children:e.jsx(c,{padding:"400",children:e.jsxs(g,{gap:"400",children:[e.jsx(r,{as:"h2",variant:"headingMd",children:"Advanced Schema Data Management"}),e.jsx(r,{variant:"bodyMd",tone:"subdued",children:"Generate and manage structured data for your products"}),e.jsxs(b,{gap:"300",children:[e.jsx(S,{primary:!0,onClick:async()=>{const t=await m(`/ai/schema-data.json?shop=${n}`);if(!(t.schemas&&t.schemas.length>0&&!confirm("This will replace existing schema data. Continue?"))){j(!0),y(!1),_({current:0,total:0,percent:0,currentProduct:"Initializing...",stats:{siteFAQ:!1,products:0,totalSchemas:0}});try{const o=await m(`/api/schema/generate-all?shop=${n}`,{method:"POST",shop:n,body:{shop:n}});setTimeout(W,2e3)}catch(o){console.error("Error:",o),d("Failed to generate schema"),j(!1)}}},children:"Generate/Update Schema Data"}),e.jsx(S,{onClick:()=>{window.open(`/ai/schema-data.json?shop=${n}`,"_blank")},children:"View Generated Schema"}),e.jsx(S,{destructive:!0,onClick:async()=>{if(confirm("This will delete all advanced schema data. Are you sure?"))try{await m(`/api/schema/delete?shop=${n}`,{method:"DELETE",shop:n,body:{shop:n}}),d("Schema data deleted successfully")}catch{d("Failed to delete schema data")}},children:"Delete Schema Data"})]}),e.jsx(f,{status:"info",tone:"subdued",children:e.jsxs("p",{children:["Generation creates BreadcrumbList, FAQPage, WebPage and more schemas for each product. AI can access them at ",e.jsx("code",{children:"/ai/product/[handle]/schemas.json"})]})})]})})}),e.jsxs(b,{gap:"200",align:"end",children:[e.jsx(S,{tone:"critical",onClick:async()=>{if(window.confirm("Are you sure you want to reset all AI Discovery settings to defaults?"))try{await m(`/api/ai-discovery/settings?shop=${n}`,{method:"DELETE",shop:n}),d("Settings reset successfully"),Q(null),setTimeout(()=>{window.location.reload()},1e3)}catch(t){console.error("Failed to reset:",t),d("Failed to reset settings")}},children:"Reset to Defaults"}),e.jsx(S,{primary:!0,size:"large",loading:ge,onClick:ye,disabled:!s,children:"Save Settings"})]}),X&&e.jsx(x,{open:X,onClose:()=>z(!1),title:"robots.txt Configuration",primaryAction:{content:"Copy to clipboard",onAction:()=>{navigator.clipboard.writeText(R),d("Copied to clipboard!")}},secondaryActions:[{content:"Close",onAction:()=>z(!1)}],children:e.jsx(x.Section,{children:e.jsxs(g,{gap:"400",children:[!["growth","growth_extra","enterprise"].includes(v(s==null?void 0:s.plan))&&e.jsx(f,{status:"info",title:"Manual Configuration Steps",children:e.jsxs("ol",{style:{marginLeft:"20px",marginTop:"10px"},children:[e.jsx("li",{children:"Copy the robots.txt content below"}),e.jsxs("li",{children:["Go to ",e.jsx("strong",{children:"Online Store → Themes"})]}),e.jsxs("li",{children:["Click ",e.jsx("strong",{children:"Actions → Edit code"})," on your active theme"]}),e.jsxs("li",{children:["In the file browser, look for ",e.jsx("strong",{children:"robots.txt.liquid"})]}),e.jsxs("li",{children:["If it doesn't exist, click ",e.jsx("strong",{children:"Add a new template"}),' → Select "robots" → Create']}),e.jsx("li",{children:"Replace the content with what you copied"}),e.jsxs("li",{children:["Click ",e.jsx("strong",{children:"Save"})]})]})}),e.jsx(c,{padding:"200",background:"bg-surface-secondary",borderRadius:"100",children:e.jsx("pre",{style:{whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:"12px",margin:0,overflow:"auto",maxHeight:"400px"},children:R})})]})})}),K&&e.jsx(x,{open:K,onClose:()=>k(!1),title:"No AI Bots Selected",primaryAction:{content:"Got it",onAction:()=>k(!1)},children:e.jsx(x.Section,{children:e.jsxs(g,{gap:"400",children:[e.jsx(f,{status:"warning",children:e.jsx("p",{children:"You haven't selected any AI bots yet."})}),e.jsx(r,{children:"To configure robots.txt:"}),e.jsxs("ol",{style:{marginLeft:"20px",marginTop:"10px"},children:[e.jsx("li",{children:'Select AI bots from the "AI Bot Access Control" section above'}),e.jsx("li",{children:'Click "Save Settings" to save your selections'}),e.jsx("li",{children:'Then click "Apply Automatically" to configure robots.txt'})]})]})})}),ee&&e.jsx(x,{open:ee,onClose:()=>$(!1),title:"Manual robots.txt Configuration",primaryAction:{content:"Continue",onAction:()=>{$(!1),z(!0)}},secondaryActions:[{content:"Cancel",onAction:()=>$(!1)}],children:e.jsx(x.Section,{children:e.jsxs(g,{gap:"400",children:[e.jsx(r,{variant:"headingMd",children:"How to add robots.txt manually:"}),e.jsxs("ol",{style:{marginLeft:"20px",marginTop:"10px"},children:[e.jsx("li",{children:'Click "Continue" to see your custom robots.txt content'}),e.jsx("li",{children:"Copy the generated content"}),e.jsxs("li",{children:["Go to ",e.jsx("strong",{children:"Online Store → Themes"})]}),e.jsxs("li",{children:["Click ",e.jsx("strong",{children:"Actions → Edit code"})," on your active theme"]}),e.jsxs("li",{children:["Find or create ",e.jsx("strong",{children:"robots.txt.liquid"})," file"]}),e.jsx("li",{children:"Paste the content and save"})]}),e.jsx(f,{status:"info",children:e.jsx("p",{children:"This allows AI bots to discover and properly index your products."})})]})})}),e.jsx(w,{children:e.jsx(c,{padding:"400",children:e.jsxs(g,{gap:"400",children:[e.jsx(r,{as:"h2",variant:"headingMd",children:"Test Plan Switcher (Dev Only)"}),e.jsxs(b,{gap:"200",children:[e.jsx(S,{onClick:()=>B("starter"),children:"Starter"}),e.jsx(S,{onClick:()=>B("professional"),children:"Professional"}),e.jsx(S,{onClick:()=>B("growth"),children:"Growth"}),e.jsx(S,{onClick:()=>B("growth_extra"),children:"Growth Extra"}),e.jsx(S,{onClick:()=>B("enterprise"),children:"Enterprise"})]})]})})}),te&&e.jsx(x,{open:te,onClose:()=>{J(!1),D(null)},title:xe,primaryAction:{content:"Copy",onAction:()=>{navigator.clipboard.writeText(se),d("Copied to clipboard!")},disabled:oe},secondaryActions:[{content:"Close",onAction:()=>{J(!1),D(null)}}],children:e.jsx(x.Section,{children:e.jsx(c,{padding:"200",background:"bg-surface-secondary",borderRadius:"100",children:oe?e.jsxs(b,{align:"center",children:[e.jsx(de,{size:"small"}),e.jsx(r,{children:"Loading..."})]}):e.jsx("pre",{style:{whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:"12px",margin:0,overflow:"auto",maxHeight:"400px"},children:se})})})}),P("Modal states",{schemaGenerating:N,schemaComplete:C,modalShouldShow:N&&!C}),N&&!C&&e.jsx(x,{open:N,title:"Generating Advanced Schema Data",onClose:()=>{P("Modal close clicked"),j(!1)},children:e.jsx(x.Section,{children:e.jsxs(r,{children:["Modal is showing! Progress: ",A.percent,"%"]})})}),C&&e.jsx(x,{open:!0,title:"Schema Generation Complete",onClose:()=>{j(!1),y(!1)},primaryAction:{content:"View Generated Schemas",onAction:()=>{window.open(`/ai/schema-data.json?shop=${n}`,"_blank"),j(!1),y(!1)}},secondaryActions:[{content:"Close",onAction:()=>{j(!1),y(!1)}}],children:e.jsx(x.Section,{children:e.jsxs(g,{gap:"400",children:[e.jsx(f,{status:"success",title:"Generation successful!",children:e.jsx("p",{children:"Advanced schema data has been generated for your products."})}),e.jsx(r,{variant:"headingMd",children:"Generation Statistics"}),e.jsxs(b,{gap:"600",wrap:!0,children:[e.jsxs(c,{children:[e.jsx(r,{variant:"bodyMd",tone:"subdued",children:"Site FAQ"}),e.jsx(r,{variant:"headingLg",fontWeight:"bold",children:A.stats.siteFAQ?"✓":"—"})]}),e.jsxs(c,{children:[e.jsx(r,{variant:"bodyMd",tone:"subdued",children:"Products Processed"}),e.jsx(r,{variant:"headingLg",fontWeight:"bold",children:A.stats.products})]}),e.jsxs(c,{children:[e.jsx(r,{variant:"bodyMd",tone:"subdued",children:"Total Schemas"}),e.jsx(r,{variant:"headingLg",fontWeight:"bold",children:A.stats.totalSchemas})]})]}),e.jsx(c,{paddingBlockStart:"200",children:e.jsx(r,{variant:"bodySm",tone:"subdued",children:"Schemas are now available at /ai/product/[handle]/schemas.json"})})]})})}),N&&!C&&e.jsx(x,{open:!0,title:"Generating Advanced Schema Data",onClose:()=>{},noScroll:!0,children:e.jsx(x.Section,{children:e.jsxs(g,{gap:"400",children:[e.jsx(r,{variant:"bodyMd",children:"Generating schemas for your products..."}),e.jsx(Ge,{progress:A.percent,size:"small"}),e.jsx(r,{variant:"bodySm",tone:"subdued",children:"This process may take 1-2 minutes depending on the number of products."})]})})}),C&&e.jsx(x,{open:!0,title:"Schema Generation Complete",onClose:()=>{j(!1),y(!1)},primaryAction:{content:"View Generated Schemas",onAction:()=>{window.open(`/ai/schema-data.json?shop=${n}`,"_blank"),j(!1),y(!1)}},secondaryActions:[{content:"Close",onAction:()=>{j(!1),y(!1)}}],children:e.jsx(x.Section,{children:e.jsxs(g,{gap:"400",children:[e.jsx(f,{status:"success",title:"Generation successful!",children:e.jsx("p",{children:"Advanced schema data has been generated for your products."})}),e.jsx(r,{variant:"headingMd",children:"Generation Statistics"}),e.jsxs(b,{gap:"600",wrap:!0,children:[e.jsxs(c,{children:[e.jsx(r,{variant:"bodyMd",tone:"subdued",children:"Site FAQ"}),e.jsx(r,{variant:"headingLg",fontWeight:"bold",children:A.stats.siteFAQ?"✓":"—"})]}),e.jsxs(c,{children:[e.jsx(r,{variant:"bodyMd",tone:"subdued",children:"Products Processed"}),e.jsx(r,{variant:"headingLg",fontWeight:"bold",children:A.stats.products})]}),e.jsxs(c,{children:[e.jsx(r,{variant:"bodyMd",tone:"subdued",children:"Total Schemas"}),e.jsx(r,{variant:"headingLg",fontWeight:"bold",children:A.stats.totalSchemas})]})]}),e.jsx(c,{paddingBlockStart:"200",children:e.jsx(r,{variant:"bodySm",tone:"subdued",children:"Schemas are now available at /ai/product/[handle]/schemas.json"})})]})})}),M&&e.jsx(Ce,{content:M,onDismiss:()=>d("")})]}):e.jsx(w,{children:e.jsx(c,{padding:"400",children:e.jsx(r,{tone:"critical",children:"Missing shop parameter"})})})}catch(P){return console.error("[SETTINGS] Component initialization error:",P),e.jsx(g,{gap:"400",children:e.jsx(w,{children:e.jsxs(c,{padding:"400",children:[e.jsx(r,{variant:"headingMd",children:"Settings Error"}),e.jsx(c,{paddingBlockStart:"200",children:e.jsxs(r,{children:["Failed to load settings: ",P.message]})})]})})})}}export{Re as default};
