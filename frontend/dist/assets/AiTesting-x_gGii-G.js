import{r as e,j as t,R as s}from"./react-vendor-BLtYaay5.js";import{m as n}from"./sessionFetch-CYPf463t.js";import{I as i,T as a}from"./TrialActivationModal-eTt0mMV6.js";import{T as r}from"./TokenPurchaseModal-CeRUCjk8.js";import{A as o}from"./AIEOScoreCard-DBJmgGfz.js";import{g as l}from"./usePlanHierarchy-CpsbOjPs.js";import{a as c,d,T as h,L as u,C as g,B as p,I as x,b as j,e as m,f as b,D as y,h as S,l as v,M as f}from"./polaris-DLzuUptG.js";import"./app-bridge-DUY42B6P.js";import"./vendor-L4_WdQez.js";import"./index-CsKPAcBc.js";function w({shop:w}){const k=w||((e,t="")=>{try{return new URLSearchParams(window.location.search).get(e)||t}catch{return t}})("shop",""),[A,P]=e.useState(""),I=e.useMemo(()=>n(),[]),[T,C]=e.useState(null),[M,R]=e.useState(""),[D,z]=e.useState(!1),[O,$]=e.useState(null),[q,J]=e.useState(""),[U,F]=e.useState(!1),[L,E]=e.useState(!1),[W,B]=e.useState(!1),[G,N]=e.useState(!1),[Y,H]=e.useState(null),[_,V]=e.useState(!1),[Q,K]=e.useState(null),[X,Z]=e.useState({}),[ee,te]=e.useState(!1),[se,ne]=e.useState(0),[ie,ae]=e.useState({}),[re,oe]=e.useState(!1),[le,ce]=e.useState(0),[de,he]=e.useState(null),[ue,ge]=e.useState(null),[pe,xe]=e.useState(null),[je,me]=e.useState({totalProducts:0,optimizedProducts:0,totalCollections:0,optimizedCollections:0}),[be,ye]=e.useState(null),[Se,ve]=e.useState(null),[fe,we]=e.useState(()=>{try{return"true"===localStorage.getItem(`dismissedReviewBanner_${k}`)}catch{return!1}}),[ke,Ae]=e.useState(()=>{try{return"true"===localStorage.getItem(`clickedReviewRate_${k}`)}catch{return!1}});e.useEffect(()=>{k&&(Ie(),Te(),Ce(),Pe())},[k,I]);const Pe=()=>{try{const e=localStorage.getItem(`ai-test-results-${k}`);if(e){const t=JSON.parse(e);t.results&&t.timestamp&&(Z(t.results),ye(new Date(t.timestamp)))}const t=localStorage.getItem(`ai-validation-results-${k}`);if(t){const e=JSON.parse(t);e.results&&ae(e.results),e.timestamp&&ve(new Date(e.timestamp))}}catch(e){}};e.useEffect(()=>{const e=()=>{!document.hidden&&k&&Te()};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[k,I]);const Ie=async()=>{var e,t,s;try{const n=await I(`/api/billing/info?shop=${k}`),i=(null==(e=null==n?void 0:n.subscription)?void 0:e.plan)||"Starter";C(i),he((null==(t=null==n?void 0:n.tokens)?void 0:t.balance)||0),ge((null==(s=null==n?void 0:n.subscription)?void 0:s.trialEndsAt)||null)}catch(n){C("Starter"),he(0)}},Te=async()=>{var e,t;try{const s=await I(`/api/billing/info?shop=${k}`);he((null==(e=null==s?void 0:s.tokens)?void 0:e.balance)||0),ge((null==(t=null==s?void 0:s.subscription)?void 0:t.trialEndsAt)||null)}catch(s){}},Ce=async()=>{var e,t,s,n;try{let a=null;try{const e=localStorage.getItem(`dashboard-stats-${k}`);if(e){const t=JSON.parse(e);(t.timestamp?Date.now()-new Date(t.timestamp).getTime():1/0)<3e5&&(a=t)}}catch(i){}if(!a){const r=await I(`/api/dashboard/stats?shop=${k}`);a={totalProducts:(null==(e=null==r?void 0:r.products)?void 0:e.total)||0,optimizedProducts:(null==(t=null==r?void 0:r.products)?void 0:t.optimized)||0,totalCollections:(null==(s=null==r?void 0:r.collections)?void 0:s.total)||0,optimizedCollections:(null==(n=null==r?void 0:r.collections)?void 0:n.optimized)||0,timestamp:(new Date).toISOString()};try{localStorage.setItem(`dashboard-stats-${k}`,JSON.stringify(a))}catch(i){}}me({totalProducts:a.totalProducts||0,optimizedProducts:a.optimizedProducts||0,totalCollections:a.totalCollections||0,optimizedCollections:a.optimizedCollections||0})}catch(i){}},Me=e=>{if(!T)return!1;const t=l(T);switch(e){case"productsJson":case"meta":case"claude":return t>=0;case"storeMetadata":case"gemini":return t>=1;case"welcomePage":case"collectionsJson":case"chatgpt":return t>=2;case"aiSitemap":case"perplexity":return t>=3;case"schemaData":case"deepseek":return t>=4;default:return!1}},Re=(e,t)=>{$({name:e,url:t}),z(!0)},De=async(e,t=null)=>{try{R("Generating AI response...");let s=`/api/ai-discovery/simulate?shop=${k}&type=${e}`;t&&(s+=`&question=${encodeURIComponent(t)}`);const n=await I(s,{method:"GET"});R(n.response||"No response generated")}catch(s){if(402===s.status){if(s.trialRestriction&&s.requiresActivation)return H(s),B(!0),void R("");if(s.requiresUpgrade)return H(s),F(!0),void R("");if(s.requiresPurchase)return H(s),E(!0),void R("")}R("Error generating response. Please try again."),P("Failed to simulate AI response")}},ze=e.useMemo(()=>!fe&&!ke&&(pe||0)>50,[fe,ke,pe]);return t.jsxs(t.Fragment,{children:[t.jsxs(c,{gap:"400",children:[t.jsx(d,{tone:"info",children:t.jsx(h,{children:"Test how AI models discover and understand your store content. Check if your structured data and AI Discovery features are working correctly."})}),t.jsx(o,{testResults:X,aiTestResults:ie,stats:je,onScoreCalculated:e=>xe(e)}),ze&&t.jsx(d,{title:"Help shape the future of AI Search",tone:"success",action:{content:"Rate indexAIze",onAction:()=>{try{localStorage.setItem(`clickedReviewRate_${k}`,"true"),Ae(!0),window.open("https://apps.shopify.com/indexaize#modal-show=ReviewListingModal","_blank")}catch(e){}}},onDismiss:()=>{try{localStorage.setItem(`dismissedReviewBanner_${k}`,"true"),we(!0)}catch(e){}},children:t.jsx(h,{children:"You've successfully optimized your store for AI engines. Your feedback helps us build better tools for the Shopify community."})}),t.jsxs(u,{children:[t.jsx(u.Section,{variant:"oneHalf",children:t.jsx(g,{children:t.jsx(p,{padding:"300",children:t.jsxs(c,{gap:"400",children:[t.jsxs(x,{align:"space-between",blockAlign:"center",children:[t.jsxs(c,{gap:"100",children:[t.jsx(h,{as:"h3",variant:"headingMd",children:"Basic AIEO Tests"}),t.jsx(h,{variant:"bodySm",tone:"subdued",children:"Quick check if endpoints are accessible and returning data"})]}),t.jsx(j,{onClick:async()=>{te(!0),ne(0),Z({});try{const e=await I("/api/ai-testing/run-tests",{method:"POST",body:{shop:k}});e.results?(Z(e.results),ne(100),(e=>{try{const t={results:e,timestamp:(new Date).toISOString()};localStorage.setItem(`ai-test-results-${k}`,JSON.stringify(t)),ye(new Date)}catch(t){}})(e.results),P("Basic tests completed!")):P("Testing failed. Please try again.")}catch(e){P("Failed to run tests. Please try again.")}finally{te(!1)}},loading:ee,disabled:ee,children:ee?"Testing...":"Run Basic Tests"})]}),be&&Object.keys(X).length>0&&!ee&&t.jsx(d,{tone:"info",children:t.jsxs(h,{variant:"bodySm",children:["These results are from ",be.toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),". Run Basic Tests again to refresh."]})}),ee&&t.jsx(p,{children:t.jsxs(c,{gap:"200",children:[t.jsx(h,{variant:"bodySm",children:"Testing endpoints..."}),t.jsx(m,{progress:se,size:"small"})]})}),Object.keys(X).length>0&&t.jsx(c,{gap:"300",children:Object.entries(X).map(([e,n],i)=>{const a=i===Object.entries(X).length-1;return t.jsxs(s.Fragment,{children:[t.jsx(x,{align:"space-between",blockAlign:"center",children:t.jsxs(c,{gap:"100",children:[t.jsxs(x,{gap:"200",blockAlign:"center",children:[t.jsx(h,{variant:"bodyMd",fontWeight:"semibold",children:n.name}),"success"===n.status&&t.jsx(b,{tone:"success",children:"OK"}),"fair"===n.status&&t.jsx(b,{tone:"info",children:"Fair"}),"poor"===n.status&&t.jsx(b,{tone:"warning",children:"Poor"}),"warning"===n.status&&t.jsx(b,{tone:"critical",children:"Warning"}),"error"===n.status&&t.jsx(b,{tone:"critical",children:"Failed"}),"locked"===n.status&&t.jsx(b,{children:"Locked"})]}),t.jsx(h,{variant:"bodySm",tone:"subdued",children:n.message}),n.actionLink&&t.jsx(j,{size:"slim",onClick:()=>(e=>{const t=new URLSearchParams(window.location.search),s=t.toString()?`?${t.toString()}`:"";window.location.href=`${e}${s}`})(n.actionLink),children:"basicSitemap"===e?"Go to Sitemap":"aiSitemap"===e?"Go to Settings":"Go"})]})}),!a&&t.jsx(y,{})]},e)})}),0===Object.keys(X).length&&!ee&&t.jsx(d,{tone:"info",children:t.jsx(h,{children:'Click "Run Basic Tests" to check if your AI Discovery endpoints are configured correctly.'})})]})})})}),t.jsx(u.Section,{variant:"oneHalf",children:t.jsx(g,{children:t.jsx(p,{padding:"300",children:t.jsxs(c,{gap:"400",children:[t.jsxs(x,{align:"space-between",blockAlign:"center",children:[t.jsxs(c,{gap:"100",children:[t.jsx(x,{gap:"200",blockAlign:"center",children:t.jsx(h,{as:"h3",variant:"headingMd",children:"AI-Powered Validation"})}),t.jsx(h,{variant:"bodySm",tone:"subdued",children:"Deep analysis with AI bot"}),T&&t.jsx(h,{variant:"bodySm",tone:"subdued",children:"Requires: Professional+ plan & pay-per-use tokens"})]}),t.jsx(j,{onClick:async()=>{if(l(T)<1)return H({message:"AI-powered validation requires Professional plan or higher",requiredPlan:"Professional",currentPlan:T||"Starter"}),void F(!0);oe(!0),ce(0),ae({});try{const t=await I("/api/ai-testing/ai-validate",{method:"POST",body:{shop:k,endpointResults:X}});if(t&&t.results){ae(t.results),ce(100);try{const e={results:t.results,timestamp:(new Date).toISOString()};localStorage.setItem(`ai-validation-results-${k}`,JSON.stringify(e)),ve(new Date)}catch(e){}if(t.aiEOScore){const e=t.aiEOScore;xe(e),P(`AI validation completed! Score: ${e.score||"N/A"}/100 (${t.tokensUsed||0} tokens used)`)}else xe(null),P(`AI validation completed! (${t.tokensUsed||0} tokens used)`);Te()}else xe(null),P("AI validation failed. Please try again.")}catch(t){if(402===t.status){if(t.trialRestriction&&t.requiresActivation)return H(t),void B(!0);if(t.requiresUpgrade)return H(t),void F(!0);if(t.requiresPurchase)return H(t),void E(!0)}P("Failed to run AI validation. Please try again.")}finally{oe(!1)}},loading:re,disabled:re||0===Object.keys(X).length,variant:"primary",children:re?"Validating...":"Test with AI Bot"})]}),Se&&Object.keys(ie).length>0&&!re&&t.jsx(d,{tone:"info",children:t.jsxs(h,{variant:"bodySm",children:["These results are from ",Se.toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),". Test with AI Bot again to refresh."]})}),re&&t.jsx(p,{children:t.jsxs(c,{gap:"200",children:[t.jsx(h,{variant:"bodySm",children:"AI is analyzing your endpoints..."}),t.jsx(m,{progress:le,size:"small",tone:"primary"})]})}),Object.keys(ie).length>0&&t.jsxs(c,{gap:"300",children:[ie.productsJson&&t.jsxs(t.Fragment,{children:[t.jsx(x,{align:"space-between",blockAlign:"center",children:t.jsxs(c,{gap:"100",children:[t.jsxs(x,{gap:"200",blockAlign:"center",children:[t.jsx(h,{variant:"bodyMd",fontWeight:"semibold",children:"Products JSON Feed"}),"excellent"===ie.productsJson.rating&&t.jsx(b,{tone:"success",children:"Excellent"}),"good"===ie.productsJson.rating&&t.jsx(b,{tone:"success",children:"Good"}),"fair"===ie.productsJson.rating&&t.jsx(b,{tone:"warning",children:"Fair"}),"poor"===ie.productsJson.rating&&t.jsx(b,{tone:"critical",children:"Poor"}),"locked"===ie.productsJson.rating&&t.jsx(b,{children:"ðŸ”’ Locked"}),"unavailable"===ie.productsJson.rating&&t.jsx(b,{tone:"critical",children:"âŒ Unavailable"})]}),t.jsx(h,{variant:"bodySm",children:ie.productsJson.feedback}),ie.productsJson.suggestions&&t.jsxs(h,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",ie.productsJson.suggestions]})]})}),t.jsx(y,{})]}),ie.storeMetadata&&t.jsxs(t.Fragment,{children:[t.jsx(x,{align:"space-between",blockAlign:"center",children:t.jsxs(c,{gap:"100",children:[t.jsxs(x,{gap:"200",blockAlign:"center",children:[t.jsx(h,{variant:"bodyMd",fontWeight:"semibold",children:"Store Metadata"}),"excellent"===ie.storeMetadata.rating&&t.jsx(b,{tone:"success",children:"Excellent"}),"good"===ie.storeMetadata.rating&&t.jsx(b,{tone:"success",children:"Good"}),"fair"===ie.storeMetadata.rating&&t.jsx(b,{tone:"warning",children:"Fair"}),"poor"===ie.storeMetadata.rating&&t.jsx(b,{tone:"critical",children:"Poor"}),"locked"===ie.storeMetadata.rating&&t.jsx(b,{children:"ðŸ”’ Locked"}),"unavailable"===ie.storeMetadata.rating&&t.jsx(b,{tone:"critical",children:"âŒ Unavailable"})]}),t.jsx(h,{variant:"bodySm",children:ie.storeMetadata.feedback}),ie.storeMetadata.suggestions&&t.jsxs(h,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",ie.storeMetadata.suggestions]})]})}),t.jsx(y,{})]}),ie.welcomePage&&t.jsxs(t.Fragment,{children:[t.jsx(x,{align:"space-between",blockAlign:"center",children:t.jsxs(c,{gap:"100",children:[t.jsxs(x,{gap:"200",blockAlign:"center",children:[t.jsx(h,{variant:"bodyMd",fontWeight:"semibold",children:"AI Welcome Page"}),"excellent"===ie.welcomePage.rating&&t.jsx(b,{tone:"success",children:"Excellent"}),"good"===ie.welcomePage.rating&&t.jsx(b,{tone:"success",children:"Good"}),"fair"===ie.welcomePage.rating&&t.jsx(b,{tone:"warning",children:"Fair"}),"poor"===ie.welcomePage.rating&&t.jsx(b,{tone:"critical",children:"Poor"}),"locked"===ie.welcomePage.rating&&t.jsx(b,{children:"ðŸ”’ Locked"}),"unavailable"===ie.welcomePage.rating&&t.jsx(b,{tone:"critical",children:"âŒ Unavailable"})]}),t.jsx(h,{variant:"bodySm",children:ie.welcomePage.feedback}),ie.welcomePage.suggestions&&t.jsxs(h,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",ie.welcomePage.suggestions]})]})}),t.jsx(y,{})]}),ie.collectionsJson&&t.jsxs(t.Fragment,{children:[t.jsx(x,{align:"space-between",blockAlign:"center",children:t.jsxs(c,{gap:"100",children:[t.jsxs(x,{gap:"200",blockAlign:"center",children:[t.jsx(h,{variant:"bodyMd",fontWeight:"semibold",children:"Collections JSON Feed"}),"excellent"===ie.collectionsJson.rating&&t.jsx(b,{tone:"success",children:"Excellent"}),"good"===ie.collectionsJson.rating&&t.jsx(b,{tone:"success",children:"Good"}),"fair"===ie.collectionsJson.rating&&t.jsx(b,{tone:"warning",children:"Fair"}),"poor"===ie.collectionsJson.rating&&t.jsx(b,{tone:"critical",children:"Poor"}),"locked"===ie.collectionsJson.rating&&t.jsx(b,{children:"ðŸ”’ Locked"}),"unavailable"===ie.collectionsJson.rating&&t.jsx(b,{tone:"critical",children:"âŒ Unavailable"})]}),t.jsx(h,{variant:"bodySm",children:ie.collectionsJson.feedback}),ie.collectionsJson.suggestions&&t.jsxs(h,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",ie.collectionsJson.suggestions]})]})}),t.jsx(y,{})]}),ie.aiSitemap&&t.jsxs(t.Fragment,{children:[t.jsx(x,{align:"space-between",blockAlign:"center",children:t.jsxs(c,{gap:"100",children:[t.jsxs(x,{gap:"200",blockAlign:"center",children:[t.jsx(h,{variant:"bodyMd",fontWeight:"semibold",children:"AI-Enhanced Sitemap"}),"excellent"===ie.aiSitemap.rating&&t.jsx(b,{tone:"success",children:"Excellent"}),"good"===ie.aiSitemap.rating&&t.jsx(b,{tone:"success",children:"Good"}),"fair"===ie.aiSitemap.rating&&t.jsx(b,{tone:"warning",children:"Fair"}),"poor"===ie.aiSitemap.rating&&t.jsx(b,{tone:"critical",children:"Poor"}),"locked"===ie.aiSitemap.rating&&t.jsx(b,{children:"ðŸ”’ Locked"}),"unavailable"===ie.aiSitemap.rating&&t.jsx(b,{tone:"critical",children:"âŒ Unavailable"})]}),t.jsx(h,{variant:"bodySm",children:ie.aiSitemap.feedback}),ie.aiSitemap.suggestions&&t.jsxs(h,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",ie.aiSitemap.suggestions]})]})}),t.jsx(y,{})]}),ie.schemaData&&t.jsx(x,{align:"space-between",blockAlign:"center",children:t.jsxs(c,{gap:"100",children:[t.jsxs(x,{gap:"200",blockAlign:"center",children:[t.jsx(h,{variant:"bodyMd",fontWeight:"semibold",children:"Advanced Schema Data"}),"excellent"===ie.schemaData.rating&&t.jsx(b,{tone:"success",children:"Excellent"}),"good"===ie.schemaData.rating&&t.jsx(b,{tone:"success",children:"Good"}),"fair"===ie.schemaData.rating&&t.jsx(b,{tone:"warning",children:"Fair"}),"poor"===ie.schemaData.rating&&t.jsx(b,{tone:"critical",children:"Poor"}),"locked"===ie.schemaData.rating&&t.jsx(b,{children:"ðŸ”’ Locked"}),"unavailable"===ie.schemaData.rating&&t.jsx(b,{tone:"critical",children:"âŒ Unavailable"})]}),t.jsx(h,{variant:"bodySm",children:ie.schemaData.feedback}),ie.schemaData.suggestions&&t.jsxs(h,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",ie.schemaData.suggestions]})]})})]}),0===Object.keys(ie).length&&!re&&t.jsx(d,{tone:"info",children:t.jsx(h,{children:0===Object.keys(X).length?"Run Basic Tests first, then use AI validation for deep analysis":'Click "Test with AI Bot" to get AI-powered feedback on your endpoint data quality'})}),!T&&t.jsx(d,{tone:"warning",children:t.jsx(h,{children:"Loading plan information..."})})]})})})})]}),t.jsx(g,{children:t.jsx(p,{padding:"300",children:t.jsxs(c,{gap:"400",children:[t.jsx(h,{as:"h3",variant:"headingMd",children:"Test with Real AI Bots"}),t.jsx(h,{variant:"bodyMd",tone:"subdued",children:"Manually test your store with real AI search engines"}),t.jsxs(c,{gap:"200",children:[t.jsxs(x,{align:"space-between",children:[t.jsx(h,{children:"Meta AI Search"}),Me("meta")?t.jsx(j,{onClick:()=>Re("Meta AI","https://www.meta.ai/"),size:"slim",children:"Test"}):t.jsx(j,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),t.jsxs(x,{align:"space-between",children:[t.jsx(h,{children:"Claude AI Search"}),Me("claude")?t.jsx(j,{onClick:()=>Re("Claude AI","https://claude.ai/"),size:"slim",children:"Test"}):t.jsx(j,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),t.jsxs(x,{align:"space-between",children:[t.jsx(h,{children:"Gemini AI Search"}),Me("gemini")?t.jsx(j,{onClick:()=>Re("Gemini AI","https://gemini.google.com/"),size:"slim",children:"Test"}):t.jsx(j,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),t.jsxs(x,{align:"space-between",children:[t.jsx(h,{children:"ChatGPT Web Search"}),Me("chatgpt")?t.jsx(j,{url:`https://chat.openai.com/?q=What+products+does+${k}+sell%3F+Tell+me+about+this+business+and+what+they+offer`,external:!0,size:"slim",children:"Test"}):t.jsx(j,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),t.jsxs(x,{align:"space-between",children:[t.jsx(h,{children:"Perplexity AI Search"}),Me("perplexity")?t.jsx(j,{url:`https://www.perplexity.ai/search?q=What+products+does+${k}+sell%3F+Tell+me+about+this+business+and+what+they+offer`,external:!0,size:"slim",children:"Test"}):t.jsx(j,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),t.jsxs(x,{align:"space-between",children:[t.jsx(h,{children:"DeepSeek AI Search"}),Me("deepseek")?t.jsx(j,{onClick:()=>Re("DeepSeek AI","https://chat.deepseek.com/"),size:"slim",children:"Test"}):t.jsx(j,{disabled:!0,size:"slim",children:"Plan upgrade required"})]})]}),t.jsx(d,{tone:"info",children:t.jsxs(h,{children:[t.jsx("strong",{children:"How to test with AI bots:"}),t.jsx("br",{}),"â€¢ ",t.jsx("strong",{children:"Perplexity & ChatGPT:"}),' Click "Test" - they support URL parameters',t.jsx("br",{}),"â€¢ ",t.jsx("strong",{children:"Meta AI, Claude, Gemini, DeepSeek:"}),' Click "Test" to open a modal with the prompt to copy']})})]})})}),t.jsx(g,{children:t.jsx(p,{padding:"300",children:t.jsxs(c,{gap:"300",children:[t.jsx(h,{as:"h4",variant:"headingSm",children:"AI Search Simulation"}),t.jsx(h,{variant:"bodyMd",tone:"subdued",children:"Test how AI bots would respond to questions about your store based on your structured data."}),t.jsx(d,{tone:"info",children:t.jsxs(c,{gap:"100",children:[t.jsx(h,{variant:"bodySm",fontWeight:"semibold",children:"Simulation Details:"}),t.jsxs(h,{variant:"bodySm",children:["â€¢ ",t.jsx("strong",{children:"Data Source:"})," Your store's products, collections, and metadata"]}),t.jsxs(h,{variant:"bodySm",children:["â€¢ ",t.jsx("strong",{children:"Response Style:"})," Concise (2-3 sentences), natural language"]}),t.jsxs(h,{variant:"bodySm",children:["â€¢ ",t.jsx("strong",{children:"Best For:"})," General store info, products, categories, contact details"]}),t.jsxs(h,{variant:"bodySm",children:["â€¢ ",t.jsx("strong",{children:"Limitations:"})," May not have real-time data (current stock, active promotions, exact shipping times)"]})]})}),t.jsxs(c,{gap:"200",children:[t.jsxs(x,{align:"space-between",children:[t.jsx(h,{children:"What products does this store sell?"}),t.jsx(j,{onClick:()=>De("products"),size:"slim",children:"Simulate Response"})]}),t.jsxs(x,{align:"space-between",children:[t.jsx(h,{children:"Tell me about this business"}),t.jsx(j,{onClick:()=>De("business"),size:"slim",children:"Simulate Response"})]}),t.jsxs(x,{align:"space-between",children:[t.jsx(h,{children:"What categories does this store have?"}),t.jsx(j,{onClick:()=>De("categories"),size:"slim",children:"Simulate Response"})]}),t.jsxs(x,{align:"space-between",children:[t.jsx(h,{children:"What is this store's contact information?"}),t.jsx(j,{onClick:()=>De("contact"),size:"slim",children:"Simulate Response"})]})]}),t.jsx(y,{}),t.jsxs(c,{gap:"200",children:[t.jsx(h,{variant:"headingSm",children:"Ask Your Own Question"}),t.jsx(S,{label:"",value:q,onChange:J,placeholder:"e.g., What are your return policies? Do you ship internationally?",autoComplete:"off",connectedRight:t.jsx(j,{onClick:()=>{q.trim()?De("custom",q):P("Please enter a question")},disabled:!q.trim(),children:"Ask AI"})})]}),M&&t.jsxs(p,{background:"bg-surface-secondary",padding:"300",borderRadius:"200",children:[t.jsx(h,{variant:"bodyMd",fontWeight:"semibold",children:"AI Bot Response:"}),t.jsx(p,{paddingBlockStart:"200",children:t.jsx(h,{variant:"bodyMd",children:M})})]})]})})})]}),A&&t.jsx(v,{content:A,onDismiss:()=>P("")}),t.jsx(f,{open:D,onClose:()=>z(!1),title:`Test with ${null==O?void 0:O.name}`,primaryAction:{content:"Open AI Bot",url:null==O?void 0:O.url,external:!0},secondaryActions:[{content:"Copy Prompt",onAction:()=>{navigator.clipboard.writeText(`What products does ${k} sell? Tell me about this business and what they offer.`),P("Prompt copied to clipboard!")}}],children:t.jsx(f.Section,{children:t.jsxs(c,{gap:"300",children:[t.jsx(h,{variant:"bodyMd",children:'1. Click "Copy Prompt" (left button)'}),t.jsxs(h,{variant:"bodyMd",children:['2. Click "Open AI Bot" (right button) to visit ',null==O?void 0:O.name]}),t.jsx(h,{variant:"bodyMd",children:"3. Paste the prompt and send"}),t.jsxs(p,{background:"bg-surface-secondary",padding:"300",borderRadius:"200",children:[t.jsx(h,{variant:"bodyMd",fontWeight:"semibold",children:"Prompt to test:"}),t.jsx(p,{paddingBlockStart:"200",children:t.jsxs(h,{variant:"bodyMd",as:"p",children:["What products does ",k," sell? Tell me about this business and what they offer."]})})]}),t.jsx(d,{tone:"info",children:t.jsx(h,{children:"The AI bot will search the web and use your store's structured data to answer."})})]})})}),t.jsx(f,{open:_,onClose:()=>V(!1),title:"Upgrade Required",primaryAction:{content:"View Plans",onAction:()=>{const e=new URLSearchParams(window.location.search),t=e.toString()?`?${e.toString()}`:"";window.location.href=`/billing${t}`}},secondaryActions:[{content:"Cancel",onAction:()=>V(!1)}],children:t.jsx(f.Section,{children:t.jsxs(c,{gap:"300",children:[t.jsxs(h,{variant:"bodyMd",children:[t.jsx("strong",{children:null==Q?void 0:Q.endpoint})," requires ",t.jsx("strong",{children:null==Q?void 0:Q.requiredPlan})," plan or higher."]}),t.jsxs(h,{variant:"bodyMd",tone:"subdued",children:["Your current plan: ",t.jsx("strong",{children:null==Q?void 0:Q.currentPlan})]}),t.jsx(d,{tone:"info",children:t.jsx(h,{children:"Upgrade to access this advanced AI Discovery feature."})})]})})}),t.jsx(f,{open:U,onClose:()=>F(!1),title:"Upgrade Required",primaryAction:{content:"View Plans",onAction:()=>{const e=new URLSearchParams(window.location.search),t=e.toString()?`?${e.toString()}`:"";window.location.href=`/billing${t}`}},secondaryActions:[{content:"Cancel",onAction:()=>F(!1)}],children:t.jsx(f.Section,{children:t.jsxs(c,{gap:"300",children:[t.jsxs(h,{variant:"bodyMd",children:["AI Testing requires ",t.jsx("strong",{children:(null==Y?void 0:Y.minimumPlan)||"Professional"})," plan or higher."]}),t.jsxs(h,{variant:"bodyMd",tone:"subdued",children:["Your current plan: ",t.jsx("strong",{children:(null==Y?void 0:Y.currentPlan)||"Starter"})]}),t.jsx(d,{tone:"info",children:t.jsx(h,{children:"Upgrade to test AI responses with real store data."})})]})})}),t.jsx(i,{open:L,onClose:()=>{E(!1),H(null),Te()},tokensRequired:(null==Y?void 0:Y.tokensRequired)||0,tokensAvailable:(null==Y?void 0:Y.tokensAvailable)||0,tokensNeeded:(null==Y?void 0:Y.tokensNeeded)||0,feature:"ai-testing-simulation",shop:k,needsUpgrade:!1,returnTo:"/ai-testing",onBuyTokens:()=>{E(!1),N(!0)}}),Y&&t.jsx(a,{open:W,onClose:()=>{B(!1),H(null)},feature:Y.feature||"ai-testing-simulation",trialEndsAt:Y.trialEndsAt,currentPlan:Y.currentPlan||T,tokensRequired:Y.tokensRequired||0,onActivatePlan:async()=>{try{const e=await I("/api/billing/activate",{method:"POST",body:JSON.stringify({shop:k,endTrial:!0,returnTo:"/ai-testing"})});if(e.requiresApproval&&e.confirmationUrl)return void(window.top.location.href=e.confirmationUrl);window.location.reload()}catch(e){const t=new URLSearchParams(window.location.search),s=t.get("host"),n=t.get("embedded");window.location.href=`/billing?shop=${encodeURIComponent(k)}&embedded=${n}&host=${encodeURIComponent(s)}`}},onPurchaseTokens:()=>{B(!1),N(!0)}}),t.jsx(r,{open:G,onClose:()=>{N(!1),H(null),Te()},shop:k,returnTo:"/ai-testing",inTrial:!!(null==Y?void 0:Y.trialEndsAt)})]})}export{w as default};
