import{j as e}from"./app-bridge-DXgvNtAS-1760418702013.js";import{r as l}from"./react-vendor-tAaa2TlE-1760418702013.js";import{m as ht}from"./index-DPg96yYM-1760418702013.js";import{U as pt,I as ft}from"./InsufficientTokensModal-Lux7LZer-1760418702013.js";import{M as S,d as I,T as c,e as ke,f as mt,B as A,a as u,I as b,g as Me,D as St,h as ee,C as De,i as xt,S as jt,P as Ct,j as Et,R as yt,k as wt,m as Lt,E as Ot}from"./polaris-BjP9lzrU-1760418702013.js";const bt=(K,x="")=>{try{return new URLSearchParams(window.location.search).get(K)||x}catch{return x}};function qt({shop:K,globalPlan:x}){var be,Ie,Ae;const d=K||bt("shop","");console.log("[COLLECTIONS] Component initialized with shop:",d,"shopProp:",K);const y=l.useMemo(()=>ht(),[]),[p,Te]=l.useState([]),[Pe,ge]=l.useState(!1),[W,Ne]=l.useState(0),[h,F]=l.useState([]),[j,_]=l.useState(!1),[It,At]=l.useState(""),[M,te]=l.useState(""),[L,J]=l.useState("all"),[he,se]=l.useState(!1),[Re,$e]=l.useState(""),[vt,Be]=l.useState([]),[C,R]=l.useState([]),[E,pe]=l.useState([]),[ne,Q]=l.useState(!1),[v,D]=l.useState({current:0,total:0,percent:0}),[fe,Y]=l.useState(""),[H,me]=l.useState([]),[kt,Mt]=l.useState(!1),[Dt,Tt]=l.useState(null),[Pt,Nt]=l.useState(!1),[Rt,ze]=l.useState(""),[Ue,V]=l.useState(!1),[$,B]=l.useState([]),[Se,xe]=l.useState(!1),[Ke,q]=l.useState(!1),[We,X]=l.useState(!1),[je,Z]=l.useState([]),[T,oe]=l.useState({}),[Fe,le]=l.useState(!1),[He,ae]=l.useState(!1),[Ce,$t]=l.useState({}),[qe,re]=l.useState(!1),[Ee,ie]=l.useState(null),[Ge,ye]=l.useState(!1),[we,m]=l.useState(""),[Bt,zt]=l.useState(!1),[_e,ce]=l.useState(!1),[Je,Le]=l.useState(!1),[f,de]=l.useState(null),[P,G]=l.useState("starter"),[k,ue]=l.useState(1);l.useEffect(()=>{if(!(!x||typeof x!="object")){if(x.planKey&&x.planKey!==""){G(x.planKey);const s={starter:1,professional:2,growth:3,"growth extra":6,growth_extra:6,enterprise:10}[x.planKey.toLowerCase()]||1;ue(s)}else if(x.plan&&x.plan!==""){const t=x.plan.toLowerCase().replace(/\s+/g,"-");G(t);const n={starter:1,professional:2,growth:3,"growth extra":6,growth_extra:6,enterprise:10}[t]||1;ue(n)}}},[x]);const[Qe,z]=l.useState({processing:!1,current:0,total:0,currentItem:"",results:null});l.useEffect(()=>{if(!d)return;y("/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
      query PlansMe($shop:String!) {
        plansMe(shop:$shop) {
          plan
          planKey
          modelsSuggested
        }
      }
    `,variables:{shop:d}})}).then(s=>{var i,g,O;if((i=s==null?void 0:s.errors)!=null&&i.length)throw new Error(((g=s.errors[0])==null?void 0:g.message)||"GraphQL error");const n=(O=s==null?void 0:s.data)==null?void 0:O.plansMe,a=(n==null?void 0:n.modelsSuggested)||["google/gemini-1.5-flash"];Be(a.map(U=>({label:U,value:U}))),$e(a[0]),G((n==null?void 0:n.planKey)||"starter");const r=((n==null?void 0:n.planKey)||"starter").toLowerCase();ue({starter:1,professional:2,growth:3,"growth extra":6,growth_extra:6,enterprise:10}[r]||1)}).catch(s=>m(`Error loading models: ${s.message}`))},[d,y]),l.useEffect(()=>{d&&(console.log("[COLLECTIONS] Loading languages for shop:",d),y(`/api/languages/shop/${d}?shop=${d}`).then(t=>{console.log("[COLLECTIONS] Languages API data:",t);const s=(t==null?void 0:t.shopLanguages)||["en"];console.log("[COLLECTIONS] Extracted languages:",s),pe(s),R([])}).catch(t=>{console.error("[COLLECTIONS] Languages API error:",t),pe(["en"]),R([])}))},[d,y]);const N=l.useCallback(async()=>{var t;ge(!0);try{console.log("[COLLECTIONS] Shop value:",d),console.log("[COLLECTIONS] Shop prop:",K),console.log("[COLLECTIONS] URL search params:",window.location.search);const n=`/collections/list-graphql?${new URLSearchParams({shop:d,...M&&{search:M},...L!=="all"&&{optimized:L}})}`;console.log("[COLLECTIONS] Using GraphQL endpoint:",n);const a=await y(n);console.log("[COLLECTIONS] API Response data:",a),((t=a==null?void 0:a.collections)==null?void 0:t.length)>0&&(console.log("[COLLECTIONS] First collection optimizedLanguages:",a.collections[0].optimizedLanguages),console.log("[COLLECTIONS] First collection full data:",a.collections[0]));let r=a.collections||[];if(M){const o=M.toLowerCase();r=r.filter(i=>i.title.toLowerCase().includes(o)||i.handle.toLowerCase().includes(o))}L!=="all"&&(r=r.filter(o=>L==="true"?o.hasSeoData:!o.hasSeoData)),Te(r),Ne(r.length)}catch(s){m(`Error loading collections: ${s.message}`)}finally{ge(!1)}},[d,M,L,y]);l.useEffect(()=>{d&&(N(),q(!1))},[d,L,N]),l.useEffect(()=>{const t=setTimeout(()=>{d&&N()},500);return()=>clearTimeout(t)},[M]);const Ye=l.useCallback(t=>{F(t);const s=t.some(n=>{const a=p.find(r=>r.id===n);return a==null?void 0:a.hasSeoData});q(s),t.length===0&&_(!1)},[p]),Ve=l.useCallback(t=>{if(_(t),t){F(p.map(n=>n.id));const s=p.some(n=>n.hasSeoData);q(s)}else F([]),q(!1)},[p]),Xe=async t=>{ye(!0);try{const s=`/collections/${t.split("/").pop()}/seo-data?shop=${encodeURIComponent(d)}`,n=await y(s);ie(n),re(!0)}catch(s){m((s==null?void 0:s.status)===404?"No SEO data found for this collection":"Failed to load SEO data")}finally{ye(!1)}},Oe=l.useMemo(()=>{var s;if(j)return C.length>k;const t=p.filter(n=>h.includes(n.id));if(t.length===0)return C.length>k;for(const n of t){const a=((s=n.optimizationSummary)==null?void 0:s.optimizedLanguages)||[],r=C.filter(i=>!a.includes(i));if(a.length+r.length>k)return!0}return!1},[p,h,j,k,C]),Ze=()=>{if(h.length===0&&!j){m("Please select collections first");return}ae(!0)},et=async()=>{console.log("[AI-ENHANCE] Starting enhancement...");const s=p.filter(a=>h.includes(a.id)).filter(a=>{var r;return((r=a.optimizedLanguages)==null?void 0:r.length)>0});if(s.length===0){m("Please select collections with Basic SEO optimization");return}console.log("[AI-ENHANCE] Collections to enhance:",s.length),z({processing:!0,current:0,total:s.length,currentItem:"",results:null});const n={successful:0,failed:0,skipped:0};for(let a=0;a<s.length;a++){const r=s[a];z(o=>({...o,current:a,currentItem:r.title}));try{const o=r.optimizedLanguages||[];if(o.length===0){console.log(`[AI-ENHANCE] No languages for ${r.title}, skipping`),n.skipped++;continue}console.log(`[AI-ENHANCE] Enhancing ${r.title} for languages:`,o);const i=await y(`/ai-enhance/collection/${encodeURIComponent(r.id)}`,{method:"POST",shop:d,body:{shop:d,languages:o}});i&&i.ok?(n.successful++,console.log(`[AI-ENHANCE] Success for ${r.title}`)):(n.failed++,console.log(`[AI-ENHANCE] Failed for ${r.title}`))}catch(o){if(console.error("[AI-ENHANCE] Error:",o),o.status===403){z({processing:!1,current:0,total:0,currentItem:"",results:null}),de(o),G(o.currentPlan||P||"starter"),ce(!0);return}if(o.status===402||o.requiresPurchase||o.trialRestriction){z({processing:!1,current:0,total:0,currentItem:"",results:null}),de(o),G(o.currentPlan||P||"starter"),o.trialRestriction?ce(!0):Le(!0);return}n.failed++}z(o=>({...o,current:a+1}))}z(a=>({...a,processing:!1,results:n})),m(`AI enhancement complete! ${n.successful} collections enhanced.`),n.successful>0&&await N()},tt=async()=>{if(!C.length){m("Please select at least one language");return}ae(!1),Q(!0),D({current:0,total:0,percent:0}),me([]),oe({});try{const t=j?p:p.filter(r=>h.includes(r.id)),s=t.length;D({current:0,total:s,percent:0});const n={};for(let r=0;r<t.length;r++){const o=t[r];Y(o.title);try{const O=await y("/seo/generate-collection-multi",{method:"POST",shop:d,body:JSON.stringify({shop:d,collectionId:o.id,model:Re,languages:C})});n[o.id]={success:!0,data:O}}catch(O){n[o.id]={success:!1,error:O.message},me(U=>[...U,{collection:o.title,error:O.message}])}const i=r+1,g=Math.round(i/s*100);D({current:i,total:s,percent:g})}oe(n),le(!0);const a=Object.values(n).filter(r=>r.success).length;m(`Generated optimization for ${a} collections`)}catch(t){m(`Error: ${t.message}`)}finally{Q(!1),Y("")}},st=async()=>{var t,s;Q(!0),D({current:0,total:0,percent:0});try{const n=Object.entries(T).filter(([r,o])=>o.success),a=n.length;D({current:0,total:a,percent:0});for(let r=0;r<n.length;r++){const[o,i]=n[r],g=p.find(w=>w.id===o);if(!g)continue;Y(g.title);try{if(console.log("Applying SEO for collection:",o),console.log("Result data:",i.data),console.log("Results array:",(t=i.data)==null?void 0:t.results),!((s=i.data)!=null&&s.results)||!Array.isArray(i.data.results))throw new Error("Invalid results structure");const w=await y("/seo/apply-collection-multi",{method:"POST",shop:d,body:{shop:d,collectionId:o,results:i.data.results.map(ve=>({language:ve.language,seo:ve.data})),options:{updateTitle:!0,updateDescription:!0,updateSeo:!0,updateMetafields:!0}}});if(!(w!=null&&w.ok))throw new Error((w==null?void 0:w.error)||"Apply failed")}catch(w){console.error("Apply error for collection:",o,w),H.push({id:g.id,title:g.title,message:w.message})}const O=r+1,U=Math.round(O/a*100);D({current:O,total:a,percent:U})}m("Optimization applied successfully!"),le(!1),oe({}),F([]),await N(),_(!1)}catch(n){m(`Error applying optimization: ${n.message}`)}finally{Q(!1),Y("")}},nt=async(t=[])=>{console.log("[DELETE-SEO-BULK] ===== BULK DELETE START ====="),console.log("[DELETE-SEO-BULK] Languages to delete:",t),console.log("[DELETE-SEO-BULK] Selected items:",h),console.log("[DELETE-SEO-BULK] Select all pages:",j),xe(!0),ze("");try{const s=j?p:p.filter(o=>h.includes(o.id)),n=s.length*t.length;let a=0;const r=[];for(const o of s)for(const i of t)try{console.log(`[DELETE-SEO-BULK] Deleting ${i} for ${o.title} (${o.id})`);const g=await y("/collections/delete-seo",{method:"DELETE",shop:d,body:{shop:d,collectionId:o.id,language:i}});console.log(`[DELETE-SEO-BULK] Success for ${o.title} - ${i}:`,g)}catch(g){console.error(`[DELETE-SEO-BULK] Failed to delete ${i} for ${o.title}:`,g),r.push({id:o.id,title:o.title,message:g.message})}finally{a++,D({current:a,total:n,percent:Math.round(a/n*100)})}m(`Deleted optimization for ${t.join(", ").toUpperCase()}`),setTimeout(async()=>{await N(),F([]),_(!1),q(!1)},100)}catch(s){console.error("[DELETE-SEO-BULK] Error:",s),m(`Delete error: ${s.message}`)}finally{console.log("[DELETE-SEO-BULK] ===== BULK DELETE END ====="),xe(!1),Z([]),B([])}},ot=t=>{var o,i;const s=((o=T[t.id])==null?void 0:o.success)||Ce[t.id],n=((i=T[t.id])==null?void 0:i.data)||Ce[t.id],a=t.optimizedLanguages||[];console.log(`[COLLECTIONS] Rendering collection "${t.title}":`,{optimizedLanguages:a,availableLanguages:E,hasSeoData:t.hasSeoData});const r=e.jsx(u,{width:"40px",height:"40px",background:"surface-neutral",borderRadius:"200"});return e.jsx(Lt,{id:t.id,media:r,accessibilityLabel:`View details for ${t.title}`,onClick:g=>{console.log("[Collections-ResourceItem] ===== CLICK ON RESOURCE ITEM ====="),console.log("[Collections-ResourceItem] e.target:",g.target),console.log("[Collections-ResourceItem] e.target.tagName:",g.target.tagName),console.log('[Collections-ResourceItem] e.target.closest("input"):',g.target.closest("input")),console.log('[Collections-ResourceItem] e.target.closest("a"):',g.target.closest("a")),console.log("[Collections-ResourceItem] Event bubbling up...")},children:e.jsxs(b,{gap:"400",align:"center",blockAlign:"center",wrap:!1,children:[e.jsxs(u,{style:{flex:"1 1 30%",minWidth:"200px"},children:[e.jsx(c,{variant:"bodyMd",fontWeight:"semibold",children:t.title}),e.jsxs(c,{variant:"bodySm",tone:"subdued",children:["Handle: ",t.handle]})]}),e.jsx(u,{style:{flex:"0 0 15%",minWidth:"100px",textAlign:"center"},children:e.jsxs(c,{variant:"bodyMd",children:[t.productsCount," products"]})}),e.jsx(u,{style:{flex:"0 0 25%",minWidth:"160px"},children:t.hasSeoData?e.jsx(b,{gap:"100",children:E.map(g=>e.jsx(ee,{tone:a.includes(g)?"success":"subdued",size:"small",children:g.toUpperCase()},g))}):e.jsx(ee,{tone:"subdued",children:"No AI Search Optimisation"})}),e.jsxs(u,{style:{flex:"0 0 15%",minWidth:"120px"},children:[s&&e.jsx(A,{size:"slim",onClick:()=>{ie(n),re(!0)},children:"Preview JSON"}),!s&&t.hasSeoData&&e.jsx(A,{size:"slim",loading:Ge,onClick:()=>Xe(t.id),children:"Preview JSON"})]})]})})},lt=ne&&!Qe.processing&&e.jsx(S,{open:ne,title:"Processing Collections",onClose:()=>{},noScroll:!0,children:e.jsx(S.Section,{children:e.jsxs(I,{gap:"400",children:[e.jsx(c,{variant:"bodyMd",children:fe?`Processing: ${fe}`:"Preparing..."}),e.jsx(ke,{progress:v.percent}),e.jsxs(c,{variant:"bodySm",tone:"subdued",children:[v.current," of ",v.total," collections (",v.percent,"%)"]})]})})}),at=e.jsx(S,{open:He,title:"Select Languages",primaryAction:{content:"Generate Optimization for AI Search",onAction:tt,disabled:C.length===0||Oe},secondaryActions:[{content:"Cancel",onAction:()=>ae(!1)}],children:e.jsx(S.Section,{children:e.jsxs(I,{gap:"300",children:[e.jsxs(c,{variant:"bodyMd",children:["Select languages to generate AI Search Optimisation for ",j?"all":h.length," selected collections:"]}),Oe&&e.jsx(mt,{tone:"warning",title:"Language limit exceeded",children:e.jsxs(I,{gap:"200",children:[e.jsxs(c,{variant:"bodyMd",children:["Your ",P," plan supports up to ",k," language",k>1?"s":""," per collection.",h.length===1&&((Ae=(Ie=(be=p.find(t=>t.id===h[0]))==null?void 0:be.optimizationSummary)==null?void 0:Ie.optimizedLanguages)==null?void 0:Ae.length)>0&&e.jsxs(e.Fragment,{children:[" This collection already has ",p.find(t=>t.id===h[0]).optimizationSummary.optimizedLanguages.length," optimized language(s)."]})]}),e.jsx(c,{variant:"bodyMd",children:"Please deselect some languages or upgrade your plan to add more:"}),e.jsx(A,{variant:"primary",onClick:()=>{const t=new URLSearchParams(window.location.search),s=t.toString()?`?${t.toString()}`:"";window.location.href=`/billing${s}`},children:"Upgrade Plan"})]})}),e.jsx(u,{paddingBlockStart:"200",children:e.jsx(b,{gap:"200",wrap:!0,children:E.map(t=>e.jsx(Me,{label:t.toUpperCase(),checked:C.includes(t),onChange:s=>{R(s?[...C,t]:C.filter(n=>n!==t))}},t))})}),e.jsx(u,{paddingBlockStart:"200",children:e.jsx(A,{plain:!0,onClick:()=>{C.length===E.length?R([]):E.length>k?(R([...E]),m(`You selected ${E.length} languages. Your ${P} plan supports ${k}. Please deselect or upgrade.`)):R([...E])},children:C.length===E.length?"Deselect all":"Select all"})})]})})}),rt=e.jsx(S,{open:Fe&&!ne,title:"AI Search Optimisation Results",primaryAction:{content:"Apply Optimisation",onAction:st,disabled:!Object.values(T).some(t=>t.success)},secondaryActions:[{content:"Cancel",onAction:()=>le(!1)}],children:e.jsx(S.Section,{children:e.jsxs(I,{gap:"300",children:[e.jsxs(b,{gap:"400",children:[e.jsxs(u,{children:[e.jsx(c,{variant:"bodyMd",fontWeight:"semibold",children:"Successful:"}),e.jsx(c,{variant:"headingLg",fontWeight:"bold",tone:"success",children:Object.values(T).filter(t=>t.success&&!t.skipped).length})]}),e.jsxs(u,{children:[e.jsx(c,{variant:"bodyMd",fontWeight:"semibold",children:"Skipped:"}),e.jsx(c,{variant:"headingLg",fontWeight:"bold",tone:"info",children:Object.values(T).filter(t=>t.skipped).length})]}),e.jsxs(u,{children:[e.jsx(c,{variant:"bodyMd",fontWeight:"semibold",children:"Failed:"}),e.jsx(c,{variant:"headingLg",fontWeight:"bold",tone:"critical",children:Object.values(T).filter(t=>!t.success&&!t.skipped).length})]})]}),H.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(St,{}),e.jsx(c,{variant:"bodyMd",fontWeight:"semibold",children:"Errors:"}),e.jsxs(u,{maxHeight:"200px",overflowY:"scroll",children:[H.slice(0,10).map((t,s)=>e.jsxs(c,{variant:"bodySm",tone:"critical",children:[t.collection,": ",t.error]},s)),H.length>10&&e.jsxs(c,{variant:"bodySm",tone:"subdued",children:["... and ",H.length-10," more errors"]})]})]})]})})}),it=e.jsx(S,{open:qe,title:"SEO Data Preview",secondaryActions:[{content:"Close",onAction:()=>{re(!1),ie(null)}}],children:e.jsx(S.Section,{children:e.jsx(u,{children:e.jsx("pre",{style:{whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:"12px",backgroundColor:"#f6f6f7",padding:"12px",borderRadius:"4px",maxHeight:"400px",overflow:"auto"},children:Ee?JSON.stringify(Ee,null,2):""})})})}),ct=e.jsx(S,{open:Ue,title:"Delete Optimization for AI Search",onClose:()=>{V(!1),B([])},primaryAction:{content:"Continue",onAction:()=>{Z($),V(!1),X(!0)},disabled:$.length===0},secondaryActions:[{content:"Cancel",onAction:()=>{V(!1),B([])}}],children:e.jsx(S.Section,{children:e.jsxs(I,{gap:"400",children:[e.jsxs(c,{variant:"bodyMd",children:["Select languages to delete AI Search Optimisation from ",j?W:h.length," selected collections:"]}),e.jsx(u,{paddingBlockStart:"200",children:e.jsx(b,{gap:"400",wrap:!1,children:E.map(t=>e.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",userSelect:"none"},children:[e.jsx("input",{type:"checkbox",checked:$.includes(t),onChange:s=>{B(s.target.checked?[...$,t]:$.filter(n=>n!==t))},style:{marginRight:"8px",width:"18px",height:"18px",cursor:"pointer"}}),e.jsx(c,{variant:"bodyMd",children:t.toUpperCase()})]},t))})}),e.jsx(u,{children:e.jsx(A,{plain:!0,onClick:()=>{B($.length===E.length?[]:[...E])},children:"Select all"})}),e.jsx(u,{paddingBlockStart:"300",children:e.jsx(c,{variant:"bodySm",children:"Warning: This will permanently delete AI Search Optimisation data for selected languages."})})]})})}),dt=e.jsx(S,{open:We,title:"Confirm Deletion",onClose:()=>{X(!1),Z([])},primaryAction:{content:"Delete",destructive:!0,onAction:async()=>{X(!1),setTimeout(()=>{nt(je)},100)}},secondaryActions:[{content:"Cancel",onAction:()=>{X(!1),Z([]),B([])}}],children:e.jsx(S.Section,{children:e.jsxs(I,{gap:"400",children:[e.jsx(c,{variant:"bodyMd",children:"Are you sure you want to delete AI Search Optimisation for the following languages?"}),e.jsx(u,{paddingBlockStart:"200",children:e.jsx(b,{gap:"200",children:je.map(t=>e.jsx(ee,{tone:"warning",children:t.toUpperCase()},t))})}),e.jsxs(c,{variant:"bodyMd",children:["This will delete optimisation from ",j?W:h.length," selected collections."]}),e.jsx(u,{paddingBlockStart:"200",children:e.jsx(c,{variant:"bodySm",tone:"critical",children:"This action cannot be undone."})})]})})}),ut=Se&&e.jsx(S,{open:Se,title:"Deleting SEO Data",onClose:()=>{},noScroll:!0,children:e.jsx(S.Section,{children:e.jsxs(I,{gap:"400",children:[e.jsx(c,{variant:"bodyMd",children:"Deleting selected languages..."}),e.jsx(ke,{progress:v.percent}),e.jsxs(c,{variant:"bodySm",tone:"subdued",children:[v.current," of ",v.total," operations (",v.percent,"%)"]})]})})}),gt=e.jsx(Ot,{heading:"No collections found",action:{content:"Clear filters",onAction:()=>{te(""),J("all"),N()}},image:"https://cdn.shopify.com/s/files/1/0262/4071/2726/files/emptystate-files.png",children:e.jsx("p",{children:"Try adjusting your filters or search terms"})});return e.jsxs(e.Fragment,{children:[e.jsx(De,{children:e.jsxs(u,{padding:"400",children:[e.jsxs(b,{gap:"400",align:"space-between",blockAlign:"start",wrap:!1,children:[e.jsx(u,{minWidth:"400px",maxWidth:"600px",children:e.jsx(I,{gap:"200",children:e.jsx(xt,{label:"",placeholder:"Search by collection name...",value:M,onChange:te,prefix:e.jsx(jt,{}),clearButton:!0,onClearButtonClick:()=>te("")})})}),e.jsxs(I,{gap:"200",children:[e.jsx(A,{primary:!0,onClick:Ze,disabled:h.length===0&&!j,children:"Generate Optimization for AI Search"}),(()=>{if(h.length===0&&!j||!p.filter(a=>h.includes(a.id)).some(a=>{var r;return((r=a.optimizedLanguages)==null?void 0:r.length)>0}))return null;const n=["growth","growth_extra","growth extra","enterprise"].includes(P.toLowerCase().replace(/_/g," "));return e.jsx(A,{onClick:n?et:()=>{const a=new URLSearchParams(window.location.search),r=a.toString()?`?${a.toString()}`:"";window.location.href=`/billing${r}`},disabled:h.length===0&&!j,tone:n?void 0:"success",children:n?"AI Enhanced add-ons for AI Search":"✨ AI Enhanced add-ons (Upgrade to Growth)"})})(),e.jsx(A,{outline:!0,destructive:!0,onClick:()=>V(!0),disabled:h.length===0||!Ke,children:"Delete Optimization for AI Search"})]})]}),W>0&&e.jsx(u,{paddingBlockStart:"300",children:e.jsx(Me,{label:`Select all ${W} collections`,checked:j,onChange:Ve})})]})}),e.jsx(u,{paddingBlockStart:"400",children:e.jsxs(De,{children:[e.jsxs(u,{padding:"400",borderBlockEndWidth:"025",borderColor:"border",children:[e.jsx(b,{gap:"200",wrap:!0,children:e.jsx(Ct,{active:he,activator:e.jsx(A,{disclosure:"down",onClick:()=>se(!he),removeUnderline:!0,children:e.jsxs(b,{gap:"100",blockAlign:"center",children:[e.jsx("span",{children:"AI Search Status"}),L!=="all"&&e.jsx(u,{onClick:t=>{t.stopPropagation(),J("all")},children:e.jsx(c,{as:"span",tone:"subdued",children:"✕"})})]})}),onClose:()=>se(!1),children:e.jsx(u,{padding:"300",minWidth:"200px",children:e.jsx(Et,{title:"AI Search Status",titleHidden:!0,choices:[{label:"All collections",value:"all"},{label:"Has AI Search Optimisation",value:"true"},{label:"No AI Search Optimisation",value:"false"}],selected:[L],onChange:t=>{J(t[0]),se(!1)}})})})}),L!=="all"&&e.jsx(u,{paddingBlockStart:"200",children:e.jsx(b,{gap:"100",wrap:!0,children:e.jsx(ee,{onRemove:()=>J("all"),children:L==="true"?"Has AI Search Optimisation":"No AI Search Optimisation"})})})]}),e.jsx(yt,{resourceName:{singular:"collection",plural:"collections"},items:p,renderItem:ot,selectedItems:h,onSelectionChange:Ye,selectable:!0,loading:Pe,totalItemsCount:W,emptyState:gt,showHeader:!1},`collections-${p.length}-${h.length}`)]})}),lt,at,rt,it,ct,dt,ut,e.jsx(pt,{open:_e,onClose:()=>ce(!1),featureName:"Collections AI Enhancement",currentPlan:P,errorMessage:(f==null?void 0:f.error)||(f==null?void 0:f.message),minimumPlanRequired:f==null?void 0:f.minimumPlanRequired}),f&&e.jsx(ft,{open:Je,onClose:()=>{Le(!1),de(null)},tokensRequired:f.tokensRequired||0,tokensAvailable:f.tokensAvailable||0,tokensNeeded:f.tokensNeeded||0,feature:"ai-seo-collection",shop:d,needsUpgrade:f.needsUpgrade||!1,minimumPlan:f.minimumPlanForFeature||null,currentPlan:f.currentPlan||P}),we&&e.jsx(wt,{content:we,onDismiss:()=>m("")})]})}export{qt as default};
