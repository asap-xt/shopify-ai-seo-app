function T(r=!0){return r&&console.log("[SFETCH] Creating session fetch for App Bridge v4"),async(o,n={})=>{console.log("[SFETCH] Fetching:",o,n);const{method:c="GET",headers:i={},body:a,responseType:l,...h}=n,p={method:c,headers:{"Content-Type":"application/json",...i},credentials:"include",body:a},t=await fetch(o,p);console.log("[SFETCH] Response:",t.status,t.statusText);let e;if(l==="text")e=await t.text();else{const s=await t.text();try{e=s?JSON.parse(s):null}catch{e={error:(s==null?void 0:s.slice(0,500))||"Non-JSON response"}}}if(!t.ok){const s=(e==null?void 0:e.error)||(e==null?void 0:e.message)||`HTTP ${t.status}`;throw new Error(s)}return e}}export{T as m};
