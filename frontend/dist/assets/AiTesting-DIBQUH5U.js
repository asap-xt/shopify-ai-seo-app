import{r as u,j as e,R as Ae}from"./react-vendor-6uwpMgJP.js";import{m as ke}from"./sessionFetch-CJopfSv0.js";import{I as Te}from"./InsufficientTokensModal-CWgAibhb.js";import{T as Pe}from"./TrialActivationModal-D5G7vt1Y.js";import{C as te,B as I,a as c,T as s,D as q,I as l,e as N,d as E,L as de,b as x,f as o,h as Ie,k as Me,M as G}from"./polaris-B96_d87K.js";import{g as me}from"./usePlanHierarchy-BjUEvxZF.js";import"./app-bridge-ugs9K9zh.js";import"./vendor-BC2YhXnC.js";import"./index-CAhGQgKQ.js";const Ce={productsJson:"Products JSON Feed",basicSitemap:"Basic Sitemap",robotsTxt:"robots.txt.liquid",schemaData:"Schema Data (theme.liquid)",welcomePage:"AI Welcome Page",collectionsJson:"Collections JSON Feed",storeMetadata:"Store Metadata",aiSitemap:"AI-Enhanced Sitemap",advancedSchemaApi:"Advanced Schema Data"};function $e({testResults:L={},aiTestResults:g={},stats:se={}}){const Q=f=>{const a=Math.max(0,Math.min(100,f))/100,w=239,m=68,P=68,d=16,S=185,M=129,z=Math.round(w+(d-w)*a),V=Math.round(m+(S-m)*a),W=Math.round(P+(M-P)*a);return`rgb(${z}, ${V}, ${W})`},T=f=>{const a=f*3.6,w=Math.max(0,Math.min(100,f))/100;let m=[];if(w<=.2)m=["#ef4444 0deg",`#ef4444 ${a}deg`,`#e5e7eb ${a}deg`,"#e5e7eb 360deg"];else if(w<=.4)m=["#ef4444 0deg",`#f97316 ${a*.5}deg`,`#f97316 ${a}deg`,`#e5e7eb ${a}deg`,"#e5e7eb 360deg"];else if(w<=.6){const P=a*.33,d=a*.66;m=["#ef4444 0deg",`#f97316 ${P}deg`,`#f59e0b ${d}deg`,`#f59e0b ${a}deg`,`#e5e7eb ${a}deg`,"#e5e7eb 360deg"]}else if(w<=.8){const P=a*.2,d=a*.4,S=60*3.6,M=Math.max(S,a*.7);m=["#ef4444 0deg",`#f97316 ${P}deg`,`#f59e0b ${d}deg`,`#22c55e ${M}deg`,`#22c55e ${a}deg`,`#e5e7eb ${a}deg`,"#e5e7eb 360deg"]}else{const P=a*.15,d=a*.3,S=60*3.6,M=Math.max(S,a*.5);m=["#ef4444 0deg",`#f97316 ${P}deg`,`#f59e0b ${d}deg`,`#10b981 ${M}deg`,`#10b981 ${a}deg`,`#e5e7eb ${a}deg`,"#e5e7eb 360deg"]}return`conic-gradient(${m.join(", ")})`},h=u.useMemo(()=>((a,w,m,P)=>{var oe,C,R,O,X,ie,Z;const d={endpointAvailability:0,aiValidationQuality:0,optimizationCoverage:0,structuredDataQuality:0,total:0},S={productsJson:5,basicSitemap:4,robotsTxt:2,schemaData:2,welcomePage:3,collectionsJson:4,storeMetadata:4,aiSitemap:3,advancedSchemaApi:3};let M=0,z=0;for(const[t,v]of Object.entries(a||{})){const A=S[t]||1;z+=A,v.status==="success"?M+=A:v.status==="warning"?M+=A*.7:v.status==="locked"&&(M+=A*.3)}d.endpointAvailability=z>0?Math.round(M/z*30):0;const V={excellent:1,good:.75,fair:.5,poor:.25,unavailable:0,locked:.1};let W=0,D=0;for(const[t,v]of Object.entries(w||{})){if(t==="robotsTxt"||t==="schemaData")continue;const A=((oe=v.rating)==null?void 0:oe.toLowerCase())||"unavailable",$=V[A]||0,U=S[t]||1;W+=$*U,D+=U}d.aiValidationQuality=D>0?Math.round(W/D*40):0;const Y=m.totalProducts||0,H=m.optimizedProducts||0,ne=m.totalCollections||0,K=m.optimizedCollections||0;let p=0;if(Y>0){const t=H/Y;p+=t*12}if(ne>0){const t=K/ne;p+=t*8}else Y>0&&(p+=8);d.optimizationCoverage=Math.round(p);let y=0;if(((C=a==null?void 0:a.schemaData)==null?void 0:C.status)==="success"&&(y+=3),((R=a==null?void 0:a.storeMetadata)==null?void 0:R.status)==="success"){y+=3;const t=(X=(O=w==null?void 0:w.storeMetadata)==null?void 0:O.rating)==null?void 0:X.toLowerCase();t==="excellent"?y+=4:t==="good"&&(y+=2)}else((ie=a==null?void 0:a.storeMetadata)==null?void 0:ie.status)==="locked"&&(y+=1);((Z=a==null?void 0:a.advancedSchemaApi)==null?void 0:Z.status)==="success"&&(y+=2),d.structuredDataQuality=Math.min(10,Math.round(y)),d.total=Math.min(100,d.endpointAvailability+d.aiValidationQuality+d.optimizationCoverage+d.structuredDataQuality);let F="E",J="#ef4444";d.total>=80?(F="A",J="#10b981"):d.total>=60?(F="B",J="#3b82f6"):d.total>=40?(F="C",J="#f59e0b"):d.total>=20&&(F="D",J="#f97316");const j=[];if(d.endpointAvailability<20){const t=Object.entries(a||{}).filter(([A,$])=>$.status==="locked").length,v=Object.entries(a||{}).filter(([A,$])=>$.status==="error"||$.status==="failed").length;t>0&&v===0?j.push("Several AI discovery endpoints are locked due to plan limitations. Upgrade your plan to unlock them."):t>0&&v>0?j.push("Some endpoints are missing or not working. Others are locked due to plan limitations. Fix endpoint issues and upgrade your plan to improve your score."):j.push("Several AI discovery endpoints are missing or not working. Fix endpoint issues to improve your score.")}if(d.aiValidationQuality<30){const t=Object.entries(w||{}).filter(([v,A])=>{var U;const $=(U=A.rating)==null?void 0:U.toLowerCase();return($==="poor"||$==="fair")&&v!=="robotsTxt"&&v!=="schemaData"}).map(([v])=>P[v]||v);t.length>0&&(j.push(`${t.length} endpoint(s) have low data quality ratings. Improve content quality to boost your score.`),j.push(`Review and improve: ${t.join(", ")}`))}return d.optimizationCoverage<15&&(j.push("Low optimization coverage. Optimize more products and collections to improve your score."),j.push("Go to Search Optimization for AI and optimize your products/collections")),d.structuredDataQuality<7&&j.push("Structured data could be improved. Add organization schema and enhance product schema."),{score:d.total,grade:F,gradeColor:J,breakdown:d,recommendations:j.length>0?j:["Your store is well-optimized for AI search engines!"]}})(L,g,se,Ce),[L,g,se]);return h?(console.log("[AIEOScoreCard] Rendering with score:",h.score),e.jsx(te,{children:e.jsx(I,{padding:"400",children:e.jsxs(c,{gap:"300",children:[e.jsxs(c,{gap:"100",children:[e.jsx(s,{as:"h3",variant:"headingMd",children:"AIEO Score"}),e.jsx(s,{variant:"bodySm",tone:"subdued",children:"Overall AI Engine Optimization rating"})]}),e.jsx(q,{}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px"},children:[e.jsx(I,{style:{width:"138px",height:"138px",borderRadius:"50%",background:T(h.score),display:"flex",alignItems:"center",justifyContent:"center",position:"relative",flexShrink:0},children:e.jsx(I,{style:{width:"103.5px",height:"103.5px",borderRadius:"50%",background:"white",position:"absolute",zIndex:1}})}),e.jsxs(c,{gap:"100",children:[e.jsxs(s,{variant:"headingMd",fontWeight:"semibold",style:{color:Q(h.score)},children:["AIEO Score = ",h.score]}),e.jsxs(s,{variant:"headingMd",fontWeight:"bold",style:{color:Q(h.score)},children:["AIEO Rating = ",h.grade]})]})]}),e.jsxs(c,{gap:"200",children:[e.jsx(s,{variant:"headingSm",children:"Score Breakdown"}),e.jsxs(c,{gap:"100",children:[e.jsxs(l,{align:"space-between",children:[e.jsx(s,{variant:"bodyMd",children:"Endpoint Availability"}),e.jsxs(s,{variant:"bodyMd",fontWeight:"semibold",children:[h.breakdown.endpointAvailability,"/30"]})]}),e.jsx(N,{progress:Math.round(h.breakdown.endpointAvailability/30*100),size:"small",tone:"success"})]}),e.jsxs(c,{gap:"100",children:[e.jsxs(l,{align:"space-between",children:[e.jsx(s,{variant:"bodyMd",children:"AI Validation Quality"}),e.jsxs(s,{variant:"bodyMd",fontWeight:"semibold",children:[h.breakdown.aiValidationQuality,"/40"]})]}),e.jsx(N,{progress:Math.round(h.breakdown.aiValidationQuality/40*100),size:"small",tone:"success"})]}),e.jsxs(c,{gap:"100",children:[e.jsxs(l,{align:"space-between",children:[e.jsx(s,{variant:"bodyMd",children:"Optimization Coverage"}),e.jsxs(s,{variant:"bodyMd",fontWeight:"semibold",children:[h.breakdown.optimizationCoverage,"/20"]})]}),e.jsx(N,{progress:Math.round(h.breakdown.optimizationCoverage/20*100),size:"small",tone:"success"})]}),e.jsxs(c,{gap:"100",children:[e.jsxs(l,{align:"space-between",children:[e.jsx(s,{variant:"bodyMd",children:"Structured Data Quality"}),e.jsxs(s,{variant:"bodyMd",fontWeight:"semibold",children:[h.breakdown.structuredDataQuality,"/10"]})]}),e.jsx(N,{progress:Math.round(h.breakdown.structuredDataQuality/10*100),size:"small",tone:"success"})]})]})]}),h.recommendations&&h.recommendations.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(q,{}),e.jsxs(c,{gap:"200",children:[e.jsx(s,{variant:"headingSm",children:"Recommendations"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:h.recommendations.map((f,a)=>e.jsx(E,{tone:f.includes("Fix")||f.includes("Improve")||f.includes("low")?"critical":f.includes("Review")?"warning":"info",children:e.jsx(s,{variant:"bodyMd",children:f})},a))})]})]})]})})})):(console.error("[AIEOScoreCard] calculatedAIEOScore is null/undefined"),null)}const Ee=(L,g="")=>{try{return new URLSearchParams(window.location.search).get(L)||g}catch{return g}};function Ge({shop:L}){const g=L||Ee("shop",""),se=i=>{const n=new URLSearchParams(window.location.search),r=n.toString()?`?${n.toString()}`:"";window.location.href=`${i}${r}`},[Q,T]=u.useState(""),h=useMemo(()=>ke(),[]),[f,a]=u.useState(null),[w,m]=u.useState(""),[P,d]=u.useState(!1),[S,M]=u.useState(null),[z,V]=u.useState(""),[W,D]=u.useState(!1),[Y,H]=u.useState(!1),[ne,K]=u.useState(!1),[p,y]=u.useState(null),[F,J]=u.useState(!1),[j,oe]=u.useState(null),[C,R]=u.useState({}),[O,X]=u.useState(!1),[ie,Z]=u.useState(0),[t,v]=u.useState({}),[A,$]=u.useState(!1),[U,he]=u.useState(0),[re,ce]=u.useState(null),[ze,ge]=u.useState(null),[De,le]=u.useState(null),[xe,je]=u.useState({totalProducts:0,optimizedProducts:0,totalCollections:0,optimizedCollections:0}),[ue,pe]=u.useState(null);u.useEffect(()=>{g&&(Se(),_(),ye(),be())},[g,h]);const be=()=>{try{const i=localStorage.getItem(`ai-test-results-${g}`);if(i){const n=JSON.parse(i);n.results&&n.timestamp&&(R(n.results),pe(new Date(n.timestamp)))}}catch(i){console.error("[AI-TESTING] Error loading saved test results:",i)}},fe=i=>{try{const n={results:i,timestamp:new Date().toISOString()};localStorage.setItem(`ai-test-results-${g}`,JSON.stringify(n)),pe(new Date)}catch(n){console.error("[AI-TESTING] Error saving test results:",n)}};u.useEffect(()=>{const i=()=>{!document.hidden&&g&&_()};return document.addEventListener("visibilitychange",i),()=>{document.removeEventListener("visibilitychange",i)}},[g,h]);const Se=async()=>{var i,n,r;try{const b=await h(`/api/billing/info?shop=${g}`),k=((i=b==null?void 0:b.subscription)==null?void 0:i.plan)||"Starter";a(k),ce(((n=b==null?void 0:b.tokens)==null?void 0:n.balance)||0),ge(((r=b==null?void 0:b.subscription)==null?void 0:r.trialEndsAt)||null)}catch(b){console.error("[AI-TESTING] Error loading billing info:",b),a("Starter"),ce(0)}},_=async()=>{var i,n;try{const r=await h(`/api/billing/info?shop=${g}`);ce(((i=r==null?void 0:r.tokens)==null?void 0:i.balance)||0),ge(((n=r==null?void 0:r.subscription)==null?void 0:n.trialEndsAt)||null)}catch(r){console.error("[AI-TESTING] Error loading token balance:",r)}},ye=async()=>{var i,n,r,b;try{const k=await h(`/api/dashboard/stats?shop=${g}`);je({totalProducts:((i=k==null?void 0:k.products)==null?void 0:i.total)||0,optimizedProducts:((n=k==null?void 0:k.products)==null?void 0:n.optimized)||0,totalCollections:((r=k==null?void 0:k.collections)==null?void 0:r.total)||0,optimizedCollections:((b=k==null?void 0:k.collections)==null?void 0:b.optimized)||0})}catch(k){console.error("[AI-TESTING] Error loading stats:",k)}},B=i=>{if(!f)return!1;const n=me(f);switch(i){case"productsJson":return n>=0;case"storeMetadata":return n>=1;case"welcomePage":case"collectionsJson":return n>=2;case"aiSitemap":return n>=3;case"schemaData":return n>=4;case"meta":return n>=0;case"claude":return n>=0;case"gemini":return n>=1;case"chatgpt":return n>=2;case"perplexity":return n>=3;case"deepseek":return n>=4;default:return!1}},ae=(i,n)=>{M({name:i,url:n}),d(!0)},ve=async()=>{X(!0),Z(0),R({});try{const i=await h("/api/ai-testing/run-tests",{method:"POST",body:{shop:g}});i.results?(R(i.results),Z(100),fe(i.results),T("Basic tests completed!")):T("Testing failed. Please try again.")}catch(i){console.error("[AI-TESTING] Error running tests:",i),T("Failed to run tests. Please try again.")}finally{X(!1)}},we=async()=>{if(me(f)<1){y({message:"AI-powered validation requires Professional plan or higher",requiredPlan:"Professional",currentPlan:f||"Starter"}),D(!0);return}$(!0),he(0),v({});try{const n=await h("/api/ai-testing/ai-validate",{method:"POST",body:{shop:g,endpointResults:C}});if(n&&n.results){if(v(n.results),he(100),n.aiEOScore){const r=n.aiEOScore;le(r),T(`AI validation completed! Score: ${r.score||"N/A"}/100 (${n.tokensUsed||0} tokens used)`)}else le(null),T(`AI validation completed! (${n.tokensUsed||0} tokens used)`);_()}else le(null),T("AI validation failed. Please try again.")}catch(n){if(n.status===402){if(n.trialRestriction&&n.requiresActivation){y(n),K(!0);return}if(n.requiresUpgrade){y(n),D(!0);return}if(n.requiresPurchase){y(n),H(!0);return}}T("Failed to run AI validation. Please try again.")}finally{$(!1)}},ee=async(i,n=null)=>{try{m("Generating AI response...");let r=`/api/ai-discovery/simulate?shop=${g}&type=${i}`;n&&(r+=`&question=${encodeURIComponent(n)}`);const b=await h(r,{method:"GET"});m(b.response||"No response generated")}catch(r){if(console.error("[AI-TESTING] Simulation error:",r),r.status===402){if(r.trialRestriction&&r.requiresActivation){y(r),K(!0),m("");return}if(r.requiresUpgrade){y(r),D(!0),m("");return}if(r.requiresPurchase){y(r),H(!0),m("");return}}m("Error generating response. Please try again."),T("Failed to simulate AI response")}};return e.jsxs(e.Fragment,{children:[e.jsxs(c,{gap:"400",children:[e.jsx(E,{tone:"info",children:e.jsx(s,{children:"Test how AI models discover and understand your store content. Check if your structured data and AI Discovery features are working correctly."})}),e.jsx($e,{testResults:C,aiTestResults:t,stats:xe}),e.jsxs(de,{children:[e.jsx(de.Section,{variant:"oneHalf",children:e.jsx(te,{children:e.jsx(I,{padding:"300",children:e.jsxs(c,{gap:"400",children:[e.jsxs(l,{align:"space-between",blockAlign:"center",children:[e.jsxs(c,{gap:"100",children:[e.jsx(s,{as:"h3",variant:"headingMd",children:"ðŸ”§ Basic AIEO Tests"}),e.jsx(s,{variant:"bodySm",tone:"subdued",children:"Quick check if endpoints are accessible and returning data"})]}),e.jsx(x,{onClick:ve,loading:O,disabled:O,children:O?"Testing...":"Run Basic Tests"})]}),ue&&Object.keys(C).length>0&&!O&&e.jsx(E,{tone:"info",children:e.jsxs(s,{variant:"bodySm",children:["These results are from ",ue.toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),". Run Basic Tests again to refresh."]})}),O&&e.jsx(I,{children:e.jsxs(c,{gap:"200",children:[e.jsx(s,{variant:"bodySm",children:"Testing endpoints..."}),e.jsx(N,{progress:ie,size:"small"})]})}),Object.keys(C).length>0&&e.jsx(c,{gap:"300",children:Object.entries(C).map(([i,n],r)=>{const b=r===Object.entries(C).length-1;return e.jsxs(Ae.Fragment,{children:[e.jsx(l,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(l,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:n.name}),n.status==="success"&&e.jsx(o,{tone:"success",children:"âœ“ OK"}),n.status==="warning"&&e.jsx(o,{tone:"warning",children:"âš ï¸ Warning"}),n.status==="error"&&e.jsx(o,{tone:"critical",children:"âœ— Failed"}),n.status==="locked"&&e.jsx(o,{children:"ðŸ”’ Locked"})]}),e.jsx(s,{variant:"bodySm",tone:"subdued",children:n.message}),n.actionLink&&e.jsx(x,{size:"slim",onClick:()=>se(n.actionLink),children:i==="basicSitemap"?"Go to Sitemap":i==="aiSitemap"?"Go to Settings":"Go"})]})}),!b&&e.jsx(q,{})]},i)})}),Object.keys(C).length===0&&!O&&e.jsx(E,{tone:"info",children:e.jsx(s,{children:'Click "Run Basic Tests" to check if your AI Discovery endpoints are configured correctly.'})})]})})})}),e.jsx(de.Section,{variant:"oneHalf",children:e.jsx(te,{children:e.jsx(I,{padding:"300",children:e.jsxs(c,{gap:"400",children:[e.jsxs(l,{align:"space-between",blockAlign:"center",children:[e.jsxs(c,{gap:"100",children:[e.jsxs(l,{gap:"200",blockAlign:"center",children:[e.jsx(s,{as:"h3",variant:"headingMd",children:"ðŸ¤– AI-Powered Validation"}),re!==null&&e.jsxs(o,{tone:re>50?"success":"warning",children:[re," tokens"]}),e.jsx(x,{size:"micro",onClick:()=>_(),accessibilityLabel:"Refresh token balance",children:"ðŸ”„"})]}),e.jsx(s,{variant:"bodySm",tone:"subdued",children:"Deep analysis with AI bot"}),f&&e.jsx(s,{variant:"bodySm",tone:"subdued",children:"Requires: Professional+ plan & pay-per-use tokens"})]}),e.jsx(x,{onClick:we,loading:A,disabled:A||Object.keys(C).length===0,variant:"primary",children:A?"Validating...":"Test with AI Bot"})]}),A&&e.jsx(I,{children:e.jsxs(c,{gap:"200",children:[e.jsx(s,{variant:"bodySm",children:"AI is analyzing your endpoints..."}),e.jsx(N,{progress:U,size:"small",tone:"primary"})]})}),Object.keys(t).length>0&&e.jsxs(c,{gap:"300",children:[t.productsJson&&e.jsxs(e.Fragment,{children:[e.jsx(l,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(l,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"Products JSON Feed"}),t.productsJson.rating==="excellent"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Excellent"}),t.productsJson.rating==="good"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Good"}),t.productsJson.rating==="fair"&&e.jsx(o,{tone:"warning",children:"ðŸ¤– Fair"}),t.productsJson.rating==="poor"&&e.jsx(o,{tone:"critical",children:"ðŸ¤– Poor"}),t.productsJson.rating==="locked"&&e.jsx(o,{children:"ðŸ”’ Locked"}),t.productsJson.rating==="unavailable"&&e.jsx(o,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(s,{variant:"bodySm",children:t.productsJson.feedback}),t.productsJson.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",t.productsJson.suggestions]})]})}),e.jsx(q,{})]}),t.storeMetadata&&e.jsxs(e.Fragment,{children:[e.jsx(l,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(l,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"Store Metadata"}),t.storeMetadata.rating==="excellent"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Excellent"}),t.storeMetadata.rating==="good"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Good"}),t.storeMetadata.rating==="fair"&&e.jsx(o,{tone:"warning",children:"ðŸ¤– Fair"}),t.storeMetadata.rating==="poor"&&e.jsx(o,{tone:"critical",children:"ðŸ¤– Poor"}),t.storeMetadata.rating==="locked"&&e.jsx(o,{children:"ðŸ”’ Locked"}),t.storeMetadata.rating==="unavailable"&&e.jsx(o,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(s,{variant:"bodySm",children:t.storeMetadata.feedback}),t.storeMetadata.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",t.storeMetadata.suggestions]})]})}),e.jsx(q,{})]}),t.welcomePage&&e.jsxs(e.Fragment,{children:[e.jsx(l,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(l,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"AI Welcome Page"}),t.welcomePage.rating==="excellent"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Excellent"}),t.welcomePage.rating==="good"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Good"}),t.welcomePage.rating==="fair"&&e.jsx(o,{tone:"warning",children:"ðŸ¤– Fair"}),t.welcomePage.rating==="poor"&&e.jsx(o,{tone:"critical",children:"ðŸ¤– Poor"}),t.welcomePage.rating==="locked"&&e.jsx(o,{children:"ðŸ”’ Locked"}),t.welcomePage.rating==="unavailable"&&e.jsx(o,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(s,{variant:"bodySm",children:t.welcomePage.feedback}),t.welcomePage.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",t.welcomePage.suggestions]})]})}),e.jsx(q,{})]}),t.collectionsJson&&e.jsxs(e.Fragment,{children:[e.jsx(l,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(l,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"Collections JSON Feed"}),t.collectionsJson.rating==="excellent"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Excellent"}),t.collectionsJson.rating==="good"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Good"}),t.collectionsJson.rating==="fair"&&e.jsx(o,{tone:"warning",children:"ðŸ¤– Fair"}),t.collectionsJson.rating==="poor"&&e.jsx(o,{tone:"critical",children:"ðŸ¤– Poor"}),t.collectionsJson.rating==="locked"&&e.jsx(o,{children:"ðŸ”’ Locked"}),t.collectionsJson.rating==="unavailable"&&e.jsx(o,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(s,{variant:"bodySm",children:t.collectionsJson.feedback}),t.collectionsJson.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",t.collectionsJson.suggestions]})]})}),e.jsx(q,{})]}),t.aiSitemap&&e.jsxs(e.Fragment,{children:[e.jsx(l,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(l,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"AI-Enhanced Sitemap"}),t.aiSitemap.rating==="excellent"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Excellent"}),t.aiSitemap.rating==="good"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Good"}),t.aiSitemap.rating==="fair"&&e.jsx(o,{tone:"warning",children:"ðŸ¤– Fair"}),t.aiSitemap.rating==="poor"&&e.jsx(o,{tone:"critical",children:"ðŸ¤– Poor"}),t.aiSitemap.rating==="locked"&&e.jsx(o,{children:"ðŸ”’ Locked"}),t.aiSitemap.rating==="unavailable"&&e.jsx(o,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(s,{variant:"bodySm",children:t.aiSitemap.feedback}),t.aiSitemap.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",t.aiSitemap.suggestions]})]})}),e.jsx(q,{})]}),t.schemaData&&e.jsx(l,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(l,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"Advanced Schema Data"}),t.schemaData.rating==="excellent"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Excellent"}),t.schemaData.rating==="good"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Good"}),t.schemaData.rating==="fair"&&e.jsx(o,{tone:"warning",children:"ðŸ¤– Fair"}),t.schemaData.rating==="poor"&&e.jsx(o,{tone:"critical",children:"ðŸ¤– Poor"}),t.schemaData.rating==="locked"&&e.jsx(o,{children:"ðŸ”’ Locked"}),t.schemaData.rating==="unavailable"&&e.jsx(o,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(s,{variant:"bodySm",children:t.schemaData.feedback}),t.schemaData.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",t.schemaData.suggestions]})]})})]}),Object.keys(t).length===0&&!A&&e.jsx(E,{tone:"info",children:e.jsx(s,{children:Object.keys(C).length===0?"Run Basic Tests first, then use AI validation for deep analysis":'Click "Test with AI Bot" to get AI-powered feedback on your endpoint data quality'})}),!f&&e.jsx(E,{tone:"warning",children:e.jsx(s,{children:"Loading plan information..."})})]})})})})]}),e.jsx(te,{children:e.jsx(I,{padding:"300",children:e.jsxs(c,{gap:"400",children:[e.jsx(s,{as:"h3",variant:"headingMd",children:"Test with Real AI Bots"}),e.jsx(s,{variant:"bodyMd",tone:"subdued",children:"Manually test your store with real AI search engines"}),e.jsxs(c,{gap:"200",children:[e.jsxs(l,{align:"space-between",children:[e.jsx(s,{children:"Meta AI Search"}),B("meta")?e.jsx(x,{onClick:()=>ae("Meta AI","https://www.meta.ai/"),size:"slim",children:"Test"}):e.jsx(x,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),e.jsxs(l,{align:"space-between",children:[e.jsx(s,{children:"Claude AI Search"}),B("claude")?e.jsx(x,{onClick:()=>ae("Claude AI","https://claude.ai/"),size:"slim",children:"Test"}):e.jsx(x,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),e.jsxs(l,{align:"space-between",children:[e.jsx(s,{children:"Gemini AI Search"}),B("gemini")?e.jsx(x,{onClick:()=>ae("Gemini AI","https://gemini.google.com/"),size:"slim",children:"Test"}):e.jsx(x,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),e.jsxs(l,{align:"space-between",children:[e.jsx(s,{children:"ChatGPT Web Search"}),B("chatgpt")?e.jsx(x,{url:`https://chat.openai.com/?q=What+products+does+${g}+sell%3F+Tell+me+about+this+business+and+what+they+offer`,external:!0,size:"slim",children:"Test"}):e.jsx(x,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),e.jsxs(l,{align:"space-between",children:[e.jsx(s,{children:"Perplexity AI Search"}),B("perplexity")?e.jsx(x,{url:`https://www.perplexity.ai/search?q=What+products+does+${g}+sell%3F+Tell+me+about+this+business+and+what+they+offer`,external:!0,size:"slim",children:"Test"}):e.jsx(x,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),e.jsxs(l,{align:"space-between",children:[e.jsx(s,{children:"DeepSeek AI Search"}),B("deepseek")?e.jsx(x,{onClick:()=>ae("DeepSeek AI","https://chat.deepseek.com/"),size:"slim",children:"Test"}):e.jsx(x,{disabled:!0,size:"slim",children:"Plan upgrade required"})]})]}),e.jsx(E,{tone:"info",children:e.jsxs(s,{children:[e.jsx("strong",{children:"How to test with AI bots:"}),e.jsx("br",{}),"â€¢ ",e.jsx("strong",{children:"Perplexity & ChatGPT:"}),' Click "Test" - they support URL parameters',e.jsx("br",{}),"â€¢ ",e.jsx("strong",{children:"Meta AI, Claude, Gemini, DeepSeek:"}),' Click "Test" to open a modal with the prompt to copy']})})]})})}),e.jsx(te,{children:e.jsx(I,{padding:"300",children:e.jsxs(c,{gap:"300",children:[e.jsx(s,{as:"h4",variant:"headingSm",children:"AI Search Simulation"}),e.jsx(s,{variant:"bodyMd",tone:"subdued",children:"Test how AI bots would respond to questions about your store based on your structured data."}),e.jsx(E,{tone:"info",children:e.jsxs(c,{gap:"100",children:[e.jsx(s,{variant:"bodySm",fontWeight:"semibold",children:"Simulation Details:"}),e.jsxs(s,{variant:"bodySm",children:["â€¢ ",e.jsx("strong",{children:"Data Source:"})," Your store's products, collections, and metadata"]}),e.jsxs(s,{variant:"bodySm",children:["â€¢ ",e.jsx("strong",{children:"Response Style:"})," Concise (2-3 sentences), natural language"]}),e.jsxs(s,{variant:"bodySm",children:["â€¢ ",e.jsx("strong",{children:"Best For:"})," General store info, products, categories, contact details"]}),e.jsxs(s,{variant:"bodySm",children:["â€¢ ",e.jsx("strong",{children:"Limitations:"})," May not have real-time data (current stock, active promotions, exact shipping times)"]})]})}),e.jsxs(c,{gap:"200",children:[e.jsxs(l,{align:"space-between",children:[e.jsx(s,{children:"What products does this store sell?"}),e.jsx(x,{onClick:()=>ee("products"),size:"slim",children:"Simulate Response"})]}),e.jsxs(l,{align:"space-between",children:[e.jsx(s,{children:"Tell me about this business"}),e.jsx(x,{onClick:()=>ee("business"),size:"slim",children:"Simulate Response"})]}),e.jsxs(l,{align:"space-between",children:[e.jsx(s,{children:"What categories does this store have?"}),e.jsx(x,{onClick:()=>ee("categories"),size:"slim",children:"Simulate Response"})]}),e.jsxs(l,{align:"space-between",children:[e.jsx(s,{children:"What is this store's contact information?"}),e.jsx(x,{onClick:()=>ee("contact"),size:"slim",children:"Simulate Response"})]})]}),e.jsx(q,{}),e.jsxs(c,{gap:"200",children:[e.jsx(s,{variant:"headingSm",children:"Ask Your Own Question"}),e.jsx(Ie,{label:"",value:z,onChange:V,placeholder:"e.g., What are your return policies? Do you ship internationally?",autoComplete:"off",connectedRight:e.jsx(x,{onClick:()=>{z.trim()?ee("custom",z):T("Please enter a question")},disabled:!z.trim(),children:"Ask AI"})})]}),w&&e.jsxs(I,{background:"bg-surface-secondary",padding:"300",borderRadius:"200",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"AI Bot Response:"}),e.jsx(I,{paddingBlockStart:"200",children:e.jsx(s,{variant:"bodyMd",children:w})})]})]})})})]}),Q&&e.jsx(Me,{content:Q,onDismiss:()=>T("")}),e.jsx(G,{open:P,onClose:()=>d(!1),title:`Test with ${S==null?void 0:S.name}`,primaryAction:{content:"Open AI Bot",url:S==null?void 0:S.url,external:!0},secondaryActions:[{content:"Copy Prompt",onAction:()=>{navigator.clipboard.writeText(`What products does ${g} sell? Tell me about this business and what they offer.`),T("Prompt copied to clipboard!")}}],children:e.jsx(G.Section,{children:e.jsxs(c,{gap:"300",children:[e.jsx(s,{variant:"bodyMd",children:'1. Click "Copy Prompt" (left button)'}),e.jsxs(s,{variant:"bodyMd",children:['2. Click "Open AI Bot" (right button) to visit ',S==null?void 0:S.name]}),e.jsx(s,{variant:"bodyMd",children:"3. Paste the prompt and send"}),e.jsxs(I,{background:"bg-surface-secondary",padding:"300",borderRadius:"200",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"Prompt to test:"}),e.jsx(I,{paddingBlockStart:"200",children:e.jsxs(s,{variant:"bodyMd",as:"p",children:["What products does ",g," sell? Tell me about this business and what they offer."]})})]}),e.jsx(E,{tone:"info",children:e.jsx(s,{children:"The AI bot will search the web and use your store's structured data to answer."})})]})})}),e.jsx(G,{open:F,onClose:()=>J(!1),title:"Upgrade Required",primaryAction:{content:"View Plans",onAction:()=>{const i=new URLSearchParams(window.location.search),n=i.toString()?`?${i.toString()}`:"";window.location.href=`/billing${n}`}},secondaryActions:[{content:"Cancel",onAction:()=>J(!1)}],children:e.jsx(G.Section,{children:e.jsxs(c,{gap:"300",children:[e.jsxs(s,{variant:"bodyMd",children:[e.jsx("strong",{children:j==null?void 0:j.endpoint})," requires ",e.jsx("strong",{children:j==null?void 0:j.requiredPlan})," plan or higher."]}),e.jsxs(s,{variant:"bodyMd",tone:"subdued",children:["Your current plan: ",e.jsx("strong",{children:j==null?void 0:j.currentPlan})]}),e.jsx(E,{tone:"info",children:e.jsx(s,{children:"Upgrade to access this advanced AI Discovery feature."})})]})})}),e.jsx(G,{open:W,onClose:()=>D(!1),title:"Upgrade Required",primaryAction:{content:"View Plans",onAction:()=>{const i=new URLSearchParams(window.location.search),n=i.toString()?`?${i.toString()}`:"";window.location.href=`/billing${n}`}},secondaryActions:[{content:"Cancel",onAction:()=>D(!1)}],children:e.jsx(G.Section,{children:e.jsxs(c,{gap:"300",children:[e.jsxs(s,{variant:"bodyMd",children:["AI Testing requires ",e.jsx("strong",{children:(p==null?void 0:p.minimumPlan)||"Professional"})," plan or higher."]}),e.jsxs(s,{variant:"bodyMd",tone:"subdued",children:["Your current plan: ",e.jsx("strong",{children:(p==null?void 0:p.currentPlan)||"Starter"})]}),e.jsx(E,{tone:"info",children:e.jsx(s,{children:"Upgrade to test AI responses with real store data."})})]})})}),e.jsx(Te,{open:Y,onClose:()=>{H(!1),y(null),_()},tokensRequired:(p==null?void 0:p.tokensRequired)||0,tokensAvailable:(p==null?void 0:p.tokensAvailable)||0,tokensNeeded:(p==null?void 0:p.tokensNeeded)||0,feature:"ai-testing-simulation",shop:g,needsUpgrade:!1,returnTo:"/ai-testing"}),p&&e.jsx(Pe,{open:ne,onClose:()=>{K(!1),y(null)},feature:p.feature||"ai-testing-simulation",trialEndsAt:p.trialEndsAt,currentPlan:p.currentPlan||f,tokensRequired:p.tokensRequired||0,onActivatePlan:async()=>{try{const i=await h("/api/billing/activate",{method:"POST",body:JSON.stringify({shop:g,endTrial:!0,returnTo:"/ai-testing"})});if(i.requiresApproval&&i.confirmationUrl){window.top.location.href=i.confirmationUrl;return}window.location.reload()}catch(i){console.error("[AI-TESTING] âŒ Activation failed:",i);const n=new URLSearchParams(window.location.search),r=n.get("host"),b=n.get("embedded");window.location.href=`/billing?shop=${encodeURIComponent(g)}&embedded=${b}&host=${encodeURIComponent(r)}`}},onPurchaseTokens:()=>{const i=new URLSearchParams(window.location.search),n=i.get("host"),r=i.get("embedded");window.location.href=`/billing?shop=${encodeURIComponent(g)}&embedded=${r}&host=${encodeURIComponent(n)}&returnTo=${encodeURIComponent("/ai-testing")}`}})]})}export{Ge as default};
