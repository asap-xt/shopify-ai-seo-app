import{j as e}from"./app-bridge-Xsakdzxq-1760618680022.js";import{r as j}from"./react-vendor-tAaa2TlE-1760618680022.js";import{M as b,d as l,f as y,T as t,I as A,a as x,B as M}from"./polaris-DChFqJnK-1760618680022.js";import{a as v}from"./index-SnfbQ5Si-1760618680022.js";function R({open:r,onClose:n,featureName:p="AI Enhancement",currentPlan:h="starter",errorMessage:d=null,minimumPlanRequired:s=null,features:f=null}){const u=()=>{n();const c=new URLSearchParams(window.location.search),o=c.toString()?`?${c.toString()}`:"";window.location.href=`/billing${o}`},m=f||["Collections optimization (Professional+)","AI Enhancement features with pay-per-use tokens","Advanced AI features","Growth Extra & Enterprise include monthly tokens"];return e.jsx(b,{open:r,onClose:n,title:"Upgrade Required",primaryAction:{content:"Upgrade Plan",onAction:u},secondaryActions:[{content:"Cancel",onAction:n}],children:e.jsx(b.Section,{children:e.jsxs(l,{gap:"400",children:[e.jsx(y,{tone:"warning",children:e.jsx(t,{variant:"bodyMd",fontWeight:"semibold",children:d||`${p} requires a higher plan`})}),e.jsx(t,{variant:"bodyMd",children:e.jsxs("strong",{children:["Current plan: ",h]})}),s&&e.jsx(t,{variant:"bodyMd",children:e.jsxs("strong",{children:["Required plan: ",s," or higher"]})}),e.jsxs(l,{gap:"200",children:[e.jsx(t,{variant:"bodyMd",children:e.jsx("strong",{children:"Upgrade to unlock:"})}),e.jsx(l,{gap:"100",children:m.map((c,o)=>e.jsxs(t,{variant:"bodyMd",children:["✓ ",c]},o))})]})]})})})}function T({open:r,onClose:n,feature:p,tokensRequired:h,tokensAvailable:d,tokensNeeded:s,shop:f,needsUpgrade:u=!1,minimumPlan:i=null,currentPlan:m=null}){const c=()=>{const a=new URLSearchParams(window.location.search),g=a.toString()?`?${a.toString()}`:"";window.location.href=`/billing${g}`},S={"ai-seo-product-basic":"AI Search Optimization (Products)","ai-seo-product-enhanced":"AI Search Optimization (Products - Enhanced)","ai-seo-collection":"AI Search Optimization (Collections)","ai-testing-simulation":"AI Testing & Simulation","ai-schema-advanced":"Advanced Schema Data","ai-sitemap-optimized":"AI-Optimized Sitemap"}[p]||"This feature";return e.jsx(b,{open:r,onClose:n,title:"💳 Insufficient Tokens",primaryAction:{content:"Go to Billing",onAction:c},secondaryActions:[{content:"Cancel",onAction:n}],children:e.jsx(b.Section,{children:e.jsxs(l,{gap:"400",children:[e.jsx(y,{tone:"warning",children:e.jsxs(l,{gap:"200",children:[e.jsx(t,{variant:"bodyMd",fontWeight:"semibold",children:"You don't have enough tokens to use AI Enhancement"}),e.jsxs(A,{gap:"400",align:"space-between",blockAlign:"center",children:[e.jsxs(x,{children:[e.jsx(t,{variant:"bodySm",tone:"subdued",children:"Current balance:"}),e.jsxs(t,{variant:"headingSm",fontWeight:"bold",children:[(d==null?void 0:d.toLocaleString())||0," tokens"]})]}),e.jsxs(x,{children:[e.jsx(t,{variant:"bodySm",tone:"subdued",children:"Required:"}),e.jsxs(t,{variant:"headingSm",fontWeight:"bold",children:[((d||0)+(s||0)).toLocaleString()," tokens"]})]}),e.jsxs(x,{children:[e.jsx(t,{variant:"bodySm",tone:"subdued",children:"You need:"}),e.jsx(t,{variant:"headingSm",fontWeight:"bold",as:"span",children:e.jsxs("span",{style:{color:"#D82C0D"},children:[(s==null?void 0:s.toLocaleString())||0," more"]})})]})]})]})}),e.jsx(x,{background:"bg-surface-secondary",padding:"400",borderRadius:"200",children:e.jsxs(l,{gap:"200",children:[e.jsx(t,{variant:"headingMd",children:S}),e.jsx(t,{variant:"bodySm",tone:"subdued",children:"✅ Buy tokens to use this AI-enhanced feature"}),u&&i&&e.jsxs(t,{variant:"bodySm",tone:"subdued",children:["✨ Or upgrade to ",i," plan to get tokens included"]})]})}),u&&i&&e.jsx(y,{tone:"info",children:e.jsxs(l,{gap:"200",children:[e.jsxs(t,{variant:"bodyMd",fontWeight:"semibold",children:["💡 Upgrade to ",i," to get tokens included"]}),e.jsxs(t,{variant:"bodySm",children:["Current plan: ",e.jsx("strong",{children:m})]}),e.jsxs(t,{variant:"bodySm",tone:"subdued",children:[i," plans include AI tokens every month. Or you can purchase tokens separately while staying on your current plan."]})]})}),e.jsx(x,{background:"bg-surface-secondary",padding:"300",borderRadius:"200",children:e.jsxs(l,{gap:"100",children:[e.jsx(t,{variant:"bodySm",tone:"subdued",children:"💡 Tokens enable AI-powered features like AI Enhancement and AI Testing"}),e.jsx(t,{variant:"bodySm",tone:"subdued",children:"♻️ Tokens never expire and roll over indefinitely"}),e.jsx(t,{variant:"bodySm",tone:"subdued",children:"🛒 Purchase tokens or upgrade your plan from the Billing page"})]})})]})})})}function E(){const{t:r}=v(),[n,p]=j.useState(null),[h,d]=j.useState(!0),[s,f]=j.useState(()=>sessionStorage.getItem("storeMetadataBannerDismissed")==="true");j.useEffect(()=>{u()},[]);const u=async()=>{try{console.log("[StoreMetadataBanner] Fetching metadata status...");const a=await fetch("/api/store/metadata-status");if(console.log("[StoreMetadataBanner] Response status:",a.status),a.ok){const g=await a.json();console.log("[StoreMetadataBanner] Status data:",g),p(g)}else console.error("[StoreMetadataBanner] Failed to fetch status:",a.status)}catch(a){console.error("[StoreMetadataBanner] Error fetching metadata status:",a)}finally{d(!1)}},i=()=>{f(!0),sessionStorage.setItem("storeMetadataBannerDismissed","true")},m=()=>{const a=new URLSearchParams(window.location.search),g=a.toString()?`?${a.toString()}`:"";window.location.href=`/store-metadata${g}`};if(console.log("[StoreMetadataBanner] Render check:",{loading:h,dismissed:s,status:n,hasMetadata:n==null?void 0:n.hasMetadata}),h||s||!n||n.hasMetadata)return console.log("[StoreMetadataBanner] Not showing banner. Reason:",{loading:h,dismissed:s,noStatus:!n,hasMetadata:n==null?void 0:n.hasMetadata}),null;console.log("[StoreMetadataBanner] SHOWING BANNER!");let c=r("storeMetadata.banner.title","⚡ Boost AI Quality"),o="",S=!1;return n.hasPolicies?!n.hasTargetAudience&&!n.hasBrandVoice&&(o=r("storeMetadata.banner.brandingMissing","Add target audience and brand voice to help AI generate more on-brand, engaging content that resonates with your customers.")):(S=!0,!n.hasShipping&&!n.hasReturns?o=r("storeMetadata.banner.policiesMissing","Add shipping and return policies to help AI generate accurate, policy-compliant content. This prevents AI from inventing incorrect delivery times or warranty claims."):n.hasShipping?n.hasReturns||(o=r("storeMetadata.banner.returnsMissing","Add return policy to help AI generate accurate content about returns and refunds.")):o=r("storeMetadata.banner.shippingMissing","Add shipping information to help AI generate accurate content about delivery options.")),e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsxs(y,{title:c,tone:S?"warning":"info",onDismiss:i,children:[e.jsx("p",{children:o}),e.jsx("div",{style:{marginTop:"0.75rem"},children:e.jsxs(A,{gap:"200",children:[e.jsx(M,{onClick:m,variant:"primary",children:r("storeMetadata.banner.action","Quick Setup (2 min)")}),!S&&e.jsx(M,{onClick:i,children:r("common.remindLater","Remind me later")})]})})]})})}export{T as I,E as S,R as U};
