import{j as e}from"./app-bridge-DQuzKKB1-1763497324642.js";import{r as i}from"./react-vendor-tAaa2TlE-1763497324642.js";import{m as Ee}from"./sessionFetch-CGLNrMSZ-1763497324642.js";import{g as Be,P as ze}from"./usePlanHierarchy-BjUEvxZF-1763497324642.js";import{d as R}from"./index-_9e1GtzX-1763497324642.js";import{L as x,C as j,B as h,T as n,a as c,I as l,b as p,c as Oe,D as M,d as U,e as E,f as pe,g as Le}from"./polaris-CkgGEBWL-1763497324642.js";const $e=(B,o="")=>{try{return new URLSearchParams(window.location.search).get(B)||o}catch{return o}};function qe({shop:B}){var K,X,Z,ee,ne,te,re,se,ae,oe,ie,de;const o=B||$e("shop",""),w=i.useMemo(()=>Ee(),[]),S=t=>{const a=new URLSearchParams(window.location.search),u=a.toString()?`?${a.toString()}`:"";window.location.href=`${t}${u}`},[z,N]=i.useState(!0),[r,me]=i.useState(null),[s,xe]=i.useState(null),[f,be]=i.useState(null),[d,O]=i.useState(null),[k,A]=i.useState(!1),[G,P]=i.useState(!1),[ye,F]=i.useState(()=>{try{const t=localStorage.getItem(`syncCardExpanded_${o}`);return t===null?!0:t==="true"}catch{return!0}}),m=i.useRef(null),q=i.useRef(!1),g=i.useRef(null),[v,je]=i.useState(()=>{try{return!(localStorage.getItem(`gettingStartedSeenOnce_${o}`)==="true")}catch{return!1}}),[Se,fe]=i.useState(()=>{try{return localStorage.getItem(`dismissedUpgradeBanner_${o}`)==="true"}catch{return!1}}),[ve,we]=i.useState(()=>{try{return localStorage.getItem(`dismissedTokenBanner_${o}`)==="true"}catch{return!1}}),I=i.useRef(null);i.useEffect(()=>(V(!0),ke(),()=>{m.current&&(clearInterval(m.current),m.current=null),I.current&&clearTimeout(I.current),g.current&&(clearTimeout(g.current),g.current=null)}),[o]),i.useEffect(()=>{if(!z&&(s!=null&&s.plan)&&v)try{!(localStorage.getItem(`gettingStartedSeenOnce_${o}`)==="true")&&!g.current&&(g.current=setTimeout(()=>{try{localStorage.setItem(`gettingStartedSeenOnce_${o}`,"true")}catch(a){console.error("[Dashboard] Error marking Getting Started as seen:",a)}},1e4))}catch(t){console.error("[Dashboard] Error checking Getting Started status:",t)}return()=>{g.current&&(clearTimeout(g.current),g.current=null)}},[z,s==null?void 0:s.plan,v,o]),i.useEffect(()=>{d&&d.autoSyncEnabled&&!k&&!q.current&&(q.current=!0,D())},[d==null?void 0:d.autoSyncEnabled]);const V=async(t=!1)=>(!t&&I.current&&clearTimeout(I.current),new Promise(a=>{I.current=setTimeout(async()=>{try{N(!0);const[u,T]=await Promise.all([w(`/api/dashboard/stats?shop=${o}`),w(`/api/billing/tokens/balance?shop=${o}`)]);u&&(me(u),xe(u.subscription)),T&&be(T),a()}catch(u){console.error("[Dashboard] Error loading data:",u),a()}finally{N(!1)}},t?0:500)})),ke=async()=>{try{const t=await w(`/api/dashboard/sync-status?shop=${o}`);t&&(O(t),P(t.autoSyncEnabled||!1),A(!!t.inProgress))}catch(t){console.error("[Dashboard] Error loading sync status:",t)}},D=async()=>{try{A(!0);const t=await w(`/api/dashboard/sync?shop=${o}`,{method:"POST"});R("[Dashboard] Sync start response:",t),t!=null&&t.success||t!=null&&t.inProgress?(m.current&&clearInterval(m.current),m.current=setInterval(async()=>{try{const a=await w(`/api/dashboard/sync-status?shop=${o}`);a&&(O(a),a.inProgress||(m.current&&(clearInterval(m.current),m.current=null),A(!1),V()))}catch(a){console.error("[Dashboard] Poll error:",a)}},2e3)):A(!1)}catch(t){console.error("[Dashboard] Error syncing:",t),A(!1)}},Me=async t=>{try{R("[Dashboard] Toggling auto-sync to:",t),P(t);const a=await w(`/api/dashboard/auto-sync?shop=${o}`,{method:"POST",body:{enabled:t}});R("[Dashboard] Auto-sync toggle response:",a),a!=null&&a.success&&(P(!!a.autoSyncEnabled),O({...d||{},autoSyncEnabled:!!a.autoSyncEnabled}))}catch(a){console.error("[Dashboard] Error toggling auto-sync:",a),P(!t)}},L=((K=r==null?void 0:r.products)==null?void 0:K.total)>0?Math.round(r.products.optimized/r.products.total*100):0,$=((X=r==null?void 0:r.collections)==null?void 0:X.total)>0?Math.round(r.collections.optimized/r.collections.total*100):0;Be(s==null?void 0:s.plan);const H=i.useMemo(()=>({starter:9.99,professional:15.99,professional_plus:19.99,"professional plus":19.99,growth:29.99,growth_plus:35.99,"growth plus":35.99,growth_extra:79.99,"growth extra":79.99,enterprise:139.99}),[]),Y=s!=null&&s.price&&s.price>0?s.price:s!=null&&s.plan?H[s.plan]:void 0,_=t=>{switch(t){case"starter":return{products:70,languages:1};case"professional":return{products:70,languages:1};case"professional_plus":case"professional plus":return{products:200,languages:2};case"growth":return{products:450,languages:3};case"growth_plus":case"growth plus":return{products:450,languages:3};case"growth_extra":case"growth extra":return{products:750,languages:6};case"enterprise":return{products:1200,languages:10};default:return{products:0,languages:0}}},Q=t=>({starter:1,professional:2,professional_plus:2.5,"professional plus":2.5,growth:3,growth_plus:3.5,"growth plus":3.5,growth_extra:4,"growth extra":4,enterprise:5})[t]||0,Ae=()=>{var le,ue;if(!r)return null;const t=((le=r.products)==null?void 0:le.total)||0,a=((ue=r.languages)==null?void 0:ue.length)||1,u=(s==null?void 0:s.plan)||"starter",T=Q(u),Ce=ze;let y=null;for(const he of Ce){const ge=_(he);if(t<=ge.products&&a<=ge.languages){y=he;break}}if(y||(y="enterprise"),Q(y)<=T)return null;const C=_(u),ce=_(y);let W="";return t>C.products?W=`Your store has ${t} products, exceeding the ${C.products}-product limit of your current plan.`:a>C.languages&&(W=`Your store has ${a} language(s), exceeding the ${C.languages}-language limit of your current plan.`),{plan:y,planName:y.replace("_"," ").toUpperCase(),price:H[y],productLimit:ce.products,languageLimit:ce.languages,reason:W}},b=i.useMemo(()=>Ae(),[r,s]),Ie=i.useMemo(()=>{if(!(s!=null&&s.plan))return!1;const t=s.plan;return!(!["professional","professional_plus","professional plus","growth","growth_plus","growth plus"].includes(t)||((f==null?void 0:f.balance)||0)>=1e3)},[s,f]),Pe=()=>{try{localStorage.setItem(`dismissedUpgradeBanner_${o}`,"true"),fe(!0)}catch(t){console.error("[Dashboard] Error saving dismissed banner state:",t)}},De=()=>{try{localStorage.setItem(`dismissedTokenBanner_${o}`,"true"),we(!0)}catch(t){console.error("[Dashboard] Error saving dismissed token banner state:",t)}},Te=()=>{const t=!v;if(je(t),v&&!t)try{localStorage.setItem(`gettingStartedSeenOnce_${o}`,"true"),g.current&&(clearTimeout(g.current),g.current=null)}catch(a){console.error("[Dashboard] Error marking Getting Started as seen:",a)}};if(z)return e.jsx(x,{children:e.jsx(x.Section,{children:e.jsx(j,{children:e.jsx(h,{padding:"400",children:e.jsx(n,{children:"Loading dashboard..."})})})})});const J=!(d!=null&&d.synced);return e.jsxs(x,{children:[e.jsx(x.Section,{children:e.jsx(j,{children:e.jsxs(c,{gap:"300",children:[e.jsxs(l,{align:"space-between",blockAlign:"center",children:[e.jsx(n,{variant:"headingMd",children:"Getting Started"}),e.jsxs(p,{onClick:Te,disclosure:v?"up":"down",children:[v?"Hide":"Show"," Guide"]})]}),e.jsx(Oe,{open:v,id:"onboarding-collapsible",transition:{duration:"200ms",timingFunction:"ease-in-out"},children:e.jsx(h,{paddingBlockStart:"300",children:e.jsxs(c,{gap:"400",children:[e.jsx(M,{}),e.jsxs(c,{gap:"300",children:[e.jsx(n,{variant:"headingMd",as:"h3",children:"What This App Does"}),e.jsxs(n,{variant:"bodyMd",tone:"subdued",children:["This app helps optimize your Shopify store for ",e.jsx("strong",{children:"AI search engines"})," (like ChatGPT, Claude, Perplexity) by structuring your existing product data in a format that AI bots can easily understand and reference."]}),e.jsxs(n,{variant:"bodyMd",tone:"subdued",children:[e.jsx("strong",{children:"Important:"})," This app primarily ",e.jsx("strong",{children:"structures"})," your existing data rather than creating new content. AI-enhanced features are supplementary and require additional tokens (unless you're on Growth Extra or Enterprise plans)."]})]}),e.jsx(M,{}),e.jsxs(c,{gap:"200",children:[e.jsx(n,{variant:"headingMd",as:"h3",children:"Video Tutorial"}),e.jsx(h,{padding:"400",background:"bg-surface-secondary",borderRadius:"200",children:e.jsx("div",{style:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden",maxWidth:"100%",borderRadius:"8px"},children:e.jsx("iframe",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",border:"none"},src:"https://www.youtube-nocookie.com/embed/bNfDsyDQEkc?origin=https://admin.shopify.com",title:"Video Tutorial",referrerPolicy:"no-referrer-when-downgrade",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})})]}),e.jsx(M,{}),e.jsxs(c,{gap:"300",children:[e.jsx(n,{variant:"headingMd",as:"h3",children:"Quick Start Guide"}),e.jsxs(c,{gap:"200",children:[e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:"1. Sync Your Store Data"}),e.jsx(n,{variant:"bodyMd",tone:"subdued",children:'Click "Sync Now" to fetch your products, collections, languages, and markets from Shopify. This is required before you can start optimizing. Enable "Auto-sync on load" to keep your data fresh.'}),e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:"2. Plan Selection & Token Management"}),e.jsx(n,{variant:"bodyMd",tone:"subdued",children:'Plan selection happens during app installation. Visit "Plans & Billing" to upgrade your plan or purchase additional tokens for AI-enhanced features (Professional/Growth plans).'}),e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:"3. Structure Your Product Data"}),e.jsxs(n,{variant:"bodyMd",tone:"subdued",children:['Go to "Search Optimization for AI" → Products tab. First, create ',e.jsx("strong",{children:"basic optimization"})," by structuring existing titles, descriptions, and metadata for better AI consumption. This is essential - without basic optimization, AI-enhanced features cannot be applied."]}),e.jsxs(n,{variant:"bodyMd",tone:"subdued",children:["Also optimize your ",e.jsx("strong",{children:"Collections"})," to help AI bots understand your product categories and relationships."]}),e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:"4. Configure Store Metadata"}),e.jsx(n,{variant:"bodyMd",tone:"subdued",children:'Go to "Store Metadata" to configure store description, keywords, business information, and contact details (Professional+ plans). This helps AI bots understand your brand and business context.'}),e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:"5. Generate Sitemaps"}),e.jsxs(n,{variant:"bodyMd",tone:"subdued",children:["Navigate to Sitemap tab to generate your ",e.jsx("strong",{children:"standard sitemap"})," for search engines. For advanced optimization, go to Settings → Sitemap to configure ",e.jsx("strong",{children:"AI-enhanced sitemap"}),"with structured data that helps AI search engines discover and index your products (Growth Extra+ plans)."]}),e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:"6. AI-Enhanced Features (Optional)"}),e.jsxs(n,{variant:"bodyMd",tone:"subdued",children:["Use AI-enhanced add-ons to ",e.jsx("strong",{children:"supplement and strengthen"})," your data discovery by AI bots, increasing your store's chances of being well-represented. These include:"]}),e.jsxs(n,{variant:"bodyMd",tone:"subdued",children:["• ",e.jsx("strong",{children:"AI Testing:"})," Test how AI bots respond to your products (Professional+)"]}),e.jsxs(n,{variant:"bodyMd",tone:"subdued",children:["• ",e.jsx("strong",{children:"AI Discovery Endpoints:"})," Advanced AI simulation features (Growth Extra+)"]}),e.jsxs(n,{variant:"bodyMd",tone:"subdued",children:["• ",e.jsx("strong",{children:"Advanced Schema Data:"})," Rich structured data markup (Enterprise only)"]}),e.jsx(n,{variant:"bodyMd",tone:"subdued",children:"These features require additional tokens unless you're on Growth Extra or Enterprise plans."}),e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:"7. Configure AI Discovery Settings"}),e.jsx(n,{variant:"bodyMd",tone:"subdued",children:'Visit "Settings" to configure AI Discovery features:'}),e.jsxs(n,{variant:"bodyMd",tone:"subdued",children:["• ",e.jsx("strong",{children:"AI Bot Access Control:"})," Select which AI bots (OpenAI, Claude, Google, etc.) can access your store's structured data"]}),e.jsxs(n,{variant:"bodyMd",tone:"subdued",children:["• ",e.jsx("strong",{children:"AI Discovery Features:"})," Enable Products JSON Feed, Collections JSON Feed, Store Metadata, AI Welcome Page, AI-Enhanced Sitemap, and Advanced Schema Data"]}),e.jsxs(n,{variant:"bodyMd",tone:"subdued",children:["• Click ",e.jsx("strong",{children:'"Save Settings"'})," to save your configuration"]}),e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:"8. Install robots.txt (REQUIRED)"}),e.jsxs(n,{variant:"bodyMd",tone:"subdued",children:[e.jsx("strong",{children:"Critical:"})," After saving Settings, you must manually install robots.txt in your theme for AI bots to access your endpoints:"]}),e.jsxs(n,{variant:"bodyMd",tone:"subdued",children:['• In Settings, scroll to "robots.txt Configuration" section and click ',e.jsx("strong",{children:'"View & Copy robots.txt Code"'})]}),e.jsx(n,{variant:"bodyMd",tone:"subdued",children:"• Copy the generated robots.txt content"}),e.jsxs(n,{variant:"bodyMd",tone:"subdued",children:["• Go to ",e.jsx("strong",{children:"Online Store → Themes"})," → ",e.jsx("strong",{children:"Actions → Edit code"})," on your active theme"]}),e.jsxs(n,{variant:"bodyMd",tone:"subdued",children:["• Click ",e.jsx("strong",{children:'"Add a new file"'})," and type: ",e.jsx("code",{children:"templates/robots.txt.liquid"})]}),e.jsxs(n,{variant:"bodyMd",tone:"subdued",children:["• Paste the copied content and click ",e.jsx("strong",{children:"Save"})]}),e.jsx(n,{variant:"bodyMd",tone:"subdued",children:e.jsx("strong",{children:"Without this step, AI bots cannot discover your store's endpoints!"})}),e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:"9. Optional: Advanced Features"}),e.jsx(n,{variant:"bodyMd",tone:"subdued",children:"Additional features available in Settings:"}),e.jsxs(n,{variant:"bodyMd",tone:"subdued",children:["• ",e.jsx("strong",{children:"Advanced Schema Data:"})," Generate rich structured data markup for your products (Professional Plus/Enterprise plans)"]}),e.jsxs(n,{variant:"bodyMd",tone:"subdued",children:["• ",e.jsx("strong",{children:"AI Testing:"})," Test how AI bots respond to your products (Professional+ plans)"]}),e.jsx(n,{variant:"bodyMd",tone:"subdued",children:"These features may require additional tokens depending on your plan."}),e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:"10. Monitor & Improve"}),e.jsx(n,{variant:"bodyMd",tone:"subdued",children:"Return to Dashboard regularly to track optimization progress, monitor token usage, and review plan recommendations."})]})]}),e.jsx(h,{paddingBlockStart:"200",children:e.jsxs(l,{gap:"200",children:[e.jsx(p,{variant:"primary",onClick:()=>S("/ai-seo/products"),children:"Start Optimizing"}),e.jsx(p,{onClick:()=>S("/billing"),children:"View Plans"})]})})]})})})]})})}),J&&e.jsx(x.Section,{children:e.jsx(U,{title:"Sync your store",tone:"info",action:{content:k?"Syncing...":"Sync Now",onAction:D,loading:k},children:e.jsxs(c,{gap:"200",children:[e.jsx(n,{children:"Sync products, collections, languages, and markets to get started with AI optimization."}),k&&e.jsxs(h,{paddingBlockStart:"200",children:[e.jsx(E,{progress:50,size:"small",tone:"highlight"}),e.jsx(h,{paddingBlockStart:"100",children:e.jsx(n,{variant:"bodySm",tone:"subdued",children:"Fetching store data..."})})]})]})})}),!J&&d&&e.jsx(x.Section,{children:e.jsx(j,{children:ye?e.jsxs(c,{gap:"300",children:[e.jsxs(l,{align:"space-between",blockAlign:"center",children:[e.jsxs("div",{children:[e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:"Store Sync"}),e.jsx(h,{paddingBlockStart:"050",children:e.jsxs(n,{variant:"bodySm",tone:"subdued",children:["Last synced: ",d.lastSyncDate?new Date(d.lastSyncDate).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never"]})})]}),e.jsxs(l,{gap:"200",children:[e.jsx(p,{onClick:D,loading:k,children:"Sync Now"}),e.jsx(p,{onClick:()=>{F(!1);try{localStorage.setItem(`syncCardExpanded_${o}`,"false")}catch(t){console.error("[Dashboard] Error saving sync card state:",t)}},variant:"plain",children:"Close"})]})]}),e.jsx(M,{}),e.jsx(Le,{label:"Auto-sync on load",checked:G,onChange:Me,helpText:"Automatically sync store data when you open the dashboard"})]}):e.jsxs(l,{align:"space-between",blockAlign:"center",gap:"400",children:[e.jsxs(l,{gap:"200",blockAlign:"center",children:[G&&e.jsx(pe,{tone:"success",children:"Auto-sync enabled"}),e.jsxs(n,{variant:"bodySm",tone:"subdued",children:["Last synced: ",d.lastSyncDate?new Date(d.lastSyncDate).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never"]})]}),e.jsxs(l,{gap:"200",children:[e.jsx(p,{onClick:D,loading:k,size:"slim",children:"Sync Now"}),e.jsx(p,{onClick:()=>{F(!0);try{localStorage.setItem(`syncCardExpanded_${o}`,"true")}catch(t){console.error("[Dashboard] Error saving sync card state:",t)}},size:"slim",variant:"plain",children:"Expand"})]})]})})}),b&&!Se&&e.jsx(x.Section,{children:e.jsx(U,{title:`Upgrade to ${b.planName} Plan`,tone:"warning",action:{content:"View Plans",onAction:()=>S("/billing")},onDismiss:Pe,children:e.jsxs(c,{gap:"200",children:[e.jsx(n,{children:b.reason}),e.jsxs(n,{variant:"bodySm",tone:"subdued",children:["The ",b.planName," plan supports up to ",b.productLimit," products in ",b.languageLimit," language",b.languageLimit>1?"s":"","for $",b.price,"/month."]})]})})}),Ie&&!ve&&e.jsx(x.Section,{children:e.jsx(U,{title:"Buy Tokens to Unlock AI Features",tone:"info",action:{content:"Buy Tokens",onAction:()=>S("/billing")},onDismiss:De,children:e.jsx(n,{children:"Purchase tokens to access AI-enhanced optimization features like AEO generation, AI Discovery and more."})})}),e.jsx(x.Section,{children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"16px"},children:[e.jsxs("div",{style:{display:"grid",gap:16},children:[e.jsx(j,{children:e.jsxs(c,{gap:"400",children:[e.jsx(n,{variant:"headingMd",children:"Products & Collections"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:12},children:[e.jsxs(c,{gap:"150",children:[e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:"Products"}),e.jsxs(l,{align:"space-between",children:[e.jsx(n,{variant:"bodySm",tone:"subdued",children:"Total"}),e.jsx(n,{variant:"bodySm",fontWeight:"semibold",children:((Z=r==null?void 0:r.products)==null?void 0:Z.total)||0})]}),e.jsxs(l,{align:"space-between",children:[e.jsx(n,{variant:"bodySm",tone:"subdued",children:"Optimized"}),e.jsx(n,{variant:"bodySm",fontWeight:"semibold",tone:"success",children:((ee=r==null?void 0:r.products)==null?void 0:ee.optimized)||0})]}),e.jsxs(l,{align:"space-between",children:[e.jsx(n,{variant:"bodySm",tone:"subdued",children:"Unoptimized"}),e.jsx(n,{variant:"bodySm",fontWeight:"semibold",children:Math.max((((ne=r==null?void 0:r.products)==null?void 0:ne.total)||0)-(((te=r==null?void 0:r.products)==null?void 0:te.optimized)||0),0)})]}),e.jsxs(h,{paddingBlockStart:"100",children:[e.jsx(E,{progress:L,size:"small",tone:L===100?"success":"primary"}),e.jsx(h,{paddingBlockStart:"050",children:e.jsxs(n,{variant:"bodySm",tone:"subdued",children:[L,"% optimized"]})})]})]}),e.jsxs(c,{gap:"150",children:[e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:"Collections"}),e.jsxs(l,{align:"space-between",children:[e.jsx(n,{variant:"bodySm",tone:"subdued",children:"Total"}),e.jsx(n,{variant:"bodySm",fontWeight:"semibold",children:((re=r==null?void 0:r.collections)==null?void 0:re.total)||0})]}),e.jsxs(l,{align:"space-between",children:[e.jsx(n,{variant:"bodySm",tone:"subdued",children:"Optimized"}),e.jsx(n,{variant:"bodySm",fontWeight:"semibold",tone:"success",children:((se=r==null?void 0:r.collections)==null?void 0:se.optimized)||0})]}),e.jsxs(l,{align:"space-between",children:[e.jsx(n,{variant:"bodySm",tone:"subdued",children:"Unoptimized"}),e.jsx(n,{variant:"bodySm",fontWeight:"semibold",children:Math.max((((ae=r==null?void 0:r.collections)==null?void 0:ae.total)||0)-(((oe=r==null?void 0:r.collections)==null?void 0:oe.optimized)||0),0)})]}),e.jsxs(h,{paddingBlockStart:"100",children:[e.jsx(E,{progress:$,size:"small",tone:$===100?"success":"primary"}),e.jsx(h,{paddingBlockStart:"050",children:e.jsxs(n,{variant:"bodySm",tone:"subdued",children:[$,"% optimized"]})})]})]})]}),e.jsx(M,{}),e.jsx(l,{align:"space-between",children:e.jsxs(n,{variant:"bodySm",tone:"subdued",children:["Last synced: ",d!=null&&d.lastSyncDate?new Date(d.lastSyncDate).toLocaleString():"Never"]})})]})}),e.jsx(j,{style:{height:220,minHeight:220},children:e.jsxs(c,{gap:"300",children:[e.jsxs(l,{align:"space-between",blockAlign:"center",children:[e.jsxs("div",{children:[e.jsx(n,{variant:"headingMd",children:"Current Plan"}),e.jsx(h,{paddingBlockStart:"100",children:e.jsxs(n,{variant:"bodySm",tone:"subdued",children:[Y?`$${Y.toFixed(2)}`:"—","/month"]})})]}),e.jsx(pe,{tone:"info",size:"large",children:((ie=s==null?void 0:s.plan)==null?void 0:ie.replace("_"," ").toUpperCase())||"N/A"})]}),e.jsx(p,{onClick:()=>S("/billing"),children:"View Plans & Billing"})]})})]}),e.jsxs("div",{style:{display:"grid",gap:16},children:[e.jsx(j,{children:e.jsxs(c,{gap:"400",children:[e.jsx(n,{variant:"headingMd",children:"Languages & Markets"}),e.jsx(c,{gap:"200",children:r!=null&&r.languages&&r.languages.length>0?e.jsxs(e.Fragment,{children:[r.languages.slice().sort((t,a)=>(a.primary?1:0)-(t.primary?1:0)||(a.totalCount||0)-(t.totalCount||0)).slice(0,3).map((t,a)=>{const u=t.totalCount>0?Math.round(t.optimizedCount/t.totalCount*100):0;return e.jsxs(c,{gap:"050",children:[e.jsxs(l,{align:"space-between",children:[e.jsxs(n,{variant:"bodyMd",tone:"subdued",children:[t.name||t.code," ",t.primary?"★":""]}),e.jsxs(n,{variant:"bodySm",fontWeight:"semibold",children:[t.optimizedCount||0,"/",t.totalCount||0]})]}),e.jsx(E,{progress:u,size:"small",tone:u===100?"success":"primary"})]},a)}),r.languages.length>3&&e.jsxs(n,{variant:"bodySm",tone:"subdued",children:["+",r.languages.length-3," more..."]})]}):e.jsx(n,{variant:"bodyMd",tone:"subdued",children:"No language data"})}),(r==null?void 0:r.storeMarkets)&&r.storeMarkets.length>0&&e.jsxs(h,{paddingBlockStart:"200",children:[e.jsx(M,{}),e.jsx(h,{paddingBlockStart:"200",children:e.jsxs(n,{variant:"bodySm",tone:"subdued",children:["Markets: ",r.storeMarkets.slice(0,2).map(t=>t.name).join(", "),r.storeMarkets.length>2?` +${r.storeMarkets.length-2}`:""]})})]})]})}),e.jsx(j,{children:e.jsxs(c,{gap:"300",children:[e.jsx(n,{variant:"headingMd",children:"Last Optimization"}),e.jsx(n,{variant:"bodyLg",fontWeight:"semibold",children:r!=null&&r.lastOptimization?new Date(r.lastOptimization).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never"}),e.jsx(p,{onClick:()=>S("/ai-seo/products"),children:"Optimize Now"})]})}),e.jsx(j,{style:{height:220,minHeight:220},children:e.jsxs(c,{gap:"300",children:[e.jsx(n,{variant:"headingMd",children:"Token Balance"}),e.jsxs(n,{variant:"bodyLg",fontWeight:"semibold",children:[((de=f==null?void 0:f.balance)==null?void 0:de.toLocaleString())||0," tokens"]}),((s==null?void 0:s.plan)==="growth_extra"||(s==null?void 0:s.plan)==="enterprise")&&e.jsxs(n,{variant:"bodySm",tone:"subdued",children:[(s==null?void 0:s.plan)==="growth_extra"?"100M":"300M"," included monthly"]}),e.jsx(p,{onClick:()=>S("/billing"),children:"Manage Tokens"})]})})]})]})})]})}export{qe as default};
