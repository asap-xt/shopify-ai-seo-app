import{d as f}from"./index-B3HaywB2-1763413137426.js";function g(h=!0){return async(a,i={})=>{const{method:c="GET",headers:u={},body:r,responseType:p,...m}=i,d={method:c,headers:{"Content-Type":"application/json",...u},credentials:"include",body:r?typeof r=="string"?r:JSON.stringify(r):void 0},s=await fetch(a,d);f("[SFETCH] Response:",s.status,s.statusText);let e;if(p==="text")e=await s.text();else{const t=await s.text();try{e=t?JSON.parse(t):null}catch{e={error:(t==null?void 0:t.slice(0,500))||"Non-JSON response"}}}if(!s.ok){if(s.status===402&&e){const o=new Error(e.error||e.message||"Payment Required");throw o.status=402,Object.assign(o,e),o}const t=(e==null?void 0:e.error)||(e==null?void 0:e.message)||`HTTP ${s.status}`,n=new Error(t);throw n.status=s.status,n}return e}}export{g as m};
