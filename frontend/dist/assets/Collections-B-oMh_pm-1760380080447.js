import{j as e}from"./app-bridge-5mK6XDlw-1760380080447.js";import{r as l}from"./react-vendor-tAaa2TlE-1760380080447.js";import{m as ct}from"./index-CIyjpvjU-1760380080447.js";import{U as dt,I as ut}from"./InsufficientTokensModal-De0YVtsA-1760380080447.js";import{M as S,d as O,T as c,e as be,f as gt,B as I,a as u,I as b,g as Oe,D as ht,h as X,C as Ie,i as pt,S as ft,P as mt,j as St,R as xt,k as jt,m as Ct,E as Et}from"./polaris-DMIdEbpi-1760380080447.js";const yt=(z,r="")=>{try{return new URLSearchParams(window.location.search).get(z)||r}catch{return r}};function Wt({shop:z}){const r=z||yt("shop","");console.log("[COLLECTIONS] Component initialized with shop:",r,"shopProp:",z);const C=l.useMemo(()=>ct(),[]),[p,Ae]=l.useState([]),[ve,ue]=l.useState(!1),[U,Me]=l.useState(0),[h,W]=l.useState([]),[x,q]=l.useState(!1),[Lt,wt]=l.useState(""),[M,Z]=l.useState(""),[L,G]=l.useState("all"),[ge,ee]=l.useState(!1),[ke,Pe]=l.useState(""),[bt,De]=l.useState([]),[E,T]=l.useState([]),[j,he]=l.useState([]),[te,J]=l.useState(!1),[A,k]=l.useState({current:0,total:0,percent:0}),[pe,Y]=l.useState(""),[H,fe]=l.useState([]),[Ot,It]=l.useState(!1),[At,vt]=l.useState(null),[Mt,kt]=l.useState(!1),[Pt,Te]=l.useState(""),[Ne,Q]=l.useState(!1),[N,$]=l.useState([]),[me,Se]=l.useState(!1),[$e,K]=l.useState(!1),[Re,V]=l.useState(!1),[xe,_]=l.useState([]),[P,se]=l.useState({}),[Be,ne]=l.useState(!1),[ze,oe]=l.useState(!1),[je,Dt]=l.useState({}),[Ue,le]=l.useState(!1),[Ce,ae]=l.useState(null),[We,Ee]=l.useState(!1),[ye,m]=l.useState(""),[Tt,Nt]=l.useState(!1),[He,ie]=l.useState(!1),[Ke,Le]=l.useState(!1),[f,re]=l.useState(null),[F,ce]=l.useState("starter"),[v,Fe]=l.useState(1),[qe,R]=l.useState({processing:!1,current:0,total:0,currentItem:"",results:null});l.useEffect(()=>{if(!r)return;C("/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
      query PlansMe($shop:String!) {
        plansMe(shop:$shop) {
          plan
          planKey
          modelsSuggested
        }
      }
    `,variables:{shop:r}})}).then(s=>{var d,g,w;if((d=s==null?void 0:s.errors)!=null&&d.length)throw new Error(((g=s.errors[0])==null?void 0:g.message)||"GraphQL error");const n=(w=s==null?void 0:s.data)==null?void 0:w.plansMe,a=(n==null?void 0:n.modelsSuggested)||["google/gemini-1.5-flash"];De(a.map(B=>({label:B,value:B}))),Pe(a[0]),ce((n==null?void 0:n.planKey)||"starter");const i=((n==null?void 0:n.planKey)||"starter").toLowerCase();Fe({starter:1,professional:2,growth:3,"growth extra":6,growth_extra:6,enterprise:10}[i]||1)}).catch(s=>m(`Error loading models: ${s.message}`))},[r,C]),l.useEffect(()=>{r&&(console.log("[COLLECTIONS] Loading languages for shop:",r),C(`/api/languages/shop/${r}?shop=${r}`).then(t=>{console.log("[COLLECTIONS] Languages API data:",t);const s=(t==null?void 0:t.shopLanguages)||["en"];console.log("[COLLECTIONS] Extracted languages:",s),he(s),T([])}).catch(t=>{console.error("[COLLECTIONS] Languages API error:",t),he(["en"]),T([])}))},[r,C]);const D=l.useCallback(async()=>{var t;ue(!0);try{console.log("[COLLECTIONS] Shop value:",r),console.log("[COLLECTIONS] Shop prop:",z),console.log("[COLLECTIONS] URL search params:",window.location.search);const n=`/collections/list-graphql?${new URLSearchParams({shop:r,...M&&{search:M},...L!=="all"&&{optimized:L}})}`;console.log("[COLLECTIONS] Using GraphQL endpoint:",n);const a=await C(n);console.log("[COLLECTIONS] API Response data:",a),((t=a==null?void 0:a.collections)==null?void 0:t.length)>0&&(console.log("[COLLECTIONS] First collection optimizedLanguages:",a.collections[0].optimizedLanguages),console.log("[COLLECTIONS] First collection full data:",a.collections[0]));let i=a.collections||[];if(M){const o=M.toLowerCase();i=i.filter(d=>d.title.toLowerCase().includes(o)||d.handle.toLowerCase().includes(o))}L!=="all"&&(i=i.filter(o=>L==="true"?o.hasSeoData:!o.hasSeoData)),Ae(i),Me(i.length)}catch(s){m(`Error loading collections: ${s.message}`)}finally{ue(!1)}},[r,M,L,C]);l.useEffect(()=>{r&&(D(),K(!1))},[r,L,D]),l.useEffect(()=>{const t=setTimeout(()=>{r&&D()},500);return()=>clearTimeout(t)},[M]);const Ge=l.useCallback(t=>{W(t);const s=t.some(n=>{const a=p.find(i=>i.id===n);return a==null?void 0:a.hasSeoData});K(s),t.length===0&&q(!1)},[p]),Je=l.useCallback(t=>{if(q(t),t){W(p.map(n=>n.id));const s=p.some(n=>n.hasSeoData);K(s)}else W([]),K(!1)},[p]),Ye=async t=>{Ee(!0);try{const s=`/collections/${t.split("/").pop()}/seo-data?shop=${encodeURIComponent(r)}`,n=await C(s);ae(n),le(!0)}catch(s){m((s==null?void 0:s.status)===404?"No SEO data found for this collection":"Failed to load SEO data")}finally{Ee(!1)}},de=l.useMemo(()=>{if(x)return v;const t=p.filter(a=>h.includes(a.id));if(t.length===0)return v;const s=Math.max(...t.map(a=>{var i,o;return((o=(i=a.optimizationSummary)==null?void 0:i.optimizedLanguages)==null?void 0:o.length)||0})),n=Math.max(0,v-s);return console.log(`[LANGUAGE-LIMIT] Plan limit: ${v}, Max optimized: ${s}, Max new: ${n}`),n},[p,h,x,v]),Qe=()=>{if(h.length===0&&!x){m("Please select collections first");return}oe(!0)},Ve=async()=>{console.log("[AI-ENHANCE] Starting enhancement...");const s=p.filter(a=>h.includes(a.id)).filter(a=>{var i;return((i=a.optimizedLanguages)==null?void 0:i.length)>0});if(s.length===0){m("Please select collections with Basic SEO optimization");return}console.log("[AI-ENHANCE] Collections to enhance:",s.length),R({processing:!0,current:0,total:s.length,currentItem:"",results:null});const n={successful:0,failed:0,skipped:0};for(let a=0;a<s.length;a++){const i=s[a];R(o=>({...o,current:a,currentItem:i.title}));try{const o=i.optimizedLanguages||[];if(o.length===0){console.log(`[AI-ENHANCE] No languages for ${i.title}, skipping`),n.skipped++;continue}console.log(`[AI-ENHANCE] Enhancing ${i.title} for languages:`,o);const d=await C(`/ai-enhance/collection/${encodeURIComponent(i.id)}`,{method:"POST",shop:r,body:{shop:r,languages:o}});d&&d.ok?(n.successful++,console.log(`[AI-ENHANCE] Success for ${i.title}`)):(n.failed++,console.log(`[AI-ENHANCE] Failed for ${i.title}`))}catch(o){if(console.error("[AI-ENHANCE] Error:",o),o.status===403){R({processing:!1,current:0,total:0,currentItem:"",results:null}),re(o),ce(o.currentPlan||F||"starter"),ie(!0);return}if(o.status===402||o.requiresPurchase||o.trialRestriction){R({processing:!1,current:0,total:0,currentItem:"",results:null}),re(o),ce(o.currentPlan||F||"starter"),o.trialRestriction?ie(!0):Le(!0);return}n.failed++}R(o=>({...o,current:a+1}))}R(a=>({...a,processing:!1,results:n})),m(`AI enhancement complete! ${n.successful} collections enhanced.`),n.successful>0&&await D()},_e=async()=>{if(!E.length){m("Please select at least one language");return}oe(!1),J(!0),k({current:0,total:0,percent:0}),fe([]),se({});try{const t=x?p:p.filter(i=>h.includes(i.id)),s=t.length;k({current:0,total:s,percent:0});const n={};for(let i=0;i<t.length;i++){const o=t[i];Y(o.title);try{const w=await C("/seo/generate-collection-multi",{method:"POST",shop:r,body:JSON.stringify({shop:r,collectionId:o.id,model:ke,languages:E})});n[o.id]={success:!0,data:w}}catch(w){n[o.id]={success:!1,error:w.message},fe(B=>[...B,{collection:o.title,error:w.message}])}const d=i+1,g=Math.round(d/s*100);k({current:d,total:s,percent:g})}se(n),ne(!0);const a=Object.values(n).filter(i=>i.success).length;m(`Generated optimization for ${a} collections`)}catch(t){m(`Error: ${t.message}`)}finally{J(!1),Y("")}},Xe=async()=>{var t,s;J(!0),k({current:0,total:0,percent:0});try{const n=Object.entries(P).filter(([i,o])=>o.success),a=n.length;k({current:0,total:a,percent:0});for(let i=0;i<n.length;i++){const[o,d]=n[i],g=p.find(y=>y.id===o);if(!g)continue;Y(g.title);try{if(console.log("Applying SEO for collection:",o),console.log("Result data:",d.data),console.log("Results array:",(t=d.data)==null?void 0:t.results),!((s=d.data)!=null&&s.results)||!Array.isArray(d.data.results))throw new Error("Invalid results structure");const y=await C("/seo/apply-collection-multi",{method:"POST",shop:r,body:{shop:r,collectionId:o,results:d.data.results.map(we=>({language:we.language,seo:we.data})),options:{updateTitle:!0,updateDescription:!0,updateSeo:!0,updateMetafields:!0}}});if(!(y!=null&&y.ok))throw new Error((y==null?void 0:y.error)||"Apply failed")}catch(y){console.error("Apply error for collection:",o,y),H.push({id:g.id,title:g.title,message:y.message})}const w=i+1,B=Math.round(w/a*100);k({current:w,total:a,percent:B})}m("Optimization applied successfully!"),ne(!1),se({}),W([]),await D(),q(!1)}catch(n){m(`Error applying optimization: ${n.message}`)}finally{J(!1),Y("")}},Ze=async(t=[])=>{console.log("[DELETE-SEO-BULK] ===== BULK DELETE START ====="),console.log("[DELETE-SEO-BULK] Languages to delete:",t),console.log("[DELETE-SEO-BULK] Selected items:",h),console.log("[DELETE-SEO-BULK] Select all pages:",x),Se(!0),Te("");try{const s=x?p:p.filter(o=>h.includes(o.id)),n=s.length*t.length;let a=0;const i=[];for(const o of s)for(const d of t)try{console.log(`[DELETE-SEO-BULK] Deleting ${d} for ${o.title} (${o.id})`);const g=await C("/collections/delete-seo",{method:"DELETE",shop:r,body:{shop:r,collectionId:o.id,language:d}});console.log(`[DELETE-SEO-BULK] Success for ${o.title} - ${d}:`,g)}catch(g){console.error(`[DELETE-SEO-BULK] Failed to delete ${d} for ${o.title}:`,g),i.push({id:o.id,title:o.title,message:g.message})}finally{a++,k({current:a,total:n,percent:Math.round(a/n*100)})}m(`Deleted optimization for ${t.join(", ").toUpperCase()}`),setTimeout(async()=>{await D(),W([]),q(!1),K(!1)},100)}catch(s){console.error("[DELETE-SEO-BULK] Error:",s),m(`Delete error: ${s.message}`)}finally{console.log("[DELETE-SEO-BULK] ===== BULK DELETE END ====="),Se(!1),_([]),$([])}},et=t=>{var o,d;const s=((o=P[t.id])==null?void 0:o.success)||je[t.id],n=((d=P[t.id])==null?void 0:d.data)||je[t.id],a=t.optimizedLanguages||[];console.log(`[COLLECTIONS] Rendering collection "${t.title}":`,{optimizedLanguages:a,availableLanguages:j,hasSeoData:t.hasSeoData});const i=e.jsx(u,{width:"40px",height:"40px",background:"surface-neutral",borderRadius:"200"});return e.jsx(Ct,{id:t.id,media:i,accessibilityLabel:`View details for ${t.title}`,onClick:g=>{console.log("[Collections-ResourceItem] ===== CLICK ON RESOURCE ITEM ====="),console.log("[Collections-ResourceItem] e.target:",g.target),console.log("[Collections-ResourceItem] e.target.tagName:",g.target.tagName),console.log('[Collections-ResourceItem] e.target.closest("input"):',g.target.closest("input")),console.log('[Collections-ResourceItem] e.target.closest("a"):',g.target.closest("a")),console.log("[Collections-ResourceItem] Event bubbling up...")},children:e.jsxs(b,{gap:"400",align:"center",blockAlign:"center",wrap:!1,children:[e.jsxs(u,{style:{flex:"1 1 30%",minWidth:"200px"},children:[e.jsx(c,{variant:"bodyMd",fontWeight:"semibold",children:t.title}),e.jsxs(c,{variant:"bodySm",tone:"subdued",children:["Handle: ",t.handle]})]}),e.jsx(u,{style:{flex:"0 0 15%",minWidth:"100px",textAlign:"center"},children:e.jsxs(c,{variant:"bodyMd",children:[t.productsCount," products"]})}),e.jsx(u,{style:{flex:"0 0 25%",minWidth:"160px"},children:t.hasSeoData?e.jsx(b,{gap:"100",children:j.map(g=>e.jsx(X,{tone:a.includes(g)?"success":"subdued",size:"small",children:g.toUpperCase()},g))}):e.jsx(X,{tone:"subdued",children:"No AI Search Optimisation"})}),e.jsxs(u,{style:{flex:"0 0 15%",minWidth:"120px"},children:[s&&e.jsx(I,{size:"slim",onClick:()=>{ae(n),le(!0)},children:"Preview JSON"}),!s&&t.hasSeoData&&e.jsx(I,{size:"slim",loading:We,onClick:()=>Ye(t.id),children:"Preview JSON"})]})]})})},tt=te&&!qe.processing&&e.jsx(S,{open:te,title:"Processing Collections",onClose:()=>{},noScroll:!0,children:e.jsx(S.Section,{children:e.jsxs(O,{gap:"400",children:[e.jsx(c,{variant:"bodyMd",children:pe?`Processing: ${pe}`:"Preparing..."}),e.jsx(be,{progress:A.percent}),e.jsxs(c,{variant:"bodySm",tone:"subdued",children:[A.current," of ",A.total," collections (",A.percent,"%)"]})]})})}),st=e.jsx(S,{open:ze,title:"Select Languages",primaryAction:{content:"Generate Optimization for AI Search",onAction:_e,disabled:E.length===0||E.length>de},secondaryActions:[{content:"Cancel",onAction:()=>oe(!1)}],children:e.jsx(S.Section,{children:e.jsxs(O,{gap:"300",children:[e.jsxs(c,{variant:"bodyMd",children:["Select languages to generate AI Search Optimisation for ",x?"all":h.length," selected collections:"]}),E.length>de&&e.jsx(gt,{tone:"warning",title:"Language limit exceeded",children:e.jsxs(O,{gap:"200",children:[e.jsxs(c,{variant:"bodyMd",children:["You can add up to ",de," new language(s) (your plan supports ",v," total, and some collections already have optimizations)."]}),e.jsxs(c,{variant:"bodyMd",children:["You selected ",E.length," new language(s). Please deselect some or upgrade your plan:"]}),e.jsx(I,{variant:"primary",onClick:()=>{const t=new URLSearchParams(window.location.search),s=t.toString()?`?${t.toString()}`:"";window.location.href=`/billing${s}`},children:"Upgrade Plan"})]})}),e.jsx(u,{paddingBlockStart:"200",children:e.jsx(b,{gap:"200",wrap:!0,children:j.map(t=>e.jsx(Oe,{label:t.toUpperCase(),checked:E.includes(t),onChange:s=>{T(s?[...E,t]:E.filter(n=>n!==t))}},t))})}),e.jsx(u,{paddingBlockStart:"200",children:e.jsx(I,{plain:!0,onClick:()=>{E.length===j.length?T([]):j.length>v?(T([...j]),m(`You selected ${j.length} languages. Your ${F} plan supports ${v}. Please deselect or upgrade.`)):T([...j])},children:E.length===j.length?"Deselect all":"Select all"})})]})})}),nt=e.jsx(S,{open:Be&&!te,title:"AI Search Optimisation Results",primaryAction:{content:"Apply Optimisation",onAction:Xe,disabled:!Object.values(P).some(t=>t.success)},secondaryActions:[{content:"Cancel",onAction:()=>ne(!1)}],children:e.jsx(S.Section,{children:e.jsxs(O,{gap:"300",children:[e.jsxs(b,{gap:"400",children:[e.jsxs(u,{children:[e.jsx(c,{variant:"bodyMd",fontWeight:"semibold",children:"Successful:"}),e.jsx(c,{variant:"headingLg",fontWeight:"bold",tone:"success",children:Object.values(P).filter(t=>t.success&&!t.skipped).length})]}),e.jsxs(u,{children:[e.jsx(c,{variant:"bodyMd",fontWeight:"semibold",children:"Skipped:"}),e.jsx(c,{variant:"headingLg",fontWeight:"bold",tone:"info",children:Object.values(P).filter(t=>t.skipped).length})]}),e.jsxs(u,{children:[e.jsx(c,{variant:"bodyMd",fontWeight:"semibold",children:"Failed:"}),e.jsx(c,{variant:"headingLg",fontWeight:"bold",tone:"critical",children:Object.values(P).filter(t=>!t.success&&!t.skipped).length})]})]}),H.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(ht,{}),e.jsx(c,{variant:"bodyMd",fontWeight:"semibold",children:"Errors:"}),e.jsxs(u,{maxHeight:"200px",overflowY:"scroll",children:[H.slice(0,10).map((t,s)=>e.jsxs(c,{variant:"bodySm",tone:"critical",children:[t.collection,": ",t.error]},s)),H.length>10&&e.jsxs(c,{variant:"bodySm",tone:"subdued",children:["... and ",H.length-10," more errors"]})]})]})]})})}),ot=e.jsx(S,{open:Ue,title:"SEO Data Preview",secondaryActions:[{content:"Close",onAction:()=>{le(!1),ae(null)}}],children:e.jsx(S.Section,{children:e.jsx(u,{children:e.jsx("pre",{style:{whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:"12px",backgroundColor:"#f6f6f7",padding:"12px",borderRadius:"4px",maxHeight:"400px",overflow:"auto"},children:Ce?JSON.stringify(Ce,null,2):""})})})}),lt=e.jsx(S,{open:Ne,title:"Delete Optimization for AI Search",onClose:()=>{Q(!1),$([])},primaryAction:{content:"Continue",onAction:()=>{_(N),Q(!1),V(!0)},disabled:N.length===0},secondaryActions:[{content:"Cancel",onAction:()=>{Q(!1),$([])}}],children:e.jsx(S.Section,{children:e.jsxs(O,{gap:"400",children:[e.jsxs(c,{variant:"bodyMd",children:["Select languages to delete AI Search Optimisation from ",x?U:h.length," selected collections:"]}),e.jsx(u,{paddingBlockStart:"200",children:e.jsx(b,{gap:"400",wrap:!1,children:j.map(t=>e.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",userSelect:"none"},children:[e.jsx("input",{type:"checkbox",checked:N.includes(t),onChange:s=>{$(s.target.checked?[...N,t]:N.filter(n=>n!==t))},style:{marginRight:"8px",width:"18px",height:"18px",cursor:"pointer"}}),e.jsx(c,{variant:"bodyMd",children:t.toUpperCase()})]},t))})}),e.jsx(u,{children:e.jsx(I,{plain:!0,onClick:()=>{$(N.length===j.length?[]:[...j])},children:"Select all"})}),e.jsx(u,{paddingBlockStart:"300",children:e.jsx(c,{variant:"bodySm",children:"Warning: This will permanently delete AI Search Optimisation data for selected languages."})})]})})}),at=e.jsx(S,{open:Re,title:"Confirm Deletion",onClose:()=>{V(!1),_([])},primaryAction:{content:"Delete",destructive:!0,onAction:async()=>{V(!1),setTimeout(()=>{Ze(xe)},100)}},secondaryActions:[{content:"Cancel",onAction:()=>{V(!1),_([]),$([])}}],children:e.jsx(S.Section,{children:e.jsxs(O,{gap:"400",children:[e.jsx(c,{variant:"bodyMd",children:"Are you sure you want to delete AI Search Optimisation for the following languages?"}),e.jsx(u,{paddingBlockStart:"200",children:e.jsx(b,{gap:"200",children:xe.map(t=>e.jsx(X,{tone:"warning",children:t.toUpperCase()},t))})}),e.jsxs(c,{variant:"bodyMd",children:["This will delete optimisation from ",x?U:h.length," selected collections."]}),e.jsx(u,{paddingBlockStart:"200",children:e.jsx(c,{variant:"bodySm",tone:"critical",children:"This action cannot be undone."})})]})})}),it=me&&e.jsx(S,{open:me,title:"Deleting SEO Data",onClose:()=>{},noScroll:!0,children:e.jsx(S.Section,{children:e.jsxs(O,{gap:"400",children:[e.jsx(c,{variant:"bodyMd",children:"Deleting selected languages..."}),e.jsx(be,{progress:A.percent}),e.jsxs(c,{variant:"bodySm",tone:"subdued",children:[A.current," of ",A.total," operations (",A.percent,"%)"]})]})})}),rt=e.jsx(Et,{heading:"No collections found",action:{content:"Clear filters",onAction:()=>{Z(""),G("all"),D()}},image:"https://cdn.shopify.com/s/files/1/0262/4071/2726/files/emptystate-files.png",children:e.jsx("p",{children:"Try adjusting your filters or search terms"})});return e.jsxs(e.Fragment,{children:[e.jsx(Ie,{children:e.jsxs(u,{padding:"400",children:[e.jsxs(b,{gap:"400",align:"space-between",blockAlign:"start",wrap:!1,children:[e.jsx(u,{minWidth:"400px",maxWidth:"600px",children:e.jsx(O,{gap:"200",children:e.jsx(pt,{label:"",placeholder:"Search by collection name...",value:M,onChange:Z,prefix:e.jsx(ft,{}),clearButton:!0,onClearButtonClick:()=>Z("")})})}),e.jsxs(O,{gap:"200",children:[e.jsx(I,{primary:!0,onClick:Qe,disabled:h.length===0&&!x,children:"Generate Optimization for AI Search"}),h.length===0&&!x||!p.filter(n=>h.includes(n.id)).some(n=>{var a;return((a=n.optimizedLanguages)==null?void 0:a.length)>0})?null:e.jsx(I,{onClick:Ve,disabled:h.length===0&&!x,children:"AI Enhanced add-ons for AI Search"}),e.jsx(I,{outline:!0,destructive:!0,onClick:()=>Q(!0),disabled:h.length===0||!$e,children:"Delete Optimization for AI Search"})]})]}),U>0&&e.jsx(u,{paddingBlockStart:"300",children:e.jsx(Oe,{label:`Select all ${U} collections`,checked:x,onChange:Je})})]})}),e.jsx(u,{paddingBlockStart:"400",children:e.jsxs(Ie,{children:[e.jsxs(u,{padding:"400",borderBlockEndWidth:"025",borderColor:"border",children:[e.jsx(b,{gap:"200",wrap:!0,children:e.jsx(mt,{active:ge,activator:e.jsx(I,{disclosure:"down",onClick:()=>ee(!ge),removeUnderline:!0,children:e.jsxs(b,{gap:"100",blockAlign:"center",children:[e.jsx("span",{children:"AI Search Status"}),L!=="all"&&e.jsx(u,{onClick:t=>{t.stopPropagation(),G("all")},children:e.jsx(c,{as:"span",tone:"subdued",children:"✕"})})]})}),onClose:()=>ee(!1),children:e.jsx(u,{padding:"300",minWidth:"200px",children:e.jsx(St,{title:"AI Search Status",titleHidden:!0,choices:[{label:"All collections",value:"all"},{label:"Has AI Search Optimisation",value:"true"},{label:"No AI Search Optimisation",value:"false"}],selected:[L],onChange:t=>{G(t[0]),ee(!1)}})})})}),L!=="all"&&e.jsx(u,{paddingBlockStart:"200",children:e.jsx(b,{gap:"100",wrap:!0,children:e.jsx(X,{onRemove:()=>G("all"),children:L==="true"?"Has AI Search Optimisation":"No AI Search Optimisation"})})})]}),e.jsx(xt,{resourceName:{singular:"collection",plural:"collections"},items:p,renderItem:et,selectedItems:h,onSelectionChange:Ge,selectable:!0,loading:ve,totalItemsCount:U,emptyState:rt,showHeader:!1},`collections-${p.length}-${h.length}`)]})}),tt,st,nt,ot,lt,at,it,e.jsx(dt,{open:He,onClose:()=>ie(!1),featureName:"Collections AI Enhancement",currentPlan:F,errorMessage:(f==null?void 0:f.error)||(f==null?void 0:f.message),minimumPlanRequired:f==null?void 0:f.minimumPlanRequired}),f&&e.jsx(ut,{open:Ke,onClose:()=>{Le(!1),re(null)},tokensRequired:f.tokensRequired||0,tokensAvailable:f.tokensAvailable||0,tokensNeeded:f.tokensNeeded||0,feature:"ai-seo-collection",shop:r,needsUpgrade:f.needsUpgrade||!1,minimumPlan:f.minimumPlanForFeature||null,currentPlan:f.currentPlan||F}),ye&&e.jsx(jt,{content:ye,onDismiss:()=>m("")})]})}export{Wt as default};
