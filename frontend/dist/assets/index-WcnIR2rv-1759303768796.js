const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BulkEdit-DZr-z_x4-1759303768796.js","assets/app-bridge-C7mv7Lp5-1759303768796.js","assets/react-vendor-tAaa2TlE-1759303768796.js","assets/UpgradeModal-BFKlbOeO-1759303768796.js","assets/polaris-BnNj-eul-1759303768796.js","assets/Collections-CL0_WhrE-1759303768796.js","assets/Sitemap-D7C1m49M-1759303768796.js","assets/StoreMetadata-B8jqYk7f-1759303768796.js","assets/SchemaData-DoD_-rgA-1759303768796.js","assets/Settings-cJp7Wbkq-1759303768796.js"])))=>i.map(i=>d[i]);
import{j as y}from"./app-bridge-C7mv7Lp5-1759303768796.js";import{a as ft,c as v,r as M,R as W}from"./react-vendor-tAaa2TlE-1759303768796.js";import{P as pt,A as ht,B as yt,I as se,T as j,a as R,C as J,b as gt,F as vt,c as bt}from"./polaris-BnNj-eul-1759303768796.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const t of i)if(t.type==="childList")for(const u of t.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const t={};return i.integrity&&(t.integrity=i.integrity),i.referrerPolicy&&(t.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?t.credentials="include":i.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(i){if(i.ep)return;i.ep=!0;const t=n(i);fetch(i.href,t)}})();var Ge,Me=ft;Ge=Me.createRoot,Me.hydrateRoot;const _t="modulepreload",mt=function(e){return"/"+e},Te={},B=function(r,n,o){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=mt(l),l in Te)return;Te[l]=!0;const a=l.endsWith(".css"),s=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${s}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":_t,a||(c.as="script"),c.crossOrigin="",c.href=l,d&&c.setAttribute("nonce",d),document.head.appendChild(c),a)return new Promise((g,f)=>{c.addEventListener("load",g),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function t(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return i.then(u=>{for(const d of u||[])d.status==="rejected"&&t(d.reason);return r().catch(t)})};var We={},$e={},K={},Ve={},ye={},ce={},me={},k={},Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});function ze(e,r){if(r==null||typeof e>"u"||!Object.prototype.isPrototypeOf.call(Object.getPrototypeOf(e),r)||r.constructor.name!=="Object"&&r.constructor.name!=="Array")return r;var n={};return Object.keys(r).forEach(function(o){var i=Object.prototype.hasOwnProperty.call(e,o);i&&typeof e[o]=="object"&&!Array.isArray(e[o])?n[o]=ze(e[o],r[o]):n[o]=r[o]}),Object.keys(e).forEach(function(o){var i=Object.prototype.hasOwnProperty.call(r,o);i||(n[o]=e[o])}),Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n}Pe.default=ze;var V={};Object.defineProperty(V,"__esModule",{value:!0});V.SEPARATOR=V.PREFIX=void 0;V.PREFIX="APP";V.SEPARATOR="::";var F={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ComponentType=e.Group=void 0,function(r){r.AuthCode="AuthCode",r.Button="Button",r.ButtonGroup="ButtonGroup",r.Cart="Cart",r.Client="Client",r.ContextualSaveBar="ContextualSaveBar",r.Error="Error",r.Features="Features",r.FeedbackModal="FeedbackModal",r.Fullscreen="Fullscreen",r.LeaveConfirmation="LeaveConfirmation",r.Link="Link",r.Loading="Loading",r.Menu="Menu",r.Modal="Modal",r.Navigation="Navigation",r.Performance="Performance",r.Pos="Pos",r.Print="Print",r.ResourcePicker="Resource_Picker",r.unstable_Picker="unstable_Picker",r.Scanner="Scanner",r.SessionToken="SessionToken",r.Share="Share",r.TitleBar="TitleBar",r.Toast="Toast",r.MarketingExternalActivityTopBar="MarketingExternalActivityTopBar",r.WebVitals="WebVitals"}(e.Group||(e.Group={})),function(r){r.Button="Button",r.ButtonGroup="ButtonGroup"}(e.ComponentType||(e.ComponentType={}))})(F);(function(e){var r=v&&v.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0}),e.updateActionFromPayload=e.isValidOptionalString=e.isValidOptionalNumber=e.forEachInEnum=e.getMergedProps=e.findMatchInEnum=e.getEventNameSpace=e.NonSnakeCaseGroup=e.actionWrapper=void 0;var n=r(Pe),o=V,i=F;function t(h){return h}e.actionWrapper=t,e.NonSnakeCaseGroup=[i.Group.AuthCode,i.Group.Button,i.Group.ButtonGroup,i.Group.Cart,i.Group.Error,i.Group.Features,i.Group.Fullscreen,i.Group.Link,i.Group.Loading,i.Group.Menu,i.Group.Modal,i.Group.Navigation,i.Group.Pos,i.Group.Print,i.Group.ResourcePicker,i.Group.Scanner,i.Group.SessionToken,i.Group.Share,i.Group.TitleBar,i.Group.Toast,i.Group.unstable_Picker];function u(h){return h.replace(/([A-Z])/g,function(b,O,P){return(P===0?"":"_")+b[0].toLowerCase()})}function d(h){return e.NonSnakeCaseGroup.includes(h)?h.toUpperCase():u(h).toUpperCase()}function l(h,b,O){if(b.startsWith(""+o.PREFIX+o.SEPARATOR))return b;var P=d(h);if(O){var I=O.subgroups,T=O.type;I&&I.length>0&&(P+=P.length>0?o.SEPARATOR:"",I.forEach(function(G,_){P+=""+G.toUpperCase()+(_<I.length-1?o.SEPARATOR:"")})),T!==h&&T&&(P+=""+(P.length>0?o.SEPARATOR:"")+T.toUpperCase())}return P&&(P+=""+(P.length>0?o.SEPARATOR:"")+b.toUpperCase()),""+o.PREFIX+o.SEPARATOR+P}e.getEventNameSpace=l;function a(h,b){var O=Object.keys(h).find(function(P){return b===h[P]});return O?h[O]:void 0}e.findMatchInEnum=a;function s(h,b){var O=n.default(h,b);if(!O){var P=Object.assign(h,b);return P}return O}e.getMergedProps=s;function c(h,b){Object.keys(h).forEach(function(O){b(h[O])})}e.forEachInEnum=c;function g(h){return h==null||typeof h=="number"}e.isValidOptionalNumber=g;function f(h){return h==null||typeof h=="string"}e.isValidOptionalString=f;function p(h,b){var O=h.id;return O===b.id?(Object.assign(h,s(h,b)),!0):!1}e.updateActionFromPayload=p})(k);var U={},le={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LifecycleHook=e.PermissionType=e.MessageType=void 0,function(r){r.GetState="getState",r.Dispatch="dispatch",r.Subscribe="subscribe",r.Unsubscribe="unsubscribe"}(e.MessageType||(e.MessageType={})),function(r){r.Dispatch="Dispatch",r.Subscribe="Subscribe"}(e.PermissionType||(e.PermissionType={})),function(r){r.UpdateAction="UpdateAction",r.DispatchAction="DispatchAction"}(e.LifecycleHook||(e.LifecycleHook={}))})(le);var z={};Object.defineProperty(z,"__esModule",{value:!0});z.removeFromCollection=z.addAndRemoveFromCollection=void 0;function Pt(e,r,n){return e.push(r),function(){return He(e,r,n)}}z.addAndRemoveFromCollection=Pt;function He(e,r,n){var o=e.findIndex(function(i){return i===r});return o>=0?(e.splice(o,1),n&&n(r),!0):!1}z.removeFromCollection=He;var Z={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.permissionAction=e.isErrorEventName=e.throwError=e.invalidOriginAction=e.fromAction=e.AppBridgeError=e.AppActionType=e.Action=void 0;var r=F,n=k,o;(function(c){c.INVALID_ACTION="APP::ERROR::INVALID_ACTION",c.INVALID_ACTION_TYPE="APP::ERROR::INVALID_ACTION_TYPE",c.INVALID_PAYLOAD="APP::ERROR::INVALID_PAYLOAD",c.INVALID_OPTIONS="APP::ERROR::INVALID_OPTIONS",c.UNEXPECTED_ACTION="APP::ERROR::UNEXPECTED_ACTION",c.PERSISTENCE="APP::ERROR::PERSISTENCE",c.UNSUPPORTED_OPERATION="APP::ERROR::UNSUPPORTED_OPERATION",c.NETWORK="APP::ERROR::NETWORK",c.PERMISSION="APP::ERROR::PERMISSION",c.FAILED_AUTHENTICATION="APP::ERROR::FAILED_AUTHENTICATION",c.INVALID_ORIGIN="APP::ERROR::INVALID_ORIGIN"})(o=e.Action||(e.Action={})),function(c){c.INVALID_CONFIG="APP::ERROR::INVALID_CONFIG",c.MISSING_CONFIG="APP::APP_ERROR::MISSING_CONFIG",c.MISSING_APP_BRIDGE_MIDDLEWARE="APP::APP_ERROR::MISSING_APP_BRIDGE_MIDDLEWARE",c.WINDOW_UNDEFINED="APP::APP_ERROR::WINDOW_UNDEFINED",c.REDUX_REINSTANTIATED="APP::APP_ERROR::REDUX_REINSTANTIATED",c.MISSING_LOCAL_ORIGIN="APP::APP_ERROR::MISSING_LOCAL_ORIGIN",c.MISSING_HOST_PROVIDER="APP::APP_ERROR::MISSING_HOST_PROVIDER",c.MISSING_ROUTER_CONTEXT="APP::APP_ERROR::MISSING_ROUTER_CONTEXT",c.MISSING_HISTORY_BLOCK="APP::APP_ERROR::MISSING_HISTORY_BLOCK"}(e.AppActionType||(e.AppActionType={}));var i=function(){function c(g){this.name="AppBridgeError",this.message=g,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(this,this.constructor):this.stack=new Error(this.message).stack}return c}();e.AppBridgeError=i,i.prototype=Object.create(Error.prototype);function t(c,g,f){var p=c?g+": "+c:g,h=new i(p);return h.action=f,h.type=g,h}e.fromAction=t;function u(c){return n.actionWrapper({group:r.Group.Error,payload:{message:c,type:o.INVALID_ORIGIN},type:o.INVALID_ORIGIN})}e.invalidOriginAction=u;function d(){for(var c=[],g=0;g<arguments.length;g++)c[g]=arguments[g];var f=c[0],p,h;throw typeof c[1]=="string"?p=c[1]:(h=c[1],p=c[2]||""),t(p,f,h)}e.throwError=d;function l(c){var g=n.findMatchInEnum(o,c);return typeof g=="string"}e.isErrorEventName=l;function a(c,g,f){var p=g.payload;return n.actionWrapper({type:c,group:r.Group.Error,payload:{action:g,message:f,type:c,id:p&&p.id?p.id:void 0}})}function s(c,g){return a(o.PERMISSION,c,g||"Action is not permitted")}e.permissionAction=s})(Z);var Y={};Object.defineProperty(Y,"__esModule",{value:!0});Y.generateUuid=void 0;function H(e){return Array.from(e).map(function(r){return("00"+r.toString(16)).slice(-2)}).join("")}function q(e){if(typeof Uint8Array=="function"&&typeof window=="object"&&window.crypto){var r=new Uint8Array(e),n=window.crypto.getRandomValues(r);if(n)return n}return Array.from(new Array(e),function(){return Math.random()*255|0})}function qe(){var e=64,r=q(1),n=q(2);return r[0]&=191,n[0]&=15|e,[H(q(4)),"-",H(q(2)),"-",H(n),"-",H(r),H(q(1)),"-",H(q(6))].join("")}Y.generateUuid=qe;Y.default=qe;var At=v&&v.__extends||function(){var e=function(r,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(o[t]=i[t])},e(r,n)};return function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(r,n);function o(){this.constructor=r}r.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),oe=v&&v.__assign||function(){return oe=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},oe.apply(this,arguments)},Ot=v&&v.__spreadArray||function(e,r){for(var n=0,o=r.length,i=e.length;n<o;n++,i++)e[i]=r[n];return e},St=v&&v.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(U,"__esModule",{value:!0});U.unsubscribeActions=U.ActionSetWithChildren=U.ActionSet=void 0;var Et=le,ge=z,te=Z,wt=F,It=St(Y),pe=k,Ke=function(){function e(r,n,o,i){var t=this;this.app=r,this.type=n,this.group=o,this.subgroups=[],this.subscriptions=[],r||te.throwError(te.Action.INVALID_ACTION,"Missing required `app`"),this.id=i||It.default(),this.defaultGroup=o;var u=this.set;this.set=function(){for(var d,l=[],a=0;a<arguments.length;a++)l[a]=arguments[a];return t.app.hooks?(d=t.app.hooks).run.apply(d,Ot([Et.LifecycleHook.UpdateAction,u,t],l)):u.apply(t,l)}}return e.prototype.set=function(){},Object.defineProperty(e.prototype,"component",{get:function(){return{id:this.id,subgroups:this.subgroups,type:this.type}},enumerable:!1,configurable:!0}),e.prototype.updateSubscription=function(r,n,o){var i=r.eventType,t=r.callback,u=r.component,d;return d=this.subscriptions.findIndex(function(l){return l===r}),d>=0?this.subscriptions[d].unsubscribe():d=void 0,this.group=n,this.subgroups=o,Object.assign(u,{subgroups:this.subgroups}),this.subscribe(i,t,u,d)},e.prototype.error=function(r){var n=this,o=[];return pe.forEachInEnum(te.Action,function(i){o.push(n.subscriptions.length),n.subscribe(i,r)}),function(){var i=o.map(function(t){return n.subscriptions[t]});i.forEach(function(t){ge.removeFromCollection(n.subscriptions,t,function(u){u.unsubscribe()})})}},e.prototype.subscribe=function(r,n,o,i){var t=this,u=o||this.component,d=r.toUpperCase(),l=typeof i=="number"?n:n.bind(this),a;te.isErrorEventName(r)?a=pe.getEventNameSpace(wt.Group.Error,r,oe(oe({},u),{type:""})):a=pe.getEventNameSpace(this.group,r,u);var s=this.app.subscribe(a,l,o?o.id:this.id),c={eventType:d,unsubscribe:s,callback:l,component:u,updateSubscribe:function(g,f){return t.updateSubscription(c,g,f)}};return typeof i=="number"&&i>=0&&i<this.subscriptions.length?this.subscriptions[i]=c:this.subscriptions.push(c),s},e.prototype.unsubscribe=function(r){return r===void 0&&(r=!1),Ae(this.subscriptions,this.defaultGroup,r),this},e}();U.ActionSet=Ke;var Mt=function(e){At(r,e);function r(){var n=e!==null&&e.apply(this,arguments)||this;return n.children=[],n}return r.prototype.unsubscribe=function(n,o){return n===void 0&&(n=!0),o===void 0&&(o=!1),Ae(this.subscriptions,this.defaultGroup,o),this.children.forEach(function(i){i instanceof r?i.unsubscribe(n,!n):i.unsubscribe(!n)}),this},r.prototype.getChild=function(n){var o=this.children.findIndex(function(i){return i.id===n});return o>=0?this.children[o]:void 0},r.prototype.getChildIndex=function(n){return this.children.findIndex(function(o){return o.id===n})},r.prototype.getChildSubscriptions=function(n,o){return this.subscriptions.filter(function(i){return i.component.id===n&&(!o||o===i.eventType)})},r.prototype.addChild=function(n,o,i){var t=this,u=n.subscriptions,d=this.getChild(n.id);return d||this.children.push(n),!u||o===n.group&&i===n.subgroups?this:(u.forEach(function(l){var a=l.updateSubscribe;a(o,i)}),Object.assign(n,{group:o,subgroups:i}),n instanceof r&&n.children.forEach(function(l){return t.addChild(l,o,i)}),this)},r.prototype.removeChild=function(n){var o=this;return ge.removeFromCollection(this.children,this.getChild(n),function(){var i=o.subscriptions.filter(function(t){return t.component.id===n});i.forEach(function(t){ge.removeFromCollection(o.subscriptions,t,function(u){u.unsubscribe()})})}),this},r.prototype.subscribeToChild=function(n,o,i){var t=this,u=i.bind(this);if(o instanceof Array)return o.forEach(function(s){return t.subscribeToChild(n,s,i)}),this;if(typeof o!="string")return this;var d=o.toUpperCase(),l=this.getChildSubscriptions(n.id,d);if(l.length>0)l.forEach(function(s){return s.updateSubscribe(t.group,n.subgroups)});else{var a={id:n.id,subgroups:n.subgroups,type:n.type};this.subscribe(d,u,a)}return this},r.prototype.getUpdatedChildActions=function(n,o){if(n.length===0){for(;o.length>0;){var i=o.pop();if(!i)break;this.removeChild(i.id)}return}for(var t=n.filter(function(l,a,s){return a===s.indexOf(l)}),u=t.map(function(l){return l.id}),d=o.filter(function(l){return u.indexOf(l.id)<0});d.length>0;){var i=d.pop();if(!i)break;this.removeChild(i.id)}return t},r}(Ke);U.ActionSetWithChildren=Mt;function Ae(e,r,n){n===void 0&&(n=!1),e.forEach(function(o){if(n){var i=o.updateSubscribe;i(r,[])}else{var t=o.unsubscribe;t()}}),n||(e.length=0)}U.unsubscribeActions=Ae;(function(e){var r=v&&v.__extends||function(){var s=function(c,g){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var h in p)Object.prototype.hasOwnProperty.call(p,h)&&(f[h]=p[h])},s(c,g)};return function(c,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");s(c,g);function f(){this.constructor=c}c.prototype=g===null?Object.create(g):(f.prototype=g.prototype,new f)}}(),n=v&&v.__assign||function(){return n=Object.assign||function(s){for(var c,g=1,f=arguments.length;g<f;g++){c=arguments[g];for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(s[p]=c[p])}return s},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Button=e.update=e.clickButton=e.Style=e.Icon=e.Action=void 0;var o=k,i=U,t=F,u;(function(s){s.CLICK="CLICK",s.UPDATE="UPDATE"})(u=e.Action||(e.Action={})),function(s){s.Print="print"}(e.Icon||(e.Icon={})),function(s){s.Danger="danger"}(e.Style||(e.Style={}));function d(s,c,g){var f=c.id,p=o.getEventNameSpace(s,u.CLICK,c),h={id:f,payload:g};return o.actionWrapper({type:p,group:s,payload:h})}e.clickButton=d;function l(s,c,g){var f=c.id,p=g.label,h=o.getEventNameSpace(s,u.UPDATE,c),b=n(n({},g),{id:f,label:p});return o.actionWrapper({type:h,group:s,payload:b})}e.update=l;var a=function(s){r(c,s);function c(g,f){var p=s.call(this,g,t.ComponentType.Button,t.Group.Button)||this;return p.disabled=!1,p.loading=!1,p.plain=!1,p.set(f,!1),p}return Object.defineProperty(c.prototype,"options",{get:function(){return{disabled:this.disabled,icon:this.icon,label:this.label,style:this.style,loading:this.loading,plain:this.plain}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"payload",{get:function(){return n(n({},this.options),{id:this.id})},enumerable:!1,configurable:!0}),c.prototype.set=function(g,f){f===void 0&&(f=!0);var p=o.getMergedProps(this.options,g),h=p.label,b=p.disabled,O=p.icon,P=p.style,I=p.loading,T=p.plain;return this.label=h,this.disabled=!!b,this.icon=O,this.style=P,this.loading=!!I,this.plain=!!T,f&&this.dispatch(u.UPDATE),this},c.prototype.dispatch=function(g,f){switch(g){case u.CLICK:this.app.dispatch(d(this.group,this.component,f));break;case u.UPDATE:{var p=l(this.group,this.component,this.payload);this.app.dispatch(p);break}}return this},c}(i.ActionSet);e.Button=a})(me);Object.defineProperty(ce,"__esModule",{value:!0});ce.getSingleButton=void 0;var Tt=me;function jt(e,r,n,o){return e.addChild(r,e.group,n),e.subscribeToChild(r,Tt.Action.UPDATE,o),r.payload}ce.getSingleButton=jt;(function(e){var r=v&&v.__extends||function(){var _=function(A,m){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,E){S.__proto__=E}||function(S,E){for(var w in E)Object.prototype.hasOwnProperty.call(E,w)&&(S[w]=E[w])},_(A,m)};return function(A,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");_(A,m);function S(){this.constructor=A}A.prototype=m===null?Object.create(m):(S.prototype=m.prototype,new S)}}(),n=v&&v.__assign||function(){return n=Object.assign||function(_){for(var A,m=1,S=arguments.length;m<S;m++){A=arguments[m];for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(_[E]=A[E])}return _},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.ModalIframe=e.ModalMessage=e.Modal=e.isMessageModal=e.isIframeModal=e.data=e.update=e.clickFooterButton=e.updateModalSize=e.closeModal=e.openModal=e.Size=e.Action=void 0;var o=ce,i=k,t=U,u=F,d=me,l;(function(_){_.OPEN="APP::MODAL::OPEN",_.CLOSE="APP::MODAL::CLOSE",_.UPDATE="APP::MODAL::UPDATE",_.UPDATE_CONTENT="APP::MODAL::CONTENT::UPDATE",_.FOOTER_BUTTON_CLICK="APP::MODAL::FOOTER::BUTTON::CLICK",_.FOOTER_BUTTON_UPDATE="APP::MODAL::FOOTER::BUTTON::UPDATE",_.UPDATE_SIZE="APP::MODAL::UPDATE_SIZE",_.DATA="APP::MODAL::DATA"})(l=e.Action||(e.Action={}));var a;(function(_){_.Small="small",_.Medium="medium",_.Large="large",_.Full="full",_.Auto="auto"})(a=e.Size||(e.Size={}));var s={group:u.Group.Modal,subgroups:["Footer"],type:u.ComponentType.Button};function c(_){return i.actionWrapper({group:u.Group.Modal,payload:_,type:l.OPEN})}e.openModal=c;function g(_){return i.actionWrapper({group:u.Group.Modal,payload:_,type:l.CLOSE})}e.closeModal=g;function f(_){return i.actionWrapper({group:u.Group.Modal,payload:_,type:l.UPDATE_SIZE})}e.updateModalSize=f;function p(_,A){var m=n({id:_},s);return d.clickButton(u.Group.Modal,m,A)}e.clickFooterButton=p;function h(_){return i.actionWrapper({payload:_,group:u.Group.Modal,type:l.UPDATE})}e.update=h;function b(_){return i.actionWrapper({payload:_,group:u.Group.Modal,type:l.DATA})}e.data=b;function O(_){return typeof _.url=="string"||typeof _.path=="string"}e.isIframeModal=O;function P(_){return typeof _.message=="string"}e.isMessageModal=P;var I=function(_){r(A,_);function A(){var m=_!==null&&_.apply(this,arguments)||this;return m.size=a.Small,m}return Object.defineProperty(A.prototype,"footer",{get:function(){if(!(!this.footerPrimary&&!this.footerSecondary))return{buttons:{primary:this.footerPrimary,secondary:this.footerSecondary}}},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"footerOptions",{get:function(){if(!(!this.footerPrimaryOptions&&!this.footerSecondaryOptions))return{buttons:{primary:this.footerPrimaryOptions,secondary:this.footerSecondaryOptions}}},enumerable:!1,configurable:!0}),A.prototype.close=function(){this.app.dispatch(g({id:this.id}))},A.prototype.setFooterPrimaryButton=function(m,S){var E=this,w=s.subgroups;this.footerPrimaryOptions=this.getChildButton(m,this.footerPrimaryOptions),this.footerPrimary=this.footerPrimaryOptions?o.getSingleButton(this,this.footerPrimaryOptions,w,function(C){E.updatePrimaryFooterButton(C,S)}):void 0},A.prototype.setFooterSecondaryButtons=function(m,S){var E=this,w=s.subgroups,C=m||[],N=this.footerOptions&&this.footerOptions.buttons.secondary||[];this.footerSecondaryOptions=this.getUpdatedChildActions(C,N),this.footerSecondary=this.footerSecondaryOptions?this.footerSecondaryOptions.map(function(X){return o.getSingleButton(E,X,w,function(Q){E.updateSecondaryFooterButton(Q,S)})}):void 0},A.prototype.getChildButton=function(m,S){var E=m?[m]:[],w=S?[S]:[],C=this.getUpdatedChildActions(E,w);return C?C[0]:void 0},A.prototype.updatePrimaryFooterButton=function(m,S){!this.footer||!this.footer.buttons.primary||i.updateActionFromPayload(this.footer.buttons.primary,m)&&S()},A.prototype.updateSecondaryFooterButton=function(m,S){if(!(!this.footer||!this.footer.buttons||!this.footer.buttons.secondary)){for(var E,w=0,C=this.footer.buttons.secondary;w<C.length;w++){var N=C[w];if(E=i.updateActionFromPayload(N,m),E)break}E&&S()}},A}(t.ActionSetWithChildren);e.Modal=I;var T=function(_){r(A,_);function A(m,S){var E=_.call(this,m,u.Group.Modal,u.Group.Modal)||this;return E.set(S,!1),E}return Object.defineProperty(A.prototype,"payload",{get:function(){return n(n({},this.options),{footer:this.footer,id:this.id})},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"options",{get:function(){return{footer:this.footerOptions,message:this.message,size:this.size,title:this.title}},enumerable:!1,configurable:!0}),A.prototype.set=function(m,S){var E=this;S===void 0&&(S=!0);var w=i.getMergedProps(this.options,m),C=w.title,N=w.footer,X=w.message,Q=w.size;return this.title=C,this.message=X,this.size=Q,this.setFooterPrimaryButton(N?N.buttons.primary:void 0,function(){E.dispatch(l.UPDATE)}),this.setFooterSecondaryButtons(N?N.buttons.secondary:void 0,function(){E.dispatch(l.UPDATE)}),S&&this.dispatch(l.UPDATE),this},A.prototype.dispatch=function(m){switch(m){case l.OPEN:this.app.dispatch(c(this.payload));break;case l.CLOSE:this.close();break;case l.UPDATE:this.app.dispatch(h(this.payload));break}return this},A}(I);e.ModalMessage=T;var G=function(_){r(A,_);function A(m,S){var E=_.call(this,m,u.Group.Modal,u.Group.Modal)||this;return E.set(S,!1),E}return Object.defineProperty(A.prototype,"payload",{get:function(){return n(n({},this.options),{footer:this.footer,id:this.id})},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"options",{get:function(){return{footer:this.footerOptions,path:this.path,size:this.size,title:this.title,url:this.url,loading:this.loading}},enumerable:!1,configurable:!0}),A.prototype.set=function(m,S){var E=this;S===void 0&&(S=!0);var w=i.getMergedProps(this.options,m),C=w.title,N=w.footer,X=w.path,Q=w.url,lt=w.size,dt=w.loading;return this.title=C,this.url=Q,this.path=X,this.size=lt,this.loading=dt,this.setFooterPrimaryButton(N?N.buttons.primary:void 0,function(){E.dispatch(l.UPDATE)}),this.setFooterSecondaryButtons(N?N.buttons.secondary:void 0,function(){E.dispatch(l.UPDATE)}),S&&this.dispatch(l.UPDATE),this},A.prototype.dispatch=function(m,S){switch(m){case l.OPEN:this.app.dispatch(c(this.payload));break;case l.CLOSE:this.close();break;case l.UPDATE:this.app.dispatch(h(this.payload));break;case l.DATA:this.app.dispatch(b(S||{}));break}return this},A}(I);e.ModalIframe=G})(ye);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.create=e.Modal=e.isMessageModal=e.data=e.update=e.clickFooterButton=e.updateModalSize=e.closeModal=e.openModal=e.Size=e.Action=e.isIframeModal=e.ModalMessage=e.ModalIframe=void 0;var r=ye;Object.defineProperty(e,"ModalIframe",{enumerable:!0,get:function(){return r.ModalIframe}}),Object.defineProperty(e,"ModalMessage",{enumerable:!0,get:function(){return r.ModalMessage}}),Object.defineProperty(e,"isIframeModal",{enumerable:!0,get:function(){return r.isIframeModal}});var n=ye;Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return n.Action}}),Object.defineProperty(e,"Size",{enumerable:!0,get:function(){return n.Size}}),Object.defineProperty(e,"openModal",{enumerable:!0,get:function(){return n.openModal}}),Object.defineProperty(e,"closeModal",{enumerable:!0,get:function(){return n.closeModal}}),Object.defineProperty(e,"updateModalSize",{enumerable:!0,get:function(){return n.updateModalSize}}),Object.defineProperty(e,"clickFooterButton",{enumerable:!0,get:function(){return n.clickFooterButton}}),Object.defineProperty(e,"update",{enumerable:!0,get:function(){return n.update}}),Object.defineProperty(e,"data",{enumerable:!0,get:function(){return n.data}}),Object.defineProperty(e,"isMessageModal",{enumerable:!0,get:function(){return n.isMessageModal}}),Object.defineProperty(e,"Modal",{enumerable:!0,get:function(){return n.Modal}});var o=function(i,t){return r.isIframeModal(t)?new r.ModalIframe(i,t):new r.ModalMessage(i,t)};e.create=o})(Ve);var Ye={},Xe={},L={};Object.defineProperty(L,"__esModule",{value:!0});L.isPermitted=L.getPermissionKey=L.isPerformanceOrWebVitalsAction=L.isAppMessage=L.isAppBridgeAction=void 0;var Rt=le,re=V,Ct=k;function Nt(e){return e instanceof Object&&Object.prototype.hasOwnProperty.call(e,"type")&&e.type.toString().startsWith(re.PREFIX)}L.isAppBridgeAction=Nt;function Dt(e){if(typeof e!="object"||!e.data||typeof e.data!="object")return!1;var r=e.data;return Object.prototype.hasOwnProperty.call(r,"type")&&Ct.findMatchInEnum(Rt.MessageType,r.type)!==void 0}L.isAppMessage=Dt;function Lt(e){var r=e.type;return r.match(/^APP::(PERFORMANCE|WEB_VITALS)::/)}L.isPerformanceOrWebVitalsAction=Lt;function Qe(e){return e.replace(new RegExp("^"+re.PREFIX+re.SEPARATOR+"\\w+"+re.SEPARATOR),"")}L.getPermissionKey=Qe;function Bt(e,r,n){var o=r.group,i=r.type;if(!o||!Object.prototype.hasOwnProperty.call(e,o))return!1;var t=e[o];if(!t)return!1;var u=Qe(i);return t[u]?t[u][n]===!0:!1}L.isPermitted=Bt;var ae={};(function(e){var r,n;Object.defineProperty(e,"__esModule",{value:!0}),e.isUnframed=e.isClient=e.isServer=void 0,e.isServer=typeof window>"u",e.isClient=!e.isServer,e.isUnframed=e.isClient&&((n=(r=window.navigator)===null||r===void 0?void 0:r.userAgent)===null||n===void 0?void 0:n.indexOf("Unframed"))>0})(ae);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createTransportListener=e.fromWindow=e.fromFrame=e.Context=void 0;var r=Z,n=L,o=le,i=z,t=ae;(function(s){s.Modal="Modal",s.Main="Main"})(e.Context||(e.Context={}));function u(s,c,g){var f=[],p=s.host,h=s.window;if(!p)throw r.fromAction("App frame is undefined",r.AppActionType.WINDOW_UNDEFINED);return t.isUnframed&&window.MobileWebView&&Object.assign(window.MobileWebView,{postMessageToIframe:function(b,O){h==null||h.postMessage(b,O),a(b)&&p.postMessage(JSON.stringify(b.payload),location.origin)},updateIframeUrl:function(b){var O=window.location,P=(s.window||{}).location;try{var I=new URL(b).origin;I===c&&P?P.replace(b):O.href=b}catch{}}}),p.addEventListener("message",function(b){if(!(b.source===p||!n.isAppMessage(b))){if(b.origin!==c){var O="Message origin '"+b.origin+"' does not match app origin '"+c+"'.",P=r.invalidOriginAction(O),I={type:"dispatch",payload:P};h==null||h.postMessage(I,b.origin);return}if(t.isUnframed&&window.MobileWebView){var P=JSON.stringify({id:"unframed://fromClient",origin:c,data:b.data});window.MobileWebView.postMessage(P);return}for(var T=0,G=f;T<G.length;T++){var _=G[T];_(b)}}}),{context:g,localOrigin:c,frameWindow:h,hostFrame:p,dispatch:function(b){h==null||h.postMessage(b,c)},subscribe:function(b){return i.addAndRemoveFromCollection(f,b)}}}e.fromFrame=u;function d(s,c){var g=[];return typeof window!==void 0&&window.addEventListener("message",function(f){if(!(window===s&&!t.isUnframed||f.source!==s||!(n.isAppBridgeAction(f.data.payload)||n.isAppMessage(f))))for(var p=0,h=g;p<h.length;p++){var b=h[p];b(f)}}),{localOrigin:c,hostFrame:s,dispatch:function(f){var p;if(!((p=f.source)===null||p===void 0)&&p.host){if(t.isUnframed&&window&&window.MobileWebView){var h=JSON.stringify({id:"unframed://fromClient",origin:c,data:f});window.MobileWebView.postMessage(h);return}var b=new URL("https://"+f.source.host).origin;s.postMessage(f,b)}},subscribe:function(f){return i.addAndRemoveFromCollection(g,f)}}}e.fromWindow=d;function l(){var s=[],c={};function g(f){function p(){if(arguments.length<2)return i.addAndRemoveFromCollection(s,{callback:arguments[0]});var h=Array.from(arguments),b=h[0],O=h[1],P=h[2],I={callback:O,id:P},T={type:b,id:P};return Object.prototype.hasOwnProperty.call(c,b)||(c[b]=[]),f&&f(o.MessageType.Subscribe,T),i.addAndRemoveFromCollection(c[b],I,function(){f&&f(o.MessageType.Unsubscribe,T)})}return p}return{createSubscribeHandler:g,handleMessage:function(f){s.forEach(function(p){return p.callback(f)})},handleActionDispatch:function(f){var p=f.type,h=f.payload,b=!1;if(Object.prototype.hasOwnProperty.call(c,p))for(var O=0,P=c[p];O<P.length;O++){var I=P[O],T=I.id,G=I.callback,_=h&&h.id===T;(_||!T)&&(G(h),b=!0)}return b}}}e.createTransportListener=l;function a(s){return s!==null&&typeof s=="object"&&!Array.isArray(s)&&s.type==="dispatch"&&typeof s.payload=="object"}})(Xe);(function(e){var r=v&&v.__createBinding||(Object.create?function(o,i,t,u){u===void 0&&(u=t),Object.defineProperty(o,u,{enumerable:!0,get:function(){return i[t]}})}:function(o,i,t,u){u===void 0&&(u=t),o[u]=i[t]}),n=v&&v.__exportStar||function(o,i){for(var t in o)t!=="default"&&!Object.prototype.hasOwnProperty.call(i,t)&&r(i,o,t)};Object.defineProperty(e,"__esModule",{value:!0}),n(Xe,e)})(Ye);var D={},Je={};(function(e){var r={};Object.defineProperty(e,"__esModule",{value:!0}),e.isDevelopmentClient=e.isProduction=e.isDevelopment=e.isUnframed=e.isServer=e.isClient=void 0;var n=ae,o=ae;Object.defineProperty(e,"isClient",{enumerable:!0,get:function(){return o.isClient}}),Object.defineProperty(e,"isServer",{enumerable:!0,get:function(){return o.isServer}}),Object.defineProperty(e,"isUnframed",{enumerable:!0,get:function(){return o.isUnframed}}),e.isDevelopment=typeof process<"u"&&r&&!1,e.isProduction=!e.isDevelopment,e.isDevelopmentClient=e.isDevelopment&&n.isClient})(Je);Object.defineProperty(D,"__esModule",{value:!0});D.isShopifyPing=D.isShopifyPOS=D.isShopifyMobile=D.isShopifyEmbedded=D.isMobile=void 0;var je=Je;function Ut(){return Ze()||xe()||et()}D.isMobile=Ut;function kt(){return je.isClient&&window.top!==window.self||je.isUnframed}D.isShopifyEmbedded=kt;function Ze(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify Mobile")>=0}D.isShopifyMobile=Ze;function xe(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify POS")>=0}D.isShopifyPOS=xe;function et(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify Ping")>=0}D.isShopifyPing=et;var Ft=v&&v.__awaiter||function(e,r,n,o){function i(t){return t instanceof n?t:new n(function(u){u(t)})}return new(n||(n=Promise))(function(t,u){function d(s){try{a(o.next(s))}catch(c){u(c)}}function l(s){try{a(o.throw(s))}catch(c){u(c)}}function a(s){s.done?t(s.value):i(s.value).then(d,l)}a((o=o.apply(e,r||[])).next())})},Gt=v&&v.__generator||function(e,r){var n={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},o,i,t,u;return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(a){return function(s){return l([a,s])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,i&&(t=a[0]&2?i.return:a[0]?i.throw||((t=i.return)&&t.call(i),0):i.next)&&!(t=t.call(i,a[1])).done)return t;switch(i=0,t&&(a=[a[0]&2,t.value]),a[0]){case 0:case 1:t=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(t=n.trys,!(t=t.length>0&&t[t.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!t||a[1]>t[0]&&a[1]<t[3])){n.label=a[1];break}if(a[0]===6&&n.label<t[1]){n.label=t[1],t=a;break}if(t&&n.label<t[2]){n.label=t[2],n.ops.push(a);break}t[2]&&n.ops.pop(),n.trys.pop();continue}a=r.call(e,n)}catch(s){a=[6,s],i=0}finally{o=t=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(K,"__esModule",{value:!0});K.createMutationObserver=K.setupModalAutoSizing=void 0;var Wt=Ve,$t=Ye,Vt=D,ve="app-bridge-utils-modal-auto-size",ne=zt();function zt(){if(typeof document>"u")return null;var e=document.createElement("style");return e.type="text/css",e.innerHTML="."+ve+" { overflow: hidden; height: auto; min-height: auto; }",e}function Ht(e,r){if(!ne)return function(){};var n=document.getElementsByTagName("head")[0],o=document.body.classList;n.appendChild(ne),o.add(ve);var i=tt(e,r);return function(){o.remove(ve),n.contains(ne)&&n.removeChild(ne),i&&i.disconnect()}}function qt(e){return Ft(this,void 0,void 0,function(){function r(){o&&(o(),o=void 0)}function n(i){var t=i.context,u=i.modal.id;return Vt.isMobile()||t!==$t.Context.Modal?(r(),r):(o||(o=Ht(e,u)),r)}var o;return Gt(this,function(i){switch(i.label){case 0:return[4,e.getState().then(n)];case 1:return i.sent(),[2,r]}})})}K.setupModalAutoSizing=qt;function tt(e,r){if(typeof document>"u")return;var n=-1,o,i={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},t=new MutationObserver(u);t.observe(document,i),d();function u(){o&&window.clearTimeout(o),o=window.setTimeout(d,16)}function d(){var l=document.body.scrollHeight;l!==n&&(n=l,e.dispatch(Wt.updateModalSize({id:r,height:String(l)})))}return t}K.createMutationObserver=tt;var nt={},x={},rt={},it={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.respond=e.request=e.Action=void 0;var r=k,n=F,o;(function(u){u.REQUEST="APP::SESSION_TOKEN::REQUEST",u.RESPOND="APP::SESSION_TOKEN::RESPOND"})(o=e.Action||(e.Action={}));function i(){return r.actionWrapper({group:n.Group.SessionToken,type:o.REQUEST})}e.request=i;function t(u){return r.actionWrapper({payload:u,group:n.Group.SessionToken,type:o.RESPOND})}e.respond=t})(it);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.respond=e.request=e.Action=void 0;var r=it;Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return r.Action}}),Object.defineProperty(e,"request",{enumerable:!0,get:function(){return r.request}}),Object.defineProperty(e,"respond",{enumerable:!0,get:function(){return r.respond}})})(rt);var Oe={},Se={};const Kt="@shopify/app-bridge",Yt="3.7.10",Xt={name:Kt,version:Yt};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getPackageName=e.getVersion=e.getMergedProps=e.updateActionFromPayload=e.isValidOptionalString=e.isValidOptionalNumber=e.NonSnakeCaseGroup=e.getEventNameSpace=e.forEachInEnum=e.findMatchInEnum=e.actionWrapper=void 0;var r=k;Object.defineProperty(e,"actionWrapper",{enumerable:!0,get:function(){return r.actionWrapper}}),Object.defineProperty(e,"findMatchInEnum",{enumerable:!0,get:function(){return r.findMatchInEnum}}),Object.defineProperty(e,"forEachInEnum",{enumerable:!0,get:function(){return r.forEachInEnum}}),Object.defineProperty(e,"getEventNameSpace",{enumerable:!0,get:function(){return r.getEventNameSpace}}),Object.defineProperty(e,"NonSnakeCaseGroup",{enumerable:!0,get:function(){return r.NonSnakeCaseGroup}}),Object.defineProperty(e,"isValidOptionalNumber",{enumerable:!0,get:function(){return r.isValidOptionalNumber}}),Object.defineProperty(e,"isValidOptionalString",{enumerable:!0,get:function(){return r.isValidOptionalString}}),Object.defineProperty(e,"updateActionFromPayload",{enumerable:!0,get:function(){return r.updateActionFromPayload}}),Object.defineProperty(e,"getMergedProps",{enumerable:!0,get:function(){return r.getMergedProps}});var n=Xt;function o(){return n.version}e.getVersion=o;function i(){return n.name}e.getPackageName=i})(Se);var Ee={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ComponentType=e.Group=void 0;var r=F;Object.defineProperty(e,"Group",{enumerable:!0,get:function(){return r.Group}}),Object.defineProperty(e,"ComponentType",{enumerable:!0,get:function(){return r.ComponentType}})})(Ee);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.networkAction=e.persistenceAction=e.unsupportedOperationAction=e.unexpectedAction=e.invalidAction=e.invalidActionType=e.invalidPayload=e.Message=e.fromAction=e.Action=e.permissionAction=e.isErrorEventName=e.throwError=e.invalidOriginAction=e.AppBridgeError=e.AppActionType=void 0;var r=Z;Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return r.Action}}),Object.defineProperty(e,"fromAction",{enumerable:!0,get:function(){return r.fromAction}});var n=Se,o=Ee,i=Z;Object.defineProperty(e,"AppActionType",{enumerable:!0,get:function(){return i.AppActionType}}),Object.defineProperty(e,"AppBridgeError",{enumerable:!0,get:function(){return i.AppBridgeError}}),Object.defineProperty(e,"invalidOriginAction",{enumerable:!0,get:function(){return i.invalidOriginAction}}),Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return i.throwError}}),Object.defineProperty(e,"isErrorEventName",{enumerable:!0,get:function(){return i.isErrorEventName}}),Object.defineProperty(e,"permissionAction",{enumerable:!0,get:function(){return i.permissionAction}});function t(f,p,h){var b=p.payload;return n.actionWrapper({type:f,group:o.Group.Error,payload:{action:p,message:h,type:f,id:b&&b.id?b.id:void 0}})}(function(f){f.MISSING_PAYLOAD="Missing payload",f.INVALID_PAYLOAD_ID="Id in payload is missing or invalid"})(e.Message||(e.Message={}));function u(f,p){return t(r.Action.INVALID_PAYLOAD,f,p||"The action's payload is missing required properties or has invalid properties")}e.invalidPayload=u;function d(f,p){return n.actionWrapper({group:o.Group.Error,payload:{action:f,message:p||"The action type is invalid or unsupported",type:r.Action.INVALID_ACTION_TYPE},type:r.Action.INVALID_ACTION_TYPE})}e.invalidActionType=d;function l(f,p){return n.actionWrapper({group:o.Group.Error,payload:{action:f,message:p||"The action's has missing/invalid values for `group`, `type` or `version`",type:r.Action.INVALID_ACTION},type:r.Action.INVALID_ACTION})}e.invalidAction=l;function a(f,p){return n.actionWrapper({group:o.Group.Error,payload:{action:f,message:p||"Action cannot be called at this time",type:r.Action.UNEXPECTED_ACTION},type:r.Action.UNEXPECTED_ACTION})}e.unexpectedAction=a;function s(f,p){return t(r.Action.UNSUPPORTED_OPERATION,f,p||"The action type is unsupported")}e.unsupportedOperationAction=s;function c(f,p){return t(r.Action.PERSISTENCE,f,p||"Action cannot be persisted on server")}e.persistenceAction=c;function g(f,p){return t(r.Action.NETWORK,f,p||"Network error")}e.networkAction=g})(Oe);var Qt=v&&v.__createBinding||(Object.create?function(e,r,n,o){o===void 0&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return r[n]}})}:function(e,r,n,o){o===void 0&&(o=n),e[o]=r[n]}),Jt=v&&v.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Zt=v&&v.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&Qt(r,e,n);return Jt(r,e),r},xt=v&&v.__awaiter||function(e,r,n,o){function i(t){return t instanceof n?t:new n(function(u){u(t)})}return new(n||(n=Promise))(function(t,u){function d(s){try{a(o.next(s))}catch(c){u(c)}}function l(s){try{a(o.throw(s))}catch(c){u(c)}}function a(s){s.done?t(s.value):i(s.value).then(d,l)}a((o=o.apply(e,r||[])).next())})},en=v&&v.__generator||function(e,r){var n={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},o,i,t,u;return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(a){return function(s){return l([a,s])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,i&&(t=a[0]&2?i.return:a[0]?i.throw||((t=i.return)&&t.call(i),0):i.next)&&!(t=t.call(i,a[1])).done)return t;switch(i=0,t&&(a=[a[0]&2,t.value]),a[0]){case 0:case 1:t=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(t=n.trys,!(t=t.length>0&&t[t.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!t||a[1]>t[0]&&a[1]<t[3])){n.label=a[1];break}if(a[0]===6&&n.label<t[1]){n.label=t[1],t=a;break}if(t&&n.label<t[2]){n.label=t[2],n.ops.push(a);break}t[2]&&n.ops.pop(),n.trys.pop();continue}a=r.call(e,n)}catch(s){a=[6,s],i=0}finally{o=t=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(x,"__esModule",{value:!0});x.getSessionToken=void 0;var Re=Zt(rt),Ce=Oe;function tn(e){return xt(this,void 0,void 0,function(){return en(this,function(r){return[2,new Promise(function(n,o){var i=e.subscribe(Re.Action.RESPOND,function(t){var u=t.sessionToken;u?n(u):o(Ce.fromAction("Failed to retrieve a session token",Ce.Action.FAILED_AUTHENTICATION)),i()});e.dispatch(Re.request())})]})})}x.getSessionToken=tn;var de={},ue=v&&v.__assign||function(){return ue=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ue.apply(this,arguments)},nn=v&&v.__awaiter||function(e,r,n,o){function i(t){return t instanceof n?t:new n(function(u){u(t)})}return new(n||(n=Promise))(function(t,u){function d(s){try{a(o.next(s))}catch(c){u(c)}}function l(s){try{a(o.throw(s))}catch(c){u(c)}}function a(s){s.done?t(s.value):i(s.value).then(d,l)}a((o=o.apply(e,r||[])).next())})},rn=v&&v.__generator||function(e,r){var n={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},o,i,t,u;return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(a){return function(s){return l([a,s])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,i&&(t=a[0]&2?i.return:a[0]?i.throw||((t=i.return)&&t.call(i),0):i.next)&&!(t=t.call(i,a[1])).done)return t;switch(i=0,t&&(a=[a[0]&2,t.value]),a[0]){case 0:case 1:t=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(t=n.trys,!(t=t.length>0&&t[t.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!t||a[1]>t[0]&&a[1]<t[3])){n.label=a[1];break}if(a[0]===6&&n.label<t[1]){n.label=t[1],t=a;break}if(t&&n.label<t[2]){n.label=t[2],n.ops.push(a);break}t[2]&&n.ops.pop(),n.trys.pop();continue}a=r.call(e,n)}catch(s){a=[6,s],i=0}finally{o=t=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(de,"__esModule",{value:!0});de.authenticatedFetch=void 0;var on=x;function an(e,r){var n=this;return r===void 0&&(r=fetch),function(o,i){return i===void 0&&(i={}),nn(n,void 0,void 0,function(){var t,u,d;return rn(this,function(l){switch(l.label){case 0:return[4,on.getSessionToken(e)];case 1:return t=l.sent(),u=new Headers(i.headers),u.append("Authorization","Bearer "+t),u.append("X-Requested-With","XMLHttpRequest"),d={},u.forEach(function(a,s){d[s]=a}),[2,r(o,ue(ue({},i),{headers:d}))]}})})}}de.authenticatedFetch=an;(function(e){var r=v&&v.__createBinding||(Object.create?function(o,i,t,u){u===void 0&&(u=t),Object.defineProperty(o,u,{enumerable:!0,get:function(){return i[t]}})}:function(o,i,t,u){u===void 0&&(u=t),o[u]=i[t]}),n=v&&v.__exportStar||function(o,i){for(var t in o)t!=="default"&&!Object.prototype.hasOwnProperty.call(i,t)&&r(i,o,t)};Object.defineProperty(e,"__esModule",{value:!0}),n(x,e),n(de,e)})(nt);var ot={},ee={},at={},be={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.respond=e.Action=void 0;var r=k,n=F,o;(function(t){t.REQUEST="APP::AUTH_CODE::REQUEST",t.RESPOND="APP::AUTH_CODE::RESPOND"})(o=e.Action||(e.Action={}));function i(t){return r.actionWrapper({payload:t,group:n.Group.AuthCode,type:o.RESPOND})}e.respond=i})(be);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.request=e.Action=e.respond=void 0;var r=be;Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return r.Action}});var n=Se,o=Ee,i=be;Object.defineProperty(e,"respond",{enumerable:!0,get:function(){return i.respond}});function t(u){return n.actionWrapper({group:o.Group.AuthCode,type:r.Action.REQUEST,payload:{id:u}})}e.request=t})(at);var ut={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.generateUuid=void 0;var r=Y;Object.defineProperty(e,"generateUuid",{enumerable:!0,get:function(){return r.generateUuid}}),e.default=r.generateUuid})(ut);var un=v&&v.__createBinding||(Object.create?function(e,r,n,o){o===void 0&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return r[n]}})}:function(e,r,n,o){o===void 0&&(o=n),e[o]=r[n]}),sn=v&&v.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),cn=v&&v.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&un(r,e,n);return sn(r,e),r},ln=v&&v.__awaiter||function(e,r,n,o){function i(t){return t instanceof n?t:new n(function(u){u(t)})}return new(n||(n=Promise))(function(t,u){function d(s){try{a(o.next(s))}catch(c){u(c)}}function l(s){try{a(o.throw(s))}catch(c){u(c)}}function a(s){s.done?t(s.value):i(s.value).then(d,l)}a((o=o.apply(e,r||[])).next())})},dn=v&&v.__generator||function(e,r){var n={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},o,i,t,u;return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(a){return function(s){return l([a,s])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,i&&(t=a[0]&2?i.return:a[0]?i.throw||((t=i.return)&&t.call(i),0):i.next)&&!(t=t.call(i,a[1])).done)return t;switch(i=0,t&&(a=[a[0]&2,t.value]),a[0]){case 0:case 1:t=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(t=n.trys,!(t=t.length>0&&t[t.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!t||a[1]>t[0]&&a[1]<t[3])){n.label=a[1];break}if(a[0]===6&&n.label<t[1]){n.label=t[1],t=a;break}if(t&&n.label<t[2]){n.label=t[2],n.ops.push(a);break}t[2]&&n.ops.pop(),n.trys.pop();continue}a=r.call(e,n)}catch(s){a=[6,s],i=0}finally{o=t=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},fn=v&&v.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ee,"__esModule",{value:!0});ee.getAuthorizationCodePayload=void 0;var Ne=cn(at),De=Oe,pn=fn(ut);function hn(e){return ln(this,void 0,void 0,function(){return dn(this,function(r){return[2,new Promise(function(n,o){var i=pn.default(),t=e.subscribe(Ne.Action.RESPOND,function(u){switch(u==null?void 0:u.status){case"needsExchange":n(u);break;default:o(De.fromAction("Failed to retrieve an authorization code",De.Action.FAILED_AUTHENTICATION))}t()},i);e.dispatch(Ne.request(i))})]})})}ee.getAuthorizationCodePayload=hn;var fe={},yn=v&&v.__awaiter||function(e,r,n,o){function i(t){return t instanceof n?t:new n(function(u){u(t)})}return new(n||(n=Promise))(function(t,u){function d(s){try{a(o.next(s))}catch(c){u(c)}}function l(s){try{a(o.throw(s))}catch(c){u(c)}}function a(s){s.done?t(s.value):i(s.value).then(d,l)}a((o=o.apply(e,r||[])).next())})},gn=v&&v.__generator||function(e,r){var n={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},o,i,t,u;return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(a){return function(s){return l([a,s])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,i&&(t=a[0]&2?i.return:a[0]?i.throw||((t=i.return)&&t.call(i),0):i.next)&&!(t=t.call(i,a[1])).done)return t;switch(i=0,t&&(a=[a[0]&2,t.value]),a[0]){case 0:case 1:t=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(t=n.trys,!(t=t.length>0&&t[t.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!t||a[1]>t[0]&&a[1]<t[3])){n.label=a[1];break}if(a[0]===6&&n.label<t[1]){n.label=t[1],t=a;break}if(t&&n.label<t[2]){n.label=t[2],n.ops.push(a);break}t[2]&&n.ops.pop(),n.trys.pop();continue}a=r.call(e,n)}catch(s){a=[6,s],i=0}finally{o=t=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(fe,"__esModule",{value:!0});fe.userAuthorizedFetch=void 0;var vn=ee,bn="auth/shopify/callback";function _n(e){var r=e.headers.get("X-Shopify-API-Request-Failure-Unauthorized");return r?r.toLowerCase()==="true":!1}function mn(e){var r=this,n=e.app,o=e.callbackUri,i=o===void 0?bn:o,t=e.isAuthorizationCodeRequired,u=t===void 0?_n:t,d=e.fetchOperation;return function(l,a){return yn(r,void 0,void 0,function(){var s,c,g,f,p,h,b,O;return gn(this,function(P){switch(P.label){case 0:return[4,d(l,a)];case 1:return s=P.sent(),u(s)?[4,vn.getAuthorizationCodePayload(n)]:[2,s];case 2:return c=P.sent(),g=c.code,f=c.hmac,p=c.shop,h=c.timestamp,b=encodeURI("https://"+window.location.hostname+"/"+i+"?code="+g+"&hmac="+f+"&shop="+p+"&timestamp="+h),[4,d(b,{})];case 3:if(O=P.sent(),!O.ok)throw new Error("Failed to authorize request.");return[2,d(l,a)]}})})}}fe.userAuthorizedFetch=mn;(function(e){var r=v&&v.__createBinding||(Object.create?function(o,i,t,u){u===void 0&&(u=t),Object.defineProperty(o,u,{enumerable:!0,get:function(){return i[t]}})}:function(o,i,t,u){u===void 0&&(u=t),o[u]=i[t]}),n=v&&v.__exportStar||function(o,i){for(var t in o)t!=="default"&&!Object.prototype.hasOwnProperty.call(i,t)&&r(i,o,t)};Object.defineProperty(e,"__esModule",{value:!0}),n(ee,e),n(fe,e)})(ot);(function(e){var r=v&&v.__createBinding||(Object.create?function(o,i,t,u){u===void 0&&(u=t),Object.defineProperty(o,u,{enumerable:!0,get:function(){return i[t]}})}:function(o,i,t,u){u===void 0&&(u=t),o[u]=i[t]}),n=v&&v.__exportStar||function(o,i){for(var t in o)t!=="default"&&!Object.prototype.hasOwnProperty.call(i,t)&&r(i,o,t)};Object.defineProperty(e,"__esModule",{value:!0}),n(K,e),n(D,e),n(nt,e),n(ot,e)})($e);(function(e){var r=v&&v.__createBinding||(Object.create?function(o,i,t,u){u===void 0&&(u=t),Object.defineProperty(o,u,{enumerable:!0,get:function(){return i[t]}})}:function(o,i,t,u){u===void 0&&(u=t),o[u]=i[t]}),n=v&&v.__exportStar||function(o,i){for(var t in o)t!=="default"&&!Object.prototype.hasOwnProperty.call(i,t)&&r(i,o,t)};Object.defineProperty(e,"__esModule",{value:!0}),n($e,e)})(We);const Le=window.__SHOPIFY_APP_BRIDGE__;function st(){const e=new URLSearchParams(window.location.search),r=e.get("shop")||void 0,n=e.get("id_token")||void 0;return async function(i,{method:t="GET",params:u,body:d,headers:l}={}){const a=new URL(i,window.location.origin),s=new URLSearchParams(u||{}),c=/\/shop\/[^/?]+/.test(a.pathname),g=a.searchParams.has("shop")||s.has("shop");!c&&!g&&r&&s.set("shop",r),[...s.keys()].length&&(a.search=(a.search?a.search+"&":"?")+s.toString());const f={...l};if(n&&(f.Authorization=`Bearer ${n}`),t!=="GET"&&!f["Content-Type"]&&(f["Content-Type"]="application/json"),Le&&!n)try{const b=await We.getSessionToken(Le);f.Authorization=`Bearer ${b}`}catch(b){console.warn("[API] Failed to get session token:",b)}const p=await fetch(a.toString(),{method:t,headers:f,body:t!=="GET"&&d?JSON.stringify(d):void 0});if(!p.ok)throw new Error(await p.text().catch(()=>p.statusText));return(p.headers.get("content-type")||"").includes("application/json")?p.json():p.text()}}async function Pn(e,r={}){return st()(e,r)}async function An(e,r,n={}){return st()(e,{method:"POST",body:r,...n})}const On=(e,r="")=>{try{return new URLSearchParams(window.location.search).get(e)||r}catch{return r}};function Sn(){const e=On("shop","");return{api:M.useMemo(()=>async(n,o={})=>{const i=new URL(n,window.location.origin);return!i.searchParams.has("shop")&&e&&i.searchParams.set("shop",e),o.method==="POST"||o.body?An(i.pathname+i.search,o.body||{},o):Pn(i.pathname+i.search,o)},[e]),shop:e}}function En(e=!0){return e&&console.log("[SFETCH] Creating session fetch for App Bridge v4"),async(r,n={})=>{console.log("[SFETCH] Fetching:",r,n);const{method:o="GET",headers:i={},body:t,responseType:u,...d}=n,l={method:o,headers:{"Content-Type":"application/json",...i},credentials:"include",body:t?typeof t=="string"?t:JSON.stringify(t):void 0},a=await fetch(r,l);console.log("[SFETCH] Response:",a.status,a.statusText);let s;if(u==="text")s=await a.text();else{const c=await a.text();try{s=c?JSON.parse(c):null}catch{s={error:(c==null?void 0:c.slice(0,500))||"Non-JSON response"}}}if(!a.ok){const c=(s==null?void 0:s.error)||(s==null?void 0:s.message)||`HTTP ${a.status}`;throw new Error(c)}return s}}const he=["en","de","es","fr"],Be={en:"🇬🇧",de:"🇩🇪",es:"🇪🇸",fr:"🇫🇷"},Ue={en:"English",de:"Deutsch",es:"Español",fr:"Français"};function wn({lang:e="en",setLang:r,t:n}){const[o,i]=M.useState(!1);M.useEffect(()=>{if(!he.includes(e)){try{localStorage.setItem("app_lang","en")}catch{}typeof r=="function"&&r("en")}},[e,r]);const t=he.includes(e)?e:"en",u=y.jsx(yt,{onClick:()=>i(l=>!l),disclosure:!0,children:y.jsxs(se,{gap:"200",blockAlign:"center",children:[y.jsx("span",{"aria-hidden":!0,children:Be[t]}),y.jsx(j,{as:"span",variant:"bodyMd",children:Ue[t]})]})}),d=M.useMemo(()=>he.map(l=>({content:`${Be[l]} ${Ue[l]}`,active:l===t,onAction:()=>{try{localStorage.setItem("app_lang",l)}catch{}typeof r=="function"&&r(l),i(!1)}})),[t,r]);return y.jsx(pt,{active:o,activator:u,onClose:()=>i(!1),autofocusTarget:"first-node",children:y.jsx(ht,{items:d})})}function In({sectionTitle:e,lang:r,setLang:n,t:o}){return y.jsx(R,{padding:"400",borderBlockEndWidth:"025",borderColor:"border",background:"bg",children:y.jsxs(se,{align:"space-between",blockAlign:"center",children:[y.jsx(j,{as:"h1",variant:"headingLg",children:e}),y.jsx(wn,{lang:r,setLang:n,t:o})]})})}const ke="en",_e={en:()=>B(()=>import("./en-DY--Skhq-1759303768796.js"),[]),de:()=>B(()=>import("./de-BYtsvH6H-1759303768796.js"),[]),es:()=>B(()=>import("./es-Cshzw9pa-1759303768796.js"),[]),fr:()=>B(()=>import("./fr-DGTXCiho-1759303768796.js"),[])},ct=Object.keys(_e);function Mn(){try{const e=localStorage.getItem("app_lang");return ct.includes(e)?e:null}catch{return null}}function Tn(e){try{localStorage.setItem("app_lang",e)}catch{}}function jn(){const[e,r]=M.useState(()=>Mn()||ke),[n,o]=M.useState({});M.useEffect(()=>{let t=!1;async function u(){const l=await(_e[e]||_e[ke])();t||o(l.default||l)}return u(),Tn(e),()=>{t=!0}},[e]);const i=M.useMemo(()=>(t,u="")=>{const d=t==null?void 0:t.split(".").reduce((l,a)=>l&&l[a]!==void 0?l[a]:void 0,n);return d!=null?String(d):u||t},[n]);return{lang:e,setLang:r,t:i,dict:n,langs:ct}}const Rn=W.lazy(()=>B(()=>import("./BulkEdit-DZr-z_x4-1759303768796.js"),__vite__mapDeps([0,1,2,3,4]))),Cn=W.lazy(()=>B(()=>import("./Collections-CL0_WhrE-1759303768796.js"),__vite__mapDeps([5,1,2,3,4]))),Nn=W.lazy(()=>B(()=>import("./Sitemap-D7C1m49M-1759303768796.js"),__vite__mapDeps([6,1,2,4]))),Dn=W.lazy(()=>B(()=>import("./StoreMetadata-B8jqYk7f-1759303768796.js"),__vite__mapDeps([7,1,2,4]))),Ln=W.lazy(()=>B(()=>import("./SchemaData-DoD_-rgA-1759303768796.js"),__vite__mapDeps([8,1,2,4]))),Bn=W.lazy(()=>(console.log("[APP] ===== LOADING SETTINGS COMPONENT ====="),B(()=>import("./Settings-cJp7Wbkq-1759303768796.js"),__vite__mapDeps([9,1,2,4])))),Un={Polaris:{ResourceList:{sortingLabel:"Sort by"}}},we=(e,r="")=>{try{return new URLSearchParams(window.location.search).get(e)||r}catch{return r}};function kn(){const[e,r]=M.useState(window.location.pathname);return M.useEffect(()=>{const n=()=>r(window.location.pathname);return window.addEventListener("popstate",n),()=>window.removeEventListener("popstate",n)},[]),{path:e}}function Fn({active:e,shop:r}){e==="/"||e.startsWith("/dashboard"),e.startsWith("/ai-seo"),e.startsWith("/billing"),e.startsWith("/settings");const o=new URLSearchParams(window.location.search).get("host"),i=new URLSearchParams;r&&i.set("shop",r),o&&i.set("host",o);const t=i.toString()?`?${i.toString()}`:"";return y.jsxs("ui-nav-menu",{children:[y.jsx("a",{href:`/${t}`,rel:"home",children:"Home"}),y.jsx("a",{href:`/dashboard${t}`,children:"Dashboard"}),y.jsx("a",{href:`/ai-seo${t}`,children:"Search Optimization for AI"}),y.jsx("a",{href:`/billing${t}`,children:"Billing"}),y.jsx("a",{href:`/settings${t}`,children:"Settings"})]})}const Gn=W.memo(({shop:e})=>{var d;const[r,n]=M.useState(null),{api:o}=Sn(),i=e||we("shop",""),t=M.useMemo(()=>En(),[]),u=async(l,a)=>{var c,g;const s=await t("/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:l,variables:a})});if((c=s==null?void 0:s.errors)!=null&&c.length)throw new Error(((g=s.errors[0])==null?void 0:g.message)||"GraphQL error");return s==null?void 0:s.data};return M.useEffect(()=>{if(!i)return;u(`
      query PlansMe($shop:String!) {
        plansMe(shop:$shop) {
          shop
          plan
          planKey
          priceUsd
          ai_queries_used
          ai_queries_limit
          product_limit
          providersAllowed
          modelsSuggested
          autosyncCron
          trial {
            active
            ends_at
            days_left
          }
        }
      }
    `,{shop:i}).then(a=>{const s=a==null?void 0:a.plansMe;s&&n(s)}).catch(a=>console.error("Failed to load plan via GraphQL:",a))},[i,t]),M.useEffect(()=>{i&&o(`/collections/check-definitions?shop=${i}`).then(l=>{const a=(l.definitions||[]).map(g=>g.key),c=["en","bg","fr"].filter(g=>!a.includes(`seo__${g}`));if(c.length>0)return o(`/collections/create-definitions?shop=${i}`,{method:"POST",body:{shop:i,languages:c}})}).catch(l=>console.error("Definitions error:",l))},[i,o]),r?y.jsx(J,{title:"Dashboard",children:y.jsxs(R,{padding:"400",children:[y.jsxs(se,{gap:"800",wrap:!1,children:[y.jsxs(R,{children:[y.jsx(j,{variant:"headingMd",as:"h3",children:"Current plan"}),y.jsx(j,{children:r.plan||"Free"})]}),y.jsxs(R,{children:[y.jsx(j,{variant:"headingMd",as:"h3",children:"Shop"}),y.jsx(j,{children:r.shop||"â€”"})]}),y.jsxs(R,{children:[y.jsx(j,{variant:"headingMd",as:"h3",children:"AI queries"}),y.jsxs(j,{children:[r.ai_queries_used||0," / ",r.ai_queries_limit||0]})]}),y.jsxs(R,{children:[y.jsx(j,{variant:"headingMd",as:"h3",children:"Product limit"}),y.jsx(j,{children:r.product_limit||0})]})]}),y.jsxs(R,{paddingBlockStart:"400",children:[y.jsx(j,{variant:"headingMd",as:"h3",children:"Allowed AI providers"}),y.jsx(j,{children:((d=r.providersAllowed)==null?void 0:d.join(", "))||"None"})]}),r.trial_ends_at&&y.jsxs(R,{paddingBlockStart:"400",children:[y.jsx(j,{variant:"headingMd",as:"h3",children:"Trial ends at"}),y.jsx(j,{children:new Date(r.trial_ends_at).toLocaleDateString()})]})]})}):y.jsx(J,{children:y.jsx(R,{padding:"400",children:y.jsx(j,{children:"Loading plan info..."})})})}),Wn=W.memo(()=>{const e=we("shop",""),r=window.location.pathname;console.log("[APP] AiSearchOptimisationPanel - shop:",e),console.log("[APP] AiSearchOptimisationPanel - path:",r),console.log("[APP] AiSearchOptimisationPanel - window.location.search:",window.location.search);const o=r==="/ai-seo"||r==="/ai-seo/products"?"products":r==="/ai-seo/collections"?"collections":r==="/ai-seo/sitemap"?"sitemap":r==="/ai-seo/store-metadata"?"store-metadata":r==="/ai-seo/schema-data"?"schema-data":"products",i=t=>{const u=new URLSearchParams(window.location.search),d=u.toString()?`?${u.toString()}`:"";return t==="products"?`/ai-seo${d}`:`/ai-seo/${t}${d}`};return y.jsxs("div",{children:[y.jsx(R,{paddingBlockEnd:"400",children:y.jsx(J,{children:y.jsx(R,{padding:"200",children:y.jsxs(se,{gap:"100",children:[y.jsx("a",{href:i("products"),style:{padding:"8px 16px",borderRadius:"4px",backgroundColor:o==="products"?"#008060":"#f6f6f7",color:o==="products"?"white":"#202223",textDecoration:"none",display:"inline-block"},children:"Products"}),y.jsx("a",{href:i("collections"),style:{padding:"8px 16px",borderRadius:"4px",backgroundColor:o==="collections"?"#008060":"#f6f6f7",color:o==="collections"?"white":"#202223",textDecoration:"none",display:"inline-block"},children:"Collections"}),y.jsx("a",{href:i("sitemap"),style:{padding:"8px 16px",borderRadius:"4px",backgroundColor:o==="sitemap"?"#008060":"#f6f6f7",color:o==="sitemap"?"white":"#202223",textDecoration:"none",display:"inline-block"},children:"Sitemap"}),y.jsx("a",{href:i("store-metadata"),style:{padding:"8px 16px",borderRadius:"4px",backgroundColor:o==="store-metadata"?"#008060":"#f6f6f7",color:o==="store-metadata"?"white":"#202223",textDecoration:"none",display:"inline-block"},children:"Store metadata"}),y.jsx("a",{href:i("schema-data"),style:{padding:"8px 16px",borderRadius:"4px",backgroundColor:o==="schema-data"?"#008060":"#f6f6f7",color:o==="schema-data"?"white":"#202223",textDecoration:"none",display:"inline-block"},children:"Schema Data"})]})})})}),y.jsxs("div",{children:[o==="products"&&y.jsx(Rn,{shop:e}),o==="collections"&&y.jsx(Cn,{shop:e}),o==="sitemap"&&y.jsx(Nn,{shop:e}),o==="store-metadata"&&y.jsx(Dn,{shop:e}),o==="schema-data"&&y.jsx(Ln,{shop:e})]})]})});function $n(){const{path:e}=kn(),{lang:r,setLang:n,t:o}=jn(),i=!!new URLSearchParams(window.location.search).get("host"),t=we("shop","");M.useEffect(()=>{const l=async()=>{const s=new URLSearchParams(window.location.search),c=s.get("shop"),g=s.get("id_token");if(c&&g)try{console.log("[APP] Performing initial token exchange for shop:",c);const f=await fetch("/token-exchange",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shop:c,id_token:g})});if(!f.ok){const b=await f.json();console.error("[APP] Token exchange failed:",b);return}const p=await f.json();console.log("[APP] Token exchange successful:",p);const h=new URL(window.location);h.searchParams.delete("id_token"),window.history.replaceState({},"",h),await a(c)}catch(f){console.error("[APP] Token exchange error:",f)}else c&&await a(c)},a=async s=>{try{const g=await fetch("/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
          query PlansMe($shop:String!) {
            plansMe(shop:$shop) {
              shop
              plan
            }
          }
        `,variables:{shop:s}})});if(g.status===202&&(await g.json()).error==="token_exchange_required"){console.log("[APP] Token exchange required, but no id_token available"),window.location.href=`/auth?shop=${encodeURIComponent(s)}`;return}if(!g.ok){console.error("[APP] Failed to load plans:",await g.text());return}console.log("[APP] Plans loaded successfully via GraphQL")}catch(c){console.error("[APP] Error loading initial data:",c)}};l()},[]);const u=M.useMemo(()=>e.startsWith("/ai-seo")?"Search Optimization for AI":e.startsWith("/billing")?"Billing":e.startsWith("/settings")?"Settings":"Dashboard",[e]),d=()=>e==="/"||e==="/dashboard"?y.jsx(Gn,{shop:t}):e.startsWith("/ai-seo")?y.jsx(Wn,{shop:t}):e==="/billing"?y.jsx(J,{children:y.jsx(R,{padding:"400",children:y.jsx(j,{children:"Billing page"})})}):e==="/settings"?(console.log("[APP] ===== RENDERING SETTINGS PAGE ====="),y.jsx(Bn,{shop:t})):y.jsx(J,{children:y.jsxs(R,{padding:"400",children:[y.jsx(j,{variant:"headingMd",children:"Page not found"}),y.jsx(R,{paddingBlockStart:"200",children:y.jsxs(j,{children:['The page "',e,'" does not exist.']})})]})});return y.jsxs(gt,{i18n:Un,children:[i&&y.jsx(Fn,{active:e,shop:t}),y.jsx(vt,{children:y.jsxs(bt,{children:[y.jsx(In,{sectionTitle:u,lang:r,setLang:n,t:o,shop:t}),d()]})})]})}const Ie=new URLSearchParams(window.location.search),ie=Ie.get("host"),$=Ie.get("shop"),Fe=Ie.get("embedded")==="1";console.log("[MAIN] Public App - Host:",ie,"Shop:",$);console.log("[MAIN] Full URL:",window.location.href);function Vn(){const[e,r]=M.useState(!1),n=M.useMemo(()=>(console.log("[MAIN] Checking for API key..."),console.log("[MAIN] window.__SHOPIFY_API_KEY:",window.__SHOPIFY_API_KEY),console.log("[MAIN] import.meta.env.VITE_SHOPIFY_API_KEY:","2749a2f6d38ff5796ed256b5c9dc70a1"),window.__SHOPIFY_API_KEY?(console.log("[MAIN] Using injected API key:",window.__SHOPIFY_API_KEY),window.__SHOPIFY_API_KEY):(console.log("[MAIN] Using env API key:","2749a2f6d38ff5796ed256b5c9dc70a1"),"2749a2f6d38ff5796ed256b5c9dc70a1")),[]);return M.useEffect(()=>{setTimeout(()=>r(!0),100)},[]),!Fe||!ie||!$?(console.log("[MAIN] Not embedded or missing params"),y.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[y.jsx("h1",{children:"Error: App must be loaded from Shopify Admin"}),y.jsxs("p",{children:["Shop: ",$||"Missing"]}),y.jsxs("p",{children:["Host: ",ie||"Missing"]}),y.jsxs("p",{children:["Embedded: ",Fe?"Yes":"No"]}),y.jsx("a",{href:`https://admin.shopify.com/store/${$==null?void 0:$.replace(".myshopify.com","")}/apps`,children:"Go to Shopify Admin"})]})):n?(console.log("[MAIN] App config:",{apiKey:n?"SET":"MISSING",host:ie?"SET":"MISSING",shop:$?"SET":"MISSING"}),e?y.jsx($n,{}):y.jsx("div",{children:"Loading..."})):y.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[y.jsx("h1",{children:"Configuration Error"}),y.jsx("p",{children:"Shopify API key is not configured."}),y.jsx("p",{children:"Please contact support."})]})}Ge(document.getElementById("root")).render(y.jsx(Vn,{}));export{En as m,Sn as u};
