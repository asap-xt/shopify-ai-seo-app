import{j as m}from"./app-bridge-I2MtRnje-1761110297173.js";import{c as v,r as X}from"./react-vendor-tAaa2TlE-1761110297173.js";import{M as te,e as F,d as ne,T as w,I as we,a as K,B as Ae}from"./polaris-B1CGe-wS-1761110297173.js";import{u as xe}from"./index-DX5OiIq4-1761110297173.js";var Te={},je={},V={},Re={},le={},oe={},ye={},B={},ve={};Object.defineProperty(ve,"__esModule",{value:!0});function Ce(e,r){if(r==null||typeof e>"u"||!Object.prototype.isPrototypeOf.call(Object.getPrototypeOf(e),r)||r.constructor.name!=="Object"&&r.constructor.name!=="Array")return r;var t={};return Object.keys(r).forEach(function(i){var a=Object.prototype.hasOwnProperty.call(e,i);a&&typeof e[i]=="object"&&!Array.isArray(e[i])?t[i]=Ce(e[i],r[i]):t[i]=r[i]}),Object.keys(e).forEach(function(i){var a=Object.prototype.hasOwnProperty.call(r,i);a||(t[i]=e[i])}),Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}ve.default=Ce;var k={};Object.defineProperty(k,"__esModule",{value:!0});k.SEPARATOR=k.PREFIX=void 0;k.PREFIX="APP";k.SEPARATOR="::";var U={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ComponentType=e.Group=void 0,function(r){r.AuthCode="AuthCode",r.Button="Button",r.ButtonGroup="ButtonGroup",r.Cart="Cart",r.Client="Client",r.ContextualSaveBar="ContextualSaveBar",r.Error="Error",r.Features="Features",r.FeedbackModal="FeedbackModal",r.Fullscreen="Fullscreen",r.LeaveConfirmation="LeaveConfirmation",r.Link="Link",r.Loading="Loading",r.Menu="Menu",r.Modal="Modal",r.Navigation="Navigation",r.Performance="Performance",r.Pos="Pos",r.Print="Print",r.ResourcePicker="Resource_Picker",r.unstable_Picker="unstable_Picker",r.Scanner="Scanner",r.SessionToken="SessionToken",r.Share="Share",r.TitleBar="TitleBar",r.Toast="Toast",r.MarketingExternalActivityTopBar="MarketingExternalActivityTopBar",r.WebVitals="WebVitals"}(e.Group||(e.Group={})),function(r){r.Button="Button",r.ButtonGroup="ButtonGroup"}(e.ComponentType||(e.ComponentType={}))})(U);(function(e){var r=v&&v.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.updateActionFromPayload=e.isValidOptionalString=e.isValidOptionalNumber=e.forEachInEnum=e.getMergedProps=e.findMatchInEnum=e.getEventNameSpace=e.NonSnakeCaseGroup=e.actionWrapper=void 0;var t=r(ve),i=k,a=U;function n(l){return l}e.actionWrapper=n,e.NonSnakeCaseGroup=[a.Group.AuthCode,a.Group.Button,a.Group.ButtonGroup,a.Group.Cart,a.Group.Error,a.Group.Features,a.Group.Fullscreen,a.Group.Link,a.Group.Loading,a.Group.Menu,a.Group.Modal,a.Group.Navigation,a.Group.Pos,a.Group.Print,a.Group.ResourcePicker,a.Group.Scanner,a.Group.SessionToken,a.Group.Share,a.Group.TitleBar,a.Group.Toast,a.Group.unstable_Picker];function u(l){return l.replace(/([A-Z])/g,function(y,O,_){return(_===0?"":"_")+y[0].toLowerCase()})}function h(l){return e.NonSnakeCaseGroup.includes(l)?l.toUpperCase():u(l).toUpperCase()}function f(l,y,O){if(y.startsWith(""+i.PREFIX+i.SEPARATOR))return y;var _=h(l);if(O){var M=O.subgroups,T=O.type;M&&M.length>0&&(_+=_.length>0?i.SEPARATOR:"",M.forEach(function(L,b){_+=""+L.toUpperCase()+(b<M.length-1?i.SEPARATOR:"")})),T!==l&&T&&(_+=""+(_.length>0?i.SEPARATOR:"")+T.toUpperCase())}return _&&(_+=""+(_.length>0?i.SEPARATOR:"")+y.toUpperCase()),""+i.PREFIX+i.SEPARATOR+_}e.getEventNameSpace=f;function o(l,y){var O=Object.keys(l).find(function(_){return y===l[_]});return O?l[O]:void 0}e.findMatchInEnum=o;function c(l,y){var O=t.default(l,y);if(!O){var _=Object.assign(l,y);return _}return O}e.getMergedProps=c;function s(l,y){Object.keys(l).forEach(function(O){y(l[O])})}e.forEachInEnum=s;function g(l){return l==null||typeof l=="number"}e.isValidOptionalNumber=g;function p(l){return l==null||typeof l=="string"}e.isValidOptionalString=p;function d(l,y){var O=l.id;return O===y.id?(Object.assign(l,c(l,y)),!0):!1}e.updateActionFromPayload=d})(B);var D={},ue={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LifecycleHook=e.PermissionType=e.MessageType=void 0,function(r){r.GetState="getState",r.Dispatch="dispatch",r.Subscribe="subscribe",r.Unsubscribe="unsubscribe"}(e.MessageType||(e.MessageType={})),function(r){r.Dispatch="Dispatch",r.Subscribe="Subscribe"}(e.PermissionType||(e.PermissionType={})),function(r){r.UpdateAction="UpdateAction",r.DispatchAction="DispatchAction"}(e.LifecycleHook||(e.LifecycleHook={}))})(ue);var G={};Object.defineProperty(G,"__esModule",{value:!0});G.removeFromCollection=G.addAndRemoveFromCollection=void 0;function et(e,r,t){return e.push(r),function(){return Ne(e,r,t)}}G.addAndRemoveFromCollection=et;function Ne(e,r,t){var i=e.findIndex(function(a){return a===r});return i>=0?(e.splice(i,1),t&&t(r),!0):!1}G.removeFromCollection=Ne;var Y={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.permissionAction=e.isErrorEventName=e.throwError=e.invalidOriginAction=e.fromAction=e.AppBridgeError=e.AppActionType=e.Action=void 0;var r=U,t=B,i;(function(s){s.INVALID_ACTION="APP::ERROR::INVALID_ACTION",s.INVALID_ACTION_TYPE="APP::ERROR::INVALID_ACTION_TYPE",s.INVALID_PAYLOAD="APP::ERROR::INVALID_PAYLOAD",s.INVALID_OPTIONS="APP::ERROR::INVALID_OPTIONS",s.UNEXPECTED_ACTION="APP::ERROR::UNEXPECTED_ACTION",s.PERSISTENCE="APP::ERROR::PERSISTENCE",s.UNSUPPORTED_OPERATION="APP::ERROR::UNSUPPORTED_OPERATION",s.NETWORK="APP::ERROR::NETWORK",s.PERMISSION="APP::ERROR::PERMISSION",s.FAILED_AUTHENTICATION="APP::ERROR::FAILED_AUTHENTICATION",s.INVALID_ORIGIN="APP::ERROR::INVALID_ORIGIN"})(i=e.Action||(e.Action={})),function(s){s.INVALID_CONFIG="APP::ERROR::INVALID_CONFIG",s.MISSING_CONFIG="APP::APP_ERROR::MISSING_CONFIG",s.MISSING_APP_BRIDGE_MIDDLEWARE="APP::APP_ERROR::MISSING_APP_BRIDGE_MIDDLEWARE",s.WINDOW_UNDEFINED="APP::APP_ERROR::WINDOW_UNDEFINED",s.REDUX_REINSTANTIATED="APP::APP_ERROR::REDUX_REINSTANTIATED",s.MISSING_LOCAL_ORIGIN="APP::APP_ERROR::MISSING_LOCAL_ORIGIN",s.MISSING_HOST_PROVIDER="APP::APP_ERROR::MISSING_HOST_PROVIDER",s.MISSING_ROUTER_CONTEXT="APP::APP_ERROR::MISSING_ROUTER_CONTEXT",s.MISSING_HISTORY_BLOCK="APP::APP_ERROR::MISSING_HISTORY_BLOCK"}(e.AppActionType||(e.AppActionType={}));var a=function(){function s(g){this.name="AppBridgeError",this.message=g,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(this,this.constructor):this.stack=new Error(this.message).stack}return s}();e.AppBridgeError=a,a.prototype=Object.create(Error.prototype);function n(s,g,p){var d=s?g+": "+s:g,l=new a(d);return l.action=p,l.type=g,l}e.fromAction=n;function u(s){return t.actionWrapper({group:r.Group.Error,payload:{message:s,type:i.INVALID_ORIGIN},type:i.INVALID_ORIGIN})}e.invalidOriginAction=u;function h(){for(var s=[],g=0;g<arguments.length;g++)s[g]=arguments[g];var p=s[0],d,l;throw typeof s[1]=="string"?d=s[1]:(l=s[1],d=s[2]||""),n(d,p,l)}e.throwError=h;function f(s){var g=t.findMatchInEnum(i,s);return typeof g=="string"}e.isErrorEventName=f;function o(s,g,p){var d=g.payload;return t.actionWrapper({type:s,group:r.Group.Error,payload:{action:g,message:p,type:s,id:d&&d.id?d.id:void 0}})}function c(s,g){return o(i.PERMISSION,s,g||"Action is not permitted")}e.permissionAction=c})(Y);var $={};Object.defineProperty($,"__esModule",{value:!0});$.generateUuid=void 0;function W(e){return Array.from(e).map(function(r){return("00"+r.toString(16)).slice(-2)}).join("")}function z(e){if(typeof Uint8Array=="function"&&typeof window=="object"&&window.crypto){var r=new Uint8Array(e),t=window.crypto.getRandomValues(r);if(t)return t}return Array.from(new Array(e),function(){return Math.random()*255|0})}function De(){var e=64,r=z(1),t=z(2);return r[0]&=191,t[0]&=15|e,[W(z(4)),"-",W(z(2)),"-",W(t),"-",W(r),W(z(1)),"-",W(z(6))].join("")}$.generateUuid=De;$.default=De;var tt=v&&v.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(i[n]=a[n])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),re=v&&v.__assign||function(){return re=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},re.apply(this,arguments)},nt=v&&v.__spreadArray||function(e,r){for(var t=0,i=r.length,a=e.length;t<i;t++,a++)e[a]=r[t];return e},rt=v&&v.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(D,"__esModule",{value:!0});D.unsubscribeActions=D.ActionSetWithChildren=D.ActionSet=void 0;var it=ue,fe=G,Z=Y,at=U,ot=rt($),de=B,Be=function(){function e(r,t,i,a){var n=this;this.app=r,this.type=t,this.group=i,this.subgroups=[],this.subscriptions=[],r||Z.throwError(Z.Action.INVALID_ACTION,"Missing required `app`"),this.id=a||ot.default(),this.defaultGroup=i;var u=this.set;this.set=function(){for(var h,f=[],o=0;o<arguments.length;o++)f[o]=arguments[o];return n.app.hooks?(h=n.app.hooks).run.apply(h,nt([it.LifecycleHook.UpdateAction,u,n],f)):u.apply(n,f)}}return e.prototype.set=function(){},Object.defineProperty(e.prototype,"component",{get:function(){return{id:this.id,subgroups:this.subgroups,type:this.type}},enumerable:!1,configurable:!0}),e.prototype.updateSubscription=function(r,t,i){var a=r.eventType,n=r.callback,u=r.component,h;return h=this.subscriptions.findIndex(function(f){return f===r}),h>=0?this.subscriptions[h].unsubscribe():h=void 0,this.group=t,this.subgroups=i,Object.assign(u,{subgroups:this.subgroups}),this.subscribe(a,n,u,h)},e.prototype.error=function(r){var t=this,i=[];return de.forEachInEnum(Z.Action,function(a){i.push(t.subscriptions.length),t.subscribe(a,r)}),function(){var a=i.map(function(n){return t.subscriptions[n]});a.forEach(function(n){fe.removeFromCollection(t.subscriptions,n,function(u){u.unsubscribe()})})}},e.prototype.subscribe=function(r,t,i,a){var n=this,u=i||this.component,h=r.toUpperCase(),f=typeof a=="number"?t:t.bind(this),o;Z.isErrorEventName(r)?o=de.getEventNameSpace(at.Group.Error,r,re(re({},u),{type:""})):o=de.getEventNameSpace(this.group,r,u);var c=this.app.subscribe(o,f,i?i.id:this.id),s={eventType:h,unsubscribe:c,callback:f,component:u,updateSubscribe:function(g,p){return n.updateSubscription(s,g,p)}};return typeof a=="number"&&a>=0&&a<this.subscriptions.length?this.subscriptions[a]=s:this.subscriptions.push(s),c},e.prototype.unsubscribe=function(r){return r===void 0&&(r=!1),ge(this.subscriptions,this.defaultGroup,r),this},e}();D.ActionSet=Be;var ut=function(e){tt(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.children=[],t}return r.prototype.unsubscribe=function(t,i){return t===void 0&&(t=!0),i===void 0&&(i=!1),ge(this.subscriptions,this.defaultGroup,i),this.children.forEach(function(a){a instanceof r?a.unsubscribe(t,!t):a.unsubscribe(!t)}),this},r.prototype.getChild=function(t){var i=this.children.findIndex(function(a){return a.id===t});return i>=0?this.children[i]:void 0},r.prototype.getChildIndex=function(t){return this.children.findIndex(function(i){return i.id===t})},r.prototype.getChildSubscriptions=function(t,i){return this.subscriptions.filter(function(a){return a.component.id===t&&(!i||i===a.eventType)})},r.prototype.addChild=function(t,i,a){var n=this,u=t.subscriptions,h=this.getChild(t.id);return h||this.children.push(t),!u||i===t.group&&a===t.subgroups?this:(u.forEach(function(f){var o=f.updateSubscribe;o(i,a)}),Object.assign(t,{group:i,subgroups:a}),t instanceof r&&t.children.forEach(function(f){return n.addChild(f,i,a)}),this)},r.prototype.removeChild=function(t){var i=this;return fe.removeFromCollection(this.children,this.getChild(t),function(){var a=i.subscriptions.filter(function(n){return n.component.id===t});a.forEach(function(n){fe.removeFromCollection(i.subscriptions,n,function(u){u.unsubscribe()})})}),this},r.prototype.subscribeToChild=function(t,i,a){var n=this,u=a.bind(this);if(i instanceof Array)return i.forEach(function(c){return n.subscribeToChild(t,c,a)}),this;if(typeof i!="string")return this;var h=i.toUpperCase(),f=this.getChildSubscriptions(t.id,h);if(f.length>0)f.forEach(function(c){return c.updateSubscribe(n.group,t.subgroups)});else{var o={id:t.id,subgroups:t.subgroups,type:t.type};this.subscribe(h,u,o)}return this},r.prototype.getUpdatedChildActions=function(t,i){if(t.length===0){for(;i.length>0;){var a=i.pop();if(!a)break;this.removeChild(a.id)}return}for(var n=t.filter(function(f,o,c){return o===c.indexOf(f)}),u=n.map(function(f){return f.id}),h=i.filter(function(f){return u.indexOf(f.id)<0});h.length>0;){var a=h.pop();if(!a)break;this.removeChild(a.id)}return n},r}(Be);D.ActionSetWithChildren=ut;function ge(e,r,t){t===void 0&&(t=!1),e.forEach(function(i){if(t){var a=i.updateSubscribe;a(r,[])}else{var n=i.unsubscribe;n()}}),t||(e.length=0)}D.unsubscribeActions=ge;(function(e){var r=v&&v.__extends||function(){var c=function(s,g){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var l in d)Object.prototype.hasOwnProperty.call(d,l)&&(p[l]=d[l])},c(s,g)};return function(s,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");c(s,g);function p(){this.constructor=s}s.prototype=g===null?Object.create(g):(p.prototype=g.prototype,new p)}}(),t=v&&v.__assign||function(){return t=Object.assign||function(c){for(var s,g=1,p=arguments.length;g<p;g++){s=arguments[g];for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(c[d]=s[d])}return c},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Button=e.update=e.clickButton=e.Style=e.Icon=e.Action=void 0;var i=B,a=D,n=U,u;(function(c){c.CLICK="CLICK",c.UPDATE="UPDATE"})(u=e.Action||(e.Action={})),function(c){c.Print="print"}(e.Icon||(e.Icon={})),function(c){c.Danger="danger"}(e.Style||(e.Style={}));function h(c,s,g){var p=s.id,d=i.getEventNameSpace(c,u.CLICK,s),l={id:p,payload:g};return i.actionWrapper({type:d,group:c,payload:l})}e.clickButton=h;function f(c,s,g){var p=s.id,d=g.label,l=i.getEventNameSpace(c,u.UPDATE,s),y=t(t({},g),{id:p,label:d});return i.actionWrapper({type:l,group:c,payload:y})}e.update=f;var o=function(c){r(s,c);function s(g,p){var d=c.call(this,g,n.ComponentType.Button,n.Group.Button)||this;return d.disabled=!1,d.loading=!1,d.plain=!1,d.set(p,!1),d}return Object.defineProperty(s.prototype,"options",{get:function(){return{disabled:this.disabled,icon:this.icon,label:this.label,style:this.style,loading:this.loading,plain:this.plain}},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"payload",{get:function(){return t(t({},this.options),{id:this.id})},enumerable:!1,configurable:!0}),s.prototype.set=function(g,p){p===void 0&&(p=!0);var d=i.getMergedProps(this.options,g),l=d.label,y=d.disabled,O=d.icon,_=d.style,M=d.loading,T=d.plain;return this.label=l,this.disabled=!!y,this.icon=O,this.style=_,this.loading=!!M,this.plain=!!T,p&&this.dispatch(u.UPDATE),this},s.prototype.dispatch=function(g,p){switch(g){case u.CLICK:this.app.dispatch(h(this.group,this.component,p));break;case u.UPDATE:{var d=f(this.group,this.component,this.payload);this.app.dispatch(d);break}}return this},s}(a.ActionSet);e.Button=o})(ye);Object.defineProperty(oe,"__esModule",{value:!0});oe.getSingleButton=void 0;var ct=ye;function st(e,r,t,i){return e.addChild(r,e.group,t),e.subscribeToChild(r,ct.Action.UPDATE,i),r.payload}oe.getSingleButton=st;(function(e){var r=v&&v.__extends||function(){var b=function(P,A){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,E){S.__proto__=E}||function(S,E){for(var I in E)Object.prototype.hasOwnProperty.call(E,I)&&(S[I]=E[I])},b(P,A)};return function(P,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");b(P,A);function S(){this.constructor=P}P.prototype=A===null?Object.create(A):(S.prototype=A.prototype,new S)}}(),t=v&&v.__assign||function(){return t=Object.assign||function(b){for(var P,A=1,S=arguments.length;A<S;A++){P=arguments[A];for(var E in P)Object.prototype.hasOwnProperty.call(P,E)&&(b[E]=P[E])}return b},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.ModalIframe=e.ModalMessage=e.Modal=e.isMessageModal=e.isIframeModal=e.data=e.update=e.clickFooterButton=e.updateModalSize=e.closeModal=e.openModal=e.Size=e.Action=void 0;var i=oe,a=B,n=D,u=U,h=ye,f;(function(b){b.OPEN="APP::MODAL::OPEN",b.CLOSE="APP::MODAL::CLOSE",b.UPDATE="APP::MODAL::UPDATE",b.UPDATE_CONTENT="APP::MODAL::CONTENT::UPDATE",b.FOOTER_BUTTON_CLICK="APP::MODAL::FOOTER::BUTTON::CLICK",b.FOOTER_BUTTON_UPDATE="APP::MODAL::FOOTER::BUTTON::UPDATE",b.UPDATE_SIZE="APP::MODAL::UPDATE_SIZE",b.DATA="APP::MODAL::DATA"})(f=e.Action||(e.Action={}));var o;(function(b){b.Small="small",b.Medium="medium",b.Large="large",b.Full="full",b.Auto="auto"})(o=e.Size||(e.Size={}));var c={group:u.Group.Modal,subgroups:["Footer"],type:u.ComponentType.Button};function s(b){return a.actionWrapper({group:u.Group.Modal,payload:b,type:f.OPEN})}e.openModal=s;function g(b){return a.actionWrapper({group:u.Group.Modal,payload:b,type:f.CLOSE})}e.closeModal=g;function p(b){return a.actionWrapper({group:u.Group.Modal,payload:b,type:f.UPDATE_SIZE})}e.updateModalSize=p;function d(b,P){var A=t({id:b},c);return h.clickButton(u.Group.Modal,A,P)}e.clickFooterButton=d;function l(b){return a.actionWrapper({payload:b,group:u.Group.Modal,type:f.UPDATE})}e.update=l;function y(b){return a.actionWrapper({payload:b,group:u.Group.Modal,type:f.DATA})}e.data=y;function O(b){return typeof b.url=="string"||typeof b.path=="string"}e.isIframeModal=O;function _(b){return typeof b.message=="string"}e.isMessageModal=_;var M=function(b){r(P,b);function P(){var A=b!==null&&b.apply(this,arguments)||this;return A.size=o.Small,A}return Object.defineProperty(P.prototype,"footer",{get:function(){if(!(!this.footerPrimary&&!this.footerSecondary))return{buttons:{primary:this.footerPrimary,secondary:this.footerSecondary}}},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"footerOptions",{get:function(){if(!(!this.footerPrimaryOptions&&!this.footerSecondaryOptions))return{buttons:{primary:this.footerPrimaryOptions,secondary:this.footerSecondaryOptions}}},enumerable:!1,configurable:!0}),P.prototype.close=function(){this.app.dispatch(g({id:this.id}))},P.prototype.setFooterPrimaryButton=function(A,S){var E=this,I=c.subgroups;this.footerPrimaryOptions=this.getChildButton(A,this.footerPrimaryOptions),this.footerPrimary=this.footerPrimaryOptions?i.getSingleButton(this,this.footerPrimaryOptions,I,function(j){E.updatePrimaryFooterButton(j,S)}):void 0},P.prototype.setFooterSecondaryButtons=function(A,S){var E=this,I=c.subgroups,j=A||[],R=this.footerOptions&&this.footerOptions.buttons.secondary||[];this.footerSecondaryOptions=this.getUpdatedChildActions(j,R),this.footerSecondary=this.footerSecondaryOptions?this.footerSecondaryOptions.map(function(H){return i.getSingleButton(E,H,I,function(q){E.updateSecondaryFooterButton(q,S)})}):void 0},P.prototype.getChildButton=function(A,S){var E=A?[A]:[],I=S?[S]:[],j=this.getUpdatedChildActions(E,I);return j?j[0]:void 0},P.prototype.updatePrimaryFooterButton=function(A,S){!this.footer||!this.footer.buttons.primary||a.updateActionFromPayload(this.footer.buttons.primary,A)&&S()},P.prototype.updateSecondaryFooterButton=function(A,S){if(!(!this.footer||!this.footer.buttons||!this.footer.buttons.secondary)){for(var E,I=0,j=this.footer.buttons.secondary;I<j.length;I++){var R=j[I];if(E=a.updateActionFromPayload(R,A),E)break}E&&S()}},P}(n.ActionSetWithChildren);e.Modal=M;var T=function(b){r(P,b);function P(A,S){var E=b.call(this,A,u.Group.Modal,u.Group.Modal)||this;return E.set(S,!1),E}return Object.defineProperty(P.prototype,"payload",{get:function(){return t(t({},this.options),{footer:this.footer,id:this.id})},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"options",{get:function(){return{footer:this.footerOptions,message:this.message,size:this.size,title:this.title}},enumerable:!1,configurable:!0}),P.prototype.set=function(A,S){var E=this;S===void 0&&(S=!0);var I=a.getMergedProps(this.options,A),j=I.title,R=I.footer,H=I.message,q=I.size;return this.title=j,this.message=H,this.size=q,this.setFooterPrimaryButton(R?R.buttons.primary:void 0,function(){E.dispatch(f.UPDATE)}),this.setFooterSecondaryButtons(R?R.buttons.secondary:void 0,function(){E.dispatch(f.UPDATE)}),S&&this.dispatch(f.UPDATE),this},P.prototype.dispatch=function(A){switch(A){case f.OPEN:this.app.dispatch(s(this.payload));break;case f.CLOSE:this.close();break;case f.UPDATE:this.app.dispatch(l(this.payload));break}return this},P}(M);e.ModalMessage=T;var L=function(b){r(P,b);function P(A,S){var E=b.call(this,A,u.Group.Modal,u.Group.Modal)||this;return E.set(S,!1),E}return Object.defineProperty(P.prototype,"payload",{get:function(){return t(t({},this.options),{footer:this.footer,id:this.id})},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"options",{get:function(){return{footer:this.footerOptions,path:this.path,size:this.size,title:this.title,url:this.url,loading:this.loading}},enumerable:!1,configurable:!0}),P.prototype.set=function(A,S){var E=this;S===void 0&&(S=!0);var I=a.getMergedProps(this.options,A),j=I.title,R=I.footer,H=I.path,q=I.url,Je=I.size,Ze=I.loading;return this.title=j,this.url=q,this.path=H,this.size=Je,this.loading=Ze,this.setFooterPrimaryButton(R?R.buttons.primary:void 0,function(){E.dispatch(f.UPDATE)}),this.setFooterSecondaryButtons(R?R.buttons.secondary:void 0,function(){E.dispatch(f.UPDATE)}),S&&this.dispatch(f.UPDATE),this},P.prototype.dispatch=function(A,S){switch(A){case f.OPEN:this.app.dispatch(s(this.payload));break;case f.CLOSE:this.close();break;case f.UPDATE:this.app.dispatch(l(this.payload));break;case f.DATA:this.app.dispatch(y(S||{}));break}return this},P}(M);e.ModalIframe=L})(le);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.create=e.Modal=e.isMessageModal=e.data=e.update=e.clickFooterButton=e.updateModalSize=e.closeModal=e.openModal=e.Size=e.Action=e.isIframeModal=e.ModalMessage=e.ModalIframe=void 0;var r=le;Object.defineProperty(e,"ModalIframe",{enumerable:!0,get:function(){return r.ModalIframe}}),Object.defineProperty(e,"ModalMessage",{enumerable:!0,get:function(){return r.ModalMessage}}),Object.defineProperty(e,"isIframeModal",{enumerable:!0,get:function(){return r.isIframeModal}});var t=le;Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return t.Action}}),Object.defineProperty(e,"Size",{enumerable:!0,get:function(){return t.Size}}),Object.defineProperty(e,"openModal",{enumerable:!0,get:function(){return t.openModal}}),Object.defineProperty(e,"closeModal",{enumerable:!0,get:function(){return t.closeModal}}),Object.defineProperty(e,"updateModalSize",{enumerable:!0,get:function(){return t.updateModalSize}}),Object.defineProperty(e,"clickFooterButton",{enumerable:!0,get:function(){return t.clickFooterButton}}),Object.defineProperty(e,"update",{enumerable:!0,get:function(){return t.update}}),Object.defineProperty(e,"data",{enumerable:!0,get:function(){return t.data}}),Object.defineProperty(e,"isMessageModal",{enumerable:!0,get:function(){return t.isMessageModal}}),Object.defineProperty(e,"Modal",{enumerable:!0,get:function(){return t.Modal}});var i=function(a,n){return r.isIframeModal(n)?new r.ModalIframe(a,n):new r.ModalMessage(a,n)};e.create=i})(Re);var Ue={},Le={},N={};Object.defineProperty(N,"__esModule",{value:!0});N.isPermitted=N.getPermissionKey=N.isPerformanceOrWebVitalsAction=N.isAppMessage=N.isAppBridgeAction=void 0;var dt=ue,ee=k,lt=B;function ft(e){return e instanceof Object&&Object.prototype.hasOwnProperty.call(e,"type")&&e.type.toString().startsWith(ee.PREFIX)}N.isAppBridgeAction=ft;function pt(e){if(typeof e!="object"||!e.data||typeof e.data!="object")return!1;var r=e.data;return Object.prototype.hasOwnProperty.call(r,"type")&&lt.findMatchInEnum(dt.MessageType,r.type)!==void 0}N.isAppMessage=pt;function ht(e){var r=e.type;return r.match(/^APP::(PERFORMANCE|WEB_VITALS)::/)}N.isPerformanceOrWebVitalsAction=ht;function Fe(e){return e.replace(new RegExp("^"+ee.PREFIX+ee.SEPARATOR+"\\w+"+ee.SEPARATOR),"")}N.getPermissionKey=Fe;function yt(e,r,t){var i=r.group,a=r.type;if(!i||!Object.prototype.hasOwnProperty.call(e,i))return!1;var n=e[i];if(!n)return!1;var u=Fe(a);return n[u]?n[u][t]===!0:!1}N.isPermitted=yt;var ie={};(function(e){var r,t;Object.defineProperty(e,"__esModule",{value:!0}),e.isUnframed=e.isClient=e.isServer=void 0,e.isServer=typeof window>"u",e.isClient=!e.isServer,e.isUnframed=e.isClient&&((t=(r=window.navigator)===null||r===void 0?void 0:r.userAgent)===null||t===void 0?void 0:t.indexOf("Unframed"))>0})(ie);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createTransportListener=e.fromWindow=e.fromFrame=e.Context=void 0;var r=Y,t=N,i=ue,a=G,n=ie;(function(c){c.Modal="Modal",c.Main="Main"})(e.Context||(e.Context={}));function u(c,s,g){var p=[],d=c.host,l=c.window;if(!d)throw r.fromAction("App frame is undefined",r.AppActionType.WINDOW_UNDEFINED);return n.isUnframed&&window.MobileWebView&&Object.assign(window.MobileWebView,{postMessageToIframe:function(y,O){l==null||l.postMessage(y,O),o(y)&&d.postMessage(JSON.stringify(y.payload),location.origin)},updateIframeUrl:function(y){var O=window.location,_=(c.window||{}).location;try{var M=new URL(y).origin;M===s&&_?_.replace(y):O.href=y}catch{}}}),d.addEventListener("message",function(y){if(!(y.source===d||!t.isAppMessage(y))){if(y.origin!==s){var O="Message origin '"+y.origin+"' does not match app origin '"+s+"'.",_=r.invalidOriginAction(O),M={type:"dispatch",payload:_};l==null||l.postMessage(M,y.origin);return}if(n.isUnframed&&window.MobileWebView){var _=JSON.stringify({id:"unframed://fromClient",origin:s,data:y.data});window.MobileWebView.postMessage(_);return}for(var T=0,L=p;T<L.length;T++){var b=L[T];b(y)}}}),{context:g,localOrigin:s,frameWindow:l,hostFrame:d,dispatch:function(y){l==null||l.postMessage(y,s)},subscribe:function(y){return a.addAndRemoveFromCollection(p,y)}}}e.fromFrame=u;function h(c,s){var g=[];return typeof window!==void 0&&window.addEventListener("message",function(p){if(!(window===c&&!n.isUnframed||p.source!==c||!(t.isAppBridgeAction(p.data.payload)||t.isAppMessage(p))))for(var d=0,l=g;d<l.length;d++){var y=l[d];y(p)}}),{localOrigin:s,hostFrame:c,dispatch:function(p){var d;if(!((d=p.source)===null||d===void 0)&&d.host){if(n.isUnframed&&window&&window.MobileWebView){var l=JSON.stringify({id:"unframed://fromClient",origin:s,data:p});window.MobileWebView.postMessage(l);return}var y=new URL("https://"+p.source.host).origin;c.postMessage(p,y)}},subscribe:function(p){return a.addAndRemoveFromCollection(g,p)}}}e.fromWindow=h;function f(){var c=[],s={};function g(p){function d(){if(arguments.length<2)return a.addAndRemoveFromCollection(c,{callback:arguments[0]});var l=Array.from(arguments),y=l[0],O=l[1],_=l[2],M={callback:O,id:_},T={type:y,id:_};return Object.prototype.hasOwnProperty.call(s,y)||(s[y]=[]),p&&p(i.MessageType.Subscribe,T),a.addAndRemoveFromCollection(s[y],M,function(){p&&p(i.MessageType.Unsubscribe,T)})}return d}return{createSubscribeHandler:g,handleMessage:function(p){c.forEach(function(d){return d.callback(p)})},handleActionDispatch:function(p){var d=p.type,l=p.payload,y=!1;if(Object.prototype.hasOwnProperty.call(s,d))for(var O=0,_=s[d];O<_.length;O++){var M=_[O],T=M.id,L=M.callback,b=l&&l.id===T;(b||!T)&&(L(l),y=!0)}return y}}}e.createTransportListener=f;function o(c){return c!==null&&typeof c=="object"&&!Array.isArray(c)&&c.type==="dispatch"&&typeof c.payload=="object"}})(Le);(function(e){var r=v&&v.__createBinding||(Object.create?function(i,a,n,u){u===void 0&&(u=n),Object.defineProperty(i,u,{enumerable:!0,get:function(){return a[n]}})}:function(i,a,n,u){u===void 0&&(u=n),i[u]=a[n]}),t=v&&v.__exportStar||function(i,a){for(var n in i)n!=="default"&&!Object.prototype.hasOwnProperty.call(a,n)&&r(a,i,n)};Object.defineProperty(e,"__esModule",{value:!0}),t(Le,e)})(Ue);var C={},ke={};(function(e){var r={};Object.defineProperty(e,"__esModule",{value:!0}),e.isDevelopmentClient=e.isProduction=e.isDevelopment=e.isUnframed=e.isServer=e.isClient=void 0;var t=ie,i=ie;Object.defineProperty(e,"isClient",{enumerable:!0,get:function(){return i.isClient}}),Object.defineProperty(e,"isServer",{enumerable:!0,get:function(){return i.isServer}}),Object.defineProperty(e,"isUnframed",{enumerable:!0,get:function(){return i.isUnframed}}),e.isDevelopment=typeof process<"u"&&r&&!1,e.isProduction=!e.isDevelopment,e.isDevelopmentClient=e.isDevelopment&&t.isClient})(ke);Object.defineProperty(C,"__esModule",{value:!0});C.isShopifyPing=C.isShopifyPOS=C.isShopifyMobile=C.isShopifyEmbedded=C.isMobile=void 0;var Oe=ke;function vt(){return Ge()||We()||ze()}C.isMobile=vt;function gt(){return Oe.isClient&&window.top!==window.self||Oe.isUnframed}C.isShopifyEmbedded=gt;function Ge(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify Mobile")>=0}C.isShopifyMobile=Ge;function We(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify POS")>=0}C.isShopifyPOS=We;function ze(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify Ping")>=0}C.isShopifyPing=ze;var bt=v&&v.__awaiter||function(e,r,t,i){function a(n){return n instanceof t?n:new t(function(u){u(n)})}return new(t||(t=Promise))(function(n,u){function h(c){try{o(i.next(c))}catch(s){u(s)}}function f(c){try{o(i.throw(c))}catch(s){u(s)}}function o(c){c.done?n(c.value):a(c.value).then(h,f)}o((i=i.apply(e,r||[])).next())})},mt=v&&v.__generator||function(e,r){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,a,n,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(o){return function(c){return f([o,c])}}function f(o){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,a&&(n=o[0]&2?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,a=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){t.label=o[1];break}if(o[0]===6&&t.label<n[1]){t.label=n[1],n=o;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(o);break}n[2]&&t.ops.pop(),t.trys.pop();continue}o=r.call(e,t)}catch(c){o=[6,c],a=0}finally{i=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(V,"__esModule",{value:!0});V.createMutationObserver=V.setupModalAutoSizing=void 0;var _t=Re,At=Ue,Ot=C,pe="app-bridge-utils-modal-auto-size",x=Pt();function Pt(){if(typeof document>"u")return null;var e=document.createElement("style");return e.type="text/css",e.innerHTML="."+pe+" { overflow: hidden; height: auto; min-height: auto; }",e}function St(e,r){if(!x)return function(){};var t=document.getElementsByTagName("head")[0],i=document.body.classList;t.appendChild(x),i.add(pe);var a=Ve(e,r);return function(){i.remove(pe),t.contains(x)&&t.removeChild(x),a&&a.disconnect()}}function Et(e){return bt(this,void 0,void 0,function(){function r(){i&&(i(),i=void 0)}function t(a){var n=a.context,u=a.modal.id;return Ot.isMobile()||n!==At.Context.Modal?(r(),r):(i||(i=St(e,u)),r)}var i;return mt(this,function(a){switch(a.label){case 0:return[4,e.getState().then(t)];case 1:return a.sent(),[2,r]}})})}V.setupModalAutoSizing=Et;function Ve(e,r){if(typeof document>"u")return;var t=-1,i,a={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},n=new MutationObserver(u);n.observe(document,a),h();function u(){i&&window.clearTimeout(i),i=window.setTimeout(h,16)}function h(){var f=document.body.scrollHeight;f!==t&&(t=f,e.dispatch(_t.updateModalSize({id:r,height:String(f)})))}return n}V.createMutationObserver=Ve;var $e={},Q={},He={},qe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.respond=e.request=e.Action=void 0;var r=B,t=U,i;(function(u){u.REQUEST="APP::SESSION_TOKEN::REQUEST",u.RESPOND="APP::SESSION_TOKEN::RESPOND"})(i=e.Action||(e.Action={}));function a(){return r.actionWrapper({group:t.Group.SessionToken,type:i.REQUEST})}e.request=a;function n(u){return r.actionWrapper({payload:u,group:t.Group.SessionToken,type:i.RESPOND})}e.respond=n})(qe);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.respond=e.request=e.Action=void 0;var r=qe;Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return r.Action}}),Object.defineProperty(e,"request",{enumerable:!0,get:function(){return r.request}}),Object.defineProperty(e,"respond",{enumerable:!0,get:function(){return r.respond}})})(He);var be={},me={};const Mt="@shopify/app-bridge",It="3.7.10",wt={name:Mt,version:It};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getPackageName=e.getVersion=e.getMergedProps=e.updateActionFromPayload=e.isValidOptionalString=e.isValidOptionalNumber=e.NonSnakeCaseGroup=e.getEventNameSpace=e.forEachInEnum=e.findMatchInEnum=e.actionWrapper=void 0;var r=B;Object.defineProperty(e,"actionWrapper",{enumerable:!0,get:function(){return r.actionWrapper}}),Object.defineProperty(e,"findMatchInEnum",{enumerable:!0,get:function(){return r.findMatchInEnum}}),Object.defineProperty(e,"forEachInEnum",{enumerable:!0,get:function(){return r.forEachInEnum}}),Object.defineProperty(e,"getEventNameSpace",{enumerable:!0,get:function(){return r.getEventNameSpace}}),Object.defineProperty(e,"NonSnakeCaseGroup",{enumerable:!0,get:function(){return r.NonSnakeCaseGroup}}),Object.defineProperty(e,"isValidOptionalNumber",{enumerable:!0,get:function(){return r.isValidOptionalNumber}}),Object.defineProperty(e,"isValidOptionalString",{enumerable:!0,get:function(){return r.isValidOptionalString}}),Object.defineProperty(e,"updateActionFromPayload",{enumerable:!0,get:function(){return r.updateActionFromPayload}}),Object.defineProperty(e,"getMergedProps",{enumerable:!0,get:function(){return r.getMergedProps}});var t=wt;function i(){return t.version}e.getVersion=i;function a(){return t.name}e.getPackageName=a})(me);var _e={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ComponentType=e.Group=void 0;var r=U;Object.defineProperty(e,"Group",{enumerable:!0,get:function(){return r.Group}}),Object.defineProperty(e,"ComponentType",{enumerable:!0,get:function(){return r.ComponentType}})})(_e);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.networkAction=e.persistenceAction=e.unsupportedOperationAction=e.unexpectedAction=e.invalidAction=e.invalidActionType=e.invalidPayload=e.Message=e.fromAction=e.Action=e.permissionAction=e.isErrorEventName=e.throwError=e.invalidOriginAction=e.AppBridgeError=e.AppActionType=void 0;var r=Y;Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return r.Action}}),Object.defineProperty(e,"fromAction",{enumerable:!0,get:function(){return r.fromAction}});var t=me,i=_e,a=Y;Object.defineProperty(e,"AppActionType",{enumerable:!0,get:function(){return a.AppActionType}}),Object.defineProperty(e,"AppBridgeError",{enumerable:!0,get:function(){return a.AppBridgeError}}),Object.defineProperty(e,"invalidOriginAction",{enumerable:!0,get:function(){return a.invalidOriginAction}}),Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return a.throwError}}),Object.defineProperty(e,"isErrorEventName",{enumerable:!0,get:function(){return a.isErrorEventName}}),Object.defineProperty(e,"permissionAction",{enumerable:!0,get:function(){return a.permissionAction}});function n(p,d,l){var y=d.payload;return t.actionWrapper({type:p,group:i.Group.Error,payload:{action:d,message:l,type:p,id:y&&y.id?y.id:void 0}})}(function(p){p.MISSING_PAYLOAD="Missing payload",p.INVALID_PAYLOAD_ID="Id in payload is missing or invalid"})(e.Message||(e.Message={}));function u(p,d){return n(r.Action.INVALID_PAYLOAD,p,d||"The action's payload is missing required properties or has invalid properties")}e.invalidPayload=u;function h(p,d){return t.actionWrapper({group:i.Group.Error,payload:{action:p,message:d||"The action type is invalid or unsupported",type:r.Action.INVALID_ACTION_TYPE},type:r.Action.INVALID_ACTION_TYPE})}e.invalidActionType=h;function f(p,d){return t.actionWrapper({group:i.Group.Error,payload:{action:p,message:d||"The action's has missing/invalid values for `group`, `type` or `version`",type:r.Action.INVALID_ACTION},type:r.Action.INVALID_ACTION})}e.invalidAction=f;function o(p,d){return t.actionWrapper({group:i.Group.Error,payload:{action:p,message:d||"Action cannot be called at this time",type:r.Action.UNEXPECTED_ACTION},type:r.Action.UNEXPECTED_ACTION})}e.unexpectedAction=o;function c(p,d){return n(r.Action.UNSUPPORTED_OPERATION,p,d||"The action type is unsupported")}e.unsupportedOperationAction=c;function s(p,d){return n(r.Action.PERSISTENCE,p,d||"Action cannot be persisted on server")}e.persistenceAction=s;function g(p,d){return n(r.Action.NETWORK,p,d||"Network error")}e.networkAction=g})(be);var Tt=v&&v.__createBinding||(Object.create?function(e,r,t,i){i===void 0&&(i=t),Object.defineProperty(e,i,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,i){i===void 0&&(i=t),e[i]=r[t]}),jt=v&&v.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Rt=v&&v.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Tt(r,e,t);return jt(r,e),r},Ct=v&&v.__awaiter||function(e,r,t,i){function a(n){return n instanceof t?n:new t(function(u){u(n)})}return new(t||(t=Promise))(function(n,u){function h(c){try{o(i.next(c))}catch(s){u(s)}}function f(c){try{o(i.throw(c))}catch(s){u(s)}}function o(c){c.done?n(c.value):a(c.value).then(h,f)}o((i=i.apply(e,r||[])).next())})},Nt=v&&v.__generator||function(e,r){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,a,n,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(o){return function(c){return f([o,c])}}function f(o){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,a&&(n=o[0]&2?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,a=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){t.label=o[1];break}if(o[0]===6&&t.label<n[1]){t.label=n[1],n=o;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(o);break}n[2]&&t.ops.pop(),t.trys.pop();continue}o=r.call(e,t)}catch(c){o=[6,c],a=0}finally{i=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(Q,"__esModule",{value:!0});Q.getSessionToken=void 0;var Pe=Rt(He),Se=be;function Dt(e){return Ct(this,void 0,void 0,function(){return Nt(this,function(r){return[2,new Promise(function(t,i){var a=e.subscribe(Pe.Action.RESPOND,function(n){var u=n.sessionToken;u?t(u):i(Se.fromAction("Failed to retrieve a session token",Se.Action.FAILED_AUTHENTICATION)),a()});e.dispatch(Pe.request())})]})})}Q.getSessionToken=Dt;var ce={},ae=v&&v.__assign||function(){return ae=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ae.apply(this,arguments)},Bt=v&&v.__awaiter||function(e,r,t,i){function a(n){return n instanceof t?n:new t(function(u){u(n)})}return new(t||(t=Promise))(function(n,u){function h(c){try{o(i.next(c))}catch(s){u(s)}}function f(c){try{o(i.throw(c))}catch(s){u(s)}}function o(c){c.done?n(c.value):a(c.value).then(h,f)}o((i=i.apply(e,r||[])).next())})},Ut=v&&v.__generator||function(e,r){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,a,n,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(o){return function(c){return f([o,c])}}function f(o){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,a&&(n=o[0]&2?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,a=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){t.label=o[1];break}if(o[0]===6&&t.label<n[1]){t.label=n[1],n=o;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(o);break}n[2]&&t.ops.pop(),t.trys.pop();continue}o=r.call(e,t)}catch(c){o=[6,c],a=0}finally{i=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(ce,"__esModule",{value:!0});ce.authenticatedFetch=void 0;var Lt=Q;function Ft(e,r){var t=this;return r===void 0&&(r=fetch),function(i,a){return a===void 0&&(a={}),Bt(t,void 0,void 0,function(){var n,u,h;return Ut(this,function(f){switch(f.label){case 0:return[4,Lt.getSessionToken(e)];case 1:return n=f.sent(),u=new Headers(a.headers),u.append("Authorization","Bearer "+n),u.append("X-Requested-With","XMLHttpRequest"),h={},u.forEach(function(o,c){h[c]=o}),[2,r(i,ae(ae({},a),{headers:h}))]}})})}}ce.authenticatedFetch=Ft;(function(e){var r=v&&v.__createBinding||(Object.create?function(i,a,n,u){u===void 0&&(u=n),Object.defineProperty(i,u,{enumerable:!0,get:function(){return a[n]}})}:function(i,a,n,u){u===void 0&&(u=n),i[u]=a[n]}),t=v&&v.__exportStar||function(i,a){for(var n in i)n!=="default"&&!Object.prototype.hasOwnProperty.call(a,n)&&r(a,i,n)};Object.defineProperty(e,"__esModule",{value:!0}),t(Q,e),t(ce,e)})($e);var Ke={},J={},Xe={},he={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.respond=e.Action=void 0;var r=B,t=U,i;(function(n){n.REQUEST="APP::AUTH_CODE::REQUEST",n.RESPOND="APP::AUTH_CODE::RESPOND"})(i=e.Action||(e.Action={}));function a(n){return r.actionWrapper({payload:n,group:t.Group.AuthCode,type:i.RESPOND})}e.respond=a})(he);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.request=e.Action=e.respond=void 0;var r=he;Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return r.Action}});var t=me,i=_e,a=he;Object.defineProperty(e,"respond",{enumerable:!0,get:function(){return a.respond}});function n(u){return t.actionWrapper({group:i.Group.AuthCode,type:r.Action.REQUEST,payload:{id:u}})}e.request=n})(Xe);var Ye={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.generateUuid=void 0;var r=$;Object.defineProperty(e,"generateUuid",{enumerable:!0,get:function(){return r.generateUuid}}),e.default=r.generateUuid})(Ye);var kt=v&&v.__createBinding||(Object.create?function(e,r,t,i){i===void 0&&(i=t),Object.defineProperty(e,i,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,i){i===void 0&&(i=t),e[i]=r[t]}),Gt=v&&v.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Wt=v&&v.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&kt(r,e,t);return Gt(r,e),r},zt=v&&v.__awaiter||function(e,r,t,i){function a(n){return n instanceof t?n:new t(function(u){u(n)})}return new(t||(t=Promise))(function(n,u){function h(c){try{o(i.next(c))}catch(s){u(s)}}function f(c){try{o(i.throw(c))}catch(s){u(s)}}function o(c){c.done?n(c.value):a(c.value).then(h,f)}o((i=i.apply(e,r||[])).next())})},Vt=v&&v.__generator||function(e,r){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,a,n,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(o){return function(c){return f([o,c])}}function f(o){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,a&&(n=o[0]&2?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,a=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){t.label=o[1];break}if(o[0]===6&&t.label<n[1]){t.label=n[1],n=o;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(o);break}n[2]&&t.ops.pop(),t.trys.pop();continue}o=r.call(e,t)}catch(c){o=[6,c],a=0}finally{i=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},$t=v&&v.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(J,"__esModule",{value:!0});J.getAuthorizationCodePayload=void 0;var Ee=Wt(Xe),Me=be,Ht=$t(Ye);function qt(e){return zt(this,void 0,void 0,function(){return Vt(this,function(r){return[2,new Promise(function(t,i){var a=Ht.default(),n=e.subscribe(Ee.Action.RESPOND,function(u){switch(u==null?void 0:u.status){case"needsExchange":t(u);break;default:i(Me.fromAction("Failed to retrieve an authorization code",Me.Action.FAILED_AUTHENTICATION))}n()},a);e.dispatch(Ee.request(a))})]})})}J.getAuthorizationCodePayload=qt;var se={},Kt=v&&v.__awaiter||function(e,r,t,i){function a(n){return n instanceof t?n:new t(function(u){u(n)})}return new(t||(t=Promise))(function(n,u){function h(c){try{o(i.next(c))}catch(s){u(s)}}function f(c){try{o(i.throw(c))}catch(s){u(s)}}function o(c){c.done?n(c.value):a(c.value).then(h,f)}o((i=i.apply(e,r||[])).next())})},Xt=v&&v.__generator||function(e,r){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,a,n,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(o){return function(c){return f([o,c])}}function f(o){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,a&&(n=o[0]&2?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,a=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){t.label=o[1];break}if(o[0]===6&&t.label<n[1]){t.label=n[1],n=o;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(o);break}n[2]&&t.ops.pop(),t.trys.pop();continue}o=r.call(e,t)}catch(c){o=[6,c],a=0}finally{i=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(se,"__esModule",{value:!0});se.userAuthorizedFetch=void 0;var Yt=J,Qt="auth/shopify/callback";function Jt(e){var r=e.headers.get("X-Shopify-API-Request-Failure-Unauthorized");return r?r.toLowerCase()==="true":!1}function Zt(e){var r=this,t=e.app,i=e.callbackUri,a=i===void 0?Qt:i,n=e.isAuthorizationCodeRequired,u=n===void 0?Jt:n,h=e.fetchOperation;return function(f,o){return Kt(r,void 0,void 0,function(){var c,s,g,p,d,l,y,O;return Xt(this,function(_){switch(_.label){case 0:return[4,h(f,o)];case 1:return c=_.sent(),u(c)?[4,Yt.getAuthorizationCodePayload(t)]:[2,c];case 2:return s=_.sent(),g=s.code,p=s.hmac,d=s.shop,l=s.timestamp,y=encodeURI("https://"+window.location.hostname+"/"+a+"?code="+g+"&hmac="+p+"&shop="+d+"&timestamp="+l),[4,h(y,{})];case 3:if(O=_.sent(),!O.ok)throw new Error("Failed to authorize request.");return[2,h(f,o)]}})})}}se.userAuthorizedFetch=Zt;(function(e){var r=v&&v.__createBinding||(Object.create?function(i,a,n,u){u===void 0&&(u=n),Object.defineProperty(i,u,{enumerable:!0,get:function(){return a[n]}})}:function(i,a,n,u){u===void 0&&(u=n),i[u]=a[n]}),t=v&&v.__exportStar||function(i,a){for(var n in i)n!=="default"&&!Object.prototype.hasOwnProperty.call(a,n)&&r(a,i,n)};Object.defineProperty(e,"__esModule",{value:!0}),t(J,e),t(se,e)})(Ke);(function(e){var r=v&&v.__createBinding||(Object.create?function(i,a,n,u){u===void 0&&(u=n),Object.defineProperty(i,u,{enumerable:!0,get:function(){return a[n]}})}:function(i,a,n,u){u===void 0&&(u=n),i[u]=a[n]}),t=v&&v.__exportStar||function(i,a){for(var n in i)n!=="default"&&!Object.prototype.hasOwnProperty.call(a,n)&&r(a,i,n)};Object.defineProperty(e,"__esModule",{value:!0}),t(V,e),t(C,e),t($e,e),t(Ke,e)})(je);(function(e){var r=v&&v.__createBinding||(Object.create?function(i,a,n,u){u===void 0&&(u=n),Object.defineProperty(i,u,{enumerable:!0,get:function(){return a[n]}})}:function(i,a,n,u){u===void 0&&(u=n),i[u]=a[n]}),t=v&&v.__exportStar||function(i,a){for(var n in i)n!=="default"&&!Object.prototype.hasOwnProperty.call(a,n)&&r(a,i,n)};Object.defineProperty(e,"__esModule",{value:!0}),t(je,e)})(Te);const Ie=window.__SHOPIFY_APP_BRIDGE__;function Qe(){const e=new URLSearchParams(window.location.search),r=e.get("shop")||void 0,t=e.get("id_token")||void 0;return async function(a,{method:n="GET",params:u,body:h,headers:f}={}){const o=new URL(a,window.location.origin),c=new URLSearchParams(u||{}),s=/\/shop\/[^/?]+/.test(o.pathname),g=o.searchParams.has("shop")||c.has("shop");!s&&!g&&r&&c.set("shop",r),[...c.keys()].length&&(o.search=(o.search?o.search+"&":"?")+c.toString());const p={...f};if(t&&(p.Authorization=`Bearer ${t}`),n!=="GET"&&!p["Content-Type"]&&(p["Content-Type"]="application/json"),Ie&&!t)try{const y=await Te.getSessionToken(Ie);p.Authorization=`Bearer ${y}`}catch(y){console.warn("[API] Failed to get session token:",y)}const d=await fetch(o.toString(),{method:n,headers:p,body:n!=="GET"&&h?JSON.stringify(h):void 0});if(!d.ok){let y;if((d.headers.get("content-type")||"").includes("application/json"))try{y=await d.json()}catch{y={error:await d.text().catch(()=>d.statusText)}}else y={error:await d.text().catch(()=>d.statusText)};if(d.status===402&&y){const M=new Error(y.error||y.message||"Payment Required");throw M.status=402,Object.assign(M,y),M}const _=new Error(y.error||y.message||d.statusText);throw _.status=d.status,_}return(d.headers.get("content-type")||"").includes("application/json")?d.json():d.text()}}async function xt(e,r={}){return Qe()(e,r)}async function en(e,r,t={}){return Qe()(e,{method:"POST",body:r,...t})}const tn=(e,r="")=>{try{return new URLSearchParams(window.location.search).get(e)||r}catch{return r}};function nn(){const e=tn("shop","");return{api:X.useMemo(()=>async(t,i={})=>{const a=new URL(t,window.location.origin);return!a.searchParams.has("shop")&&e&&a.searchParams.set("shop",e),i.method==="POST"||i.body?en(a.pathname+a.search,i.body||{},i):xt(a.pathname+a.search,i)},[e]),shop:e}}function cn({open:e,onClose:r,featureName:t="AI Enhancement",currentPlan:i="starter",errorMessage:a=null,minimumPlanRequired:n=null,features:u=null}){const h=()=>{r();const c=new URLSearchParams(window.location.search),s=c.toString()?`?${c.toString()}`:"";window.location.href=`/billing${s}`},o=u||["Collections optimization (Professional+)","AI Enhancement features with pay-per-use tokens","Advanced AI features","Growth Extra & Enterprise include monthly tokens"];return m.jsx(te,{open:e,onClose:r,title:"Upgrade Required",primaryAction:{content:"Upgrade Plan",onAction:h},secondaryActions:[{content:"Cancel",onAction:r}],children:m.jsx(te.Section,{children:m.jsxs(F,{gap:"400",children:[m.jsx(ne,{tone:"warning",children:m.jsx(w,{variant:"bodyMd",fontWeight:"semibold",children:a||`${t} requires a higher plan`})}),m.jsx(w,{variant:"bodyMd",children:m.jsxs("strong",{children:["Current plan: ",i]})}),n&&m.jsx(w,{variant:"bodyMd",children:m.jsxs("strong",{children:["Required plan: ",n," or higher"]})}),m.jsxs(F,{gap:"200",children:[m.jsx(w,{variant:"bodyMd",children:m.jsx("strong",{children:"Upgrade to unlock:"})}),m.jsx(F,{gap:"100",children:o.map((c,s)=>m.jsxs(w,{variant:"bodyMd",children:[" ",c]},s))})]})]})})})}function sn({open:e,onClose:r,feature:t,tokensRequired:i,tokensAvailable:a,tokensNeeded:n,shop:u,needsUpgrade:h=!1,minimumPlan:f=null,currentPlan:o=null}){const c=()=>{const p=new URLSearchParams(window.location.search),d=p.toString()?`?${p.toString()}`:"";window.location.href=`/billing${d}`},g={"ai-seo-product-basic":"AI Search Optimization (Products)","ai-seo-product-enhanced":"AI Search Optimization (Products - Enhanced)","ai-seo-collection":"AI Search Optimization (Collections)","ai-testing-simulation":"AI Testing & Simulation","ai-schema-advanced":"Advanced Schema Data","ai-sitemap-optimized":"AI-Optimized Sitemap"}[t]||"This feature";return m.jsx(te,{open:e,onClose:r,title:" Insufficient Tokens",primaryAction:{content:"Go to Billing",onAction:c},secondaryActions:[{content:"Cancel",onAction:r}],children:m.jsx(te.Section,{children:m.jsxs(F,{gap:"400",children:[m.jsx(ne,{tone:"warning",children:m.jsxs(F,{gap:"200",children:[m.jsx(w,{variant:"bodyMd",fontWeight:"semibold",children:"You don't have enough tokens to use AI Enhancement"}),m.jsxs(we,{gap:"400",align:"space-between",blockAlign:"center",children:[m.jsxs(K,{children:[m.jsx(w,{variant:"bodySm",tone:"subdued",children:"Current balance:"}),m.jsxs(w,{variant:"headingSm",fontWeight:"bold",children:[(a==null?void 0:a.toLocaleString())||0," tokens"]})]}),m.jsxs(K,{children:[m.jsx(w,{variant:"bodySm",tone:"subdued",children:"Required:"}),m.jsxs(w,{variant:"headingSm",fontWeight:"bold",children:[((a||0)+(n||0)).toLocaleString()," tokens"]})]}),m.jsxs(K,{children:[m.jsx(w,{variant:"bodySm",tone:"subdued",children:"You need:"}),m.jsx(w,{variant:"headingSm",fontWeight:"bold",as:"span",children:m.jsxs("span",{style:{color:"#D82C0D"},children:[(n==null?void 0:n.toLocaleString())||0," more"]})})]})]})]})}),m.jsx(K,{background:"bg-surface-secondary",padding:"400",borderRadius:"200",children:m.jsxs(F,{gap:"200",children:[m.jsx(w,{variant:"headingMd",children:g}),m.jsx(w,{variant:"bodySm",tone:"subdued",children:" Buy tokens to use this AI-enhanced feature"}),h&&f&&m.jsxs(w,{variant:"bodySm",tone:"subdued",children:[" Or upgrade to ",f," plan to get tokens included"]})]})}),h&&f&&m.jsx(ne,{tone:"info",children:m.jsxs(F,{gap:"200",children:[m.jsxs(w,{variant:"bodyMd",fontWeight:"semibold",children:[" Upgrade to ",f," to get tokens included"]}),m.jsxs(w,{variant:"bodySm",children:["Current plan: ",m.jsx("strong",{children:o})]}),m.jsxs(w,{variant:"bodySm",tone:"subdued",children:[f," plans include AI tokens every month. Or you can purchase tokens separately while staying on your current plan."]})]})}),m.jsx(K,{background:"bg-surface-secondary",padding:"300",borderRadius:"200",children:m.jsxs(F,{gap:"100",children:[m.jsx(w,{variant:"bodySm",tone:"subdued",children:" Tokens enable AI-powered features like AI Enhancement and AI Testing"}),m.jsx(w,{variant:"bodySm",tone:"subdued",children:" Tokens never expire and roll over indefinitely"}),m.jsx(w,{variant:"bodySm",tone:"subdued",children:" Purchase tokens or upgrade your plan from the Billing page"})]})})]})})})}function dn({globalPlan:e}){var O;const{t:r}=xe(),{api:t}=nn(),[i,a]=X.useState(null),[n,u]=X.useState(!0),[h,f]=X.useState(()=>sessionStorage.getItem("storeMetadataBannerDismissed")==="true");X.useEffect(()=>{o()},[]);const o=async()=>{try{console.log("[StoreMetadataBanner] Fetching metadata status...");const _=await t("/api/store/metadata-status");console.log("[StoreMetadataBanner] Status data:",_),a(_)}catch(_){console.error("[StoreMetadataBanner] Error fetching metadata status:",_)}finally{u(!1)}},c=()=>{f(!0),sessionStorage.setItem("storeMetadataBannerDismissed","true")},s=()=>{const _=new URLSearchParams(window.location.search),M=_.toString()?`?${_.toString()}`:"";window.location.href=`/ai-seo/store-metadata${M}`},g=((O=e==null?void 0:e.planKey)==null?void 0:O.toLowerCase())||"",p=["professional","growth","growth_extra","enterprise"].includes(g);if(console.log("[StoreMetadataBanner] Render check:",{loading:n,dismissed:h,status:i,hasMetadata:i==null?void 0:i.hasMetadata,planKey:g,isProfessionalOrHigher:p}),n||h||!i||i.hasMetadata||!p)return console.log("[StoreMetadataBanner] Not showing banner. Reason:",{loading:n,dismissed:h,noStatus:!i,hasMetadata:i==null?void 0:i.hasMetadata,notProfessionalOrHigher:!p}),null;console.log("[StoreMetadataBanner] SHOWING BANNER!");let d=r("storeMetadata.banner.title"," Boost AI Quality"),l="",y=!1;return i.hasPolicies?!i.hasTargetAudience&&!i.hasBrandVoice&&(l=r("storeMetadata.banner.brandingMissing","Add target audience and brand voice to help AI generate more on-brand, engaging content that resonates with your customers.")):(y=!0,!i.hasShipping&&!i.hasReturns?l=r("storeMetadata.banner.policiesMissing","Add shipping and return policies to help AI generate accurate, policy-compliant content. This prevents AI from inventing incorrect delivery times or warranty claims."):i.hasShipping?i.hasReturns||(l=r("storeMetadata.banner.returnsMissing","Add return policy to help AI generate accurate content about returns and refunds.")):l=r("storeMetadata.banner.shippingMissing","Add shipping information to help AI generate accurate content about delivery options.")),m.jsx("div",{style:{marginBottom:"1rem"},children:m.jsxs(ne,{title:d,tone:y?"warning":"info",onDismiss:c,children:[m.jsx("p",{children:l}),m.jsx("div",{style:{marginTop:"0.75rem"},children:m.jsxs(we,{gap:"200",children:[m.jsx(Ae,{onClick:s,variant:"primary",children:r("storeMetadata.banner.action","Quick Setup (2 min)")}),!y&&m.jsx(Ae,{onClick:c,children:r("common.remindLater","Remind me later")})]})})]})})}export{sn as I,dn as S,cn as U,nn as u};
