import{d as t}from"./index-BckCe7D9.js";function e(e=!0){return e&&t("[SFETCH] Creating session fetch for App Bridge v4"),async(e,s={})=>{t("[SFETCH] Fetching:",e,s);const{method:r="GET",headers:o={},body:n,responseType:a,...i}=s,c={method:r,headers:{"Content-Type":"application/json",...o},credentials:"include",body:n?"string"==typeof n?n:JSON.stringify(n):void 0},d=await fetch(e,c);let u;if(t("[SFETCH] Response:",d.status,d.statusText),"text"===a)u=await d.text();else{const t=await d.text();try{u=t?JSON.parse(t):null}catch{u={error:(null==t?void 0:t.slice(0,500))||"Non-JSON response"}}}if(!d.ok){if(402===d.status&&u){const t=new Error(u.error||u.message||"Payment Required");throw t.status=402,Object.assign(t,u),t}const t=(null==u?void 0:u.error)||(null==u?void 0:u.message)||`HTTP ${d.status}`,e=new Error(t);throw e.status=d.status,e}return u}}export{e as m};
