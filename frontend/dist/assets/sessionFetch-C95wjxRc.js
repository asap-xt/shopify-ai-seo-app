import{d as o}from"./index-x4Nl581N.js";function y(p=!0){return p&&o("[SFETCH] Creating session fetch for App Bridge v4"),async(i,a={})=>{o("[SFETCH] Fetching:",i,a);const{method:u="GET",headers:f={},body:r,responseType:h,...g}=a,d={method:u,headers:{"Content-Type":"application/json",...f},credentials:"include",body:r?typeof r=="string"?r:JSON.stringify(r):void 0},s=await fetch(i,d);o("[SFETCH] Response:",s.status,s.statusText);let e;if(h==="text")e=await s.text();else{const t=await s.text();try{e=t?JSON.parse(t):null}catch{e={error:(t==null?void 0:t.slice(0,500))||"Non-JSON response"}}}if(!s.ok){if(s.status===402&&e){const n=new Error(e.error||e.message||"Payment Required");throw n.status=402,Object.assign(n,e),n}const t=(e==null?void 0:e.error)||(e==null?void 0:e.message)||`HTTP ${s.status}`,c=new Error(t);throw c.status=s.status,c}return e}}export{y as m};
