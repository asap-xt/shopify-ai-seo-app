import{j as e}from"./app-bridge-BeEW8v0i-1762983543964.js";import{r as d,R as je}from"./react-vendor-tAaa2TlE-1762983543964.js";import{m as me}from"./sessionFetch-CJepNHo3-1762983543964.js";import{T as be}from"./TrialActivationModal-DAxo-T3--1762983543964.js";import{a as c,d as j,T as s,L,C as F,B as x,I as r,b as h,e as ee,f as o,D as k,h as Se,k as ye,M as f}from"./polaris-ku31vjPx-1762983543964.js";const fe=(z,u="")=>{try{return new URLSearchParams(window.location.search).get(z)||u}catch{return u}};function Pe({shop:z}){var X,Z,_;const u=z||fe("shop",""),se=t=>{const i=new URLSearchParams(window.location.search),a=i.toString()?`?${i.toString()}`:"";window.location.href=`${t}${a}`},[W,p]=d.useState(""),w=d.useMemo(()=>me(),[]),[y,ne]=d.useState(null),[J,v]=d.useState(""),[te,N]=d.useState(!1),[m,ie]=d.useState(null),[$,ae]=d.useState(""),[re,R]=d.useState(!1),[oe,C]=d.useState(!1),[ce,D]=d.useState(!1),[g,b]=d.useState(null),[le,U]=d.useState(!1),[S,we]=d.useState(null),[A,O]=d.useState({}),[E,H]=d.useState(!1),[de,V]=d.useState(0),[n,Y]=d.useState({}),[q,Q]=d.useState(!1),[he,K]=d.useState(0),[T,ue]=d.useState(null);d.useEffect(()=>{u&&(ge(),I())},[u,w]),d.useEffect(()=>{const t=()=>{!document.hidden&&u&&(console.log("[AI-TESTING] Page visible, refreshing token balance..."),I())};return document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("visibilitychange",t)}},[u,w]);const ge=async()=>{var t,i;try{const l=await w("/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
        query PlansMe($shop:String!) {
          plansMe(shop:$shop) {
            shop
            plan
            planKey
          }
        }
      `,variables:{shop:u}})});console.log("[AI-TESTING] Plan data:",l),ne((i=(t=l==null?void 0:l.data)==null?void 0:t.plansMe)==null?void 0:i.plan)}catch(a){console.error("[AI-TESTING] Error loading plan:",a)}},I=async()=>{var t;try{const i=await w(`/api/billing/info?shop=${u}`);console.log("[AI-TESTING] Token balance data:",i),ue(((t=i==null?void 0:i.tokens)==null?void 0:t.balance)||0)}catch(i){console.error("[AI-TESTING] Error loading token balance:",i)}},P=t=>{if(!y)return!1;const a=["Starter","Professional","Growth","Growth Extra","Enterprise"].indexOf(y);switch(t){case"productsJson":return a>=0;case"storeMetadata":return a>=1;case"welcomePage":case"collectionsJson":return a>=2;case"aiSitemap":return a>=3;case"schemaData":return a>=4;case"meta":return a>=0;case"claude":return a>=0;case"gemini":return a>=1;case"chatgpt":return a>=2;case"perplexity":return a>=3;case"deepseek":return a>=4;default:return!1}},M=t=>{switch(t){case"storeMetadata":return"Professional";case"welcomePage":case"collectionsJson":return"Growth";case"aiSitemap":return"Growth Extra";case"schemaData":return"Enterprise";case"gemini":return"Professional";case"chatgpt":return"Growth";case"perplexity":return"Growth Extra";case"deepseek":return"Enterprise";default:return"Professional"}},B=(t,i)=>{ie({name:t,url:i}),N(!0)},xe=async()=>{H(!0),V(0),O({});try{console.log("[AI-TESTING] Starting tests for shop:",u);const t=await w("/api/ai-testing/run-tests",{method:"POST",body:{shop:u}});console.log("[AI-TESTING] Test results:",t),t.results?(O(t.results),V(100),p("Basic tests completed!")):p("Testing failed. Please try again.")}catch(t){console.error("[AI-TESTING] Error running tests:",t),p("Failed to run tests. Please try again.")}finally{H(!1)}},pe=async()=>{const t=["starter","professional","growth","growth extra","enterprise"],i=(y==null?void 0:y.toLowerCase())||"starter";if(t.indexOf(i)<1){b({message:"AI-powered validation requires Professional plan or higher",requiredPlan:"Professional"}),R(!0);return}if(!T||T<50){b({message:"You need at least 50 tokens to run AI validation",tokenCost:50,currentBalance:T||0}),C(!0);return}Q(!0),K(0),Y({});try{console.log("[AI-TESTING] Starting AI validation for shop:",u);const l=await w("/api/ai-testing/ai-validate",{method:"POST",body:{shop:u,endpointResults:A}});console.log("[AI-TESTING] AI validation results:",l),l.results?(Y(l.results),K(100),p(`AI validation completed! (${l.tokensUsed||0} tokens used)`),I()):p("AI validation failed. Please try again.")}catch(l){if(console.error("[AI-TESTING] Error running AI validation:",l),l.status===402){if(l.trialRestriction&&l.requiresActivation){b(l),D(!0);return}if(l.requiresUpgrade){b(l),R(!0);return}if(l.requiresPurchase){b(l),C(!0);return}}p("Failed to run AI validation. Please try again.")}finally{Q(!1)}},G=async(t,i=null)=>{try{v("Generating AI response...");let a=`/api/ai-discovery/simulate?shop=${u}&type=${t}`;i&&(a+=`&question=${encodeURIComponent(i)}`);const l=await w(a,{method:"GET"});v(l.response||"No response generated")}catch(a){if(console.error("[AI-TESTING] Simulation error:",a),console.log("[AI-TESTING] Error status:",a.status),console.log("[AI-TESTING] Error requiresUpgrade:",a.requiresUpgrade),console.log("[AI-TESTING] Error requiresPurchase:",a.requiresPurchase),a.status===402){if(a.trialRestriction&&a.requiresActivation){b(a),D(!0),v("");return}if(a.requiresUpgrade){b(a),R(!0),v("");return}if(a.requiresPurchase){b(a),C(!0),v("");return}}v("Error generating response. Please try again."),p("Failed to simulate AI response")}};return e.jsxs(e.Fragment,{children:[e.jsxs(c,{gap:"400",children:[e.jsx(j,{tone:"info",children:e.jsx(s,{children:"Test how AI models discover and understand your store content. Check if your structured data and AI Discovery features are working correctly."})}),e.jsxs(L,{children:[e.jsx(L.Section,{variant:"oneHalf",children:e.jsx(F,{children:e.jsx(x,{padding:"300",children:e.jsxs(c,{gap:"400",children:[e.jsxs(r,{align:"space-between",blockAlign:"center",children:[e.jsxs(c,{gap:"100",children:[e.jsx(s,{as:"h3",variant:"headingMd",children:"ðŸ”§ Basic Endpoint Tests"}),e.jsx(s,{variant:"bodySm",tone:"subdued",children:"Quick check if endpoints are accessible and returning data"})]}),e.jsx(h,{onClick:xe,loading:E,disabled:E,children:E?"Testing...":"Run Basic Tests"})]}),E&&e.jsx(x,{children:e.jsxs(c,{gap:"200",children:[e.jsx(s,{variant:"bodySm",children:"Testing endpoints..."}),e.jsx(ee,{progress:de,size:"small"})]})}),Object.keys(A).length>0&&e.jsx(c,{gap:"300",children:Object.entries(A).map(([t,i],a)=>{const l=a===Object.entries(A).length-1;return e.jsxs(je.Fragment,{children:[e.jsx(r,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(r,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:i.name}),i.status==="success"&&e.jsx(o,{tone:"success",children:"âœ“ OK"}),i.status==="warning"&&e.jsx(o,{tone:"warning",children:"âš ï¸ Warning"}),i.status==="error"&&e.jsx(o,{tone:"critical",children:"âœ— Failed"}),i.status==="locked"&&e.jsx(o,{children:"ðŸ”’ Locked"})]}),e.jsxs(s,{variant:"bodySm",tone:"subdued",children:[i.message,i.dataSize&&` (${(i.dataSize/1024).toFixed(1)} KB)`]}),i.actionLink&&e.jsx(h,{size:"slim",onClick:()=>se(i.actionLink),children:t==="basicSitemap"?"Go to Sitemap":t==="aiSitemap"?"Go to Settings":"Go"})]})}),!l&&e.jsx(k,{})]},t)})}),Object.keys(A).length===0&&!E&&e.jsx(j,{tone:"info",children:e.jsx(s,{children:'Click "Run Basic Tests" to check if your AI Discovery endpoints are configured correctly.'})})]})})})}),e.jsx(L.Section,{variant:"oneHalf",children:e.jsx(F,{children:e.jsx(x,{padding:"300",children:e.jsxs(c,{gap:"400",children:[e.jsxs(r,{align:"space-between",blockAlign:"center",children:[e.jsxs(c,{gap:"100",children:[e.jsxs(r,{gap:"200",blockAlign:"center",children:[e.jsx(s,{as:"h3",variant:"headingMd",children:"ðŸ¤– AI-Powered Validation"}),T!==null&&e.jsxs(o,{tone:T>50?"success":"warning",children:[T," tokens"]}),e.jsx(h,{size:"micro",onClick:()=>{console.log("[AI-TESTING] Manual token refresh..."),I()},accessibilityLabel:"Refresh token balance",children:"ðŸ”„"})]}),e.jsx(s,{variant:"bodySm",tone:"subdued",children:"Deep analysis with AI bot"}),y&&e.jsx(s,{variant:"bodySm",tone:"subdued",children:"Requires: Professional+ plan & pay-per-use tokens"})]}),e.jsx(h,{onClick:pe,loading:q,disabled:q||Object.keys(A).length===0,variant:"primary",children:q?"Validating...":"Test with AI Bot"})]}),q&&e.jsx(x,{children:e.jsxs(c,{gap:"200",children:[e.jsx(s,{variant:"bodySm",children:"AI is analyzing your endpoints..."}),e.jsx(ee,{progress:he,size:"small",tone:"primary"})]})}),Object.keys(n).length>0&&e.jsxs(c,{gap:"300",children:[n.productsJson&&e.jsxs(e.Fragment,{children:[e.jsx(r,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(r,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"Products JSON Feed"}),n.productsJson.rating==="excellent"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Excellent"}),n.productsJson.rating==="good"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Good"}),n.productsJson.rating==="fair"&&e.jsx(o,{tone:"warning",children:"ðŸ¤– Fair"}),n.productsJson.rating==="poor"&&e.jsx(o,{tone:"critical",children:"ðŸ¤– Poor"})]}),e.jsx(s,{variant:"bodySm",children:n.productsJson.feedback}),n.productsJson.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",n.productsJson.suggestions]})]})}),e.jsx(k,{})]}),n.storeMetadata&&e.jsxs(e.Fragment,{children:[e.jsx(r,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(r,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"Store Metadata"}),n.storeMetadata.rating==="excellent"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Excellent"}),n.storeMetadata.rating==="good"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Good"}),n.storeMetadata.rating==="fair"&&e.jsx(o,{tone:"warning",children:"ðŸ¤– Fair"}),n.storeMetadata.rating==="poor"&&e.jsx(o,{tone:"critical",children:"ðŸ¤– Poor"})]}),e.jsx(s,{variant:"bodySm",children:n.storeMetadata.feedback}),n.storeMetadata.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",n.storeMetadata.suggestions]})]})}),e.jsx(k,{})]}),n.welcomePage&&e.jsxs(e.Fragment,{children:[e.jsx(r,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(r,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"AI Welcome Page"}),n.welcomePage.rating==="excellent"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Excellent"}),n.welcomePage.rating==="good"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Good"}),n.welcomePage.rating==="fair"&&e.jsx(o,{tone:"warning",children:"ðŸ¤– Fair"}),n.welcomePage.rating==="poor"&&e.jsx(o,{tone:"critical",children:"ðŸ¤– Poor"})]}),e.jsx(s,{variant:"bodySm",children:n.welcomePage.feedback}),n.welcomePage.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",n.welcomePage.suggestions]})]})}),e.jsx(k,{})]}),n.collectionsJson&&e.jsxs(e.Fragment,{children:[e.jsx(r,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(r,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"Collections JSON Feed"}),n.collectionsJson.rating==="excellent"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Excellent"}),n.collectionsJson.rating==="good"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Good"}),n.collectionsJson.rating==="fair"&&e.jsx(o,{tone:"warning",children:"ðŸ¤– Fair"}),n.collectionsJson.rating==="poor"&&e.jsx(o,{tone:"critical",children:"ðŸ¤– Poor"})]}),e.jsx(s,{variant:"bodySm",children:n.collectionsJson.feedback}),n.collectionsJson.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",n.collectionsJson.suggestions]})]})}),e.jsx(k,{})]}),n.aiSitemap&&e.jsxs(e.Fragment,{children:[e.jsx(r,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(r,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"AI-Enhanced Sitemap"}),n.aiSitemap.rating==="excellent"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Excellent"}),n.aiSitemap.rating==="good"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Good"}),n.aiSitemap.rating==="fair"&&e.jsx(o,{tone:"warning",children:"ðŸ¤– Fair"}),n.aiSitemap.rating==="poor"&&e.jsx(o,{tone:"critical",children:"ðŸ¤– Poor"})]}),e.jsx(s,{variant:"bodySm",children:n.aiSitemap.feedback}),n.aiSitemap.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",n.aiSitemap.suggestions]})]})}),e.jsx(k,{})]}),n.schemaData&&e.jsx(r,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(r,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"Advanced Schema Data"}),n.schemaData.rating==="excellent"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Excellent"}),n.schemaData.rating==="good"&&e.jsx(o,{tone:"success",children:"ðŸ¤– Good"}),n.schemaData.rating==="fair"&&e.jsx(o,{tone:"warning",children:"ðŸ¤– Fair"}),n.schemaData.rating==="poor"&&e.jsx(o,{tone:"critical",children:"ðŸ¤– Poor"})]}),e.jsx(s,{variant:"bodySm",children:n.schemaData.feedback}),n.schemaData.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",n.schemaData.suggestions]})]})})]}),Object.keys(n).length===0&&!q&&e.jsx(j,{tone:"info",children:e.jsx(s,{children:Object.keys(A).length===0?"Run Basic Tests first, then use AI validation for deep analysis":'Click "Test with AI Bot" to get AI-powered feedback on your endpoint data quality'})}),!y&&e.jsx(j,{tone:"warning",children:e.jsx(s,{children:"Loading plan information..."})})]})})})})]}),e.jsx(F,{children:e.jsx(x,{padding:"300",children:e.jsxs(c,{gap:"400",children:[e.jsx(s,{as:"h3",variant:"headingMd",children:"Test with Real AI Bots"}),e.jsx(s,{variant:"bodyMd",tone:"subdued",children:"Manually test your store with real AI search engines"}),e.jsxs(c,{gap:"200",children:[e.jsxs(r,{align:"space-between",children:[e.jsx(s,{children:"Meta AI Search"}),P("meta")?e.jsx(h,{onClick:()=>B("Meta AI","https://www.meta.ai/"),size:"slim",children:"Test"}):e.jsxs(h,{disabled:!0,size:"slim",children:[M("meta"),"+ Required"]})]}),e.jsxs(r,{align:"space-between",children:[e.jsx(s,{children:"Claude AI Search"}),P("claude")?e.jsx(h,{onClick:()=>B("Claude AI","https://claude.ai/"),size:"slim",children:"Test"}):e.jsxs(h,{disabled:!0,size:"slim",children:[M("claude"),"+ Required"]})]}),e.jsxs(r,{align:"space-between",children:[e.jsx(s,{children:"Gemini AI Search"}),P("gemini")?e.jsx(h,{onClick:()=>B("Gemini AI","https://gemini.google.com/"),size:"slim",children:"Test"}):e.jsxs(h,{disabled:!0,size:"slim",children:[M("gemini"),"+ Required"]})]}),e.jsxs(r,{align:"space-between",children:[e.jsx(s,{children:"ChatGPT Web Search"}),P("chatgpt")?e.jsx(h,{url:`https://chat.openai.com/?q=What+products+does+${u}+sell%3F+Tell+me+about+this+business+and+what+they+offer`,external:!0,size:"slim",children:"Test"}):e.jsxs(h,{disabled:!0,size:"slim",children:[M("chatgpt"),"+ Required"]})]}),e.jsxs(r,{align:"space-between",children:[e.jsx(s,{children:"Perplexity AI Search"}),P("perplexity")?e.jsx(h,{url:`https://www.perplexity.ai/search?q=What+products+does+${u}+sell%3F+Tell+me+about+this+business+and+what+they+offer`,external:!0,size:"slim",children:"Test"}):e.jsxs(h,{disabled:!0,size:"slim",children:[M("perplexity"),"+ Required"]})]}),e.jsxs(r,{align:"space-between",children:[e.jsx(s,{children:"DeepSeek AI Search"}),P("deepseek")?e.jsx(h,{onClick:()=>B("DeepSeek AI","https://chat.deepseek.com/"),size:"slim",children:"Test"}):e.jsxs(h,{disabled:!0,size:"slim",children:[M("deepseek"),"+ Required"]})]})]}),e.jsx(j,{tone:"info",children:e.jsxs(s,{children:[e.jsx("strong",{children:"How to test with AI bots:"}),e.jsx("br",{}),"â€¢ ",e.jsx("strong",{children:"Perplexity & ChatGPT:"}),' Click "Test" - they support URL parameters',e.jsx("br",{}),"â€¢ ",e.jsx("strong",{children:"Meta AI, Claude, Gemini, DeepSeek:"}),' Click "Test" to open a modal with the prompt to copy']})})]})})}),e.jsx(F,{children:e.jsx(x,{padding:"300",children:e.jsxs(c,{gap:"300",children:[e.jsx(s,{as:"h4",variant:"headingSm",children:"AI Search Simulation"}),e.jsx(s,{variant:"bodyMd",tone:"subdued",children:"Test how AI bots would respond to questions about your store based on your structured data."}),e.jsx(j,{tone:"info",children:e.jsxs(c,{gap:"100",children:[e.jsx(s,{variant:"bodySm",fontWeight:"semibold",children:"Simulation Details:"}),e.jsxs(s,{variant:"bodySm",children:["â€¢ ",e.jsx("strong",{children:"Data Source:"})," Your store's products, collections, and metadata"]}),e.jsxs(s,{variant:"bodySm",children:["â€¢ ",e.jsx("strong",{children:"Response Style:"})," Concise (2-3 sentences), natural language"]}),e.jsxs(s,{variant:"bodySm",children:["â€¢ ",e.jsx("strong",{children:"Best For:"})," General store info, products, categories, contact details"]}),e.jsxs(s,{variant:"bodySm",children:["â€¢ ",e.jsx("strong",{children:"Limitations:"})," May not have real-time data (current stock, active promotions, exact shipping times)"]})]})}),e.jsxs(c,{gap:"200",children:[e.jsxs(r,{align:"space-between",children:[e.jsx(s,{children:"What products does this store sell?"}),e.jsx(h,{onClick:()=>G("products"),size:"slim",children:"Simulate Response"})]}),e.jsxs(r,{align:"space-between",children:[e.jsx(s,{children:"Tell me about this business"}),e.jsx(h,{onClick:()=>G("business"),size:"slim",children:"Simulate Response"})]}),e.jsxs(r,{align:"space-between",children:[e.jsx(s,{children:"What categories does this store have?"}),e.jsx(h,{onClick:()=>G("categories"),size:"slim",children:"Simulate Response"})]}),e.jsxs(r,{align:"space-between",children:[e.jsx(s,{children:"What is this store's contact information?"}),e.jsx(h,{onClick:()=>G("contact"),size:"slim",children:"Simulate Response"})]})]}),e.jsx(k,{}),e.jsxs(c,{gap:"200",children:[e.jsx(s,{variant:"headingSm",children:"Ask Your Own Question"}),e.jsx(Se,{label:"",value:$,onChange:ae,placeholder:"e.g., What are your return policies? Do you ship internationally?",autoComplete:"off",connectedRight:e.jsx(h,{onClick:()=>{$.trim()?G("custom",$):p("Please enter a question")},disabled:!$.trim(),children:"Ask AI"})})]}),J&&e.jsxs(x,{background:"bg-surface-secondary",padding:"300",borderRadius:"200",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"AI Bot Response:"}),e.jsx(x,{paddingBlockStart:"200",children:e.jsx(s,{variant:"bodyMd",children:J})})]})]})})})]}),W&&e.jsx(ye,{content:W,onDismiss:()=>p("")}),e.jsx(f,{open:te,onClose:()=>N(!1),title:`Test with ${m==null?void 0:m.name}`,primaryAction:{content:"Open AI Bot",url:m==null?void 0:m.url,external:!0},secondaryActions:[{content:"Copy Prompt",onAction:()=>{navigator.clipboard.writeText(`What products does ${u} sell? Tell me about this business and what they offer.`),p("Prompt copied to clipboard!")}}],children:e.jsx(f.Section,{children:e.jsxs(c,{gap:"300",children:[e.jsx(s,{variant:"bodyMd",children:'1. Click "Copy Prompt" (left button)'}),e.jsxs(s,{variant:"bodyMd",children:['2. Click "Open AI Bot" (right button) to visit ',m==null?void 0:m.name]}),e.jsx(s,{variant:"bodyMd",children:"3. Paste the prompt and send"}),e.jsxs(x,{background:"bg-surface-secondary",padding:"300",borderRadius:"200",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"Prompt to test:"}),e.jsx(x,{paddingBlockStart:"200",children:e.jsxs(s,{variant:"bodyMd",as:"p",children:["What products does ",u," sell? Tell me about this business and what they offer."]})})]}),e.jsx(j,{tone:"info",children:e.jsx(s,{children:"The AI bot will search the web and use your store's structured data to answer."})})]})})}),e.jsx(f,{open:le,onClose:()=>U(!1),title:"Upgrade Required",primaryAction:{content:"View Plans",onAction:()=>{const t=new URLSearchParams(window.location.search),i=t.toString()?`?${t.toString()}`:"";window.location.href=`/billing${i}`}},secondaryActions:[{content:"Cancel",onAction:()=>U(!1)}],children:e.jsx(f.Section,{children:e.jsxs(c,{gap:"300",children:[e.jsxs(s,{variant:"bodyMd",children:[e.jsx("strong",{children:S==null?void 0:S.endpoint})," requires ",e.jsx("strong",{children:S==null?void 0:S.requiredPlan})," plan or higher."]}),e.jsxs(s,{variant:"bodyMd",tone:"subdued",children:["Your current plan: ",e.jsx("strong",{children:S==null?void 0:S.currentPlan})]}),e.jsx(j,{tone:"info",children:e.jsx(s,{children:"Upgrade to access this advanced AI Discovery feature."})})]})})}),e.jsx(f,{open:re,onClose:()=>R(!1),title:"Upgrade Required",primaryAction:{content:"View Plans",onAction:()=>{const t=new URLSearchParams(window.location.search),i=t.toString()?`?${t.toString()}`:"";window.location.href=`/billing${i}`}},secondaryActions:[{content:"Cancel",onAction:()=>R(!1)}],children:e.jsx(f.Section,{children:e.jsxs(c,{gap:"300",children:[e.jsxs(s,{variant:"bodyMd",children:["AI Testing requires ",e.jsx("strong",{children:(g==null?void 0:g.minimumPlan)||"Professional"})," plan or higher."]}),e.jsxs(s,{variant:"bodyMd",tone:"subdued",children:["Your current plan: ",e.jsx("strong",{children:(g==null?void 0:g.currentPlan)||"Starter"})]}),e.jsx(j,{tone:"info",children:e.jsx(s,{children:"Upgrade to test AI responses with real store data."})})]})})}),e.jsx(f,{open:oe,onClose:()=>{C(!1),I()},title:"Insufficient Tokens",primaryAction:{content:"Buy Tokens",onAction:()=>{const t=new URLSearchParams(window.location.search),i=t.toString()?`?${t.toString()}`:"";window.location.href=`/billing${i}`}},secondaryActions:[{content:"Cancel",onAction:()=>{C(!1),I()}}],children:e.jsx(f.Section,{children:e.jsxs(c,{gap:"300",children:[e.jsx(s,{variant:"bodyMd",children:"You need more tokens to use AI Testing."}),e.jsx(x,{background:"bg-surface-secondary",padding:"300",borderRadius:"200",children:e.jsxs(c,{gap:"200",children:[e.jsxs(r,{align:"space-between",children:[e.jsx(s,{variant:"bodySm",children:"Required:"}),e.jsxs(s,{variant:"bodySm",fontWeight:"semibold",children:[((X=g==null?void 0:g.tokensRequired)==null?void 0:X.toLocaleString())||0," tokens"]})]}),e.jsxs(r,{align:"space-between",children:[e.jsx(s,{variant:"bodySm",children:"Available:"}),e.jsxs(s,{variant:"bodySm",children:[((Z=g==null?void 0:g.tokensAvailable)==null?void 0:Z.toLocaleString())||0," tokens"]})]}),e.jsxs(r,{align:"space-between",children:[e.jsx(s,{variant:"bodySm",children:"Needed:"}),e.jsxs(s,{variant:"bodySm",fontWeight:"semibold",tone:"critical",children:[((_=g==null?void 0:g.tokensNeeded)==null?void 0:_.toLocaleString())||0," tokens"]})]})]})}),e.jsx(j,{tone:"info",children:e.jsx(s,{children:"Purchase tokens to continue using AI features. Tokens never expire."})})]})})}),g&&e.jsx(be,{open:ce,onClose:()=>{D(!1),b(null)},feature:g.feature||"ai-testing-simulation",trialEndsAt:g.trialEndsAt,currentPlan:g.currentPlan||y,tokensRequired:g.tokensRequired||0,onActivatePlan:()=>{const t=new URLSearchParams(window.location.search),i=t.get("host"),a=t.get("embedded");window.location.href=`/billing?shop=${encodeURIComponent(u)}&embedded=${a}&host=${encodeURIComponent(i)}`},onPurchaseTokens:()=>{const t=new URLSearchParams(window.location.search),i=t.get("host"),a=t.get("embedded");window.location.href=`/billing?shop=${encodeURIComponent(u)}&embedded=${a}&host=${encodeURIComponent(i)}`}})]})}export{Pe as default};
