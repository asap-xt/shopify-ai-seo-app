var h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var We={},_e={},k={},Oe={},ie={},x={},ce={},j={},se={};Object.defineProperty(se,"__esModule",{value:!0});function Ae(e,r){if(r==null||typeof e>"u"||!Object.prototype.isPrototypeOf.call(Object.getPrototypeOf(e),r)||r.constructor.name!=="Object"&&r.constructor.name!=="Array")return r;var t={};return Object.keys(r).forEach(function(o){var i=Object.prototype.hasOwnProperty.call(e,o);i&&typeof e[o]=="object"&&!Array.isArray(e[o])?t[o]=Ae(e[o],r[o]):t[o]=r[o]}),Object.keys(e).forEach(function(o){var i=Object.prototype.hasOwnProperty.call(r,o);i||(t[o]=e[o])}),Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}se.default=Ae;var U={};Object.defineProperty(U,"__esModule",{value:!0});U.SEPARATOR=U.PREFIX=void 0;U.PREFIX="APP";U.SEPARATOR="::";var D={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ComponentType=e.Group=void 0,function(r){r.AuthCode="AuthCode",r.Button="Button",r.ButtonGroup="ButtonGroup",r.Cart="Cart",r.Client="Client",r.ContextualSaveBar="ContextualSaveBar",r.Error="Error",r.Features="Features",r.FeedbackModal="FeedbackModal",r.Fullscreen="Fullscreen",r.LeaveConfirmation="LeaveConfirmation",r.Link="Link",r.Loading="Loading",r.Menu="Menu",r.Modal="Modal",r.Navigation="Navigation",r.Performance="Performance",r.Pos="Pos",r.Print="Print",r.ResourcePicker="Resource_Picker",r.unstable_Picker="unstable_Picker",r.Scanner="Scanner",r.SessionToken="SessionToken",r.Share="Share",r.TitleBar="TitleBar",r.Toast="Toast",r.MarketingExternalActivityTopBar="MarketingExternalActivityTopBar",r.WebVitals="WebVitals"}(e.Group||(e.Group={})),function(r){r.Button="Button",r.ButtonGroup="ButtonGroup"}(e.ComponentType||(e.ComponentType={}))})(D);(function(e){var r=h&&h.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0}),e.updateActionFromPayload=e.isValidOptionalString=e.isValidOptionalNumber=e.forEachInEnum=e.getMergedProps=e.findMatchInEnum=e.getEventNameSpace=e.NonSnakeCaseGroup=e.actionWrapper=void 0;var t=r(se),o=U,i=D;function n(f){return f}e.actionWrapper=n,e.NonSnakeCaseGroup=[i.Group.AuthCode,i.Group.Button,i.Group.ButtonGroup,i.Group.Cart,i.Group.Error,i.Group.Features,i.Group.Fullscreen,i.Group.Link,i.Group.Loading,i.Group.Menu,i.Group.Modal,i.Group.Navigation,i.Group.Pos,i.Group.Print,i.Group.ResourcePicker,i.Group.Scanner,i.Group.SessionToken,i.Group.Share,i.Group.TitleBar,i.Group.Toast,i.Group.unstable_Picker];function u(f){return f.replace(/([A-Z])/g,function(b,P,O){return(O===0?"":"_")+b[0].toLowerCase()})}function v(f){return e.NonSnakeCaseGroup.includes(f)?f.toUpperCase():u(f).toUpperCase()}function d(f,b,P){if(b.startsWith(""+o.PREFIX+o.SEPARATOR))return b;var O=v(f);if(P){var M=P.subgroups,T=P.type;M&&M.length>0&&(O+=O.length>0?o.SEPARATOR:"",M.forEach(function(B,g){O+=""+B.toUpperCase()+(g<M.length-1?o.SEPARATOR:"")})),T!==f&&T&&(O+=""+(O.length>0?o.SEPARATOR:"")+T.toUpperCase())}return O&&(O+=""+(O.length>0?o.SEPARATOR:"")+b.toUpperCase()),""+o.PREFIX+o.SEPARATOR+O}e.getEventNameSpace=d;function a(f,b){var P=Object.keys(f).find(function(O){return b===f[O]});return P?f[P]:void 0}e.findMatchInEnum=a;function c(f,b){var P=t.default(f,b);if(!P){var O=Object.assign(f,b);return O}return P}e.getMergedProps=c;function s(f,b){Object.keys(f).forEach(function(P){b(f[P])})}e.forEachInEnum=s;function y(f){return f==null||typeof f=="number"}e.isValidOptionalNumber=y;function p(f){return f==null||typeof f=="string"}e.isValidOptionalString=p;function l(f,b){var P=f.id;return P===b.id?(Object.assign(f,c(f,b)),!0):!1}e.updateActionFromPayload=l})(j);var N={},ee={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LifecycleHook=e.PermissionType=e.MessageType=void 0,function(r){r.GetState="getState",r.Dispatch="dispatch",r.Subscribe="subscribe",r.Unsubscribe="unsubscribe"}(e.MessageType||(e.MessageType={})),function(r){r.Dispatch="Dispatch",r.Subscribe="Subscribe"}(e.PermissionType||(e.PermissionType={})),function(r){r.UpdateAction="UpdateAction",r.DispatchAction="DispatchAction"}(e.LifecycleHook||(e.LifecycleHook={}))})(ee);var L={};Object.defineProperty(L,"__esModule",{value:!0});L.removeFromCollection=L.addAndRemoveFromCollection=void 0;function Ve(e,r,t){return e.push(r),function(){return Pe(e,r,t)}}L.addAndRemoveFromCollection=Ve;function Pe(e,r,t){var o=e.findIndex(function(i){return i===r});return o>=0?(e.splice(o,1),t&&t(r),!0):!1}L.removeFromCollection=Pe;var $={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.permissionAction=e.isErrorEventName=e.throwError=e.invalidOriginAction=e.fromAction=e.AppBridgeError=e.AppActionType=e.Action=void 0;var r=D,t=j,o;(function(s){s.INVALID_ACTION="APP::ERROR::INVALID_ACTION",s.INVALID_ACTION_TYPE="APP::ERROR::INVALID_ACTION_TYPE",s.INVALID_PAYLOAD="APP::ERROR::INVALID_PAYLOAD",s.INVALID_OPTIONS="APP::ERROR::INVALID_OPTIONS",s.UNEXPECTED_ACTION="APP::ERROR::UNEXPECTED_ACTION",s.PERSISTENCE="APP::ERROR::PERSISTENCE",s.UNSUPPORTED_OPERATION="APP::ERROR::UNSUPPORTED_OPERATION",s.NETWORK="APP::ERROR::NETWORK",s.PERMISSION="APP::ERROR::PERMISSION",s.FAILED_AUTHENTICATION="APP::ERROR::FAILED_AUTHENTICATION",s.INVALID_ORIGIN="APP::ERROR::INVALID_ORIGIN"})(o=e.Action||(e.Action={})),function(s){s.INVALID_CONFIG="APP::ERROR::INVALID_CONFIG",s.MISSING_CONFIG="APP::APP_ERROR::MISSING_CONFIG",s.MISSING_APP_BRIDGE_MIDDLEWARE="APP::APP_ERROR::MISSING_APP_BRIDGE_MIDDLEWARE",s.WINDOW_UNDEFINED="APP::APP_ERROR::WINDOW_UNDEFINED",s.REDUX_REINSTANTIATED="APP::APP_ERROR::REDUX_REINSTANTIATED",s.MISSING_LOCAL_ORIGIN="APP::APP_ERROR::MISSING_LOCAL_ORIGIN",s.MISSING_HOST_PROVIDER="APP::APP_ERROR::MISSING_HOST_PROVIDER",s.MISSING_ROUTER_CONTEXT="APP::APP_ERROR::MISSING_ROUTER_CONTEXT",s.MISSING_HISTORY_BLOCK="APP::APP_ERROR::MISSING_HISTORY_BLOCK"}(e.AppActionType||(e.AppActionType={}));var i=function(){function s(y){this.name="AppBridgeError",this.message=y,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(this,this.constructor):this.stack=new Error(this.message).stack}return s}();e.AppBridgeError=i,i.prototype=Object.create(Error.prototype);function n(s,y,p){var l=s?y+": "+s:y,f=new i(l);return f.action=p,f.type=y,f}e.fromAction=n;function u(s){return t.actionWrapper({group:r.Group.Error,payload:{message:s,type:o.INVALID_ORIGIN},type:o.INVALID_ORIGIN})}e.invalidOriginAction=u;function v(){for(var s=[],y=0;y<arguments.length;y++)s[y]=arguments[y];var p=s[0],l,f;throw typeof s[1]=="string"?l=s[1]:(f=s[1],l=s[2]||""),n(l,p,f)}e.throwError=v;function d(s){var y=t.findMatchInEnum(o,s);return typeof y=="string"}e.isErrorEventName=d;function a(s,y,p){var l=y.payload;return t.actionWrapper({type:s,group:r.Group.Error,payload:{action:y,message:p,type:s,id:l&&l.id?l.id:void 0}})}function c(s,y){return a(o.PERMISSION,s,y||"Action is not permitted")}e.permissionAction=c})($);var W={};Object.defineProperty(W,"__esModule",{value:!0});W.generateUuid=void 0;function F(e){return Array.from(e).map(function(r){return("00"+r.toString(16)).slice(-2)}).join("")}function G(e){if(typeof Uint8Array=="function"&&typeof window=="object"&&window.crypto){var r=new Uint8Array(e),t=window.crypto.getRandomValues(r);if(t)return t}return Array.from(new Array(e),function(){return Math.random()*255|0})}function me(){var e=64,r=G(1),t=G(2);return r[0]&=191,t[0]&=15|e,[F(G(4)),"-",F(G(2)),"-",F(t),"-",F(r),F(G(1)),"-",F(G(6))].join("")}W.generateUuid=me;W.default=me;var ze=h&&h.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(o[n]=i[n])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function o(){this.constructor=r}r.prototype=t===null?Object.create(t):(o.prototype=t.prototype,new o)}}(),Q=h&&h.__assign||function(){return Q=Object.assign||function(e){for(var r,t=1,o=arguments.length;t<o;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Q.apply(this,arguments)},$e=h&&h.__spreadArray||function(e,r){for(var t=0,o=r.length,i=e.length;t<o;t++,i++)e[i]=r[t];return e},He=h&&h.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(N,"__esModule",{value:!0});N.unsubscribeActions=N.ActionSetWithChildren=N.ActionSet=void 0;var qe=ee,oe=L,K=$,Ke=D,Xe=He(W),re=j,Ee=function(){function e(r,t,o,i){var n=this;this.app=r,this.type=t,this.group=o,this.subgroups=[],this.subscriptions=[],r||K.throwError(K.Action.INVALID_ACTION,"Missing required `app`"),this.id=i||Xe.default(),this.defaultGroup=o;var u=this.set;this.set=function(){for(var v,d=[],a=0;a<arguments.length;a++)d[a]=arguments[a];return n.app.hooks?(v=n.app.hooks).run.apply(v,$e([qe.LifecycleHook.UpdateAction,u,n],d)):u.apply(n,d)}}return e.prototype.set=function(){},Object.defineProperty(e.prototype,"component",{get:function(){return{id:this.id,subgroups:this.subgroups,type:this.type}},enumerable:!1,configurable:!0}),e.prototype.updateSubscription=function(r,t,o){var i=r.eventType,n=r.callback,u=r.component,v;return v=this.subscriptions.findIndex(function(d){return d===r}),v>=0?this.subscriptions[v].unsubscribe():v=void 0,this.group=t,this.subgroups=o,Object.assign(u,{subgroups:this.subgroups}),this.subscribe(i,n,u,v)},e.prototype.error=function(r){var t=this,o=[];return re.forEachInEnum(K.Action,function(i){o.push(t.subscriptions.length),t.subscribe(i,r)}),function(){var i=o.map(function(n){return t.subscriptions[n]});i.forEach(function(n){oe.removeFromCollection(t.subscriptions,n,function(u){u.unsubscribe()})})}},e.prototype.subscribe=function(r,t,o,i){var n=this,u=o||this.component,v=r.toUpperCase(),d=typeof i=="number"?t:t.bind(this),a;K.isErrorEventName(r)?a=re.getEventNameSpace(Ke.Group.Error,r,Q(Q({},u),{type:""})):a=re.getEventNameSpace(this.group,r,u);var c=this.app.subscribe(a,d,o?o.id:this.id),s={eventType:v,unsubscribe:c,callback:d,component:u,updateSubscribe:function(y,p){return n.updateSubscription(s,y,p)}};return typeof i=="number"&&i>=0&&i<this.subscriptions.length?this.subscriptions[i]=s:this.subscriptions.push(s),c},e.prototype.unsubscribe=function(r){return r===void 0&&(r=!1),fe(this.subscriptions,this.defaultGroup,r),this},e}();N.ActionSet=Ee;var Ye=function(e){ze(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.children=[],t}return r.prototype.unsubscribe=function(t,o){return t===void 0&&(t=!0),o===void 0&&(o=!1),fe(this.subscriptions,this.defaultGroup,o),this.children.forEach(function(i){i instanceof r?i.unsubscribe(t,!t):i.unsubscribe(!t)}),this},r.prototype.getChild=function(t){var o=this.children.findIndex(function(i){return i.id===t});return o>=0?this.children[o]:void 0},r.prototype.getChildIndex=function(t){return this.children.findIndex(function(o){return o.id===t})},r.prototype.getChildSubscriptions=function(t,o){return this.subscriptions.filter(function(i){return i.component.id===t&&(!o||o===i.eventType)})},r.prototype.addChild=function(t,o,i){var n=this,u=t.subscriptions,v=this.getChild(t.id);return v||this.children.push(t),!u||o===t.group&&i===t.subgroups?this:(u.forEach(function(d){var a=d.updateSubscribe;a(o,i)}),Object.assign(t,{group:o,subgroups:i}),t instanceof r&&t.children.forEach(function(d){return n.addChild(d,o,i)}),this)},r.prototype.removeChild=function(t){var o=this;return oe.removeFromCollection(this.children,this.getChild(t),function(){var i=o.subscriptions.filter(function(n){return n.component.id===t});i.forEach(function(n){oe.removeFromCollection(o.subscriptions,n,function(u){u.unsubscribe()})})}),this},r.prototype.subscribeToChild=function(t,o,i){var n=this,u=i.bind(this);if(o instanceof Array)return o.forEach(function(c){return n.subscribeToChild(t,c,i)}),this;if(typeof o!="string")return this;var v=o.toUpperCase(),d=this.getChildSubscriptions(t.id,v);if(d.length>0)d.forEach(function(c){return c.updateSubscribe(n.group,t.subgroups)});else{var a={id:t.id,subgroups:t.subgroups,type:t.type};this.subscribe(v,u,a)}return this},r.prototype.getUpdatedChildActions=function(t,o){if(t.length===0){for(;o.length>0;){var i=o.pop();if(!i)break;this.removeChild(i.id)}return}for(var n=t.filter(function(d,a,c){return a===c.indexOf(d)}),u=n.map(function(d){return d.id}),v=o.filter(function(d){return u.indexOf(d.id)<0});v.length>0;){var i=v.pop();if(!i)break;this.removeChild(i.id)}return n},r}(Ee);N.ActionSetWithChildren=Ye;function fe(e,r,t){t===void 0&&(t=!1),e.forEach(function(o){if(t){var i=o.updateSubscribe;i(r,[])}else{var n=o.unsubscribe;n()}}),t||(e.length=0)}N.unsubscribeActions=fe;(function(e){var r=h&&h.__extends||function(){var c=function(s,y){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,l){p.__proto__=l}||function(p,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(p[f]=l[f])},c(s,y)};return function(s,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");c(s,y);function p(){this.constructor=s}s.prototype=y===null?Object.create(y):(p.prototype=y.prototype,new p)}}(),t=h&&h.__assign||function(){return t=Object.assign||function(c){for(var s,y=1,p=arguments.length;y<p;y++){s=arguments[y];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(c[l]=s[l])}return c},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Button=e.update=e.clickButton=e.Style=e.Icon=e.Action=void 0;var o=j,i=N,n=D,u;(function(c){c.CLICK="CLICK",c.UPDATE="UPDATE"})(u=e.Action||(e.Action={})),function(c){c.Print="print"}(e.Icon||(e.Icon={})),function(c){c.Danger="danger"}(e.Style||(e.Style={}));function v(c,s,y){var p=s.id,l=o.getEventNameSpace(c,u.CLICK,s),f={id:p,payload:y};return o.actionWrapper({type:l,group:c,payload:f})}e.clickButton=v;function d(c,s,y){var p=s.id,l=y.label,f=o.getEventNameSpace(c,u.UPDATE,s),b=t(t({},y),{id:p,label:l});return o.actionWrapper({type:f,group:c,payload:b})}e.update=d;var a=function(c){r(s,c);function s(y,p){var l=c.call(this,y,n.ComponentType.Button,n.Group.Button)||this;return l.disabled=!1,l.loading=!1,l.plain=!1,l.set(p,!1),l}return Object.defineProperty(s.prototype,"options",{get:function(){return{disabled:this.disabled,icon:this.icon,label:this.label,style:this.style,loading:this.loading,plain:this.plain}},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"payload",{get:function(){return t(t({},this.options),{id:this.id})},enumerable:!1,configurable:!0}),s.prototype.set=function(y,p){p===void 0&&(p=!0);var l=o.getMergedProps(this.options,y),f=l.label,b=l.disabled,P=l.icon,O=l.style,M=l.loading,T=l.plain;return this.label=f,this.disabled=!!b,this.icon=P,this.style=O,this.loading=!!M,this.plain=!!T,p&&this.dispatch(u.UPDATE),this},s.prototype.dispatch=function(y,p){switch(y){case u.CLICK:this.app.dispatch(v(this.group,this.component,p));break;case u.UPDATE:{var l=d(this.group,this.component,this.payload);this.app.dispatch(l);break}}return this},s}(i.ActionSet);e.Button=a})(ce);Object.defineProperty(x,"__esModule",{value:!0});x.getSingleButton=void 0;var Qe=ce;function Ze(e,r,t,o){return e.addChild(r,e.group,t),e.subscribeToChild(r,Qe.Action.UPDATE,o),r.payload}x.getSingleButton=Ze;(function(e){var r=h&&h.__extends||function(){var g=function(A,_){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,E){m.__proto__=E}||function(m,E){for(var S in E)Object.prototype.hasOwnProperty.call(E,S)&&(m[S]=E[S])},g(A,_)};return function(A,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");g(A,_);function m(){this.constructor=A}A.prototype=_===null?Object.create(_):(m.prototype=_.prototype,new m)}}(),t=h&&h.__assign||function(){return t=Object.assign||function(g){for(var A,_=1,m=arguments.length;_<m;_++){A=arguments[_];for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(g[E]=A[E])}return g},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.ModalIframe=e.ModalMessage=e.Modal=e.isMessageModal=e.isIframeModal=e.data=e.update=e.clickFooterButton=e.updateModalSize=e.closeModal=e.openModal=e.Size=e.Action=void 0;var o=x,i=j,n=N,u=D,v=ce,d;(function(g){g.OPEN="APP::MODAL::OPEN",g.CLOSE="APP::MODAL::CLOSE",g.UPDATE="APP::MODAL::UPDATE",g.UPDATE_CONTENT="APP::MODAL::CONTENT::UPDATE",g.FOOTER_BUTTON_CLICK="APP::MODAL::FOOTER::BUTTON::CLICK",g.FOOTER_BUTTON_UPDATE="APP::MODAL::FOOTER::BUTTON::UPDATE",g.UPDATE_SIZE="APP::MODAL::UPDATE_SIZE",g.DATA="APP::MODAL::DATA"})(d=e.Action||(e.Action={}));var a;(function(g){g.Small="small",g.Medium="medium",g.Large="large",g.Full="full",g.Auto="auto"})(a=e.Size||(e.Size={}));var c={group:u.Group.Modal,subgroups:["Footer"],type:u.ComponentType.Button};function s(g){return i.actionWrapper({group:u.Group.Modal,payload:g,type:d.OPEN})}e.openModal=s;function y(g){return i.actionWrapper({group:u.Group.Modal,payload:g,type:d.CLOSE})}e.closeModal=y;function p(g){return i.actionWrapper({group:u.Group.Modal,payload:g,type:d.UPDATE_SIZE})}e.updateModalSize=p;function l(g,A){var _=t({id:g},c);return v.clickButton(u.Group.Modal,_,A)}e.clickFooterButton=l;function f(g){return i.actionWrapper({payload:g,group:u.Group.Modal,type:d.UPDATE})}e.update=f;function b(g){return i.actionWrapper({payload:g,group:u.Group.Modal,type:d.DATA})}e.data=b;function P(g){return typeof g.url=="string"||typeof g.path=="string"}e.isIframeModal=P;function O(g){return typeof g.message=="string"}e.isMessageModal=O;var M=function(g){r(A,g);function A(){var _=g!==null&&g.apply(this,arguments)||this;return _.size=a.Small,_}return Object.defineProperty(A.prototype,"footer",{get:function(){if(!(!this.footerPrimary&&!this.footerSecondary))return{buttons:{primary:this.footerPrimary,secondary:this.footerSecondary}}},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"footerOptions",{get:function(){if(!(!this.footerPrimaryOptions&&!this.footerSecondaryOptions))return{buttons:{primary:this.footerPrimaryOptions,secondary:this.footerSecondaryOptions}}},enumerable:!1,configurable:!0}),A.prototype.close=function(){this.app.dispatch(y({id:this.id}))},A.prototype.setFooterPrimaryButton=function(_,m){var E=this,S=c.subgroups;this.footerPrimaryOptions=this.getChildButton(_,this.footerPrimaryOptions),this.footerPrimary=this.footerPrimaryOptions?o.getSingleButton(this,this.footerPrimaryOptions,S,function(I){E.updatePrimaryFooterButton(I,m)}):void 0},A.prototype.setFooterSecondaryButtons=function(_,m){var E=this,S=c.subgroups,I=_||[],w=this.footerOptions&&this.footerOptions.buttons.secondary||[];this.footerSecondaryOptions=this.getUpdatedChildActions(I,w),this.footerSecondary=this.footerSecondaryOptions?this.footerSecondaryOptions.map(function(V){return o.getSingleButton(E,V,S,function(z){E.updateSecondaryFooterButton(z,m)})}):void 0},A.prototype.getChildButton=function(_,m){var E=_?[_]:[],S=m?[m]:[],I=this.getUpdatedChildActions(E,S);return I?I[0]:void 0},A.prototype.updatePrimaryFooterButton=function(_,m){!this.footer||!this.footer.buttons.primary||i.updateActionFromPayload(this.footer.buttons.primary,_)&&m()},A.prototype.updateSecondaryFooterButton=function(_,m){if(!(!this.footer||!this.footer.buttons||!this.footer.buttons.secondary)){for(var E,S=0,I=this.footer.buttons.secondary;S<I.length;S++){var w=I[S];if(E=i.updateActionFromPayload(w,_),E)break}E&&m()}},A}(n.ActionSetWithChildren);e.Modal=M;var T=function(g){r(A,g);function A(_,m){var E=g.call(this,_,u.Group.Modal,u.Group.Modal)||this;return E.set(m,!1),E}return Object.defineProperty(A.prototype,"payload",{get:function(){return t(t({},this.options),{footer:this.footer,id:this.id})},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"options",{get:function(){return{footer:this.footerOptions,message:this.message,size:this.size,title:this.title}},enumerable:!1,configurable:!0}),A.prototype.set=function(_,m){var E=this;m===void 0&&(m=!0);var S=i.getMergedProps(this.options,_),I=S.title,w=S.footer,V=S.message,z=S.size;return this.title=I,this.message=V,this.size=z,this.setFooterPrimaryButton(w?w.buttons.primary:void 0,function(){E.dispatch(d.UPDATE)}),this.setFooterSecondaryButtons(w?w.buttons.secondary:void 0,function(){E.dispatch(d.UPDATE)}),m&&this.dispatch(d.UPDATE),this},A.prototype.dispatch=function(_){switch(_){case d.OPEN:this.app.dispatch(s(this.payload));break;case d.CLOSE:this.close();break;case d.UPDATE:this.app.dispatch(f(this.payload));break}return this},A}(M);e.ModalMessage=T;var B=function(g){r(A,g);function A(_,m){var E=g.call(this,_,u.Group.Modal,u.Group.Modal)||this;return E.set(m,!1),E}return Object.defineProperty(A.prototype,"payload",{get:function(){return t(t({},this.options),{footer:this.footer,id:this.id})},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"options",{get:function(){return{footer:this.footerOptions,path:this.path,size:this.size,title:this.title,url:this.url,loading:this.loading}},enumerable:!1,configurable:!0}),A.prototype.set=function(_,m){var E=this;m===void 0&&(m=!0);var S=i.getMergedProps(this.options,_),I=S.title,w=S.footer,V=S.path,z=S.url,Ge=S.size,ke=S.loading;return this.title=I,this.url=z,this.path=V,this.size=Ge,this.loading=ke,this.setFooterPrimaryButton(w?w.buttons.primary:void 0,function(){E.dispatch(d.UPDATE)}),this.setFooterSecondaryButtons(w?w.buttons.secondary:void 0,function(){E.dispatch(d.UPDATE)}),m&&this.dispatch(d.UPDATE),this},A.prototype.dispatch=function(_,m){switch(_){case d.OPEN:this.app.dispatch(s(this.payload));break;case d.CLOSE:this.close();break;case d.UPDATE:this.app.dispatch(f(this.payload));break;case d.DATA:this.app.dispatch(b(m||{}));break}return this},A}(M);e.ModalIframe=B})(ie);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.create=e.Modal=e.isMessageModal=e.data=e.update=e.clickFooterButton=e.updateModalSize=e.closeModal=e.openModal=e.Size=e.Action=e.isIframeModal=e.ModalMessage=e.ModalIframe=void 0;var r=ie;Object.defineProperty(e,"ModalIframe",{enumerable:!0,get:function(){return r.ModalIframe}}),Object.defineProperty(e,"ModalMessage",{enumerable:!0,get:function(){return r.ModalMessage}}),Object.defineProperty(e,"isIframeModal",{enumerable:!0,get:function(){return r.isIframeModal}});var t=ie;Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return t.Action}}),Object.defineProperty(e,"Size",{enumerable:!0,get:function(){return t.Size}}),Object.defineProperty(e,"openModal",{enumerable:!0,get:function(){return t.openModal}}),Object.defineProperty(e,"closeModal",{enumerable:!0,get:function(){return t.closeModal}}),Object.defineProperty(e,"updateModalSize",{enumerable:!0,get:function(){return t.updateModalSize}}),Object.defineProperty(e,"clickFooterButton",{enumerable:!0,get:function(){return t.clickFooterButton}}),Object.defineProperty(e,"update",{enumerable:!0,get:function(){return t.update}}),Object.defineProperty(e,"data",{enumerable:!0,get:function(){return t.data}}),Object.defineProperty(e,"isMessageModal",{enumerable:!0,get:function(){return t.isMessageModal}}),Object.defineProperty(e,"Modal",{enumerable:!0,get:function(){return t.Modal}});var o=function(i,n){return r.isIframeModal(n)?new r.ModalIframe(i,n):new r.ModalMessage(i,n)};e.create=o})(Oe);var Se={},Me={},R={};Object.defineProperty(R,"__esModule",{value:!0});R.isPermitted=R.getPermissionKey=R.isPerformanceOrWebVitalsAction=R.isAppMessage=R.isAppBridgeAction=void 0;var Je=ee,Y=U,xe=j;function et(e){return e instanceof Object&&Object.prototype.hasOwnProperty.call(e,"type")&&e.type.toString().startsWith(Y.PREFIX)}R.isAppBridgeAction=et;function tt(e){if(typeof e!="object"||!e.data||typeof e.data!="object")return!1;var r=e.data;return Object.prototype.hasOwnProperty.call(r,"type")&&xe.findMatchInEnum(Je.MessageType,r.type)!==void 0}R.isAppMessage=tt;function nt(e){var r=e.type;return r.match(/^APP::(PERFORMANCE|WEB_VITALS)::/)}R.isPerformanceOrWebVitalsAction=nt;function Te(e){return e.replace(new RegExp("^"+Y.PREFIX+Y.SEPARATOR+"\\w+"+Y.SEPARATOR),"")}R.getPermissionKey=Te;function rt(e,r,t){var o=r.group,i=r.type;if(!o||!Object.prototype.hasOwnProperty.call(e,o))return!1;var n=e[o];if(!n)return!1;var u=Te(i);return n[u]?n[u][t]===!0:!1}R.isPermitted=rt;var Z={};(function(e){var r,t;Object.defineProperty(e,"__esModule",{value:!0}),e.isUnframed=e.isClient=e.isServer=void 0,e.isServer=typeof window>"u",e.isClient=!e.isServer,e.isUnframed=e.isClient&&((t=(r=window.navigator)===null||r===void 0?void 0:r.userAgent)===null||t===void 0?void 0:t.indexOf("Unframed"))>0})(Z);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createTransportListener=e.fromWindow=e.fromFrame=e.Context=void 0;var r=$,t=R,o=ee,i=L,n=Z;(function(c){c.Modal="Modal",c.Main="Main"})(e.Context||(e.Context={}));function u(c,s,y){var p=[],l=c.host,f=c.window;if(!l)throw r.fromAction("App frame is undefined",r.AppActionType.WINDOW_UNDEFINED);return n.isUnframed&&window.MobileWebView&&Object.assign(window.MobileWebView,{postMessageToIframe:function(b,P){f==null||f.postMessage(b,P),a(b)&&l.postMessage(JSON.stringify(b.payload),location.origin)},updateIframeUrl:function(b){var P=window.location,O=(c.window||{}).location;try{var M=new URL(b).origin;M===s&&O?O.replace(b):P.href=b}catch{}}}),l.addEventListener("message",function(b){if(!(b.source===l||!t.isAppMessage(b))){if(b.origin!==s){var P="Message origin '"+b.origin+"' does not match app origin '"+s+"'.",O=r.invalidOriginAction(P),M={type:"dispatch",payload:O};f==null||f.postMessage(M,b.origin);return}if(n.isUnframed&&window.MobileWebView){var O=JSON.stringify({id:"unframed://fromClient",origin:s,data:b.data});window.MobileWebView.postMessage(O);return}for(var T=0,B=p;T<B.length;T++){var g=B[T];g(b)}}}),{context:y,localOrigin:s,frameWindow:f,hostFrame:l,dispatch:function(b){f==null||f.postMessage(b,s)},subscribe:function(b){return i.addAndRemoveFromCollection(p,b)}}}e.fromFrame=u;function v(c,s){var y=[];return typeof window!==void 0&&window.addEventListener("message",function(p){if(!(window===c&&!n.isUnframed||p.source!==c||!(t.isAppBridgeAction(p.data.payload)||t.isAppMessage(p))))for(var l=0,f=y;l<f.length;l++){var b=f[l];b(p)}}),{localOrigin:s,hostFrame:c,dispatch:function(p){var l;if(!((l=p.source)===null||l===void 0)&&l.host){if(n.isUnframed&&window&&window.MobileWebView){var f=JSON.stringify({id:"unframed://fromClient",origin:s,data:p});window.MobileWebView.postMessage(f);return}var b=new URL("https://"+p.source.host).origin;c.postMessage(p,b)}},subscribe:function(p){return i.addAndRemoveFromCollection(y,p)}}}e.fromWindow=v;function d(){var c=[],s={};function y(p){function l(){if(arguments.length<2)return i.addAndRemoveFromCollection(c,{callback:arguments[0]});var f=Array.from(arguments),b=f[0],P=f[1],O=f[2],M={callback:P,id:O},T={type:b,id:O};return Object.prototype.hasOwnProperty.call(s,b)||(s[b]=[]),p&&p(o.MessageType.Subscribe,T),i.addAndRemoveFromCollection(s[b],M,function(){p&&p(o.MessageType.Unsubscribe,T)})}return l}return{createSubscribeHandler:y,handleMessage:function(p){c.forEach(function(l){return l.callback(p)})},handleActionDispatch:function(p){var l=p.type,f=p.payload,b=!1;if(Object.prototype.hasOwnProperty.call(s,l))for(var P=0,O=s[l];P<O.length;P++){var M=O[P],T=M.id,B=M.callback,g=f&&f.id===T;(g||!T)&&(B(f),b=!0)}return b}}}e.createTransportListener=d;function a(c){return c!==null&&typeof c=="object"&&!Array.isArray(c)&&c.type==="dispatch"&&typeof c.payload=="object"}})(Me);(function(e){var r=h&&h.__createBinding||(Object.create?function(o,i,n,u){u===void 0&&(u=n),Object.defineProperty(o,u,{enumerable:!0,get:function(){return i[n]}})}:function(o,i,n,u){u===void 0&&(u=n),o[u]=i[n]}),t=h&&h.__exportStar||function(o,i){for(var n in o)n!=="default"&&!Object.prototype.hasOwnProperty.call(i,n)&&r(i,o,n)};Object.defineProperty(e,"__esModule",{value:!0}),t(Me,e)})(Se);var C={},Ie={};(function(e){var r={};Object.defineProperty(e,"__esModule",{value:!0}),e.isDevelopmentClient=e.isProduction=e.isDevelopment=e.isUnframed=e.isServer=e.isClient=void 0;var t=Z,o=Z;Object.defineProperty(e,"isClient",{enumerable:!0,get:function(){return o.isClient}}),Object.defineProperty(e,"isServer",{enumerable:!0,get:function(){return o.isServer}}),Object.defineProperty(e,"isUnframed",{enumerable:!0,get:function(){return o.isUnframed}}),e.isDevelopment=typeof process<"u"&&r&&!1,e.isProduction=!e.isDevelopment,e.isDevelopmentClient=e.isDevelopment&&t.isClient})(Ie);Object.defineProperty(C,"__esModule",{value:!0});C.isShopifyPing=C.isShopifyPOS=C.isShopifyMobile=C.isShopifyEmbedded=C.isMobile=void 0;var he=Ie;function it(){return we()||Ce()||Re()}C.isMobile=it;function ot(){return he.isClient&&window.top!==window.self||he.isUnframed}C.isShopifyEmbedded=ot;function we(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify Mobile")>=0}C.isShopifyMobile=we;function Ce(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify POS")>=0}C.isShopifyPOS=Ce;function Re(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify Ping")>=0}C.isShopifyPing=Re;var at=h&&h.__awaiter||function(e,r,t,o){function i(n){return n instanceof t?n:new t(function(u){u(n)})}return new(t||(t=Promise))(function(n,u){function v(c){try{a(o.next(c))}catch(s){u(s)}}function d(c){try{a(o.throw(c))}catch(s){u(s)}}function a(c){c.done?n(c.value):i(c.value).then(v,d)}a((o=o.apply(e,r||[])).next())})},ut=h&&h.__generator||function(e,r){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},o,i,n,u;return u={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function v(a){return function(c){return d([a,c])}}function d(a){if(o)throw new TypeError("Generator is already executing.");for(;t;)try{if(o=1,i&&(n=a[0]&2?i.return:a[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,a[1])).done)return n;switch(i=0,n&&(a=[a[0]&2,n.value]),a[0]){case 0:case 1:n=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,i=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!n||a[1]>n[0]&&a[1]<n[3])){t.label=a[1];break}if(a[0]===6&&t.label<n[1]){t.label=n[1],n=a;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(a);break}n[2]&&t.ops.pop(),t.trys.pop();continue}a=r.call(e,t)}catch(c){a=[6,c],i=0}finally{o=n=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(k,"__esModule",{value:!0});k.createMutationObserver=k.setupModalAutoSizing=void 0;var ct=Oe,st=Se,ft=C,ae="app-bridge-utils-modal-auto-size",X=lt();function lt(){if(typeof document>"u")return null;var e=document.createElement("style");return e.type="text/css",e.innerHTML="."+ae+" { overflow: hidden; height: auto; min-height: auto; }",e}function dt(e,r){if(!X)return function(){};var t=document.getElementsByTagName("head")[0],o=document.body.classList;t.appendChild(X),o.add(ae);var i=Ne(e,r);return function(){o.remove(ae),t.contains(X)&&t.removeChild(X),i&&i.disconnect()}}function pt(e){return at(this,void 0,void 0,function(){function r(){o&&(o(),o=void 0)}function t(i){var n=i.context,u=i.modal.id;return ft.isMobile()||n!==st.Context.Modal?(r(),r):(o||(o=dt(e,u)),r)}var o;return ut(this,function(i){switch(i.label){case 0:return[4,e.getState().then(t)];case 1:return i.sent(),[2,r]}})})}k.setupModalAutoSizing=pt;function Ne(e,r){if(typeof document>"u")return;var t=-1,o,i={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},n=new MutationObserver(u);n.observe(document,i),v();function u(){o&&window.clearTimeout(o),o=window.setTimeout(v,16)}function v(){var d=document.body.scrollHeight;d!==t&&(t=d,e.dispatch(ct.updateModalSize({id:r,height:String(d)})))}return n}k.createMutationObserver=Ne;var je={},H={},De={},Be={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.respond=e.request=e.Action=void 0;var r=j,t=D,o;(function(u){u.REQUEST="APP::SESSION_TOKEN::REQUEST",u.RESPOND="APP::SESSION_TOKEN::RESPOND"})(o=e.Action||(e.Action={}));function i(){return r.actionWrapper({group:t.Group.SessionToken,type:o.REQUEST})}e.request=i;function n(u){return r.actionWrapper({payload:u,group:t.Group.SessionToken,type:o.RESPOND})}e.respond=n})(Be);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.respond=e.request=e.Action=void 0;var r=Be;Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return r.Action}}),Object.defineProperty(e,"request",{enumerable:!0,get:function(){return r.request}}),Object.defineProperty(e,"respond",{enumerable:!0,get:function(){return r.respond}})})(De);var le={},de={};const ht="@shopify/app-bridge",vt="3.7.10",yt={name:ht,version:vt};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getPackageName=e.getVersion=e.getMergedProps=e.updateActionFromPayload=e.isValidOptionalString=e.isValidOptionalNumber=e.NonSnakeCaseGroup=e.getEventNameSpace=e.forEachInEnum=e.findMatchInEnum=e.actionWrapper=void 0;var r=j;Object.defineProperty(e,"actionWrapper",{enumerable:!0,get:function(){return r.actionWrapper}}),Object.defineProperty(e,"findMatchInEnum",{enumerable:!0,get:function(){return r.findMatchInEnum}}),Object.defineProperty(e,"forEachInEnum",{enumerable:!0,get:function(){return r.forEachInEnum}}),Object.defineProperty(e,"getEventNameSpace",{enumerable:!0,get:function(){return r.getEventNameSpace}}),Object.defineProperty(e,"NonSnakeCaseGroup",{enumerable:!0,get:function(){return r.NonSnakeCaseGroup}}),Object.defineProperty(e,"isValidOptionalNumber",{enumerable:!0,get:function(){return r.isValidOptionalNumber}}),Object.defineProperty(e,"isValidOptionalString",{enumerable:!0,get:function(){return r.isValidOptionalString}}),Object.defineProperty(e,"updateActionFromPayload",{enumerable:!0,get:function(){return r.updateActionFromPayload}}),Object.defineProperty(e,"getMergedProps",{enumerable:!0,get:function(){return r.getMergedProps}});var t=yt;function o(){return t.version}e.getVersion=o;function i(){return t.name}e.getPackageName=i})(de);var pe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ComponentType=e.Group=void 0;var r=D;Object.defineProperty(e,"Group",{enumerable:!0,get:function(){return r.Group}}),Object.defineProperty(e,"ComponentType",{enumerable:!0,get:function(){return r.ComponentType}})})(pe);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.networkAction=e.persistenceAction=e.unsupportedOperationAction=e.unexpectedAction=e.invalidAction=e.invalidActionType=e.invalidPayload=e.Message=e.fromAction=e.Action=e.permissionAction=e.isErrorEventName=e.throwError=e.invalidOriginAction=e.AppBridgeError=e.AppActionType=void 0;var r=$;Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return r.Action}}),Object.defineProperty(e,"fromAction",{enumerable:!0,get:function(){return r.fromAction}});var t=de,o=pe,i=$;Object.defineProperty(e,"AppActionType",{enumerable:!0,get:function(){return i.AppActionType}}),Object.defineProperty(e,"AppBridgeError",{enumerable:!0,get:function(){return i.AppBridgeError}}),Object.defineProperty(e,"invalidOriginAction",{enumerable:!0,get:function(){return i.invalidOriginAction}}),Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return i.throwError}}),Object.defineProperty(e,"isErrorEventName",{enumerable:!0,get:function(){return i.isErrorEventName}}),Object.defineProperty(e,"permissionAction",{enumerable:!0,get:function(){return i.permissionAction}});function n(p,l,f){var b=l.payload;return t.actionWrapper({type:p,group:o.Group.Error,payload:{action:l,message:f,type:p,id:b&&b.id?b.id:void 0}})}(function(p){p.MISSING_PAYLOAD="Missing payload",p.INVALID_PAYLOAD_ID="Id in payload is missing or invalid"})(e.Message||(e.Message={}));function u(p,l){return n(r.Action.INVALID_PAYLOAD,p,l||"The action's payload is missing required properties or has invalid properties")}e.invalidPayload=u;function v(p,l){return t.actionWrapper({group:o.Group.Error,payload:{action:p,message:l||"The action type is invalid or unsupported",type:r.Action.INVALID_ACTION_TYPE},type:r.Action.INVALID_ACTION_TYPE})}e.invalidActionType=v;function d(p,l){return t.actionWrapper({group:o.Group.Error,payload:{action:p,message:l||"The action's has missing/invalid values for `group`, `type` or `version`",type:r.Action.INVALID_ACTION},type:r.Action.INVALID_ACTION})}e.invalidAction=d;function a(p,l){return t.actionWrapper({group:o.Group.Error,payload:{action:p,message:l||"Action cannot be called at this time",type:r.Action.UNEXPECTED_ACTION},type:r.Action.UNEXPECTED_ACTION})}e.unexpectedAction=a;function c(p,l){return n(r.Action.UNSUPPORTED_OPERATION,p,l||"The action type is unsupported")}e.unsupportedOperationAction=c;function s(p,l){return n(r.Action.PERSISTENCE,p,l||"Action cannot be persisted on server")}e.persistenceAction=s;function y(p,l){return n(r.Action.NETWORK,p,l||"Network error")}e.networkAction=y})(le);var bt=h&&h.__createBinding||(Object.create?function(e,r,t,o){o===void 0&&(o=t),Object.defineProperty(e,o,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,o){o===void 0&&(o=t),e[o]=r[t]}),gt=h&&h.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),_t=h&&h.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&bt(r,e,t);return gt(r,e),r},Ot=h&&h.__awaiter||function(e,r,t,o){function i(n){return n instanceof t?n:new t(function(u){u(n)})}return new(t||(t=Promise))(function(n,u){function v(c){try{a(o.next(c))}catch(s){u(s)}}function d(c){try{a(o.throw(c))}catch(s){u(s)}}function a(c){c.done?n(c.value):i(c.value).then(v,d)}a((o=o.apply(e,r||[])).next())})},At=h&&h.__generator||function(e,r){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},o,i,n,u;return u={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function v(a){return function(c){return d([a,c])}}function d(a){if(o)throw new TypeError("Generator is already executing.");for(;t;)try{if(o=1,i&&(n=a[0]&2?i.return:a[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,a[1])).done)return n;switch(i=0,n&&(a=[a[0]&2,n.value]),a[0]){case 0:case 1:n=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,i=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!n||a[1]>n[0]&&a[1]<n[3])){t.label=a[1];break}if(a[0]===6&&t.label<n[1]){t.label=n[1],n=a;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(a);break}n[2]&&t.ops.pop(),t.trys.pop();continue}a=r.call(e,t)}catch(c){a=[6,c],i=0}finally{o=n=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(H,"__esModule",{value:!0});H.getSessionToken=void 0;var ve=_t(De),ye=le;function Pt(e){return Ot(this,void 0,void 0,function(){return At(this,function(r){return[2,new Promise(function(t,o){var i=e.subscribe(ve.Action.RESPOND,function(n){var u=n.sessionToken;u?t(u):o(ye.fromAction("Failed to retrieve a session token",ye.Action.FAILED_AUTHENTICATION)),i()});e.dispatch(ve.request())})]})})}H.getSessionToken=Pt;var te={},J=h&&h.__assign||function(){return J=Object.assign||function(e){for(var r,t=1,o=arguments.length;t<o;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},J.apply(this,arguments)},mt=h&&h.__awaiter||function(e,r,t,o){function i(n){return n instanceof t?n:new t(function(u){u(n)})}return new(t||(t=Promise))(function(n,u){function v(c){try{a(o.next(c))}catch(s){u(s)}}function d(c){try{a(o.throw(c))}catch(s){u(s)}}function a(c){c.done?n(c.value):i(c.value).then(v,d)}a((o=o.apply(e,r||[])).next())})},Et=h&&h.__generator||function(e,r){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},o,i,n,u;return u={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function v(a){return function(c){return d([a,c])}}function d(a){if(o)throw new TypeError("Generator is already executing.");for(;t;)try{if(o=1,i&&(n=a[0]&2?i.return:a[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,a[1])).done)return n;switch(i=0,n&&(a=[a[0]&2,n.value]),a[0]){case 0:case 1:n=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,i=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!n||a[1]>n[0]&&a[1]<n[3])){t.label=a[1];break}if(a[0]===6&&t.label<n[1]){t.label=n[1],n=a;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(a);break}n[2]&&t.ops.pop(),t.trys.pop();continue}a=r.call(e,t)}catch(c){a=[6,c],i=0}finally{o=n=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(te,"__esModule",{value:!0});te.authenticatedFetch=void 0;var St=H;function Mt(e,r){var t=this;return r===void 0&&(r=fetch),function(o,i){return i===void 0&&(i={}),mt(t,void 0,void 0,function(){var n,u,v;return Et(this,function(d){switch(d.label){case 0:return[4,St.getSessionToken(e)];case 1:return n=d.sent(),u=new Headers(i.headers),u.append("Authorization","Bearer "+n),u.append("X-Requested-With","XMLHttpRequest"),v={},u.forEach(function(a,c){v[c]=a}),[2,r(o,J(J({},i),{headers:v}))]}})})}}te.authenticatedFetch=Mt;(function(e){var r=h&&h.__createBinding||(Object.create?function(o,i,n,u){u===void 0&&(u=n),Object.defineProperty(o,u,{enumerable:!0,get:function(){return i[n]}})}:function(o,i,n,u){u===void 0&&(u=n),o[u]=i[n]}),t=h&&h.__exportStar||function(o,i){for(var n in o)n!=="default"&&!Object.prototype.hasOwnProperty.call(i,n)&&r(i,o,n)};Object.defineProperty(e,"__esModule",{value:!0}),t(H,e),t(te,e)})(je);var Ue={},q={},Le={},ue={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.respond=e.Action=void 0;var r=j,t=D,o;(function(n){n.REQUEST="APP::AUTH_CODE::REQUEST",n.RESPOND="APP::AUTH_CODE::RESPOND"})(o=e.Action||(e.Action={}));function i(n){return r.actionWrapper({payload:n,group:t.Group.AuthCode,type:o.RESPOND})}e.respond=i})(ue);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.request=e.Action=e.respond=void 0;var r=ue;Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return r.Action}});var t=de,o=pe,i=ue;Object.defineProperty(e,"respond",{enumerable:!0,get:function(){return i.respond}});function n(u){return t.actionWrapper({group:o.Group.AuthCode,type:r.Action.REQUEST,payload:{id:u}})}e.request=n})(Le);var Fe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.generateUuid=void 0;var r=W;Object.defineProperty(e,"generateUuid",{enumerable:!0,get:function(){return r.generateUuid}}),e.default=r.generateUuid})(Fe);var Tt=h&&h.__createBinding||(Object.create?function(e,r,t,o){o===void 0&&(o=t),Object.defineProperty(e,o,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,o){o===void 0&&(o=t),e[o]=r[t]}),It=h&&h.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),wt=h&&h.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Tt(r,e,t);return It(r,e),r},Ct=h&&h.__awaiter||function(e,r,t,o){function i(n){return n instanceof t?n:new t(function(u){u(n)})}return new(t||(t=Promise))(function(n,u){function v(c){try{a(o.next(c))}catch(s){u(s)}}function d(c){try{a(o.throw(c))}catch(s){u(s)}}function a(c){c.done?n(c.value):i(c.value).then(v,d)}a((o=o.apply(e,r||[])).next())})},Rt=h&&h.__generator||function(e,r){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},o,i,n,u;return u={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function v(a){return function(c){return d([a,c])}}function d(a){if(o)throw new TypeError("Generator is already executing.");for(;t;)try{if(o=1,i&&(n=a[0]&2?i.return:a[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,a[1])).done)return n;switch(i=0,n&&(a=[a[0]&2,n.value]),a[0]){case 0:case 1:n=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,i=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!n||a[1]>n[0]&&a[1]<n[3])){t.label=a[1];break}if(a[0]===6&&t.label<n[1]){t.label=n[1],n=a;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(a);break}n[2]&&t.ops.pop(),t.trys.pop();continue}a=r.call(e,t)}catch(c){a=[6,c],i=0}finally{o=n=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Nt=h&&h.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(q,"__esModule",{value:!0});q.getAuthorizationCodePayload=void 0;var be=wt(Le),ge=le,jt=Nt(Fe);function Dt(e){return Ct(this,void 0,void 0,function(){return Rt(this,function(r){return[2,new Promise(function(t,o){var i=jt.default(),n=e.subscribe(be.Action.RESPOND,function(u){switch(u==null?void 0:u.status){case"needsExchange":t(u);break;default:o(ge.fromAction("Failed to retrieve an authorization code",ge.Action.FAILED_AUTHENTICATION))}n()},i);e.dispatch(be.request(i))})]})})}q.getAuthorizationCodePayload=Dt;var ne={},Bt=h&&h.__awaiter||function(e,r,t,o){function i(n){return n instanceof t?n:new t(function(u){u(n)})}return new(t||(t=Promise))(function(n,u){function v(c){try{a(o.next(c))}catch(s){u(s)}}function d(c){try{a(o.throw(c))}catch(s){u(s)}}function a(c){c.done?n(c.value):i(c.value).then(v,d)}a((o=o.apply(e,r||[])).next())})},Ut=h&&h.__generator||function(e,r){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},o,i,n,u;return u={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function v(a){return function(c){return d([a,c])}}function d(a){if(o)throw new TypeError("Generator is already executing.");for(;t;)try{if(o=1,i&&(n=a[0]&2?i.return:a[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,a[1])).done)return n;switch(i=0,n&&(a=[a[0]&2,n.value]),a[0]){case 0:case 1:n=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,i=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!n||a[1]>n[0]&&a[1]<n[3])){t.label=a[1];break}if(a[0]===6&&t.label<n[1]){t.label=n[1],n=a;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(a);break}n[2]&&t.ops.pop(),t.trys.pop();continue}a=r.call(e,t)}catch(c){a=[6,c],i=0}finally{o=n=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(ne,"__esModule",{value:!0});ne.userAuthorizedFetch=void 0;var Lt=q,Ft="auth/shopify/callback";function Gt(e){var r=e.headers.get("X-Shopify-API-Request-Failure-Unauthorized");return r?r.toLowerCase()==="true":!1}function kt(e){var r=this,t=e.app,o=e.callbackUri,i=o===void 0?Ft:o,n=e.isAuthorizationCodeRequired,u=n===void 0?Gt:n,v=e.fetchOperation;return function(d,a){return Bt(r,void 0,void 0,function(){var c,s,y,p,l,f,b,P;return Ut(this,function(O){switch(O.label){case 0:return[4,v(d,a)];case 1:return c=O.sent(),u(c)?[4,Lt.getAuthorizationCodePayload(t)]:[2,c];case 2:return s=O.sent(),y=s.code,p=s.hmac,l=s.shop,f=s.timestamp,b=encodeURI("https://"+window.location.hostname+"/"+i+"?code="+y+"&hmac="+p+"&shop="+l+"&timestamp="+f),[4,v(b,{})];case 3:if(P=O.sent(),!P.ok)throw new Error("Failed to authorize request.");return[2,v(d,a)]}})})}}ne.userAuthorizedFetch=kt;(function(e){var r=h&&h.__createBinding||(Object.create?function(o,i,n,u){u===void 0&&(u=n),Object.defineProperty(o,u,{enumerable:!0,get:function(){return i[n]}})}:function(o,i,n,u){u===void 0&&(u=n),o[u]=i[n]}),t=h&&h.__exportStar||function(o,i){for(var n in o)n!=="default"&&!Object.prototype.hasOwnProperty.call(i,n)&&r(i,o,n)};Object.defineProperty(e,"__esModule",{value:!0}),t(q,e),t(ne,e)})(Ue);(function(e){var r=h&&h.__createBinding||(Object.create?function(o,i,n,u){u===void 0&&(u=n),Object.defineProperty(o,u,{enumerable:!0,get:function(){return i[n]}})}:function(o,i,n,u){u===void 0&&(u=n),o[u]=i[n]}),t=h&&h.__exportStar||function(o,i){for(var n in o)n!=="default"&&!Object.prototype.hasOwnProperty.call(i,n)&&r(i,o,n)};Object.defineProperty(e,"__esModule",{value:!0}),t(k,e),t(C,e),t(je,e),t(Ue,e)})(_e);(function(e){var r=h&&h.__createBinding||(Object.create?function(o,i,n,u){u===void 0&&(u=n),Object.defineProperty(o,u,{enumerable:!0,get:function(){return i[n]}})}:function(o,i,n,u){u===void 0&&(u=n),o[u]=i[n]}),t=h&&h.__exportStar||function(o,i){for(var n in o)n!=="default"&&!Object.prototype.hasOwnProperty.call(i,n)&&r(i,o,n)};Object.defineProperty(e,"__esModule",{value:!0}),t(_e,e)})(We);export{We as a,Wt as g};
