const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-CeoOiDBX.js","assets/react-vendor-BXVC7v0l.js","assets/app-bridge-DUY42B6P.js","assets/vendor-Cs_VgJ2r.js","assets/sessionFetch-BDCRVftH.js","assets/usePlanHierarchy-fXt-6sDq.js","assets/AIEOScoreCard-D4wil_3F.js","assets/polaris-5g7ljj7S.js","assets/polaris-C7YjYK5e.css","assets/BulkEdit-L4KVK175.js","assets/useShopApi-BPGAW5iN.js","assets/UpgradeModal-Cnm_AVJ5.js","assets/TokenPurchaseModal-DtlNlPTu.js","assets/StoreMetadataBanner-3fUD1Drv.js","assets/Collections-DtuDOows.js","assets/Sitemap-DNOW6Ajv.js","assets/tokenEstimates-Dgf19ZiR.js","assets/StoreMetadata-DYnZN0SD.js","assets/SchemaData-BnK0oeBA.js","assets/Settings-C5i14Dxn.js","assets/AiTesting-C6ORk-20.js","assets/Billing-D4ASJo-a.js","assets/CleanUninstall-CmcQrpr4.js","assets/ContactSupport-CI1lx0pw.js"])))=>i.map(i=>d[i]);
import{j as e,r as t,R as n,d as o}from"./react-vendor-BXVC7v0l.js";import{B as i,I as s,T as a,C as r,A as l,F as c,P as d}from"./polaris-5g7ljj7S.js";import"./app-bridge-DUY42B6P.js";import"./vendor-Cs_VgJ2r.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const p={},h=function(e,t,n){let o=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));o=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in p)return;p[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,n&&i.setAttribute("nonce",n),document.head.appendChild(i),t?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return o.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})},u=(window.location.hostname.includes("staging"),(...e)=>{}),m=(e,t="")=>{if("undefined"!=typeof window&&window.gtag)try{window.gtag("event","page_view",{page_path:e,page_title:t||document.title,page_location:window.location.href})}catch(n){}};function g({sectionTitle:t,lang:n,setLang:o,t:r}){return e.jsx(i,{padding:"400",borderBlockEndWidth:"025",borderColor:"border",background:"bg",children:e.jsx(s,{align:"space-between",blockAlign:"center",children:e.jsx(a,{as:"h1",variant:"headingLg",children:t})})})}const w={en:()=>h(()=>import("./en-f3Ot6UFw.js"),[]),de:()=>h(()=>import("./de-BzljQAZK.js"),[]),es:()=>h(()=>import("./es-Tn8hxjdM.js"),[]),fr:()=>h(()=>import("./fr-D_KVKzsq.js"),[])},f=Object.keys(w);function _(){const[e,n]=t.useState(()=>function(){try{const e=localStorage.getItem("app_lang");return f.includes(e)?e:null}catch{return null}}()||"en"),[o,i]=t.useState({});t.useEffect(()=>{let t=!1;return async function(){const n=w[e]||w.en,o=await n();t||i(o.default||o)}(),function(e){try{localStorage.setItem("app_lang",e)}catch{}}(e),()=>{t=!0}},[e]);const s=t.useMemo(()=>(e,t="")=>{const n=null==e?void 0:e.split(".").reduce((e,t)=>e&&void 0!==e[t]?e[t]:void 0,o);return null!=n?String(n):t||e},[o]);return{lang:e,setLang:n,t:s,dict:o,langs:f}}const j=n.lazy(()=>h(()=>import("./Dashboard-CeoOiDBX.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),x=n.lazy(()=>h(()=>import("./BulkEdit-L4KVK175.js"),__vite__mapDeps([9,1,2,3,10,11,7,8,12,13]))),y=n.lazy(()=>h(()=>import("./Collections-DtuDOows.js"),__vite__mapDeps([14,1,2,3,4,11,7,8,12,13]))),b=n.lazy(()=>h(()=>import("./Sitemap-DNOW6Ajv.js"),__vite__mapDeps([15,1,2,3,4,12,7,8,11,16]))),S=n.lazy(()=>h(()=>import("./StoreMetadata-DYnZN0SD.js"),__vite__mapDeps([17,1,2,3,4,7,8]))),E=n.lazy(()=>h(()=>import("./SchemaData-BnK0oeBA.js"),__vite__mapDeps([18,1,2,3,4,5,12,7,8,11,16]))),v=n.lazy(()=>h(()=>import("./Settings-C5i14Dxn.js"),__vite__mapDeps([19,1,2,3,4,12,7,8,5,16]))),P=n.lazy(()=>h(()=>import("./AiTesting-C6ORk-20.js"),__vite__mapDeps([20,1,2,3,4,12,7,8,6,5]))),I=n.lazy(()=>h(()=>import("./Billing-D4ASJo-a.js"),__vite__mapDeps([21,1,2,3,7,8]))),R=n.lazy(()=>h(()=>import("./CleanUninstall-CmcQrpr4.js"),__vite__mapDeps([22,1,2,3,4,7,8]))),L=n.lazy(()=>h(()=>import("./ContactSupport-CI1lx0pw.js"),__vite__mapDeps([23,1,2,3,10,7,8]))),A={Polaris:{ResourceList:{sortingLabel:"Sort by"}}},$=(e,t="")=>{try{return new URLSearchParams(window.location.search).get(e)||t}catch{return t}};function k(){const e=e=>e.replace(/^\/apps\/[^/]+/,"").replace(/^\/indexaize-unlock-ai-search/,"")||"/",[n,o]=t.useState(()=>e(window.location.pathname));return t.useEffect(()=>{const t=()=>{const t=e(window.location.pathname);o(t),m(t)};window.addEventListener("popstate",t);let n=window.location.pathname;const i=setInterval(()=>{window.location.pathname!==n&&(n=window.location.pathname,t())},50);return()=>{window.removeEventListener("popstate",t),clearInterval(i)}},[]),t.useEffect(()=>{"undefined"!=typeof window&&window.gtag,"undefined"!=typeof window&&window.fbq,m(n)},[]),{path:n}}function O({active:t,shop:n}){"/"===t||t.startsWith("/dashboard"),t.startsWith("/ai-seo"),t.startsWith("/billing"),t.startsWith("/settings");const o=new URLSearchParams(window.location.search).get("host"),i=new URLSearchParams;n&&i.set("shop",n),o&&i.set("host",o);const s=i.toString()?`?${i.toString()}`:"";return e.jsxs("ui-nav-menu",{children:[e.jsx("a",{href:`/${s}`,rel:"home",children:"Home"}),e.jsx("a",{href:`/dashboard${s}`,children:"Dashboard"}),e.jsx("a",{href:`/ai-seo${s}`,children:"Store Optimization for AI"}),e.jsx("a",{href:`/settings${s}`,children:"AI Discovery Features"}),e.jsx("a",{href:`/ai-testing${s}`,children:"AI Testing"}),e.jsx("a",{href:`/billing${s}`,children:"Plans & Billing"}),e.jsx("a",{href:`/clean-uninstall${s}`,children:"Clean & Uninstall"}),e.jsx("a",{href:`/contact-support${s}`,children:"Contact Support"})]})}const T=n.memo(({shop:t,plan:n})=>{const o=t||$("shop",""),a=window.location.pathname,l=(()=>{const e=a.replace(/^\/apps\/new-ai-seo/,"");return"/ai-seo"===e||"/ai-seo/products"===e?"products":"/ai-seo/collections"===e?"collections":"/ai-seo/sitemap"===e?"sitemap":"/ai-seo/store-metadata"===e?"store-metadata":"/ai-seo/schema-data"===e?"schema-data":"products"})(),c=e=>{const t=new URLSearchParams(window.location.search),n=t.toString()?`?${t.toString()}`:"";return"products"===e?`/ai-seo${n}`:`/ai-seo/${e}${n}`};return e.jsxs("div",{children:[e.jsx(i,{paddingBlockEnd:"400",children:e.jsx(r,{children:e.jsx(i,{padding:"200",children:e.jsxs(s,{gap:"100",children:[e.jsx("a",{href:c("products"),style:{padding:"8px 16px",borderRadius:"4px",backgroundColor:"products"===l?"#008060":"#f6f6f7",color:"products"===l?"white":"#202223",textDecoration:"none",display:"inline-block"},children:"Products"}),e.jsx("a",{href:c("collections"),style:{padding:"8px 16px",borderRadius:"4px",backgroundColor:"collections"===l?"#008060":"#f6f6f7",color:"collections"===l?"white":"#202223",textDecoration:"none",display:"inline-block"},children:"Collections"}),e.jsx("a",{href:c("sitemap"),style:{padding:"8px 16px",borderRadius:"4px",backgroundColor:"sitemap"===l?"#008060":"#f6f6f7",color:"sitemap"===l?"white":"#202223",textDecoration:"none",display:"inline-block"},children:"Sitemap"}),e.jsx("a",{href:c("store-metadata"),style:{padding:"8px 16px",borderRadius:"4px",backgroundColor:"store-metadata"===l?"#008060":"#f6f6f7",color:"store-metadata"===l?"white":"#202223",textDecoration:"none",display:"inline-block"},children:"Store metadata"}),e.jsx("a",{href:c("schema-data"),style:{padding:"8px 16px",borderRadius:"4px",backgroundColor:"schema-data"===l?"#008060":"#f6f6f7",color:"schema-data"===l?"white":"#202223",textDecoration:"none",display:"inline-block"},children:"Schema Data"})]})})})}),e.jsxs("div",{children:["products"===l&&e.jsx(x,{shop:o,globalPlan:n}),"collections"===l&&e.jsx(y,{shop:o,globalPlan:n}),"sitemap"===l&&e.jsx(b,{shop:o}),"store-metadata"===l&&e.jsx(S,{shop:o}),"schema-data"===l&&e.jsx(E,{shop:o})]})]})});function C(){const{path:n}=k(),{lang:o,setLang:s,t:p}=_(),h=!!new URLSearchParams(window.location.search).get("host"),m=$("shop",""),[w,f]=t.useState(()=>{try{const e=sessionStorage.getItem(`plan_${m}`);if(e){const t=JSON.parse(e);return t&&void 0!==t.language_limit?t:(sessionStorage.removeItem(`plan_${m}`),null)}return null}catch{return null}});t.useEffect(()=>{window.location.pathname;const e=async e=>{var t,n,o,i,s;if(e)try{const l="\n          query PlansMe($shop:String!) {\n            plansMe(shop:$shop) {\n              shop\n              plan\n              planKey\n              priceUsd\n              product_limit\n              language_limit\n              collection_limit\n              providersAllowed\n              modelsSuggested\n              subscriptionStatus\n              trial {\n                active\n                ends_at\n                days_left\n              }\n            }\n          }\n        ",c="/graphql";window.location.href;const d=5,p=800;let h=null,m=null;for(let s=1;s<=d;s++)try{const t=Date.now();h=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:l,variables:{shop:e}})});Date.now();u(h.status);break}catch(a){m=a;if(((null==(t=a.message)?void 0:t.includes("Failed to fetch"))||(null==(n=a.message)?void 0:n.includes("NetworkError"))||(null==(o=a.message)?void 0:o.includes("CORS"))||(null==(i=a.message)?void 0:i.includes("access control"))||"TypeError"===a.name)&&s<d){const e=p*s;u(),await new Promise(t=>setTimeout(t,e));continue}throw a}if(!h)throw m||new Error("GraphQL fetch failed after retries");if(202===h.status){await h.json().catch(()=>({}));f({shop:e,plan:null,planKey:null,subscriptionStatus:"pending",product_limit:0,language_limit:0,collection_limit:0,providersAllowed:[],modelsSuggested:[],trial:{active:!1}});const t=new URLSearchParams(window.location.search),n=t.get("host"),o=t.get("embedded"),i=window.location.pathname;return void(i.includes("/billing")||(window.location.href=`/billing?shop=${encodeURIComponent(e)}&embedded=${o}&host=${encodeURIComponent(n||"")}`))}if(!h.ok){await h.text();h.status;f({shop:e,plan:null,planKey:null,subscriptionStatus:"pending",product_limit:0,language_limit:0,collection_limit:0,providersAllowed:[],modelsSuggested:[],trial:{active:!1}});const t=new URLSearchParams(window.location.search),n=t.get("host"),o=t.get("embedded"),i=window.location.pathname;return void(i.includes("/billing")||(window.location.href=`/billing?shop=${encodeURIComponent(e)}&embedded=${o}&host=${encodeURIComponent(n||"")}`))}const g=await h.json(),w=null==(s=null==g?void 0:g.data)?void 0:s.plansMe;if(w){f(w);try{sessionStorage.setItem(`plan_${e}`,JSON.stringify(w))}catch(r){}const t=window.location.pathname.includes("/billing");if(!("pending"!==w.subscriptionStatus&&w.plan||t)){try{localStorage.removeItem(`onboardingOpen_${e}`)}catch(r){}const t=new URLSearchParams(window.location.search),n=t.get("host"),o=t.get("embedded");return void(window.location.href=`/billing?shop=${encodeURIComponent(e)}&embedded=${o}&host=${encodeURIComponent(n)}`)}}}catch(l){const e=new URLSearchParams(window.location.search).get("shop");if(e){f({shop:e,plan:null,planKey:null,subscriptionStatus:"pending",product_limit:0,language_limit:0,collection_limit:0,providersAllowed:[],modelsSuggested:[],trial:{active:!1}});const t=new URLSearchParams(window.location.search),n=t.get("host"),o=t.get("embedded");window.location.pathname.includes("/billing")||(window.location.href=`/billing?shop=${encodeURIComponent(e)}&embedded=${o}&host=${encodeURIComponent(n||"")}`)}}};(async()=>{const t=new URLSearchParams(window.location.search),n=t.get("shop"),o=t.get("id_token");if(n&&o)try{const t=await fetch("/token-exchange",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shop:n,id_token:o})});if(t.ok){await t.json()}else{await t.json().catch(()=>({error:"Failed to parse error response"}))}const i=new URL(window.location);i.searchParams.delete("id_token"),window.history.replaceState({},"",i),await e(n)}catch(i){n&&await e(n)}else n&&await e(n)})()},[]);const x=t.useMemo(()=>n.startsWith("/ai-seo")?"Store Optimization for AI":n.startsWith("/billing")?"Plans & Billing":n.startsWith("/settings")?"AI Discovery Features":n.startsWith("/ai-testing")?"AI Testing":n.startsWith("/clean-uninstall")?"Clean & Uninstall":n.startsWith("/contact-support")?"Contact Support":"Dashboard",[n]),[y,b]=t.useState(!1);if(t.useEffect(()=>{const e=setTimeout(()=>{w||b(!0)},5e3);return()=>clearTimeout(e)},[w]),!w&&!y)return e.jsx(l,{i18n:A,children:e.jsx(c,{children:e.jsx(d,{children:e.jsx(i,{padding:"400",children:e.jsx(a,{children:"Loading..."})})})})});if(!w&&y){const t=new URLSearchParams(window.location.search),n=t.get("shop"),o=t.get("host"),s=t.get("embedded");return!window.location.pathname.includes("/billing")&&n&&(window.location.href=`/billing?shop=${encodeURIComponent(n)}&embedded=${s}&host=${encodeURIComponent(o||"")}`),e.jsx(l,{i18n:A,children:e.jsx(c,{children:e.jsx(d,{children:e.jsx(i,{padding:"400",children:e.jsx(a,{children:"Redirecting to billing..."})})})})})}return e.jsxs(l,{i18n:A,children:[h&&e.jsx(O,{active:n,shop:m}),e.jsx(c,{children:e.jsxs(d,{children:[e.jsx(g,{sectionTitle:x,lang:o,setLang:s,t:p,shop:m}),(()=>{const t=n.replace(/^\/apps\/new-ai-seo/,"");return"/"===t||"/dashboard"===t?e.jsx(j,{shop:m}):t.startsWith("/ai-seo")?e.jsx(T,{shop:m,plan:w}):"/billing"===n?e.jsx(I,{shop:m}):"/settings"===n?e.jsx(v,{shop:m}):"/contact-support"===n?e.jsx(L,{shop:m}):"/ai-testing"===n?e.jsx(P,{shop:m}):"/clean-uninstall"===n?e.jsx(R,{shop:m}):e.jsx(r,{children:e.jsxs(i,{padding:"400",children:[e.jsx(a,{variant:"headingMd",children:"Page not found"}),e.jsx(i,{paddingBlockStart:"200",children:e.jsxs(a,{children:['The page "',n,'" does not exist.']})})]})})})()]})})]})}const D=new URLSearchParams(window.location.search),U=D.get("host"),V=D.get("shop"),z="1"===D.get("embedded");function W(){const[n,o]=t.useState(!1),i=t.useMemo(()=>(window.__SHOPIFY_API_KEY,window.__SHOPIFY_API_KEY?(window.__SHOPIFY_API_KEY,window.__SHOPIFY_API_KEY):"2749a2f6d38ff5796ed256b5c9dc70a1"),[]);return t.useEffect(()=>{setTimeout(()=>o(!0),100)},[]),z&&U&&V?i?n?(i&&i.substring(0,8),e.jsx(C,{})):e.jsx("div",{children:"Loading..."}):e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx("h1",{children:"Configuration Error"}),e.jsx("p",{children:"Shopify API key is not configured."}),e.jsx("p",{children:"Please contact support."})]}):e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx("h1",{children:"Error: App must be loaded from Shopify Admin"}),e.jsxs("p",{children:["Shop: ",V||"Missing"]}),e.jsxs("p",{children:["Host: ",U||"Missing"]}),e.jsxs("p",{children:["Embedded: ",z?"Yes":"No"]}),e.jsx("a",{href:`https://admin.shopify.com/store/${null==V?void 0:V.replace(".myshopify.com","")}/apps`,children:"Go to Shopify Admin"})]})}window.location.href,document.getElementById("root");try{const t=document.getElementById("root");if(t){o(t).render(e.jsx(W,{}))}else;}catch(B){B.stack}export{u as d};
