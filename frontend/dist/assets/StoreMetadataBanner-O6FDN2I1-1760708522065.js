import{j as e}from"./app-bridge-BKomkboF-1760708522065.js";import{r as y}from"./react-vendor-tAaa2TlE-1760708522065.js";import{M as b,d as c,f as M,T as n,I as B,a as S,B as I}from"./polaris-BLrmXZrb-1760708522065.js";import{a as R,u as T}from"./index-DreoZNZD-1760708522065.js";function C({open:l,onClose:a,featureName:p="AI Enhancement",currentPlan:t="starter",errorMessage:i=null,minimumPlanRequired:r=null,features:f=null}){const o=()=>{a();const s=new URLSearchParams(window.location.search),u=s.toString()?`?${s.toString()}`:"";window.location.href=`/billing${u}`},m=f||["Collections optimization (Professional+)","AI Enhancement features with pay-per-use tokens","Advanced AI features","Growth Extra & Enterprise include monthly tokens"];return e.jsx(b,{open:l,onClose:a,title:"Upgrade Required",primaryAction:{content:"Upgrade Plan",onAction:o},secondaryActions:[{content:"Cancel",onAction:a}],children:e.jsx(b.Section,{children:e.jsxs(c,{gap:"400",children:[e.jsx(M,{tone:"warning",children:e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:i||`${p} requires a higher plan`})}),e.jsx(n,{variant:"bodyMd",children:e.jsxs("strong",{children:["Current plan: ",t]})}),r&&e.jsx(n,{variant:"bodyMd",children:e.jsxs("strong",{children:["Required plan: ",r," or higher"]})}),e.jsxs(c,{gap:"200",children:[e.jsx(n,{variant:"bodyMd",children:e.jsx("strong",{children:"Upgrade to unlock:"})}),e.jsx(c,{gap:"100",children:m.map((s,u)=>e.jsxs(n,{variant:"bodyMd",children:["✓ ",s]},u))})]})]})})})}function D({open:l,onClose:a,feature:p,tokensRequired:t,tokensAvailable:i,tokensNeeded:r,shop:f,needsUpgrade:o=!1,minimumPlan:d=null,currentPlan:m=null}){const s=()=>{const g=new URLSearchParams(window.location.search),A=g.toString()?`?${g.toString()}`:"";window.location.href=`/billing${A}`},j={"ai-seo-product-basic":"AI Search Optimization (Products)","ai-seo-product-enhanced":"AI Search Optimization (Products - Enhanced)","ai-seo-collection":"AI Search Optimization (Collections)","ai-testing-simulation":"AI Testing & Simulation","ai-schema-advanced":"Advanced Schema Data","ai-sitemap-optimized":"AI-Optimized Sitemap"}[p]||"This feature";return e.jsx(b,{open:l,onClose:a,title:"💳 Insufficient Tokens",primaryAction:{content:"Go to Billing",onAction:s},secondaryActions:[{content:"Cancel",onAction:a}],children:e.jsx(b.Section,{children:e.jsxs(c,{gap:"400",children:[e.jsx(M,{tone:"warning",children:e.jsxs(c,{gap:"200",children:[e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:"You don't have enough tokens to use AI Enhancement"}),e.jsxs(B,{gap:"400",align:"space-between",blockAlign:"center",children:[e.jsxs(S,{children:[e.jsx(n,{variant:"bodySm",tone:"subdued",children:"Current balance:"}),e.jsxs(n,{variant:"headingSm",fontWeight:"bold",children:[(i==null?void 0:i.toLocaleString())||0," tokens"]})]}),e.jsxs(S,{children:[e.jsx(n,{variant:"bodySm",tone:"subdued",children:"Required:"}),e.jsxs(n,{variant:"headingSm",fontWeight:"bold",children:[((i||0)+(r||0)).toLocaleString()," tokens"]})]}),e.jsxs(S,{children:[e.jsx(n,{variant:"bodySm",tone:"subdued",children:"You need:"}),e.jsx(n,{variant:"headingSm",fontWeight:"bold",as:"span",children:e.jsxs("span",{style:{color:"#D82C0D"},children:[(r==null?void 0:r.toLocaleString())||0," more"]})})]})]})]})}),e.jsx(S,{background:"bg-surface-secondary",padding:"400",borderRadius:"200",children:e.jsxs(c,{gap:"200",children:[e.jsx(n,{variant:"headingMd",children:j}),e.jsx(n,{variant:"bodySm",tone:"subdued",children:"✅ Buy tokens to use this AI-enhanced feature"}),o&&d&&e.jsxs(n,{variant:"bodySm",tone:"subdued",children:["✨ Or upgrade to ",d," plan to get tokens included"]})]})}),o&&d&&e.jsx(M,{tone:"info",children:e.jsxs(c,{gap:"200",children:[e.jsxs(n,{variant:"bodyMd",fontWeight:"semibold",children:["💡 Upgrade to ",d," to get tokens included"]}),e.jsxs(n,{variant:"bodySm",children:["Current plan: ",e.jsx("strong",{children:m})]}),e.jsxs(n,{variant:"bodySm",tone:"subdued",children:[d," plans include AI tokens every month. Or you can purchase tokens separately while staying on your current plan."]})]})}),e.jsx(S,{background:"bg-surface-secondary",padding:"300",borderRadius:"200",children:e.jsxs(c,{gap:"100",children:[e.jsx(n,{variant:"bodySm",tone:"subdued",children:"💡 Tokens enable AI-powered features like AI Enhancement and AI Testing"}),e.jsx(n,{variant:"bodySm",tone:"subdued",children:"♻️ Tokens never expire and roll over indefinitely"}),e.jsx(n,{variant:"bodySm",tone:"subdued",children:"🛒 Purchase tokens or upgrade your plan from the Billing page"})]})})]})})})}function W({globalPlan:l}){var w;const{t:a}=R(),{api:p}=T(),[t,i]=y.useState(null),[r,f]=y.useState(!0),[o,d]=y.useState(()=>sessionStorage.getItem("storeMetadataBannerDismissed")==="true");y.useEffect(()=>{m()},[]);const m=async()=>{try{console.log("[StoreMetadataBanner] Fetching metadata status...");const h=await p("/api/store/metadata-status");console.log("[StoreMetadataBanner] Status data:",h),i(h)}catch(h){console.error("[StoreMetadataBanner] Error fetching metadata status:",h)}finally{f(!1)}},s=()=>{d(!0),sessionStorage.setItem("storeMetadataBannerDismissed","true")},u=()=>{const h=new URLSearchParams(window.location.search),k=h.toString()?`?${h.toString()}`:"";window.location.href=`/ai-seo/store-metadata${k}`},j=((w=l==null?void 0:l.planKey)==null?void 0:w.toLowerCase())||"",g=["professional","growth","growth_extra","enterprise"].includes(j);if(console.log("[StoreMetadataBanner] Render check:",{loading:r,dismissed:o,status:t,hasMetadata:t==null?void 0:t.hasMetadata,planKey:j,isProfessionalOrHigher:g}),r||o||!t||t.hasMetadata||!g)return console.log("[StoreMetadataBanner] Not showing banner. Reason:",{loading:r,dismissed:o,noStatus:!t,hasMetadata:t==null?void 0:t.hasMetadata,notProfessionalOrHigher:!g}),null;console.log("[StoreMetadataBanner] SHOWING BANNER!");let A=a("storeMetadata.banner.title","⚡ Boost AI Quality"),x="",v=!1;return t.hasPolicies?!t.hasTargetAudience&&!t.hasBrandVoice&&(x=a("storeMetadata.banner.brandingMissing","Add target audience and brand voice to help AI generate more on-brand, engaging content that resonates with your customers.")):(v=!0,!t.hasShipping&&!t.hasReturns?x=a("storeMetadata.banner.policiesMissing","Add shipping and return policies to help AI generate accurate, policy-compliant content. This prevents AI from inventing incorrect delivery times or warranty claims."):t.hasShipping?t.hasReturns||(x=a("storeMetadata.banner.returnsMissing","Add return policy to help AI generate accurate content about returns and refunds.")):x=a("storeMetadata.banner.shippingMissing","Add shipping information to help AI generate accurate content about delivery options.")),e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsxs(M,{title:A,tone:v?"warning":"info",onDismiss:s,children:[e.jsx("p",{children:x}),e.jsx("div",{style:{marginTop:"0.75rem"},children:e.jsxs(B,{gap:"200",children:[e.jsx(I,{onClick:u,variant:"primary",children:a("storeMetadata.banner.action","Quick Setup (2 min)")}),!v&&e.jsx(I,{onClick:s,children:a("common.remindLater","Remind me later")})]})})]})})}export{D as I,W as S,C as U};
