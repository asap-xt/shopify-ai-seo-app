import{r as e,j as n}from"./react-vendor-BXVC7v0l.js";import{m as a}from"./sessionFetch-DvW1lR0s.js";import"./usePlanHierarchy-CpsbOjPs.js";import{T as s,I as t,a as i}from"./TokenPurchaseModal-DnK58cDo.js";import{U as o}from"./UpgradeModal-DYlOzGkq.js";import{e as r}from"./tokenEstimates-Dgf19ZiR.js";import{C as c,B as d,a as l,i as h,T as u,d as m,t as p,I as g,f as j,b as S,u as f,v as x,g as y,l as v,M as b}from"./polaris-LiLfZG0r.js";import"./app-bridge-DUY42B6P.js";import"./vendor-Cs_VgJ2r.js";import"./index-Bg1TwfJ3.js";const _=(e,n="")=>{try{return new URLSearchParams(window.location.search).get(e)||n}catch{return n}},w=e=>(e||"starter").toLowerCase().replace(/\s+/g,"_");function A({shop:A}){const O=A||_("shop","");_("shop","");const[P,I]=e.useState(0),[k,T]=e.useState(!0),[E,C]=e.useState({organization:null,website:null,products:[]}),[D,N]=e.useState(""),$=e.useMemo(()=>a(),[]),[q,z]=e.useState(""),[R,M]=e.useState(null),[B,L]=e.useState(null),[U,F]=e.useState(null),[G,Y]=e.useState(0),[J,Z]=e.useState({inProgress:!1,status:"idle",message:null,position:null,estimatedTime:null,generatedAt:null,schemaCount:0}),[W,Q]=e.useState(null),[V,X]=e.useState(!1),[H,K]=e.useState(!1),[ee,ne]=e.useState({}),[ae,se]=e.useState(!1),[te,ie]=e.useState(!1),[oe,re]=e.useState(!1),[ce,de]=e.useState(null),[le,he]=e.useState(!1),[ue,me]=e.useState(null),[pe,ge]=e.useState({material:!1,color:!1,size:!1,weight:!1,dimensions:!1,category:!1,audience:!1,reviews:!1,ratings:!0,enhancedDescription:!1,organization:!1}),[je,Se]=e.useState(!1);e.useEffect(()=>{O&&(ve(),fe(),xe())},[O,$]),e.useEffect(()=>()=>{W&&clearInterval(W)},[W]);const fe=async()=>{try{const n=await $(`/api/ai-discovery/settings?shop=${O}`);M(null==n?void 0:n.plan),L(w(null==n?void 0:n.plan)),Y((null==n?void 0:n.productCount)||0),(null==n?void 0:n.richAttributes)&&ge(e=>({...e,...n.richAttributes}));try{const e=await $(`/api/billing/info?shop=${O}`);(null==e?void 0:e.subscription)&&F(e.subscription)}catch(e){}}catch(n){}},xe=e.useCallback(async()=>{var e,n,a,s,t;try{const i=await $(`/api/schema/status?shop=${O}`);return Z({inProgress:i.inProgress||!1,status:i.status||"idle",message:i.message||null,position:(null==(e=i.queue)?void 0:e.position)||null,estimatedTime:(null==(n=i.queue)?void 0:n.estimatedTime)||null,generatedAt:(null==(a=i.schema)?void 0:a.generatedAt)||null,schemaCount:(null==(s=i.schema)?void 0:s.schemaCount)||0}),"completed"!==i.status||i.inProgress||(W&&(clearInterval(W),Q(null)),J.inProgress&&N(`Advanced Schema Data generated! (${(null==(t=i.schema)?void 0:t.schemaCount)||0} schemas)`)),"failed"===i.status&&(W&&(clearInterval(W),Q(null)),"NO_OPTIMIZED_PRODUCTS"===i.message?(me("NO_OPTIMIZED_PRODUCTS"),he(!0)):"ONLY_BASIC_SEO"===i.message&&(me("ONLY_BASIC_SEO"),he(!0))),i}catch(i){}},[O,$,W,J.inProgress]),ye=e.useCallback(()=>{W&&clearInterval(W),xe();const e=setInterval(()=>{xe()},1e4);Q(e)},[xe,W]),ve=async()=>{T(!0);try{const e=`/api/schema/preview?shop=${encodeURIComponent(O)}`,n=await $(e,{headers:{"X-Shop":O}});n.ok?(C(n.schemas),be(n.schemas)):N(`Error: ${n.error}`)}catch(e){N(`Failed to load schemas: ${e.message}`)}finally{T(!1)}},be=e=>{const n=[];e.organization&&n.push(e.organization),e.website&&n.push(e.website);const a=`<script type="application/ld+json">\n${JSON.stringify(n,null,2)}\n<\/script>`;z(a)};return k?n.jsx(c,{children:n.jsx(d,{padding:"400",children:n.jsxs(l,{gap:"400",align:"center",children:[n.jsx(h,{}),n.jsx(u,{children:"Loading schema data..."})]})})}):n.jsxs(n.Fragment,{children:[n.jsx(c,{children:n.jsx(d,{padding:"400",children:n.jsxs(l,{gap:"400",children:[n.jsx(u,{as:"h3",variant:"headingMd",children:"Structured Schema Data"}),n.jsx(m,{tone:"info",children:n.jsx(u,{children:"Structured data helps AI models understand your store content better, improving your visibility and search results."})}),n.jsxs(p,{tabs:[{id:"overview",content:"Overview",accessibilityLabel:"Overview"},{id:"installation",content:"Installation",accessibilityLabel:"Installation"}],selected:P,onSelect:I,children:[0===P&&n.jsx(d,{paddingBlockStart:"400",children:n.jsxs(l,{gap:"400",children:[n.jsx(c,{children:n.jsx(d,{padding:"300",children:n.jsxs(l,{gap:"300",children:[n.jsxs(g,{align:"space-between",children:[n.jsx(u,{as:"h4",variant:"headingSm",children:"Organization Schema"}),n.jsx(j,{tone:E.organization?"success":"warning",children:E.organization?"Active":"Not configured"})]}),!E.organization&&n.jsx(u,{as:"p",tone:"subdued",children:"Configure organization details in Store Metadata to enable this schema."})]})})}),n.jsx(c,{children:n.jsx(d,{padding:"300",children:n.jsxs(l,{gap:"300",children:[n.jsxs(g,{align:"space-between",children:[n.jsx(u,{as:"h4",variant:"headingSm",children:"WebSite Schema"}),n.jsx(j,{tone:E.website?"success":"warning",children:E.website?"Active":"Not configured"})]}),!E.website&&n.jsx(u,{as:"p",tone:"subdued",children:"Website schema is automatically generated from your store information."})]})})}),n.jsx(c,{children:n.jsx(d,{padding:"300",children:n.jsxs(l,{gap:"300",children:[n.jsxs(g,{align:"space-between",children:[n.jsx(u,{as:"h4",variant:"headingSm",children:"Product Schemas"}),n.jsx(j,{tone:"success",children:"Auto-generated"})]}),n.jsxs(u,{tone:"subdued",children:["Product schemas are automatically generated from your AI Optimisation data when pages load.",E.products.length>0&&` ${E.products.length} products have SEO data.`]}),n.jsx(d,{paddingBlockStart:"200",children:n.jsx(S,{onClick:async()=>{T(!0);try{const e=`/api/schema/generate?shop=${encodeURIComponent(O)}`,n=await $(e,{method:"POST",headers:{"X-Shop":O},body:{shop:O}});n.ok?(N("Schemas regenerated successfully!"),ve()):N(`Error: ${n.error}`)}catch(e){N(`Failed to regenerate: ${e.message}`)}finally{T(!1)}},loading:k,children:"Regenerate Basic Schemas"})})]})})})]})}),1===P&&n.jsx(d,{paddingBlockStart:"400",children:n.jsxs(l,{gap:"400",children:[n.jsx(m,{tone:"info",children:n.jsxs(l,{gap:"300",children:[n.jsx(u,{as:"h4",variant:"headingSm",children:"Theme Installation"}),n.jsxs(f,{type:"number",children:[n.jsx(f.Item,{children:"Go to your Shopify Admin → Online Store → Themes"}),n.jsx(f.Item,{children:'Click "Actions" → "Edit code" on your current theme'}),n.jsxs(f.Item,{children:["Open the file: ",n.jsx("code",{children:"layout/theme.liquid"})]}),n.jsxs(f.Item,{children:["Add this code before the closing ",n.jsx("code",{children:"</head>"})," tag:"]})]})]})}),n.jsx(c,{children:n.jsx(d,{padding:"300",children:n.jsxs(l,{gap:"300",children:[n.jsx(u,{as:"h4",variant:"headingSm",children:"Code to Install"}),n.jsx(d,{background:"bg-surface-secondary",padding:"200",borderRadius:"200",children:n.jsx("pre",{style:{fontSize:"12px",overflow:"auto",whiteSpace:"pre-wrap"},children:'{%- comment -%} Advanced Schema Data - Auto-generated by indexAIze - Unlock AI Search {%- endcomment -%}\n\n{%- comment -%} Organization & WebSite Schema (site-wide) {%- endcomment -%}\n{%- if shop.metafields.advanced_schema.shop_schemas -%}\n  <script type="application/ld+json">\n{{ shop.metafields.advanced_schema.shop_schemas.value }}\n  <\/script>\n{%- endif -%}\n\n{%- comment -%} Product Schema (product pages only) {%- endcomment -%}\n{%- if product -%}\n  {%- comment -%} Try Advanced Schema first (requires tokens/Enterprise plan) {%- endcomment -%}\n  {%- assign schema_key = \'schemas_\' | append: request.locale.iso_code -%}\n  {%- assign schemas_json = product.metafields.advanced_schema[schema_key].value -%}\n  {%- if schemas_json -%}\n    <script type="application/ld+json">\n{{ schemas_json }}\n    <\/script>\n  {%- else -%}\n    {%- comment -%} Fallback to basic SEO JSON-LD (available for all plans) {%- endcomment -%}\n    {%- assign seo_key = \'seo__\' | append: request.locale.iso_code -%}\n    {%- assign seo_data_json = product.metafields.seo_ai[seo_key].value | default: product.metafields.seo_ai.seo__en.value -%}\n    {%- if seo_data_json -%}\n      <script type="application/ld+json" id="seo-basic-jsonld-{{ product.id }}">\n      <\/script>\n      <script>\n        (function() {\n          try {\n            var seoData = JSON.parse({{ seo_data_json | json }});\n            if (seoData && seoData.jsonLd) {\n              var scriptTag = document.getElementById(\'seo-basic-jsonld-{{ product.id }}\');\n              if (scriptTag) {\n                scriptTag.textContent = JSON.stringify(seoData.jsonLd);\n              }\n            }\n          } catch(e) {\n            console.error(\'Failed to parse SEO JSON-LD:\', e);\n          }\n        })();\n      <\/script>\n    {%- endif -%}\n  {%- endif -%}\n{%- endif -%}\n\n{%- comment -%} Site-wide FAQ Schema {%- endcomment -%}\n{%- if shop.metafields.advanced_schema.site_faq -%}\n  <script type="application/ld+json">\n{{ shop.metafields.advanced_schema.site_faq.value }}\n  <\/script>\n{%- endif -%}'})}),n.jsx(g,{align:"end",children:n.jsx(S,{onClick:()=>{navigator.clipboard.writeText('{%- comment -%} Advanced Schema Data - Auto-generated by indexAIze - Unlock AI Search {%- endcomment -%}\n\n{%- comment -%} Organization & WebSite Schema (site-wide) {%- endcomment -%}\n{%- if shop.metafields.advanced_schema.shop_schemas -%}\n  <script type="application/ld+json">\n{{ shop.metafields.advanced_schema.shop_schemas.value }}\n  <\/script>\n{%- endif -%}\n\n{%- comment -%} Product Schema (product pages only) {%- endcomment -%}\n{%- if product -%}\n  {%- comment -%} Try Advanced Schema first (requires tokens/Enterprise plan) {%- endcomment -%}\n  {%- assign schema_key = \'schemas_\' | append: request.locale.iso_code -%}\n  {%- assign schemas_json = product.metafields.advanced_schema[schema_key].value -%}\n  {%- if schemas_json -%}\n    <script type="application/ld+json">\n{{ schemas_json }}\n    <\/script>\n  {%- else -%}\n    {%- comment -%} Fallback to basic SEO JSON-LD (available for all plans) {%- endcomment -%}\n    {%- assign seo_key = \'seo__\' | append: request.locale.iso_code -%}\n    {%- assign seo_data_json = product.metafields.seo_ai[seo_key].value | default: product.metafields.seo_ai.seo__en.value -%}\n    {%- if seo_data_json -%}\n      <script type="application/ld+json" id="seo-basic-jsonld-{{ product.id }}">\n      <\/script>\n      <script>\n        (function() {\n          try {\n            var seoData = JSON.parse({{ seo_data_json | json }});\n            if (seoData && seoData.jsonLd) {\n              var scriptTag = document.getElementById(\'seo-basic-jsonld-{{ product.id }}\');\n              if (scriptTag) {\n                scriptTag.textContent = JSON.stringify(seoData.jsonLd);\n              }\n            }\n          } catch(e) {\n            console.error(\'Failed to parse SEO JSON-LD:\', e);\n          }\n        })();\n      <\/script>\n    {%- endif -%}\n  {%- endif -%}\n{%- endif -%}\n\n{%- comment -%} Site-wide FAQ Schema {%- endcomment -%}\n{%- if shop.metafields.advanced_schema.site_faq -%}\n  <script type="application/ld+json">\n{{ shop.metafields.advanced_schema.site_faq.value }}\n  <\/script>\n{%- endif -%}'),N("Code copied to clipboard!")},children:"Copy Code"})}),n.jsx(m,{tone:"warning",children:n.jsx(u,{children:"Always backup your theme before making changes!"})})]})})}),n.jsx(c,{children:n.jsx(d,{padding:"300",children:n.jsxs(l,{gap:"300",children:[n.jsx(u,{as:"h4",variant:"headingSm",children:"Testing Your Installation"}),n.jsxs(f,{children:[n.jsx(f.Item,{children:"After installation, visit your store's homepage and product pages"}),n.jsx(f.Item,{children:"View the page source (right-click → View Source)"}),n.jsxs(f.Item,{children:["Search for ",n.jsx("code",{children:"application/ld+json"})," to find your schemas"]}),n.jsx(f.Item,{children:"Use the Validation tab to test with Google's tools"})]})]})})})]})})]})]})})}),n.jsx(d,{paddingBlockStart:"400",children:n.jsx(c,{children:n.jsx(d,{padding:"400",children:n.jsxs(l,{gap:"400",children:[n.jsx(u,{as:"h2",variant:"headingMd",children:"Advanced Schema Data"}),n.jsx(u,{variant:"bodyMd",tone:"subdued",children:"Advanced schemas use artificial intelligence to generate rich, contextual data for each product. This AI-enhanced structured data helps AI bots to understand your products deeply, resulting in better visibility and more accurate recommendations."}),n.jsx(m,{tone:"info",children:n.jsx("p",{children:"Generation creates BreadcrumbList, FAQPage, WebPage, Product and more schema types for each product. These include AI-generated FAQs based on product features, navigation breadcrumbs for better context, detailed product attributes (material, size, color), aggregate ratings, and semantic descriptions that standard Shopify schemas don't provide."})}),n.jsxs(g,{gap:"300",children:[n.jsx(S,{loading:J.inProgress,disabled:J.inProgress,onClick:async()=>{var e,n,a,s;try{const e=await $(`/ai/schema-data.json?shop=${O}`);if(e.schemas&&e.schemas.length>0&&!confirm("This will replace existing schema data. Continue?"))return;await $(`/api/schema/generate-all?shop=${O}`,{method:"POST",body:{shop:O}});N("Generating Advanced Schema Data... This runs in the background."),ye()}catch(t){if(402===t.status)return de(t),void(t.trialRestriction&&t.requiresActivation?se(!0):t.requiresPurchase?ie(!0):N("Advanced Schema Data requires activation or token purchase."));if((null==(e=t.message)?void 0:e.includes("NO_OPTIMIZED_PRODUCTS"))||(null==(n=t.error)?void 0:n.includes("NO_OPTIMIZED_PRODUCTS")))return me("NO_OPTIMIZED_PRODUCTS"),void he(!0);if((null==(a=t.message)?void 0:a.includes("ONLY_BASIC_SEO"))||(null==(s=t.error)?void 0:s.includes("ONLY_BASIC_SEO")))return me("ONLY_BASIC_SEO"),void he(!0);N("Failed to generate schema: "+(t.message||"Unknown error"))}},children:"Generate/Update Schema Data"}),n.jsx(S,{onClick:()=>{window.open(`/ai/schema-data.json?shop=${O}`,"_blank")},disabled:J.inProgress,children:"View Generated Schema"}),n.jsx(S,{tone:"critical",disabled:J.inProgress,onClick:async()=>{if(confirm("This will delete all advanced schema data. Are you sure?"))try{await $(`/api/schema/delete?shop=${O}`,{method:"DELETE",body:{shop:O}}),N("Schema data deleted successfully"),Z({inProgress:!1,status:"idle",message:null,position:null,estimatedTime:null,generatedAt:null,schemaCount:0})}catch(e){N("Failed to delete schema data")}},children:"Delete Schema Data"})]}),J.inProgress&&n.jsx(d,{paddingBlockStart:"200",children:n.jsxs(g,{gap:"200",blockAlign:"center",children:[n.jsx(h,{size:"small"}),n.jsxs(l,{gap:"100",children:[n.jsx(u,{variant:"bodyMd",tone:"subdued",children:J.message||"Generating Advanced Schema Data..."}),J.position>0&&n.jsxs(u,{variant:"bodySm",tone:"subdued",children:["Queue position: ",J.position," · Est. ",Math.ceil(J.estimatedTime/60)," min"]}),"processing"===J.status&&J.schemaCount>0&&n.jsxs(u,{variant:"bodySm",tone:"subdued",children:["Processing ",J.schemaCount," schemas..."]})]})]})}),!J.inProgress&&"completed"===J.status&&J.generatedAt&&n.jsx(d,{paddingBlockStart:"200",children:n.jsxs(g,{gap:"200",blockAlign:"center",children:[n.jsx(j,{tone:"success",children:"Generated"}),n.jsxs(u,{variant:"bodySm",tone:"subdued",children:[J.schemaCount," schemas · ",(()=>{const e=new Date,n=new Date(J.generatedAt),a=Math.floor((e-n)/1e3/60);if(a<1)return"Just now";if(a<60)return`${a} min ago`;const s=Math.floor(a/60);if(s<24)return`${s}h ago`;return`${Math.floor(s/24)}d ago`})()]})]})}),n.jsx(c,{children:n.jsx(d,{padding:"300",children:n.jsxs(l,{gap:"300",children:[n.jsxs(g,{align:"space-between",blockAlign:"center",children:[n.jsxs(l,{gap:"100",children:[n.jsx(u,{as:"h3",variant:"headingSm",children:"Rich Product Attributes"}),n.jsx(u,{variant:"bodyMd",tone:"subdued",children:"Select which AI-generated attributes to include in product schemas"})]}),n.jsx(S,{size:"slim",onClick:async()=>{Se(!0);try{const e=await $(`/api/ai-discovery/settings?shop=${O}`);await $(`/api/ai-discovery/settings?shop=${O}`,{method:"POST",body:{shop:O,bots:e.bots,features:e.features,richAttributes:pe}}),N("Rich attributes saved!")}catch(e){N("Failed to save attributes: "+(e.message||"Unknown error"))}finally{Se(!1)}},loading:je,children:"Save Attributes"})]}),n.jsx(x,{columns:2,gap:"400",children:[{key:"material",label:"Material",description:"Product material (cotton, leather, metal, etc.)"},{key:"color",label:"Color",description:"Product color information"},{key:"size",label:"Size",description:"Product size or dimensions"},{key:"weight",label:"Weight",description:"Product weight information"},{key:"dimensions",label:"Dimensions",description:"Product measurements"},{key:"category",label:"Category",description:"Product category classification"},{key:"audience",label:"Target Audience",description:"Intended user group (men, women, kids, etc.)"},{key:"reviews",label:"Review Schemas",description:"AI-generated product reviews for schema.org"},{key:"ratings",label:"Rating Schemas",description:"AI-generated ratings and aggregate ratings"},{key:"enhancedDescription",label:"Enhanced Descriptions",description:"AI-enhanced product descriptions"},{key:"organization",label:"Organization Schema",description:"Brand organization information"}].map(e=>n.jsx(y,{label:e.label,helpText:e.description,checked:pe[e.key]||!1,onChange:n=>{ge(a=>({...a,[e.key]:n}))}},e.key))})]})})})]})})})}),D&&n.jsx(v,{content:D,onDismiss:()=>N("")}),n.jsx(o,{open:H,onClose:()=>K(!1),feature:ee.feature,currentPlan:ee.currentPlan,requiredPlan:ee.requiredPlan,returnTo:"/ai-seo/schema-data"}),n.jsx(s,{open:ae,onClose:()=>se(!1),onActivatePlan:async()=>{try{const e=await $(`/api/billing/activate?shop=${O}`,{method:"POST",body:{shop:O,endTrial:!0,returnTo:window.location.pathname}});e.confirmationUrl?window.top.location.href=e.confirmationUrl:e.success&&(se(!1),N("Plan activated! You can now generate Advanced Schema Data."),setTimeout(()=>(async(e=!1)=>{X(!0);try{const a=w(R),s=["professional_plus","growth_plus","starter_plus"],t=["growth_extra","enterprise"].includes(a),i=s.includes(a),o=r("ai-schema-advanced",{productCount:G||0}).withMargin;if(!t&&!i)return ne({feature:"Advanced Schema Data",currentPlan:R,requiredPlan:"Professional Plus, Growth Plus, Growth Extra, or Enterprise",tokensRequired:o}),K(!0),void X(!1);if(i)try{const e=await $(`/api/billing/tokens/balance?shop=${O}`),n=(null==e?void 0:e.balance)||0;if(n<o)return de({feature:"ai-schema-advanced",tokensRequired:o,tokensAvailable:n,tokensNeeded:o-n}),ie(!0),void X(!1)}catch(n){}const c=await $(`/api/schema/generate-all?shop=${O}`,{method:"POST",body:{shop:O,forceBasicSeo:e}});c.queued?(N("Advanced Schema generation started..."),ye()):c.error&&("NO_OPTIMIZED_PRODUCTS"===c.error?(me("NO_OPTIMIZED_PRODUCTS"),he(!0)):"ONLY_BASIC_SEO"===c.error?(me("ONLY_BASIC_SEO"),he(!0)):N(`Error: ${c.error}`))}catch(a){402===a.status?a.trialRestriction&&a.requiresActivation?(de(a),se(!0)):a.requiresPurchase?(de(a),ie(!0)):N(a.message||"Payment required"):403===a.status?(ne({feature:"Advanced Schema Data",currentPlan:R,requiredPlan:"Professional Plus, Growth Plus, Growth Extra, or Enterprise"}),K(!0)):400===a.status?"NO_OPTIMIZED_PRODUCTS"===a.error?(me("NO_OPTIMIZED_PRODUCTS"),he(!0)):"ONLY_BASIC_SEO"===a.error?(me("ONLY_BASIC_SEO"),he(!0)):N(a.message||"Error generating schema"):N(`Error: ${a.message}`)}finally{X(!1)}})(),1e3))}catch(e){N("Failed to activate plan")}},onPurchaseTokens:()=>{se(!1),re(!0)},feature:"ai-schema-advanced",trialEndsAt:(null==U?void 0:U.trialEndsAt)||(null==ce?void 0:ce.trialEndsAt),currentPlan:R||(null==ce?void 0:ce.currentPlan)||"Enterprise",tokensRequired:(null==ce?void 0:ce.tokensRequired)||r("ai-schema-advanced",{productCount:G}).withMargin}),n.jsx(t,{open:te,onClose:()=>ie(!1),onBuyTokens:()=>{ie(!1),re(!0)},feature:"ai-schema-advanced",tokensRequired:(null==ce?void 0:ce.tokensRequired)||0,tokensAvailable:(null==ce?void 0:ce.tokensAvailable)||0,tokensNeeded:(null==ce?void 0:ce.tokensNeeded)||(null==ce?void 0:ce.tokensRequired)||0}),n.jsx(i,{open:oe,onClose:()=>re(!1),shop:O,tokensNeeded:(null==ce?void 0:ce.tokensNeeded)||0,returnTo:"/ai-seo/schema-data"}),le&&"NO_OPTIMIZED_PRODUCTS"===ue&&n.jsx(b,{open:!0,title:"No Optimized Products Found",onClose:async()=>{he(!1),me(null);try{await $(`/api/schema/dismiss-error?shop=${O}`,{method:"POST"})}catch(e){}},primaryAction:{content:"Go to Search Optimization",onAction:async()=>{he(!1),me(null);try{await $(`/api/schema/dismiss-error?shop=${O}`,{method:"POST"})}catch(a){}const e=new URLSearchParams(window.location.search),n=e.toString()?`?${e.toString()}`:"";window.location.href=`/ai-seo${n}`}},secondaryActions:[{content:"Cancel",onAction:async()=>{he(!1),me(null);try{await $(`/api/schema/dismiss-error?shop=${O}`,{method:"POST"})}catch(e){}}}],children:n.jsx(b.Section,{children:n.jsxs(l,{gap:"400",children:[n.jsx(m,{tone:"warning",children:n.jsx("p",{children:"No optimized products were found in your store."})}),n.jsx(u,{children:"Advanced Schema Data requires at least basic AISEO optimization on your products. Please run AISEO optimization first, then try generating schemas again."}),n.jsx(u,{variant:"bodyMd",fontWeight:"semibold",children:"You can choose:"}),n.jsxs(l,{gap:"200",children:[n.jsxs(u,{children:["• ",n.jsx("strong",{children:"Basic AISEO"})," - Free AISEO optimization"]}),n.jsxs(u,{children:["• ",n.jsx("strong",{children:"AI-Enhanced AISEO"})," - Advanced optimization (requires tokens)"]})]})]})})}),le&&"ONLY_BASIC_SEO"===ue&&n.jsx(b,{open:!0,title:"AI-Enhanced Optimization Recommended",onClose:async()=>{he(!1),me(null);try{await $(`/api/schema/dismiss-error?shop=${O}`,{method:"POST"})}catch(e){}},primaryAction:{content:"Generate AI-Enhanced Add-ons",onAction:async()=>{he(!1),me(null);try{await $(`/api/schema/dismiss-error?shop=${O}`,{method:"POST"})}catch(a){}const e=new URLSearchParams(window.location.search),n=e.toString()?`?${e.toString()}`:"";window.location.href=`/ai-seo${n}`}},secondaryActions:[{content:"Proceed with Basic AISEO",onAction:async()=>{he(!1),me(null);try{N("Starting schema generation with basic AISEO..."),await $(`/api/schema/generate-all?shop=${O}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({forceBasicSeo:!0})}),ye()}catch(e){N("Failed to generate schema: "+(e.message||"Unknown error"))}}}],children:n.jsx(b.Section,{children:n.jsxs(l,{gap:"400",children:[n.jsx(m,{tone:"info",children:n.jsx("p",{children:"Only basic AISEO optimization was found on your products."})}),n.jsx(u,{children:"For best results with Advanced Schema Data, we recommend running AI-Enhanced AISEO optimization first. This will provide richer product data for schema generation."}),n.jsx(u,{variant:"bodyMd",fontWeight:"semibold",children:"What would you like to do?"}),n.jsxs(l,{gap:"200",children:[n.jsxs(u,{children:["• ",n.jsx("strong",{children:"Generate AI-Enhanced Add-ons"})," - Get the best results (requires tokens)"]}),n.jsxs(u,{children:["• ",n.jsx("strong",{children:"Proceed with Basic AISEO"})," - Continue with current basic AISEO"]})]})]})})})]})}export{A as default};
